function jasonCommon(){this.HTMLCanvas=null,this._benchmark=!1,this._jwWidgetsCatalog=[],this.globalEventListeners=[];var e=this;this._registerWidget=function(t){e._jwWidgetsCatalog.push({uid:t._uid,widget:t})},jasonCommon.prototype.extendObject=function(e,t){t||(t={});for(var n in e)void 0!=t[n]&&null!=t[n]||(t[n]=e[n]),t[n]&&"object"==typeof t[n]&&"object"==typeof e[n]&&this.extendObject(e[n],t[n])},jasonCommon.prototype.formatString=function(e,t){for(var n=0;n<t.length;n++){var o=new RegExp("\\{"+n+"\\}","gi");e=e.replace(o,t[n])}return e},jasonCommon.prototype.charCountInString=function(e,t){return t.split(e).length-1},jasonCommon.prototype.formatDateTime=function(e,t){var n="";try{if(Intl.DateTimeFormat&&"object"==typeof t)return n=new Intl.DateTimeFormat(jw.localizationManager.currentCulture.key,t),n.format(e)}catch(o){console.log(o)}t||(t=jasonWidgets.localizationManager.currentCulture.dateFormat);var i=e.getFullYear(),s=e.getMonth()+1,a=e.getDay(),r=e.getDate(),l=e.getHours(),d=e.getMinutes(),u=e.getSeconds(),h=e.getMilliseconds(),c=["d","M","m","y","H","h","s","m","f","t"],p=function(e){return c.indexOf(e)>=0};if(e){var m=null,g=null;t.indexOf(jasonWidgets.localizationManager.postMeridiemString)>=0&&t.replace(jasonWidgets.localizationManager.postMeridiemString,""),t.indexOf(jasonWidgets.localizationManager.anteMeridiemString)>=0&&t.replace(jasonWidgets.localizationManager.anteMeridiemString,"");for(var _=0;_<=t.length-1;_++){var E=t[_],w=0;switch(E){case"y":for(w=0,g=_,m=E;p(m);)g++,w++,m=t[g];_=g-1,n=w>2?n+i:i.toString().substr(2,2);break;case"d":for(w=0,g=_,m=E;p(m);)g++,w++,m=t[g];switch(_=g-1,w){case 1:n+=r;break;case 2:n=r>9?n+r:n+"0"+r;break;case 3:n+=jasonWidgets.localizationManager.currentLanguage.calendar.days[a].shortname;break;case 4:n+=jasonWidgets.localizationManager.currentLanguage.calendar.days[a].name}break;case"M":for(w=0,g=_,m=E;p(m);)g++,w++,m=t[g];switch(_=g-1,w){case 1:n+=s;break;case 2:n=s>9?n+s:n+"0"+s;break;case 3:n+=jasonWidgets.localizationManager.currentLanguage.calendar.months[s-1].shortname;break;case 4:n+=jasonWidgets.localizationManager.currentLanguage.calendar.months[s-1].name}break;case"h":for(w=0,g=_,m=E;p(m);)g++,w++,m=t[g];switch(_=g-1,w){case 1:n+=l-12;break;case 2:jasonWidgets.localizationManager.isTwelveHourClock?((l>12||0==l)&&(l=Math.abs(l-12)),n=l>9?n+l:n+"0"+l):n=l>9?n+l:n+"0"+l}break;case"H":for(w=0,g=_,m=E;p(m);)g++,w++,m=t[g];switch(_=g-1,w){case 1:n+=l;break;case 2:n=l>9?n+l:n+"0"+l}break;case"m":for(w=0,g=_,m=E;p(m);)g++,w++,m=t[g];switch(_=g-1,w){case 1:n+=d;break;case 2:n=d>9?n+d:n+"0"+d}break;case"s":for(w=0,g=_,m=E;p(m);)g++,w++,m=t[g];switch(_=g-1,w){case 1:n+=u;break;case 2:n=u>9?n+u:n+"0"+u}break;case"f":for(w=0,g=_,m=E;p(m);)g++,w++,m=t[g];switch(_=g-1,w){case 1:n+=h;break;case 2:n=h>9?h<99?n+"00"+h:n+h:n+"0"+h}break;case"t":break;default:n+=E}}}return t.indexOf("h")>=0&&jasonWidgets.localizationManager.isTwelveHourClock&&(n=e.getHours()>=12?n+" "+jasonWidgets.localizationManager.postMeridiemString:n+" "+jasonWidgets.localizationManager.anteMeridiemString),n},jasonCommon.prototype.formatNumber=function(e,t){var n="",o={useGrouping:!0,minimumFractionDigits:2};return void 0==e?n:(t=void 0==t?{}:t,jasonWidgets.common.extendObject(o,t),Intl.NumberFormat?(t.style&&"currency"==t.style.toLowerCase()&&(t.style="currency",t.currency=jw.localizationManager.currentCulture.currencyCode),numberFormat=new Intl.NumberFormat(jw.localizationManager.currentCulture.key,t),n=numberFormat.format(e),numberFormat=null):t.minimumFractionDigits?n+=e.toFixed(t.minimumFractionDigits?t.minimumFractionDigits:0):n=e.toString(),n)},jasonCommon.prototype.getParentElement=function(e,t){var n=t.parentNode;e=e.toUpperCase();for(var o=!1;!o&&jasonWidgets.common.assigned(n)&&n!=document;)o=n.getAttribute("id")==e||n.classList.contains(e)||n.tagName==e,o||(n=n.parentNode);return n},jasonCommon.prototype.containsClasses=function(e,t){for(var n=!1,o=0;o<=t.length-1&&!(n=e.classList.contains(t[o]));o++);return n},jasonCommon.prototype.scrollBarWidth=function(){var e=document.createElement("div");e.style.width="50px",e.style.height="50px",e.style.overflowY="scroll",e.style.position="absolute",e.style.top="-200px";var t=document.createElement("div");t.style.height="100%",t.style.width="100%",e.appendChild(t),document.body.appendChild(e);var n=e.offsetWidth,o=t.clientWidth;return document.body.removeChild(e),n-o},jasonCommon.prototype.setData=function(e,t,n){e&&(e.jasonWidgetsData||(e.jasonWidgetsData=[]),e.jasonWidgetsData.push({dataName:t,dataValue:n}))},jasonCommon.prototype.removeData=function(e,t){if(e.jasonWidgetsData){var n=-1;e.jasonWidgetsData.filter(function(e,o){if(e.dataName==t)return void(n=o)}),n>=0&&e.jasonWidgetsData.splice(n,1)}},jasonCommon.prototype.getData=function(e,t){if(e.jasonWidgetsData){var n=e.jasonWidgetsData.filter(function(e){return e.dataName==t})[0];return n?n.dataValue:null}return null},jasonCommon.prototype.swapItemsInArray=function(e,t,n){var o=e[t],i=e[n];o&&i&&(e[t]=i,e[n]=o)},jasonCommon.prototype.moveItemsInArray=function(e,t,n){e.splice(n,0,e.splice(t,1)[0])},jasonCommon.prototype.moveDomElements=function(e,t,n){for(var o=Array.prototype.slice.call(e.children);e.firstChild;)e.removeChild(e.firstChild);jw.common.moveItemsInArray(o,t,n),o.forEach(function(t,n){e.appendChild(t)})},jasonCommon.prototype.swapDomElements=function(e,t,n){if(void 0!=e&&void 0!=t&&void 0!=n){domElementToMove=e.children[t],domElementNew=e.children[n];var o=domElementToMove.nextSibling,i=domElementNew.nextSibling;e.insertBefore(domElementToMove,i),e.insertBefore(domElementNew,o)}},jasonCommon.prototype.moveChildrenTo=function(e,t,n,o,i){var s=[];n=n?n:[],o=o?o:[],i=i?i:[];for(var a=function(e,t,n){return t.length>0&&n.length>0?t.indexOf(e.tagName)>=0||n.indexOf(e.className)>=0:t.length>0&&n.length<=0?t.indexOf(e.tagName)>=0:t.length<=0&&n.length>0&&n.indexOf(e.className)>=0},r=e.children.length-1;r>=0;r--)0==o.length&&0==n.length?s.push(e.removeChild(e.children[r])):(n.length>0&&n.indexOf(e.children[r].tagName)>=0&&s.push(e.removeChild(e.children[r])),a(e.children[r],o,i)||s.push(e.removeChild(e.children[r])));for(var r=s.length-1;r>=0;r--)t.appendChild(s[r])},jasonCommon.prototype.applyStyleProperty=function(e,t,n,o,i){for(var s=0;s<=e.children.length-1;s++){var a=e.children[s];o?(a.getAttribute("id")==o||a.classList.contains(o)||a.tagName==o)&&(a.style[t]=n):a.style[t]=n,1==i&&this.applyStyleProperty(a,t,n,o,i)}},jasonCommon.prototype.cssClass=function(e,t,n,o,i){for(var s=0;s<=e.children.length-1;s++){var a=e.children[s];o?(a.getAttribute("id")==o||a.classList.contains(o)||a.tagName==o)&&(n?a.classList.add(t):a.classList.remove(t)):n?a.classList.add(t):a.classList.remove(t),1==i&&this.applyStyleProperty(a,t,n,o,i)}},jasonCommon.prototype.fadeIn=function(e,t,n){if(!e._jasonWidgetsFadeOut){e._jasonWidgetsFadeOut=!0;var o=0;e.style.opacity="0";var i=setInterval(function(){e.style.opacity=o,o>=1?(e.style.opacity="",clearInterval(i),e._jasonWidgetsFadeOut=void 0,n&&n()):o+=.1},t)}},jasonCommon.prototype.fadeOut=function(e,t,n){if(!e._jasonWidgetsFadeOut){e._jasonWidgetsFadeOut=!0;var o=1;e.style.opacity="1";var i=setInterval(function(){e.style.opacity=o,o<=0?(e.style.opacity="",clearInterval(i),e._jasonWidgetsFadeOut=void 0,n&&n()):o-=.1},t)}},jasonCommon.prototype.isInlineElement=function(e){var t=this.inlineElements.indexOf(e.tagName);return t>=0},jasonCommon.prototype.isBlockElement=function(e){var t=this.blockElements.indexOf(e.tagName);return t>=0},jasonCommon.prototype.isNumberInRange=function(e,t,n){return e>=t&&e<=n},jasonCommon.prototype.getOffsetCoordinates=function(e){for(var t={left:0,top:0,scrollTop:0,scrollLeft:0},n=e;n;)t.left+=n.offsetLeft,t.scrollLeft+=n.scrollLeft,t.top+=n.offsetTop,t.scrollTop+=n.scrollTop,n=n.offsetParent;return t},jasonCommon.prototype.getElementScrolling=function(e){for(var t={top:0,left:0},n=e;n;)t.left+=n.scrollLeft,t.top+=n.scrollTop,n=n.parentElement;return t},jasonCommon.prototype.getBoundingClientRect=function(e){var t=e.getBoundingClientRect(),n={left:0,right:0,bottom:0,height:0,top:0,width:0,offSet:null,clientRect:null,scrolling:null},o=window.pageYOffset||document.scrollTop||document.body.scrollTop,i=window.pageXOffset||document.scrollLeft||document.body.scrollLeft,s=document.clientTop||document.body.clientTop||0,a=document.clientLeft||document.body.clientLeft||0,r=t.top+o-s,l=t.left+i-a;return n.top=Math.round(r),n.left=Math.round(l),n.right=t.right,n.height=t.height,n.width=t.width,n.clientRect=t,n.scrolling=jw.common.getElementScrolling(e),n},jasonCommon.prototype.getTextWidth=function(e,t){var n=this.HTMLCanvas||(this.HTMLCanvas=document.createElement("canvas")),o=n.getContext("2d");o.font=t;var i=o.measureText(e);return i.width},jasonCommon.prototype.getComputedStyleProperty=function(e,t){return window.getComputedStyle(e,null).getPropertyValue(t)},jasonCommon.prototype.replaceNodeText=function(e,t,n){for(var o=null,i=0;i<=e.childNodes.length-1;i++)if(3==e.childNodes[i].nodeType){o=e.childNodes[i];break}o?e.replaceChild(document.createTextNode(t),o):n&&e.appendChild(document.createTextNode(t))},jasonCommon.prototype.removeNodeText=function(e){for(var t=[],n=0;n<=e.childNodes.length-1;n++)3==e.childNodes[n].nodeType&&t.push(e.childNodes[n]);t.forEach(function(t){e.removeChild(t)})},jasonCommon.prototype.getNodeText=function(e){for(var t=null,n=0;n<=e.childNodes.length-1;n++)if(3==e.childNodes[n].nodeType){t=e.childNodes[n];break}return t},jasonCommon.prototype.getElementsByAttribute=function(e,t,n,o){var i=e?e:document,s=void 0===o?"*[{0}='{1}']":o+"[{0}='{1}']";return i.querySelectorAll(jw.common.formatString(s,[t,n]))},jasonCommon.prototype.getElementsByAttributes=function(e,t,n,o){for(var i="",s=0;s<=t.length-1;s++)i+=jw.common.formatString("[{0}='{1}']",[t[s],n[s]]);return i=void 0==o?"*"+i:o+i,e.querySelectorAll(i)},jasonCommon.prototype.getNextTabIndex=function(){for(var e=document.querySelectorAll("*[tabindex]"),t=0,n=0;n<=e.length-1;n++){var o=e[n].getAttribute("tabindex");o&&(o=parseInt(o),o>t&&(t=o))}return t+1},jasonCommon.prototype.getNextAttributeValue=function(e){for(var t=document.querySelectorAll("*["+e+"]"),n=0,o=0;o<=t.length-1;o++){var i=t[o].getAttribute(e);i&&(i=parseInt(i),i>n&&(n=i))}return n+1},jasonCommon.prototype.getNextZIndex=function(){for(var e=Number.MIN_VALUE,t=document.getElementsByTagName("*"),n=0;n<=t.length-1;n++){var o;o=t[n].style.zIndex.length>0?parseInt(t[n].style.zIndex):parseInt(jw.common.getComputedStyleProperty(t[n],"z-index")),!isNaN(o)&&o>e&&(e=o)}return e+1},jasonCommon.prototype.contains=function(e,t){var n=[].slice.call(e.getElementsByTagName(t.tagName));return 1==n.filter(function(e){return e==t}).length},jasonCommon.prototype.getFocusableElements=function(e){return e=void 0==e?document:e,e.querySelectorAll(jw.common.focusableElements)},jasonCommon.prototype.getFirstFocusableElement=function(e,t){if(e=void 0==e?document:e,jw.common.focusableElements.indexOf(e.tagName)>=0||e.getAttribute(jw.DOM.attributes.TABINDEX_ATTR))return e;var n=null,o=function(e){if(!n)for(var i=0;i<=e.children.length-1;i++){if(jw.common.focusableElements.indexOf(e.children[i].tagName)>=0||e.children[i].getAttribute(jw.DOM.attributes.TABINDEX_ATTR)){n=e.children[i],t&&n.focus();break}e.children[i].children.length>0&&o(e.children[i])}};return o(e),n},jasonCommon.prototype.assigned=function(e){return!(void 0==e)},jasonCommon.prototype.strToBool=function(e){return!(!e||"true"!=e.toLowerCase()&&"yes"!=e.toLowerCase())},jasonCommon.prototype.boolToStr=function(e){return e?"true":"false"},jasonCommon.prototype.convertValue=function(e,t){if("string"==typeof e)switch(t){case jw.enums.dataType.number:return parseFloat(e);case jw.enums.dataType["boolean"]:return jasonWidgets.common.strToBool(e);case jw.enums.dataType.date:return new Date(e);case jw.enums.dataType.string:return e}if("number"==typeof e)switch(t){case jw.enums.dataType.string:return e.toString();case jw.enums.dataType["boolean"]:return 0!=e;case jw.enums.dataType.date:var n=new Date;n.setTime(e)}if("date"==typeof e)switch(t){case jw.enums.dataType.string:return e.toString();case jw.enums.dataType["boolean"]:jw.common.throwError(jw.errorTypes.error,"Cannot convert a date to a boolean value");break;case jw.enums.dataType.number:return e.getTime()}if("boolean"==typeof e)switch(t){case jw.enums.dataType.string:return jasonWidgets.common.boolToStr(e);case jw.enums.dataType.date:jw.common.throwError(jw.errorTypes.error,"Cannot convert a boolean to a date value");break;case jw.enums.dataType.number:return e?1:0}return e},jasonCommon.prototype.dateOf=function(e){var t=null;return e=e?e:new Date,e&&(t=new Date,t.setHours(0,0,0,0),t.setYear(e.getFullYear()),t.setMonth(e.getMonth()),t.setDate(e.getDate())),t},jasonCommon.prototype.timeOf=function(e){var t=null;return e=e?e:new Date,e&&(t=new Date,t.setHours(e.getHours()),t.setMinutes(e.getMinutes()),t.setSeconds(e.getSeconds()),t.setMilliseconds(e.getMilliseconds())),t},jasonCommon.prototype.dateComparison=function(e,t){var n=jw.enums.comparison.equal;if(void 0==e&&void 0!=t||void 0==t&&void 0!=e)return jw.enums.comparison.notEqual;var o=jasonWidgets.common.dateOf(e).getTime(),i=jasonWidgets.common.dateOf(t).getTime();return o>i&&(n=jw.enums.comparison.firstIsGreater),o<i&&(n=jw.enums.comparison.secondIsGreater),n},jasonCommon.prototype.timeComparison=function(e,t){var n=jw.enums.comparison.equal,o=jasonWidgets.common.timeOf(e).getTime(),i=jasonWidgets.common.timeOf(t).getTime();return o>i&&(n=jw.enums.comparison.firstIsGreater),o<i&&(n=jw.enums.comparison.secondIsGreater),n},jasonCommon.prototype.stringComparison=function(e,t,n){return void 0==e&&void 0==t?jw.enums.comparison.equal:void 0==e&&void 0!=t?jw.enums.comparison.notEqual:void 0==t&&void 0!=e?jw.enums.comparison.notEqual:n?e==t:e.toLocaleLowerCase()==t.toLocaleLowerCase()?jw.enums.comparison.equal:jw.enums.comparison.notEqual},jasonCommon.prototype.simpleObjectComparison=function(e,t){var n=jw.enums.comparison.equal;if(e===t)return jw.enums.comparison.equal;if(void 0==e&&void 0!=t)return jw.enums.comparison.notEqual;if(void 0==t&&void 0!=e)return jw.enums.comparison.notEqual;for(var o in e)if(e[o]!==t[o]){n=jw.enums.comparison.notEqual;break}return n},jasonCommon.prototype.daysInMonth=function(e,t){return new Date(e,t,0).getDate()},jasonCommon.prototype.daysInYear=function(e){return e%4!==0||e%100===0&&e%400!==0?365:366},jasonCommon.prototype.parseDateValue=function(e,t){var t=t?t:jw.localizationManager.localeDateFormat,n=e.match(/\D\W/g),o=null,i=new Date;if(n)o=new Date(e),e.indexOf(i.getFullYear())<0&&o.setYear(i.getFullYear()),o=jasonWidgets.common.dateOf(o);else{for(var s=e.match(/[^0-9]/g),a=s?e.split(s[0]):[e],r=s?t.split(s[0]):t.split(jw.localizationManager.localeDateSeparator),l=null,d=null,u=null,h=0;h<=r.length-1;h++){var c=a[h];c&&(c=parseInt(c)),r[h].indexOf("y")>=0&&(u=c),r[h].indexOf("M")>=0&&c<=12&&(d=c),r[h].indexOf("d")>=0&&c<=31&&(l=c)}u||(u=i.getFullYear()),l||(l=i.getDate()),d||(d=i.getMonth()+1),l&&d&&u&&(o=new Date,o.setHours(0),o.setMinutes(0),o.setSeconds(0),o.setMilliseconds(0),o.setDate(l),o.setMonth(d-1),o.setYear(u),o=jasonWidgets.common.dateOf(o))}return o},jasonCommon.prototype.parseTimeValue=function(e,t){var t=t?t:jw.localizationManager.localeTimeFormat,n=!1,o=!1;jw.localizationManager.isTwelveHourClock&&(n=e.indexOf(jw.localizationManager.anteMeridiemString)>=0,o=e.indexOf(jw.localizationManager.postMeridiemString)>=0,e=n?e.replace(jw.localizationManager.anteMeridiemString,""):e.replace(jw.localizationManager.postMeridiemString,""));for(var i=e.match(/[^0-9]/g),s=i?i[0]:jw.localizationManager.localeTimeSeparator,a=e.split(s),r=t.split(s),l=null,d=null,u=null,h=null,c=0;c<=r.length-1;c++)(r[c].indexOf("h")>=0||r[c].indexOf("H")>=0)&&(l=parseInt(a[c]),jw.localizationManager.isTwelveHourClock&&n&&(l=l>12?l-12:l),jw.localizationManager.isTwelveHourClock&&o&&(l=l>12?l:l+12)),r[c].indexOf("m")>=0&&(d=parseInt(a[c])),r[c].indexOf("s")>=0&&(u=parseInt(a[c]));return(!u||isNaN(u)||u>60)&&(u=0),(!d||isNaN(d)||d>60)&&(d=0),l>=24&&(l=0),null!=l&&null!=d&&null!=u&&(h=new Date,h.setHours(l),h.setMinutes(d),h.setSeconds(u),h.setMilliseconds(0),h=h),h},jasonCommon.prototype.parseDateTimeValue=function(e,t,n){var o=null,i=null,n=n?n:jw.localizationManager.localeTimeFormat,t=t?t:jw.localizationManager.localeDateFormat,s=t.match(/[^a-z]/gi),a=new RegExp(jw.common.formatString("\\d+[{0}+]\\d+[{0}+]\\d+",s[0]),"gi"),r=new RegExp(jw.common.formatString("\\d+[{0}+]\\d+",s[0]),"gi"),l=e.match(a);l||(l=e.match(r)),l&&(o=jw.common.parseDateValue(l[0]));var d=n.match(/[^a-z]/gi),u=new RegExp(jw.common.formatString("\\d*[{0}]\\d*[{0}]\\d*",d[0]),"gi"),h=new RegExp(jw.common.formatString("\\d*[{0}]\\d*",d[0]),"gi"),c=e.match(u);if(c||(c=e.match(h)),c&&(e.indexOf(jw.localizationManager.anteMeridiemString)>=0?c[0]=c[0]+" "+jw.localizationManager.anteMeridiemString:e.indexOf(jw.localizationManager.postMeridiemString)>=0&&(c[0]=c[0]+" "+jw.localizationManager.postMeridiemString),i=jw.common.parseTimeValue(c[0])),!l){var p=c?e.replace(c[0],""):e,m=p.match(/\w+/gi);if(m){var g=null,_=null,E=null,w=jw.localizationManager.currentLanguage;m.forEach(function(e){var t,n=w.calendar.days.filter(function(n,o){var i=n.name.toLowerCase()==e.toLowerCase()||n.shortName.toLowerCase()==e.toLowerCase();return i&&(t=o),i}).length>0,o=w.calendar.months.filter(function(n,o){var i=n.name.toLowerCase()==e.toLowerCase()||n.shortName.toLowerCase()==e.toLowerCase();return i&&(t=o),i}).length>0;n&&(E=t,p=p.replace(e,"")),o&&(_=t,p=p.replace(e,""));var i=parseInt(e);isNaN(i)||i>31&&(g=i,p=p.replace(e,""))})}if(void 0==E){var f=parseInt(p);isNaN(f)||(E=f)}(g||_||E)&&(o=new Date,void 0!=g&&o.setYear(g),void 0!=_&&o.setMonth(_),void 0!=E&&o.setDate(E))}if(o||i)return o||(o=new Date),i||(i=new Date),new Date(o.getFullYear(),o.getMonth(),o.getDate(),i.getHours(),i.getMinutes(),i.getSeconds());try{return new Date(e)}catch(T){}},jasonCommon.prototype.objectHasProperty=function(e,t){var n=!1;for(var o in e)if(o===t){n=!0;break}return n},jasonCommon.prototype.isMouseEventOutOfContainer=function(e,t){var n=e.getBoundingClientRect(),o=t.x||t.pageX,i=t.y||t.pageY,s=o>n.right||o<n.left,a=i>n.bottom||i<n.top;return s||a},jasonCommon.prototype.isMouseEventOutOfContainerAndNotAChild=function(e,t){var n=jw.common.isMouseEventOutOfContainer(e,t);return n&&!jw.common.contains(e,t.target)},jasonCommon.prototype.isTimeString=function(e,t){var n=t?t:jw.localizationManager.localeTimeFormat,o=n.match(/[^a-z]/gi)?n.match(/[^a-z]/gi)[0]:null,i=e.match(/[0-9]/g);return e.indexOf(o)>0||void 0!=i&&i.length==e.length},jasonCommon.prototype.isDateString=function(e,t){var n=!0,o=t?t:jw.localizationManager.localeDateFormat,i=o.match(/[^a-z]/gi)?o.match(/[^a-z]/gi)[0]:null,s=e.match(/[0-9]/g),a=e.match(/[a-z]\w+/gi);if(a)for(var r=jw.localizationManager.currentLanguage,l=0;l<=a.length-1;l++){var d=a[l],u=r.calendar.days.filter(function(e){return e.name.toLowerCase()==d.toLowerCase()||e.shortName.toLowerCase()==d.toLowerCase()}).length>0,h=r.calendar.months.filter(function(e){return e.name.toLowerCase()==d.toLowerCase()||e.shortName.toLowerCase()==d.toLowerCase()}).length>0;if(!u&&!h){n=!1;break}}return n&&e.indexOf(i)>0||void 0!=s&&s.length==e.length},jasonCommon.prototype.removeJWEvents=function(e,t){var n=e._jasonWidgetsEventListeners_;if(n){for(var o=n.length-1;o>=0;o--)e.removeEventListener(n[o].eventName,n[o].listener),n.splice(o,1);if(t&&e.children.length>0)for(var o=0;o<=e.children.length-1;o++)jw.common.removeJWEvents(e.children[o],t)}else if(e.children)for(var o=0;o<=e.children.length-1;o++)jw.common.removeJWEvents(e.children[o],t)},jasonCommon.prototype.removeChildren=function(e){for(;e.firstChild;)jw.common.removeJWEvents(e.firstChild),jw.common.removeChildren(e.firstChild),e.removeChild(e.firstChild)},jasonCommon.prototype.addGlobalEventListener=function(e){this.globalEventListeners.push(e)},jasonCommon.prototype.getVariableType=function(e){var t=jw.enums.dataType.unknown;if(void 0==e)return t;if("object"==typeof e){t=jw.enums.dataType.object;var n=e.constructor?e.constructor.toString():"";n.indexOf("Date()")>0&&n.indexOf("native code")>0&&(t=jw.enums.dataType.date),Array.isArray(e)&&(t=jw.enums.dataType.array)}else"number"==typeof e&&(t=jw.enums.dataType.number),"boolean"==typeof e&&(t=jw.enums.dataType["boolean"]),"function"==typeof e&&(t=jw.enums.dataType.method),"string"==typeof e&&(t=jw.enums.dataType.string);return t},jasonCommon.prototype.isInteger=function(e){return"number"==typeof e&&isFinite(e)&&Math.floor(e)===e},jasonCommon.prototype.triggerGlobalEvent=function(e,t){for(var n=0;n<=this.globalEventListeners.length-1;n++)this.globalEventListeners[n](e,t)},jasonCommon.prototype.isJWWidget=function(e){return this._jwWidgetsCatalog.filter(function(t){return t.uid===e._uid}).length>0},jasonCommon.prototype.generateUUID=function(){var e=(new Date).getTime(),t="xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(t){var n=(e+16*Math.random())%16|0;return e=Math.floor(e/16),("x"==t?n:3&n|8).toString(16)});return t},jasonCommon.prototype.inlineElements=["BUTTON","SPAN","INPUT","LABEL","SELECT","A","I"],jasonCommon.prototype.blockElements=["DIV","P","JW_TABLE","THEAD","TFOOT","TBODY","HR","UL","OL","FIELDSET","NAV","H1","H2","H3","H4","H5","H6"],jasonCommon.prototype.focusableElements=["BUTTON","INPUT","A","SELECT","TEXTAREA"],jasonCommon.prototype.throwError=function(e,t){switch(e){case jw.errorTypes.error:throw new Error(t);case jw.errorTypes.evalError:throw new EvalError(t);case jw.errorTypes.rangeError:throw new RangeError(t);case jw.errorTypes.referenceError:throw new ReferenceError(t);case jw.errorTypes.syntaxError:throw new SyntaxError(t);case jw.errorTypes.typeError:throw new TypeError(t);case jw.errorTypes.uriError:throw new URIError(t);default:throw new Error(t)}},jasonCommon.prototype.applyTemplate=function(e,t,n,o){if(e.innerHTML=t,void 0!=n&&void 0!=o)for(var i=e.querySelectorAll("*["+n+"]"),s=0;s<=i.length-1;s++){var a=i[s];jw.common.replaceNodeText(a,o[a.getAttribute(n)],!0)}},jasonCommon.prototype.parseTemplateContent=function(e){var t=null,n=document.getElementById(e),o=null!=n||e instanceof HTMLElement;if(o){var i=n||e;t="SCRIPT"==i.tagName?i.innerHTML:i.outerHTML}else t="function"==typeof e?e():e,t="string"==typeof e&&e.trim().length>0?e:null;return t}}function jasonHTMLFactory(){jasonHTMLFactory.prototype.createJWButton=function(e,t,n){var o=n?n:document.createElement("a");if(o.classList.add(jw.DOM.classes.JW_BUTTON),o.setAttribute("href","javascript:void(0)"),void 0!=e&&e.trim().length>0){var i=document.createElement("span");i.classList.add(jw.DOM.classes.JW_LABEL),i.classList.add(jw.DOM.classes.JW_TEXT_OVERFLOW),i.appendChild(document.createTextNode(e)),i.setAttribute(jasonWidgets.DOM.attributes.TITLE_ATTR,e),o.appendChild(i)}if(void 0!=t&&t.trim().length>0){var s=o.querySelectorAll("span.jw-icon")[0];if(s)s.className=t;else{var a=document.createElement("span");a.className=t,o.appendChild(a)}}return o},jasonHTMLFactory.prototype.createJWTextInput=function(e,t,n,o){var i=document.createElement("input");return i.classList.add(jw.DOM.classes.JW_TEXT_INPUT),i.setAttribute(jasonWidgets.DOM.attributes.TYPE_ATTR,"text"),void 0!=o&&o.trim().length>0&&i.setAttribute(jasonWidgets.DOM.attributes.TYPE_ATTR,o),void 0!=e&&e.trim().length>0&&i.setAttribute(jasonWidgets.DOM.attributes.INPUT_MODE_ATTR,e),void 0!=t&&t.trim().length>0&&i.setAttribute(jasonWidgets.DOM.attributes.PLACEHOLDER_ATTR,t),void 0!=n&&n&&i.setAttribute(jasonWidgets.DOM.attributes.READONLY_ATTR,n),i},jasonHTMLFactory.prototype.createJWCheckBoxInput=function(e,t,n){var o=document.createElement("input");return o.classList.add(jw.DOM.classes.JW_CHECKBOX_INPUT),o.setAttribute(jasonWidgets.DOM.attributes.TYPE_ATTR,"checkbox"),void 0!=e&&e&&o.setAttribute(jasonWidgets.DOM.attributes.READONLY_ATTR,e),void 0!=t&&t.trim().length>0&&o.setAttribute(jasonWidgets.DOM.attributes.TITLE_ATTR,t),void 0!=n&&n.trim().length>0&&o.setAttribute(jasonWidgets.DOM.attributes.ID_ATTR,n),o},jasonHTMLFactory.prototype.createJWLinkLabel=function(e){var t=document.createElement("a");if(t.setAttribute("href","javascript:void(0)"),t.classList.add(jw.DOM.classes.JW_LABEL),t.classList.add(jw.DOM.classes.JW_TEXT_OVERFLOW),void 0!=e&&e.trim().length>0){var n=document.createElement("span");n.appendChild(document.createTextNode(e)),n.setAttribute(jw.DOM.attributes.TITLE_ATTR,e),t.appendChild(n)}return t},jasonHTMLFactory.prototype.createJWLabel=function(e){var t=document.createElement("label");return t.classList.add(jw.DOM.classes.JW_TEXT_OVERFLOW),void 0!=e&&e.trim().length>0&&(t.setAttribute(jw.DOM.attributes.TITLE_ATTR,e),t.appendChild(document.createTextNode(e))),t},jasonHTMLFactory.prototype.createJWMenuItem=function(e,t,n){var o,i=void 0==n?document.createElement("li"):n;if(i.classList.add(jw.DOM.classes.JW_MENU_ITEM),t.clickable&&i.classList.add(jw.DOM.classes.JW_MENU_ITEM_CLICKABLE),t.enabled||i.classList.add(jw.DOM.classes.JW_MENU_ITEM_DISABLED),i.setAttribute(jasonWidgets.DOM.attributes.TITLE_ATTR,t.title),void 0!=t.caption&&t.caption.trim().length>0&&(o=document.createElement("div"),o.classList.add(jw.DOM.classes.JW_MENU_ITEM_CAPTION),o.appendChild(jw.htmlFactory.createJWLinkLabel(t.caption)),o.classList.add(jw.DOM.classes.JW_TEXT_OVERFLOW),o.classList.add(jw.DOM.classes.JW_MENU_ITEM_CAPTION_ONLY),i.appendChild(o)),void 0!=t.icon&&t.icon.trim().length>0){var s=document.createElement("div"),a=document.createElement("span");a.className=t.icon,s.classList.add(jw.DOM.classes.JW_MENU_ITEM_ICON),s.appendChild(a),o.classList.add(jw.DOM.classes.JW_HAS_ICON),o.classList.remove(jw.DOM.classes.JW_MENU_ITEM_CAPTION_ONLY),i.appendChild(s)}if(void 0!=t.hasCheckBox&&t.hasCheckBox){var r=document.createElement("div"),l=document.createElement("input");l.setAttribute(jasonWidgets.DOM.attributes.TYPE_ATTR,"checkbox"),l.checked=t.checked,r.appendChild(l),r.classList.add(jw.DOM.classes.JW_MENU_ITEM_CHECKBOX),o.classList.add(jw.DOM.classes.JW_HAS_CHECKBOX),o.classList.remove(jw.DOM.classes.JW_MENU_ITEM_CAPTION_ONLY),i.appendChild(r)}if(void 0!=t.caption&&t.caption.trim().length>0&&i.appendChild(o),void 0!=t.items&&t.items.length>0){var d=document.createElement("div"),u=null,h=null;h=0==t.level?"horizontal"==e?jw.DOM.icons.CHEVRON_DOWN:jw.DOM.icons.CHEVRON_RIGHT:"horizontal"==e?jw.DOM.icons.CHEVRON_RIGHT:jw.DOM.icons.JCHEVRON_DOWN,u=jw.htmlFactory.createJWButton(null,h),jw.common.setData(u,jw.DOM.attributeValues.JW_MENU_ITEM_DATA_KEY,t),o.classList.add(jw.DOM.classes.JW_HAS_ARROW),d.appendChild(u),d.classList.add(jw.DOM.classes.JW_MENU_ITEM_ARROW),o.classList.remove(jw.DOM.classes.JW_MENU_ITEM_CAPTION_ONLY),i.appendChild(d)}return i},jasonHTMLFactory.prototype.convertToJWMenuItem=function(e,t,n){if(void 0!=t){t.classList.add(jw.DOM.classes.JW_MENU_ITEM),t.classList.add(jw.DOM.classes.JW_MENU_ITEM_CLICKABLE);var o=jw.common.getNodeText(t);void 0!=o&&(menuCaption=document.createElement("div"),menuCaption.classList.add(jw.DOM.classes.JW_MENU_ITEM_CAPTION),menuCaption.appendChild(jw.htmlFactory.createJWLinkLabel(o.textContent.trim())),menuCaption.classList.add(jw.DOM.classes.JW_TEXT_OVERFLOW),menuCaption.classList.add(jw.DOM.classes.JW_MENU_ITEM_CAPTION_ONLY),t.replaceChild(menuCaption,o),n.caption=o.textContent.trim(),n.name="mnu_"+n.caption);var i=t.getAttribute(jasonWidgets.DOM.attributes.READONLY_ATTR);void 0!=i&&1==i&&t.classList.add(jw.DOM.classes.JW_MENU_ITEM_DISABLED);var s=t.getElementsByTagName("input");if(s.length>0){for(var a=null,r=0;r<=s.length-1;r++){var l=s[r].getAttribute(jw.DOM.attributes.TYPE_ATTR);if(l&&"checkbox"==l.toLowerCase()){a=s[r];break}}if(a&&a.parentNode==t){a.parentNode.removeChild(a);var d=document.createElement("div");a.setAttribute(jasonWidgets.DOM.attributes.TYPE_ATTR,"checkbox"),d.appendChild(a),d.classList.add(jw.DOM.classes.JW_MENU_ITEM_CHECKBOX),menuCaption.classList.add(jw.DOM.classes.JW_HAS_CHECKBOX),menuCaption.classList.remove(jw.DOM.classes.JW_MENU_ITEM_CAPTION_ONLY),t.appendChild(d),n.hasCheckBox=!0,n.checkBoxElement=a}}var u=t.getElementsByTagName("UL").length>0;if(u){var h="";"horizontal"==e&&(h=n.level>0?jw.DOM.icons.CHEVRON_RIGHT:jw.DOM.icons.CHEVRON_DOWN),"vertical"==e&&(h=jw.DOM.icons.CHEVRON_RIGHT);var c=jw.htmlFactory.createJWButton(null,h),p=document.createElement("div");jw.common.setData(c,jw.DOM.attributeValues.JW_MENU_ITEM_DATA_KEY,n),menuCaption.classList.add(jw.DOM.classes.JW_HAS_ARROW),p.appendChild(c),p.classList.add(jw.DOM.classes.JW_MENU_ITEM_ARROW),t.appendChild(p)}}},jasonHTMLFactory.prototype.createClearFloat=function(){var e=document.createElement("div");return e.classList.add(jw.DOM.classes.JW_CLEAR_FLOAT_CLASS),e},jasonHTMLFactory.prototype.createJWSpan=function(e){var t=document.createElement("span");return void 0!=e&&e.trim().length>0&&(t.setAttribute(jw.DOM.attributes.TITLE_ATTR,e),t.appendChild(document.createTextNode(e))),t}}function jasonBaseWidget(e,t,n,o){return this.htmlElement=t,this.nameSpace=e,this._emptyDefaultOptions={events:[],customization:{dataFieldAttribute:jw.DOM.attributes.DATA_FIELD},dataIsSimpleJS:!0},this._enabled=!0,this._visible=!0,this._readonly=!1,this._uid=jw.common.generateUUID(),this._validationRules=[],jw.common._registerWidget(this),this.defaultOptions?jasonWidgets.common.extendObject(this._emptyDefaultOptions,this.defaultOptions):this.defaultOptions=this._emptyDefaultOptions,n||(n={}),jasonWidgets.common.extendObject(this.defaultOptions,n),this._eventListeners=n.events?n.events:[],this._eventListeners.forEach(function(e){void 0==e.enabled&&(e.enabled=!0)}),this.options=n,this.options.localization=this.options.localization?this.options.localization:jasonWidgets.localizationManager.currentLanguage,this.eventManager=new jasonEventManager,this.baseClassName="jasonWidget",this.htmlElement&&(jasonWidgets.common.setData(this.htmlElement,this.nameSpace,this),this.htmlElement.classList.add(this.baseClassName)),this.jwProc=this.jwProc.bind(this),this.validate=this.validate.bind(this),this.ui="function"==typeof o?new o(this,t):new jasonBaseWidgetUIHelper(this),this.ui.initialize(),jw.common.addGlobalEventListener(this.jwProc),this.initialize(),jasonBaseWidget}function jasonBaseWidgetUIHelper(e,t){this.widget=e,this.htmlElement=t,this.createdElements=new Array}function jw_Map(){this._=Object.create(null)}function jw_map_escape(e){return(e+="")===jw_map_proto||e[0]===jw_map_zero?jw_map_zero+e:e}function jw_map_unescape(e){return(e+="")[0]===jw_map_zero?e.slice(1):e}function jw_map_has(e){return jw_map_escape(e)in this._}function jw_map_remove(e){return(e=jw_map_escape(e))in this._&&delete this._[e]}function jw_map_keys(){var e=[];for(var t in this._)e.push(jw_map_unescape(t));return e}function jw_map_size(){var e=0;for(var t in this._)++e;return e}function jw_map_empty(){for(var e in this._)return!1;return!0}function jw_class(e,t){for(var n in t)Object.defineProperty(e.prototype,n,{value:t[n],enumerable:!1})}function jasonDataSourceSorting(e,t,n){this.name=e,this.reverse=t,this.primer=n}function jasonDataSource(e){this.defaultOptions={data:null,onChange:null,onSort:null,onGroup:null},jasonWidgets.common.extendObject(this.defaultOptions,e),this.options=e,this.data=e.data,this.processData(),this.currentDataView=[].concat(this.data),this.grouping=[],this.dictionaries=[],this.filters=[],this.sorting=[],this.datesAreEqual=this.datesAreEqual.bind(this),this.valuesAreEqual=this.valuesAreEqual.bind(this),this.valuesAreNotEqual=this.valuesAreNotEqual.bind(this),this.valueContains=this.valueContains.bind(this),this.valueEndsWith=this.valueEndsWith.bind(this),this.valueIsGreaterEqualThan=this.valueIsGreaterEqualThan.bind(this),this.valueIsGreaterThan=this.valueIsGreaterThan.bind(this),this.valueIsLessEqualThan=this.valueIsLessEqualThan.bind(this),this.valueIsLessThan=this.valueIsLessThan.bind(this)}function jasonEventManager(){this.eventListeners=new Array,jasonEventManager.prototype.mouseEnterLeaveHandler=function(e,t){
var n=e.relatedTarget;if(!n||n!==t&&!jasonWidgets.common.contains(t,n)){var o;"mouseover"!=e.type&&"pointerover"!=e.type||(o="mouseenter"),"mouseout"!=e.type&&"pointerout"!=e.type||(o="mouseleave"),this.triggerEvent(o,t,e)}},jasonEventManager.prototype.addEventListener=function(e,t,n,o,i){var s=this;if(void 0==e.nodeType&&jw.common.throwError(jw.errorTypes.error,"Element is not a HTMLElement"),e._jasonWidgetsEventListeners_||(e._jasonWidgetsEventListeners_=[]),e._jasonWidgetsEventListeners_.indexOf(t)<0){var a=t,r=function(e){s.triggerEvent(t,o?e.currentTarget:e.target,e)};i=void 0!==i&&i,e.addEventListener(a,r,i)}var l={element:e,eventName:t,listener:n,enabled:!0,uid:jw.common.generateUUID()};return this.eventListeners.push(l),e._jasonWidgetsEventListeners_.push(l),l.uid},jasonEventManager.prototype.triggerEvent=function(e,t,n){var o=this.eventListeners.filter(function(n){return n.eventName==e&&n.element==t&&n.enabled})[0];o&&("function"==typeof o.listener?(o.listener(n,t),this._debug&&console.log(o)):new Error("event listener is not a function"))},jasonEventManager.prototype.clearEvents=function(){this.eventListeners.forEach(function(e){e.element&&(e.element.removeEventListener(e.eventName,e.listener),e.element._jasonWidgetsEventListeners_=null)}),this.eventListeners=[]},this.triggerEvent=this.triggerEvent.bind(this),this.mouseEnterLeaveHandler=this.mouseEnterLeaveHandler.bind(this),this._debug=!1}function jasonLocalizationManager(){var e=this;Object.defineProperty(e,"currentLanguage",{get:function(){var e=this.languages[this.currentLanguageKey];if(!e)if(this.currentLanguageKey.indexOf("-")>=0){var t=this.currentLanguageKey.split("-"),n=t[0]+"-"+t[1].toLowerCase();e||(n=t[0]+"-"+t[1].toUpperCase(),e=this.languages[n],e||(e=this.languages["en-US"]))}else e=this.languages["en-US"];return e},enumerable:!0}),Object.defineProperty(e,"currentCulture",{get:function(){var e=this.cultures[this.currentCultureKey];if(!e)if(this.currentCultureKey.indexOf("-")>=0){var t=this.currentCultureKey.split("-"),n=t[0]+"-"+t[1].toLowerCase();e||(n=t[0]+"-"+t[1].toUpperCase(),language=this.cultures[n],e||(e=this.cultures["en-US"]))}else e=this.cultures["en-US"];return e},set:function(e){this.currentCultureKey=e,this.determineDateFormat(),this.determineTimeFormat()},enumerable:!0}),this.currentLanguageKey=navigator.browserLanguage||navigator.language,this.currentCultureKey=navigator.browserLanguage||navigator.language,this.languages={},this.cultures={},this.determineDateFormat=function(){var e="",t=new Date;t.setHours(0),t.setMinutes(0),t.setSeconds(0),t.setMilliseconds(0),t.setYear(1999),t.setMonth(11),t.setDate(31);var n=t.toLocaleDateString().replace(/\u200E/g,""),o=n.match(/[^0-9]/g),i=o[0];this.localeDateSeparator=i;for(var s=n.split(i),a=0;a<=s.length-1;a++)if(s[a].length>2&&(a>0&&(e+=i),e+="yyyy"),2==s[a].length){var r=parseInt(s[a]);12==r&&(a>0&&(e+=i),e+="MM"),31==r&&(a>0&&(e+=i),e+="dd"),99==r&&(a>0&&(e+=i),e+="dd")}return e},this.determineTimeFormat=function(){var e="",t=new Date,n="",o="";t.setHours(11),t.setMinutes(59),t.setSeconds(59),t.setMilliseconds(0);var i=t.toLocaleTimeString(this.currentCultureKey);i=i.replace(/\u200E/g,"");for(var s=0;s<=i.length-1;s++)if(""!=i[s]){var a=i.charCodeAt(s);if(!isNaN(a)&&a>64){o=i.substr(s,i.length-s);break}}this.anteMeridiemString=o,t.setHours(23),t.setMinutes(24),t.setSeconds(25),t.setMilliseconds(26),i=t.toLocaleTimeString(this.currentCultureKey),i=i.replace(/\u200E/g,"");for(var s=0;s<=i.length-1;s++)if(""!=i[s]){var a=i.charCodeAt(s);if(!isNaN(a)&&a>64){o=i.substr(s,i.length-s);break}}this.postMeridiemString=o,n=t.toLocaleTimeString(this.currentCultureKey),n=n.replace(this.postMeridiemString,""),n=n.replace(/\u200E/g,""),n=n.trim();var r=n.match(/\D/g),l=r[0],d=n.split(l);this.localeTimeSeparator=l;for(var s=0;s<=d.length-1;s++)if(2==d[s].length){var u=parseInt(d[s]);23!=u&&11!=u||(this.isTwelveHourClock=11==u,s>0&&(e+=l),e=this.isTwelveHourClock?e+"hh":e+"HH"),24==u&&(s>0&&(e+=l),e+="mm"),25==u&&(s>0&&(e+=l),e+="ss"),26==u&&(s>0&&(e+=l),e+="f")}return e},this.localeDateFormat=this.determineDateFormat(),this.localeTimeFormat=this.determineTimeFormat()}function jasonWidgetLanguage(){return jasonWidgetLanguage.prototype.key="",jasonWidgetLanguage.prototype.search={searchPlaceHolder:""},jasonWidgetLanguage.prototype.filter={values:{filterValueIsEqual:"",filterValueIsNotEqual:"",filterValueStartsWith:"",filterValueEndsWith:"",filterValueContains:"",filterValueGreaterThan:"",filterValueGreaterEqualTo:"",filterValueLessThan:"",filterValueLessEqualTo:"",filterHeaderCaption:""},operators:{and:"",or:""}},jasonWidgetLanguage.prototype.data={noData:""},jasonWidgetLanguage.prototype.grid={paging:{firstPageButton:"",priorPageButton:"",nextPageButton:"",lastPageButton:"",pagerInputTooltip:""},grouping:{groupingMessage:""},filtering:{clearButtonText:"",clearButtonTooplip:"",applyButtonText:"",applyButtonTooltip:""}},jasonWidgetLanguage.prototype.combobox={},jasonWidgetLanguage}function jasonWidgetCulture(){jasonWidgetCulture.prototype.key="",jasonWidgetCulture.prototype.dateFormat="",jasonWidgetCulture.prototype.shortDateFormat="",jasonWidgetCulture.prototype.longDateFormat="",jasonWidgetCulture.prototype.timeDateFormat=""}function jasonElementResizer(e,t,n){this.defaultOptions={allowResize:{top:!0,left:!0,bottom:!0,right:!0},minHeight:60,minWidth:40,margins:5},jasonBaseWidget.call(this,n,e,t,null),this._mousePositionInfo={onTopEdge:!1,onLeftEdge:!1,onRightEdge:!1,onBottomEdge:!1,mousePixelsDifferenceLeft:null,mousePixelsDifferenceTop:null,mousePixelsDifferenceBottom:null,mousePixelsDifferenceRight:null,elementRect:null,canResize:!1},this._onElementMouseDown=this._onElementMouseDown.bind(this),this._onElementMouseMove=this._onElementMouseMove.bind(this),this._onMouseMove=this._onMouseMove.bind(this),this._onMouseUp=this._onMouseUp.bind(this),this._resizeElement=this._resizeElement.bind(this),this._resizing=!1,this._redrawing=null,this._updatingMouseInfo=!1,this._startX=null,this._startY=null,this._mouseMoveTimer=null,this._mouseMoving=!0,this._initializeEvents()}function jasonElementDragger(e,t,n){this.defaultOptions={changeCursor:!0},jasonBaseWidget.call(this,n,e,t,null),this._onMouseMove=this._onMouseMove.bind(this),this._onMouseDown=this._onMouseDown.bind(this),this._onMouseUp=this._onMouseUp.bind(this),this._onWindowMouseMove=this._onWindowMouseMove.bind(this),this._dragElement=this._dragElement.bind(this),this._mouseMoveEvent=null,this._dragging=!1,this._initializeEvents(),this._startX=null,this._startY=null,this._elementRect=null,this._dragElement()}function jasonBlockUI(e,t){this.defaultOptions={opacity:"0.8",backgroundColor:"white",blockKeyboard:!1,active:!0},void 0==t&&(t={}),jw.common.extendObject(this.defaultOptions,t),this.options=t,this.nonBlockElement=e,this.blockElement=document.createElement("DIV"),this.blockElement.style.display="none",this.blockElement.style.opacity=this.options.opacity,this.blockElement.style.backgroundColor=this.options.backgroundColor,void 0!=this.options.cssClass&&this.blockElement.classList.add(this.options.cssClass),this.blockElement.classList.add(jw.DOM.classes.JW_BLOCK_ELEMENT),this.blockElement.style.position="absolute",this.blockElement.addEventListener(jw.DOM.events.CLICK_EVENT,function(e){e.preventDefault(),e.stopPropagation()}),this.blockElement.addEventListener(jw.DOM.events.MOUSE_DOWN_EVENT,function(e){e.preventDefault(),e.stopPropagation()}),this.addWindowEvents=this.addWindowEvents.bind(this),this.removeWindowEvents=this.removeWindowEvents.bind(this),this.handleWindowsFocus=this.handleWindowsFocus.bind(this),this.handleWindowsKeyDown=this.handleWindowsKeyDown.bind(this)}function jasonValidationRule(e){var t=this;this.options=e,this._closeEventAssigned=!1,this.validate=function(){if(t.widget||(t.widget=t.options.widget,t._initializeContent(),t._createUI(),t.validationMessage.innerHTML=t.options.message,t.validationPopover=new jasonPopover({targetElement:t.widget.htmlElement,title:e.title,content:t.validationContainer,autoPlacement:void 0==t.options.bubblePosition,position:t.options.bubblePosition,mode:"validation"}),t.validationPopover.htmlElement.classList.add(jw.DOM.classes.JW_VALIDATION)),t.options.validatorFunction&&"function"==typeof t.options.validatorFunction&&t.widget){var n=t.options.validatorFunction(t.widget,t.widget.value,t.options.validValue);if(0==n){if(t.validationPopover.show(),!this._closeEventAssigned){var o=t.validationPopover.ui.body.getElementsByClassName(jw.DOM.classes.JW_BUTTON)[0];t.validationPopover.eventManager.addEventListener(o,jw.DOM.events.CLICK_EVENT,function(e){t.validationPopover.hide()},!0),this._closeEventAssigned=!0}}else t.validationPopover.hide();return n}},this._initializeContent=function(){this.options.message=jw.common.parseTemplateContent(this.options.message)},this._createUI=function(){t.validationContainer=document.createElement("DIV"),t.validationContainer.classList.add(jw.DOM.classes.JW_VALIDATION_CONTAINER),t.validationMessageContainer=document.createElement("DIV"),t.validationMessageContainer.classList.add(jw.DOM.classes.JW_VALIDATION_MESSAGE_CONTAINER),t.validationMessage=document.createElement("SPAN"),t.validationMessage.classList.add(jw.DOM.classes.JW_VALIDATION_MESSAGE),t.validationMessageContainer.appendChild(t.validationMessage),t.validationCloseButton=jw.htmlFactory.createJWButton(null,jw.DOM.icons.CLOSE_24x24),t.validationContainer.appendChild(t.validationCloseButton),t.validationContainer.appendChild(t.validationMessageContainer)}}function jasonValidationRuleGroup(e){var t=this;this.name=void 0==e?"default":e,this.rules=[],this.validate=function(){t.rules.forEach(function(e){e.options.widget?e.options.widget.validate():e.validate()})},jw.validationManager.addValidationGroup(this)}function jasonWidgetLanguageEL(){this.search={searchPlaceHolder:"Όρος αναζήτησης"},this.filter={values:{filterValueIsEqual:"Ίση με",filterValueIsNotEqual:"Δεν είναι ίσο με",filterValueStartsWith:"Αρχίζει με",filterValueEndsWith:"Τέλειώνει με",filterValueContains:"Περιέχει",filterValueGreaterThan:"Μεγαλύτερο απο",filterValueGreaterEqualTo:"Μεγαλύτερο ίσο απο",filterValueLessThan:"Μικρότερο απο",filterValueLessEqualTo:"Μικρότερο ίσο απο"},operators:{and:"Και",or:"ή"}},this.data={noData:"Δεν υπάρχουν δεδομένα"},this.grid={paging:{firstPageButton:"Πρώτη",priorPageButton:"Προηγούμενη",nextPageButton:"Επόμενη",lastPageButton:"Τελευταία",pagerInputTooltip:"Πληκτρολογήστε αριθμό σελίδας",pagerInfoOfRecordCount:"απο"},grouping:{groupingMessage:"Σύρετε μια στήλη εδώ , για να ομαδόποιήσετε τα δεδομένα με βάση τη στήλη αυτή",removeGrouping:"Αφαίρεση ομαδόποιησης για "},filtering:{clearButtonText:"Καθαρισμός",clearButtonToollip:"Καθαρισμός όλων των φίλτρων",applyButtonText:"Εφαρμογή",applyButtonTooltip:"Εφαρμογή του φίλτρου",iconTooltip:"Φιλτράρισμα δεδομένων",filterHeaderCaption:"Προβολή τιμών όπου"},columnMenu:{sortAscending:"Αύξουσα Ταξινόμηση",sortDescending:"Φθίνουσα Ταξινόμηση",filter:"Φίλτρο",columns:"Στήλες",clearSorting:"Αναίρεση Ταξινόμησης",clearFilters:"Αναίρεση Φίλτρου"}},this.combobox={notFound:"Ο όρος αναζήτησης [ {0} ] δεν βρέθηκε"},this.key="EL",this.calendar={days:[{name:"Κυριακή",shortName:"Κυρ"},{name:"Δευτέρα",shortName:"Δευ"},{name:"Tρίτη",shortName:"Tρι"},{name:"Τετάρτη",shortName:"Τετ"},{name:"Πέμπτη",shortName:"Πεμ"},{name:"Παρασκευή",shortName:"Παρ"},{name:"Σάββατο",shortName:"Σαβ"}],months:[{name:"Ιανουάριος",shortName:"Ιαν"},{name:"Φεβρουάριος",shortName:"Φεβ"},{name:"Μάρτιος",shortName:"Μαρ"},{name:"Απρίλιος",shortName:"Απρ"},{name:"Μαϊος",shortName:"Μαϊ"},{name:"Ιουνίος",shortName:"Ιουν"},{name:"Ιούλιος",shortName:"Ιουλ"},{name:"Αύγουστος",shortName:"Αυγ"},{name:"Σεπτέμβριος",shortName:"Σεπ"},{name:"Οκτώβριος",shortName:"Οκτ"},{name:"Νοέμβριος",shortName:"Νοε"},{name:"Δεκέμβριος",shortName:"Δεκ"}]},this.dialog={buttons:[{name:"btnOK",caption:"OK"},{name:"btnYes",caption:"Ναι"},{name:"btnNo",caption:"Όχι"},{name:"btnCancel",caption:"Ακύρωση"},{name:"btnAbort",caption:"Ματαιώση"},{name:"btnRetry",caption:"Επανάληψη"},{name:"btnIgnore",caption:"Παράλειψη"}]},this.numericTextBox={increaseValue:"Αύξηση τιμής",decreaseValue:"Μειώση τιμής"}}function jasonWidgetLanguageEN(){this.search={searchPlaceHolder:"Type in a value to search"},this.filter={values:{filterValueIsEqual:"Equal to",filterValueIsNotEqual:"Not equal to",filterValueStartsWith:"Starts with",filterValueEndsWith:"Ends with",filterValueContains:"Contains",filterValueGreaterThan:"Greater than",filterValueGreaterEqualTo:"Greater equal to",filterValueLessThan:"Less than",filterValueLessEqualTo:"Less equal than"},operators:{and:"And",or:"Or"}},this.data={noData:"No data"},this.grid={paging:{firstPageButton:"First",priorPageButton:"Prior",nextPageButton:"Next",lastPageButton:"Last",pagerInputTooltip:"Type in a page number",pagerInfoOfRecordCount:"of"},grouping:{groupingMessage:"Drag a column here to group the data based on that column.",removeGrouping:"Remove grouping for "},filtering:{clearButtonText:"Clear",clearButtonToollip:"Clear all filters",applyButtonText:"Apply",applyButtonTooltip:"Apply filter",iconTooltip:"Filtering data",filterHeaderCaption:"Show values where"},columnMenu:{sortAscending:"Sort Ascending",sortDescending:"Sort Descending",filter:"Filter",columns:"Columns",clearSorting:"Clear Sorting",clearFilters:"Clear Filters"}},this.combobox={notFound:"Search term [ {0} ] not found"},this.key="EN",this.calendar={days:[{name:"Sunday",shortName:"Sun"},{name:"Monday",shortName:"Mon"},{name:"Tuesday",shortName:"Tue"},{name:"Wednesday",shortName:"Wed"},{name:"Thursday",shortName:"Thu"},{name:"Friday",shortName:"Fri"},{name:"Saturday",shortName:"Sat"}],months:[{name:"January",shortName:"Jan"},{name:"February",shortName:"Feb"},{name:"March",shortName:"Mar"},{name:"April",shortName:"Apr"},{name:"May",shortName:"May"},{name:"June",shortName:"Jun"},{name:"July",shortName:"Jul"},{name:"August",shortName:"Aug"},{name:"September",shortName:"Sep"},{name:"October",shortName:"Oct"},{name:"November",shortName:"Nov"},{name:"December",shortName:"Dec"}]},this.dialog={buttons:[{name:"btnOK",caption:"OK"},{name:"btnYes",caption:"Yes"},{name:"btnNo",caption:"No"},{name:"btnCancel",caption:"Cancel"},{name:"btnAbort",caption:"Abort"},{name:"btnRetry",caption:"Retry"},{name:"btnIgnore",caption:"Ignore"}]},this.numericTextBox={increaseValue:"Increase value",decreaseValue:"Decrease value"}}function jasonWidgetLanguageES(){this.search={searchPlaceHolder:"Escriba un valor para buscar"},this.filter={values:{filterValueIsEqual:"Igual a",filterValueIsNotEqual:"No igual a",filterValueStartsWith:"Comienza con",filterValueEndsWith:"Termina con",filterValueContains:"Contiene",filterValueGreaterThan:"Mas grande que",filterValueGreaterEqualTo:"Mayor igual a",filterValueLessThan:"Menos que",filterValueLessEqualTo:"Menos iguales que"},operators:{and:"Y",or:"O"}},this.data={noData:"Sin datos"},this.grid={paging:{firstPageButton:"Primero",priorPageButton:"Anterior",nextPageButton:"Siguiente",lastPageButton:"Ultimo",pagerInputTooltip:"Teclear un número de página",pagerInfoOfRecordCount:"de"},grouping:{groupingMessage:"Arrastre una columna aquí para agrupar los datos en función de esa columna.",removeGrouping:"Eliminar la agrupación de "},filtering:{clearButtonText:"Claro",clearButtonToollip:"Borrar todos los filtros",applyButtonText:"Applicar",applyButtonTooltip:"Applicar filtro",iconTooltip:"Filtrado de datos",filterHeaderCaption:"Mostrar valores en donde"},columnMenu:{sortAscending:"Orden ascendente",sortDescending:"Orden descendiente",filter:"Filtrar",columns:"Columnas",clearSorting:"Claro ordenación",clearFilters:"Eliminar filtros"}},this.combobox={notFound:"Término de búsqueda [{0}] no encontrado"},this.key="ES",this.calendar={days:[{name:"Domenica",shortName:"Dom"},{name:"Lunedi",shortName:"Lun"},{name:"Martedi",shortName:"Mar"},{name:"Mercoledi",shortName:"Mer"},{name:"Giovedi",shortName:"Gio"},{name:"Venerdi",shortName:"Ven"},{name:"Sabato",shortName:"Sab"}],months:[{name:"Enero",shortName:"Genn"},{name:"Febrero",shortName:"Febbr"},{name:"Marzo",shortName:"Mar"},{name:"Abril",shortName:"Apr"},{name:"Mayo",shortName:"Magg"},{name:"Junio",shortName:"Giu"},{name:"Julio",shortName:"Lug"},{name:"Agosto",shortName:"Ago"},{name:"Septiembre",shortName:"Sett"},{name:"Octubre",shortName:"Ott"},{name:"Noviembre",shortName:"Nov"},{name:"Diciembre",shortName:"Dic"}]},this.dialog={buttons:[{name:"btnOK",caption:"OK"},{name:"btnYes",caption:"Sì"},{name:"btnNo",caption:"No"},{name:"btnCancel",caption:"Cancelar"},{name:"btnAbort",caption:"Abortar"},{name:"btnRetry",caption:"Rever"},{name:"btnIgnore",caption:"Ignorar"}]},this.numericTextBox={increaseValue:"Aumentar el valor",decreaseValue:"Disminuye el valor"}}function jasonWidgetLanguageIT(){this.search={searchPlaceHolder:"Digitare un valore per la ricerca"},this.filter={values:{filterValueIsEqual:"Uguale a",filterValueIsNotEqual:"Non uguale a",filterValueStartsWith:"Inizia con",filterValueEndsWith:"Finisce con",filterValueContains:"Contiene",filterValueGreaterThan:"Più grande di",filterValueGreaterEqualTo:"Maggiore pari a",filterValueLessThan:"Meno di",filterValueLessEqualTo:"Meno uguali degli"},operators:{and:"e",or:"O"}},this.data={noData:"Nessun dati"},this.grid={paging:{firstPageButton:"Primo",priorPageButton:"Precedente",nextPageButton:"Prossimo",lastPageButton:"Ultimo",pagerInputTooltip:"Digitare un numero di pagina",pagerInfoOfRecordCount:"di"},grouping:{groupingMessage:"Trascinare una colonna qui, per raggruppare i dati in base a quella colonna",removeGrouping:"Rimuovere raggruppamento per "},filtering:{clearButtonText:"Cancella",clearButtonToollip:"Cancella tutti i filtri",applyButtonText:"Applica",applyButtonTooltip:"Applica il filtro",iconTooltip:"Filtraggio dei dati",filterHeaderCaption:"Mostra i valori in cui"},columnMenu:{sortAscending:"Ordine crescente",sortDescending:"Ordine decrescente",filter:"Filtro",columns:"Colonne",clearSorting:"Cancella ordinamento",clearFilters:"Cancella filtri"}},this.combobox={notFound:"Il termino di ricerca [ {0} ] non trovato"},this.key="IT",this.calendar={days:[{name:"Domenica",shortName:"Dom"},{name:"Lunedi",shortName:"Lun"},{name:"Martedi",shortName:"Mar"},{name:"Mercoledi",shortName:"Mer"},{name:"Giovedi",shortName:"Gio"},{name:"Venerdi",shortName:"Ven"},{name:"Sabato",shortName:"Sab"}],months:[{name:"Gennaio",shortName:"Genn"},{name:"Febbraio",shortName:"Febbr"},{name:"Marzo",shortName:"Mar"},{name:"Aprile",shortName:"Apr"},{name:"Maggio",shortName:"Magg"},{name:"Giugno",shortName:"Giu"},{name:"Luglio",shortName:"Lug"},{name:"Agosto",shortName:"Ago"},{name:"Settembre",shortName:"Sett"},{name:"Ottobre",shortName:"Ott"},{name:"Novembre",shortName:"Nov"},{name:"Dicembre",shortName:"Dic"}]},this.dialog={buttons:[{name:"btnOK",caption:"OK"},{name:"btnYes",caption:"Sì"},{name:"btnNo",caption:"No"},{name:"btnCancel",caption:"Annulla"},{name:"btnAbort",caption:"Interrompe"},{name:"btnRetry",caption:"Riprova"},{name:"btnIgnore",caption:"Ignorare"}]},this.numericTextBox={increaseValue:"Aumentare il valore",decreaseValue:"Riduzione valore"}}function jasonWidgetCultureEL(){this.dateFormat="dd/MM/yyyy",this.shortDateFormat="dd MMM YYYY",this.longDateFormat="dd MMMM yyyy",this.timeFormat="hh:mm:ss",this.postMeridiem=[],this.anteMeridiem=[],this.currencyCode="EUR",this.key="el"}function jasonWidgetCultureEN_US(){this.dateFormat="MM/dd/yyyy",this.shortDateFormat="MMM dd yyyy",this.longDateFormat="dddd MMMM dd yyyy",this.timeFormat="hh:mm:ss",this.postMeridiem=[],this.anteMeridiem=[],this.currencyCode="USD",this.key="en-US"}function jasonWidgetCultureES(){this.dateFormat="dd/MM/yyyy",this.shortDateFormat="dd MMM YYYY",this.longDateFormat="dd MMMM yyyy",this.timeFormat="hh:mm:ss",this.postMeridiem=[],this.anteMeridiem=[],this.currencyCode="EUR",this.key="es"}function jasonWidgetCultureIT(){this.dateFormat="dd/MM/yyyy",this.shortDateFormat="dd MMM YYYY",this.longDateFormat="dd MMMM yyyy",this.timeFormat="hh:mm:ss",this.postMeridiem=[],this.anteMeridiem=[],this.currencyCode="EUR",this.key="it"}function jasonTextbox(e,t,n,o){if("DIV"!=e.tagName)throw new Error("Textbox container element must be a div");this.defaultOptions||(this.defaultOptions={}),jasonBaseWidget.call(this,void 0==n?"jasonTextbox":n,e,t,void 0==o?jasonTextboxUIHelper:o),this._value=null}function jasonTextboxUIHelper(e,t){this.onTextInputBlur=this.onTextInputBlur.bind(this),this.onTextInputFocus=this.onTextInputFocus.bind(this),jasonBaseWidgetUIHelper.call(this,e,t)}function jasonButtonTextbox(e,t,n,o){this.defaultOptions||(this.defaultOptions={}),jasonTextbox.call(this,e,t,void 0==n?"jasonButtonTextbox":n,void 0==o?jasonButtonTextboxUIHelper:o)}function jasonButtonTextboxUIHelper(e,t){this.onButtonClick=this.onButtonClick.bind(this),this.onTextInputBlur=this.onTextInputBlur.bind(this),this.onTextInputFocus=this.onTextInputFocus.bind(this),jasonTextboxUIHelper.call(this,e,t)}function jasonCombobox(e,t,n){this.defaultOptions={data:null,keyFieldName:void 0,displayFields:void 0,displayFormat:void 0,placeholder:void 0,inputMode:"verbatim",readonly:!1,caseSentiveSearch:!1,autoFilter:!1,icon:jw.DOM.icons.CHEVRON_DOWN,multipleSelectionSeparator:"|",customization:{itemTemplate:null,dataFieldAttribute:"data-field"}},n=void 0===n?"jasonCombobox":n,jasonButtonTextbox.call(this,e,t,n,jasonComboboxUIHelper),this.onDataChange=this.onDataChange.bind(this),this.dataSource=new jasonDataSource({data:this.options.data,onChange:this.onDataChange}),this.filteredData=[],this.search=this.search.bind(this),this.options.localization=jasonWidgets.localizationManager.currentLanguage?jasonWidgets.localizationManager.currentLanguage:this.options.localization,this.dataChanged=!0}function jasonComboboxUIHelper(e,t){this.oninputControlClick=this.oninputControlClick.bind(this),this.oninputControlChange=this.oninputControlChange.bind(this),this.onTextInputBlur=this.onTextInputBlur.bind(this),this.onTextInputFocus=this.onTextInputFocus.bind(this),this.showList=this.showList.bind(this),this.hideList=this.hideList.bind(this),this.onComboboxKeyUp=this.onComboboxKeyUp.bind(this),this.onComboboxKeyDown=this.onComboboxKeyDown.bind(this),this.dropDownListButton=null,jasonButtonTextboxUIHelper.call(this,e,t)}function jasonMenu(e,t,n){this.items=[],this.defaultOptions={orientation:"vertical",animation:{delay:9},expandMenuOnHover:!0,invokable:!1,autoHide:!0},jasonBaseWidget.call(this,"jasonMenu",e,t,n)}function createJasonMenuDividerItem(){var e=new jasonMenuItem;return e.isDivider=!0,e.clickable=!1,e}function jasonMenuItem(e,t,n){jasonBaseWidget.call(this,"jasonMenuItem",e,t,n),this.caption="",this.title="",this.enabled=!0,this.items=[],this.parent=null,this.content=null,this.level=null,this.name=null,this.hasCheckBox=!1,this.checked=!1,this.clickable=!0,this.checkBoxElement=null,this.icon=null,this.isDivider=!1,this.assign=this.assign.bind(this)}function jasonMenuWidgetParser(e){return this.menuUI=e,jasonMenuWidgetParser}function jasonMenuWidgetDOMParser(e){jasonMenuWidgetParser.call(this,e)}function jasonMenuWidgetJSONParser(e){jasonMenuWidgetParser.call(this,e),this.createMenuElementFromItem=this.createMenuElementFromItem.bind(this)}function jasonMenuUIHelper(e,t){jasonBaseWidgetUIHelper.call(this,e,t),void 0==this.htmlElement&&(this.htmlElement=this.createElement("span")),this.ulMenuElement="UL"==this.htmlElement.tagName?this.htmlElement:this.createElement("ul"),this.ulMenuElement.classList.contains(this.baseClassName)||this.widget.addBaseClassName(this.ulMenuElement),this.menuContainer=this.createElement("div"),this.menuContainer.classList.add(jw.DOM.classes.JW_MENU_CONTAINER_CLASS),this.options.orientation==jw.DOM.classes.JW_MENU_HORIZONTAL&&this.menuContainer.classList.add(jw.DOM.classes.JW_MENU_HORIZONTAL),this.options.orientation==jw.DOM.classes.JW_MENU_VERTICAL&&this.menuContainer.classList.add(jw.DOM.classes.JW_MENU_VERTICAL),this.ulMenuElement.classList.add(jw.DOM.classes.JW_MENU_CLASS),this.invokableElement=null,this.widget.options.width&&(this.ulMenuElement.style.width=this.options.width+"px"),this.widget.options.height&&(this.ulMenuElement.style.height=this.options.height+"px"),"horizontal"==this.widget.options.orientation.toLowerCase()&&this.htmlElement.classList.add(jw.DOM.classes.JW_MENU_HORIZONTAL),this.checkBoxElements=[],this.showMenu=this.showMenu.bind(this),this.hideMenu=this.hideMenu.bind(this),this.onCheckboxClick=this.onCheckboxClick.bind(this),this.onItemClick=this.onItemClick.bind(this),this.onItemTouch=this.onItemTouch.bind(this),this.onItemMouseEnter=this.onItemMouseEnter.bind(this),this.onItemMouseLeave=this.onItemMouseLeave.bind(this),this.onItemKeyDown=this.onItemKeyDown.bind(this),this.toggleCheckBox=this.toggleCheckBox.bind(this),this.onItemArrowClick=this.onItemArrowClick.bind(this);var n=this;this.options.autoHide&&(jwDocumentEventManager.addDocumentEventListener(jw.DOM.events.MOUSE_DOWN_EVENT,function(e){if("none"!=n.menuContainer.style.display){var t=jasonWidgets.common.isMouseEventOutOfContainerAndNotAChild(n.menuContainer,e);t&&n.canHideMenu&&n.options.invokable&&n.hideMenu()}}),jwDocumentEventManager.addDocumentEventListener(jw.DOM.events.TOUCH_END_EVENT,function(e){if("none"!=n.menuContainer.style.display){var t=jasonWidgets.common.isMouseEventOutOfContainerAndNotAChild(n.menuContainer,e.changedTouches[0]);if(t&&n.previousShowMenuItem)for(var o=n.previousShowMenuItem;o;)n.hideMenuItemContents(o),o=o.parent}})),this.menu=this.createMenu(),this.canHideMenu=!0,this.canHideSubMenu=!0,this.disableMouseEvents=!1,this.previousShowMenuItem=null,this.lastMenuItemVisibleContents=null}function jasonContextMenuUIHelper(e,t){jasonWidgets.common.extendObject({invokable:!0,orientation:"vertical",autoHide:!0},e.options),this.showContextMenu=this.showContextMenu.bind(this),e.options.invokable=!0,jasonMenuUIHelper.call(this,e,t),this.menuContainer.style.display="none",this.menuContainer.parentElement.removeChild(this.menuContainer),document.body.appendChild(this.menuContainer),this.menuContainer.style.width=e.options.width+"px",this.menuContainer.style.position="absolute"}function jasonCalendarItem(){this.dayName=null,this.dayShortName=null,this.date=null,this.day=null,this.month=null,this.monthName=null,this.monthShortName=null,this.year=null,this.weekNumber=null,this.decadeStart=null,this.decadeStop=null,this.centuryStart=null,this.centuryStop=null,this.mileniumStart=null,this.mileniumStop=null,this.toolTip=null,this.classList=[],this.displayValue=null}function jasonCalendar(e,t){this.defaultOptions={invokable:!1,autoHide:!1,invokableElement:null,firstDayOfWeek:1,width:300,height:220,mode:"days",specialDates:[],selectedDates:[],multiSelect:!1,rangeSelect:!1,localization:jasonWidgets.localizationManager.currentLanguage?jasonWidgets.localizationManager.currentLanguage.calendar:t.localization},this._date=jasonWidgets.common.dateOf(new Date),this._navigationDate=jasonWidgets.common.dateOf(new Date),this._specialDates=[],this._mode=t.mode?t.mode:"days",this.currentCalendarItems=[],this.parseSpecialDates(t),jasonBaseWidget.call(this,"jasonCalendar",e,t,jasonCalendarUIHelper)}function jasonCalendarUIHelper(e,t){this.goBack=this.goBack.bind(this),this.goForward=this.goForward.bind(this),this.calendarDisplayClick=this.calendarDisplayClick.bind(this),this.calendarItemClick=this.calendarItemClick.bind(this),this.calendarNavigateToday=this.calendarNavigateToday.bind(this),this.renderedCalendarItems=[];var n=this;jwDocumentEventManager.addDocumentEventListener(jw.DOM.events.SCROLL_EVENT,function(e){n.options.invokable&&n.hideCalendar()}),jwDocumentEventManager.addDocumentEventListener(jw.DOM.events.TOUCH_MOVE_EVENT,function(e){n.options.invokable&&n.hideCalendar()}),jasonBaseWidgetUIHelper.call(this,e,t)}function jasonTabControl(e,t){if("DIV"!=e.tagName&&e.children[0]&&"UL"!=e.children[0].tagName)throw new Error("Tabcontrol container must a DIV containing a UL element as first child");jasonBaseWidget.call(this,"jasonTabControl",e,t,jasonTabControlUIHelper),this._tabIndex=-1,this.htmlElement.style.display="",this.tabIndex=0}function jasonTabControlUIHelper(e,t){this.tabContents=[],this.setActiveTab=this.setActiveTab.bind(this),this.onTabClick=this.onTabClick.bind(this),this.onTabTouchStart=this.onTabTouchStart.bind(this),jasonBaseWidgetUIHelper.call(this,e,t)}function jasonNumericTextbox(e,t){this.defaultOptions={minimumFractionDigits:2,step:1,style:"decimal"},jasonTextbox.call(this,e,t,"jasonNumericTextbox",jasonNumericTextboxUIHelper)}function jasonNumericTextboxUIHelper(e,t){this.onNumericButtonClick=this.onNumericButtonClick.bind(this),this.onNumericInputKeyDown=this.onNumericInputKeyDown.bind(this),this.onTextInputBlur=this.onTextInputBlur.bind(this),this.onTextInputFocus=this.onTextInputFocus.bind(this),this._acceptableKeyCodes=[jw.keycodes.backspace,jw.keycodes.tab,jw.keycodes.shift,jw.keycodes.ctrl,jw.keycodes.alt,jw.keycodes.home,jw.keycodes.end,44,jw.keycodes["delete"],jw.keycodes.zero,jw.keycodes.one,jw.keycodes.two,jw.keycodes.three,jw.keycodes.four,jw.keycodes.five,jw.keycodes.six,jw.keycodes.seven,jw.keycodes.eight,jw.keycodes.nine,jw.keycodes.numpad0,jw.keycodes.numpad1,jw.keycodes.numpad2,jw.keycodes.numpad3,jw.keycodes.numpad3,jw.keycodes.numpad4,jw.keycodes.numpad5,jw.keycodes.numpad6,jw.keycodes.numpad7,jw.keycodes.numpad8,jw.keycodes.numpad9,jw.keycodes.dash,jw.keycodes.subtract,jw.keycodes.decimalPoint],jasonTextboxUIHelper.call(this,e,t)}function jasonGridUIHelper(e,t){this.resizeTimeout=null,this._onColumnMenuItemChecked=this._onColumnMenuItemChecked.bind(this),this._onColumnMenuItemClicked=this._onColumnMenuItemClicked.bind(this),this._onColumnMenuHidden=this._onColumnMenuHidden.bind(this),this._onGridFilterButtonClick=this._onGridFilterButtonClick.bind(this),this._onGridColumnMenuIconClick=this._onGridColumnMenuIconClick.bind(this),this._onGridColumnCaptionClick=this._onGridColumnCaptionClick.bind(this),this._onGridColumnKeyDown=this._onGridColumnKeyDown.bind(this),this._onGridColumnFocus=this._onGridColumnFocus.bind(this),this._onGridCellKeyDown=this._onGridCellKeyDown.bind(this),this._onGridFocus=this._onGridFocus.bind(this),this._onGridFooterKeyDown=this._onGridFooterKeyDown.bind(this),this._onResize=this._onResize.bind(this),this._onDataContainerScroll=this._onDataContainerScroll.bind(this),this._onGroupCollapseExpandIconClick=this._onGroupCollapseExpandIconClick.bind(this),this._onGroupColumnRemoveClick=this._onGroupColumnRemoveClick.bind(this),this._onColumnDrop=this._onColumnDrop.bind(this),this._onMoveResizeStart=this._onMoveResizeStart.bind(this),this._onColumnResizeEnd=this._onColumnResizeEnd.bind(this),this._onSelectionChange=this._onSelectionChange.bind(this),this.gridSelectedRows=new Array,this.gridSelectedCells=new Array,this._currentPage=1,this._currentFilterField=null,this._currentFilterColumn=null,this._currentTHElement=null,this._firstRun=!0,this._gridResizer=null,this._gridColumnDragger=null,this.isReRendering=!1,this.isColumnMoveResize=!1,this._recordPosition={recordStart:null,recordStop:null},jasonBaseWidgetUIHelper.call(this,e,t)}function jasonGrid(e,t,n){if("DIV"!=e.tagName)throw new Error("Grid container element must be a div");this.defaultOptions={multiSelect:!1,cellMultiSelect:!1,data:null,columns:null,selectedRows:null,paging:{pagesize:200},grouping:!0,filtering:!0,columnMenu:!0,resizing:!0,sorting:!0,reordering:!0,customization:{rowTemplate:null,dataFieldAttribute:"data-field"}},this.dataSource=new jasonDataSource({data:"function"==typeof t.data?t.data():t.data,onChange:this._onDataChanged.bind(this)}),this._initializeColumns(t),jasonBaseWidget.call(this,"jasonGrid",e,t,void 0==n?jasonGridUIHelper:n),this.ui._createColumnMenu(),this.ui._initializeEvents(),this.ui.localizeStrings(this.options.localization)}function jasonGridResizer(e,t,n){this.defaultOptions={minHeight:60,minWidth:40},this._gridInstance=e,this._onColumnMouseMove=this._onColumnMouseMove.bind(this),this._onColumnMouseDown=this._onColumnMouseDown.bind(this),
this._onDocumentMouseMove=this._onDocumentMouseMove.bind(this),this._onDocumentMouseUp=this._onDocumentMouseUp.bind(this),this._onTouchEnd=this._onTouchEnd.bind(this),this._onTouchMove=this._onTouchMove.bind(this),this._onTouchStart=this._onTouchStart.bind(this),this._margins=5,this._headerTableColGroup=null,this._dataTableColGroup=null,this._currentColumn=null,this._mouseMoveEvent=null,this._mouseMoving=!1,this._mouseMoveTimer=null,this._resizing=!1,this._redrawing=!1,this._tableOriginalWidth=null,this._currentHeaderCol=null,this._currentDataCol=null,this._mousePositionInfo={onTopEdge:!1,onLeftEdge:!1,onRightEdge:!1,onBottomEdge:!1,mousePixelsDifferenceLeft:null,mousePixelsDifferenceTop:null,mousePixelsDifferenceBottom:null,mousePixelsDifferenceRight:null,elementRect:null,canResize:!1},jasonBaseWidget.call(this,n,e.htmlElement,t,null),this._resizeColumn=this._resizeColumn.bind(this)}function jasonGridColumnDragger(e,t,n){this.defaultOptions={changeCursor:!0},this._gridInstance=e,this._onMouseMove=this._onMouseMove.bind(this),this._onMouseDown=this._onMouseDown.bind(this),this._onMouseUp=this._onMouseUp.bind(this),this._onWindowMouseMove=this._onWindowMouseMove.bind(this),this._dragColumn=this._dragColumn.bind(this),this._onTouchEnd=this._onTouchEnd.bind(this),this._onTouchMove=this._onTouchMove.bind(this),this._onTouchStart=this._onTouchStart.bind(this),this._mouseMoveEvent=null,this._cloneNode=null,this._currentColumn=null,jasonBaseWidget.call(this,n,e.htmlElement,t,null)}function jasonDatePicker(e,t){this.defaultOptions={displayFormat:jasonWidgets.localizationManager.localeDateFormat,mode:"date",icon:jw.DOM.icons.CALENDAR},jasonButtonTextbox.call(this,e,t,"jasonDatePicker",jasonDatePickerUIHelper),this.readonly=!!this.options.readonly&&this.options.readonly}function jasonDatePickerUIHelper(e,t){this.onTextInputBlur=this.onTextInputBlur.bind(this),this.onTextInputFocus=this.onTextInputFocus.bind(this),this.inputKeyDown=this.inputKeyDown.bind(this),this.buttonClick=this.buttonClick.bind(this),this.onCalendarDateChange=this.onCalendarDateChange.bind(this),this.datePickerSetDateFlag=!1,jasonButtonTextboxUIHelper.call(this,e,t)}function jasonTimePicker(e,t){this.defaultOptions={timeFormat:jasonWidgets.localizationManager.localeTimeFormat,interval:15,keyFieldName:"key",displayFields:["formattedTime"],displayFormat:"{0}",icon:jw.DOM.icons.CLOCK,autoFilter:!0,events:[{eventName:jw.DOM.events.JW_EVENT_ON_SHOW,listener:function(e){this._hasKeyStroke=!1}.bind(this)}]},jasonWidgets.common.extendObject(this.defaultOptions,t),this.prepareData(t),jasonCombobox.call(this,e,t,"jasonTimePicker"),this._hasKeyStroke=!1,this._time=jasonWidgets.common.timeOf(this.options.time?this.options.time:new Date),this.onTextInputBlur=this.onTextInputBlur.bind(this),this.cmbInputKeyDown=this.cmbInputKeyDown.bind(this),this.onTimePickerSelectItem=this.onTimePickerSelectItem.bind(this),this.eventManager.addEventListener(this.ui.inputControl,jw.DOM.events.BLUR_EVENT,this.onTextInputBlur),this.eventManager.addEventListener(this.ui.inputControl,jw.DOM.events.KEY_DOWN_EVENT,this.cmbInputKeyDown)}function jasonDateTimePicker(e,t){this.defaultOptions={dateFormat:jasonWidgets.localizationManager.localeDateFormat,timeFormat:jasonWidgets.localizationManager.localeTimeFormat,mode:"datetime",icon:jw.DOM.icons.CALENDAR,interval:15,keyFieldName:"key",displayFields:["formattedTime"],displayFormat:"{0}"},this.prepareData(t),jasonButtonTextbox.call(this,e,t,"jasonDateTimePicker",jasonDateTimePickerUIHelper)}function jasonDateTimePickerUIHelper(e,t){this.onTextInputBlur=this.onTextInputBlur.bind(this),this.onTextInputFocus=this.onTextInputFocus.bind(this),this.inputKeyDown=this.inputKeyDown.bind(this),this.buttonClick=this.buttonClick.bind(this),this.timeButtonClick=this.timeButtonClick.bind(this),this.onCalendarDateChange=this.onCalendarDateChange.bind(this),this.datePickerSetDateFlag=!1,this.timeButton=null,jasonButtonTextboxUIHelper.call(this,e,t)}function jasonDialog(e,t){this.defaultOptions={height:300,width:400,closeButton:!0,resizeable:!1,draggable:!1,modal:!1,buttons:[],model:null,minWidth:140,minHeight:170,customization:{headerTemplate:null,bodyTemplate:null,dataFieldAttribute:"data-field"}},this._initializeTemplates(t),jasonBaseWidget.call(this,"jasonDialog",e,t,jasonDialogUIHelper)}function jasonDialogUIHelper(e,t){this._onDialogButtonClick=this._onDialogButtonClick.bind(this),this._dialogInCenter=this._dialogInCenter.bind(this),this.resizeEventListenerId=null,this.existingBlockedDialogInstance=null,jasonBaseWidgetUIHelper.call(this,e,t)}function jasonButton(e,t,n,o){jasonBaseWidget.call(this,void 0==n?"jasonButton":n,e,t,void 0==o?jasonButtonUIHelper:o)}function jasonButtonUIHelper(e,t){this.buttonClick=this.buttonClick.bind(this),jasonBaseWidgetUIHelper.call(this,e,t)}function jasonDropDownListButton(e,t){this.defaultOptions={multiSelect:!1,checkboxes:!1,multipleSelectionSeparator:"|"},this.onDataChange=this.onDataChange.bind(this),this.dataSource=new jasonDataSource({data:t.data,onChange:this.onDataChange}),jasonButton.call(this,e,t,"jasonDropDownListButton",jasonDropDownListButtonUIHelper),this.selectedItems=[]}function jasonDropDownListButtonUIHelper(e,t){this.dropDownListContainer=null,this.dropDownList=null,this.onListItemClick=this.onListItemClick.bind(this),this.onListItemKeyDown=this.onListItemKeyDown.bind(this),jwDocumentEventManager.addDocumentEventListener(jw.DOM.events.MOUSE_DOWN_EVENT,this.monitorForDocumentClick.bind(this));var n=this;jwDocumentEventManager.addDocumentEventListener(jw.DOM.events.TOUCH_MOVE_EVENT,function(e){n.hideList()}),jasonButtonUIHelper.call(this,e,t)}function jasonPopover(e){this.defaultOptions={autoPlacement:!0,autoSize:!1,closeButton:!0,position:"top",mode:"popover",arrowPlacement:"middle"};var t=document.createElement("DIV");t.style.display="none",this.toggle=this.toggle.bind(this),jasonBaseWidget.call(this,"jasonPopover",t,e,jasonPopoverUIHelper),"tooltip"!=this.options.mode.toLowerCase()||this.options.targetElement||jw.common.throwError(jw.errorTypes.error,"Popover widget is set to be in tooltip mode but no target element has been defined."),this.arrowSize=7,this._spaceInformation={exceedingLeftPixels:null,exceedingRightPixels:null,exceedingTopPixels:null,exceedingBottomPixels:null,needsResize:!1,canShowOnTop:!1,canShowOnLeft:!1,canShowOnRight:!1,canShowOnBottom:!1,leftForVertical:null,topForHorizontal:null}}function jasonPopoverUIHelper(e,t){jasonBaseWidgetUIHelper.call(this,e,t),this.header=null,this.body=null,this.closeButton=null,this.title=null,"string"==typeof this.options.targetElement&&(this.options.targetElement=document.getElementById(this.options.targetElement)),this.initializeContent(),this.targetElementClientRect=null,this.monitorTargetElement=this.monitorTargetElement.bind(this)}var jasonWidgets={};jw=jasonWidgets,jasonWidgets.common=new jasonCommon,jasonWidgets.enums={},jasonWidgets.jwAngularJSModuleName="jwWidgets",jasonWidgets.enums.dataType={unknown:0,number:1,integer:2,date:3,dateTime:4,"boolean":5,object:6,string:7,currency:8,method:9,array:10},jasonWidgets.enums.comparison={equal:0,firstIsGreater:1,secondIsGreater:2,notEqual:3},jasonWidgets.errorTypes={error:0,evalError:1,rangeError:2,referenceError:3,syntaxError:4,typeError:5,uriError:6},jasonWidgets.DOM={},jasonWidgets.DOM.attributes={COLSPAN_ATTR:"colspan",DRAGGABLE_ATTR:"draggable",HREF_ATTR:"href",INPUT_MODE_ATTR:"inputmode",ID_ATTR:"id",FOR_ATTR:"for",DISABLED_ATTR:"disabled",DATA_FIELD:"data-field",JW_COMBOBOX_LIST_STATE_ATTR:"jw-drop-down-list-state",JW_DATA_CELL_ID_ATTR:"jw-data-cell-id",JW_DATA_GROUPING_FIELD_ATTR:"jw-data-grouping-field",JW_DATA_GROUPING_KEY_ATTR:"jw-data-group-key",JW_DATA_GROUPING_LEVEL_ATTR:"jw-data-grouping-level",JW_DATA_GROUP_COLLAPSED_ATTR:"jw-data-group-collpsed",JW_DATA_GROUP_EXPANDED_ATTR:"jw-data-group-expanded",JW_DATA_JW_ITEM_INDEX_ATTR:"jw-data-item-index",JW_DATA_ROW_ID_ATTR:"jw-data-row-id",JW_DIRECTION_ATTR:"jw-direction",JW_GRID_GROUP_FIELD:"jw-group-field",JW_GRID_COLUMN_ID_ATTR:"jw-column-id",JW_GRID_COLUMN_FIELD_ATTR:"jw-column-field",JW_GRID_COLUMN_SORT_ATTR:"jw-column-sort",JW_ITEM_INDEX_ATTR:"jw-item-index",JW_MENU_ITEM_LEVEL_ATTRIBUTE:"data-jason-menu-item-level",JW_MENU_ITEM_NO_HIGHLIGHT_ATTR:"no-highlight",PATTERN_ATTR:"pattern",PLACEHOLDER_ATTR:"placeholder",READONLY_ATTR:"readonly",TABINDEX_ATTR:"tabindex",TITLE_ATTR:"title",TYPE_ATTR:"type"},jasonWidgets.DOM.events={BLUR_EVENT:"blur",CHANGE_EVENT:"change",CLICK_EVENT:"click",CONTEXT_MENU_EVENT:"contextmenu",DRAG_END_EVENT:"dragend",DRAG_ENTER_EVENT:"dragenter",DRAG_EVENT:"drag",DRAG_EXIT_EVENT:"dragexit",DRAG_OVER_EVENT:"dragover",DRAG_START_EVENT:"dragstart",DROP_EVENT:"drop",FOCUS_EVENT:"focus",INPUT_EVENT:"input",JW_EVENT_JW_CALENDAR_MODE_CHANGE:"onModeChange",JW_EVENT_JW_CALENDAR_NAVIGATE:"onNavigate",JW_EVENT_ON_CHANGE:"onChange",JW_EVENT_ON_BUTTON_CLICK:"onButtonClick",JW_EVENT_ON_COLUMN_POSITION_CHANGE:"onColumnPositionChange",JW_EVENT_ON_COLUMN_RESIZED:"onColumnResize",JW_EVENT_ON_DATA_CHANGE:"onDataChange",JW_EVENT_ON_JW_DIALOG_BUTTON_CLICK:"onDialogButtonClick",JW_EVENT_ON_JW_DIALOG_HIDE:"onDialogHide",JW_EVENT_ON_JW_DIALOG_SHOW:"onDialogShow",JW_EVENT_ON_GROUP_BY_FIELD:"onGroupByField",JW_EVENT_ON_GROUP_COLLAPSE:"onGroupCollapse",JW_EVENT_ON_GROUP_EXPAND:"onGroupExpand",JW_EVENT_ON_JW_MENU_CHECKBOX_CLICKED:"onCheckboxClicked",JW_EVENT_ON_JW_MENU_ITEM_CLICKED:"onItemClick",JW_EVENT_ON_JW_MENU_ITEM_CONTENT_SHOW:"onItemContentShown",JW_EVENT_ON_PAGE_CHANGE:"onPageChange",JW_EVENT_ON_SELECTION_CHANGE:"onSelectionChange",JW_EVENT_ON_SELECT_ITEM:"onSelectItem",JW_EVENT_ON_UNSELECT_ITEM:"onUnSelectItem",JW_EVENT_ON_JW_TAB_ENTER:"onTabEnter",JW_EVENT_ON_UNGROUP_FIELD:"onUnGroupField",JW_EVENT_ON_SHOW:"onShow",JW_EVENT_ON_HIDE:"onHide",JW_EVENT_ON_ELEMENT_RESIZING:"onElementResizing",JW_EVENT_ON_ELEMENT_RESIZED:"onElementResized",KEY_DOWN_EVENT:"keydown",KEY_PRESS_EVENT:"keypress",KEY_UP_EVENT:"keyup",MOUSE_DOWN_EVENT:"mousedown",MOUSE_ENTER_EVENT:"mouseenter",MOUSE_LEAVE_EVENT:"mouseleave",MOUSE_MOVE_EVENT:"mousemove",MOUSE_OUT_EVENT:"mouseout",MOUSE_OVER_EVENT:"mouseover",MOUSE_UP_EVENT:"mouseup",REPAINT_EVENT:"repaint",RESIZE_EVENT:"resize",SCROLL_EVENT:"scroll",TOUCH_CANCEL_EVENT:"touchcancel",TOUCH_END_EVENT:"touchend",TOUCH_EVENT:"touch",TOUCH_MOVE_EVENT:"touchmove",TOUCH_START_EVENT:"touchstart"},jw.DOM.eventCodes={JGE_REDRAW:1e3},jw.DOM.classes={grids:{GRID:"jw-grid-non-tabular",GRID_HEADER:"jw-grid-header",GRID_BODY:"jw-grid-body",GRID_FOOTER:"jw-grid-footer",GRID_COLUMN:"jw-grid-column",GRID_COLUMN_CAPTION:"jw-grid-column-caption",GRID_COLUMN_BUTTON:"jw-grid-column-button",GRID_FILTER:"jw-grid-filter",GRID_GROUPING_CONTAINER:"jw-grid-grouping",GRID_GROUPING_MESSAGE:"jw-grouping-message"},JW_BUTTON:"jw-button",JW_BUTTON_STANDALONE:"standalone",JW_BUTTON_ELEMENT:"jw-button-element",JW_BLOCK_ELEMENT:"jw-block-element",JW_CALENDAR:"jw-calendar",JW_CALENDAR_BODY:"jw-calendar-body",JW_CALENDAR_DISPLAY:"jw-calendar-display",JW_CALENDAR_FOOTER:"jw-calendar-footer",JW_CALENDAR_GO_BACK:"jw-calendar-back",JW_CALENDAR_GO_FORWARD:"jw-calendar-forward",JW_CALENDAR_HEADER:"jw-calendar-header",JW_CALENDAR_ITEM_OUT_CURRENT_SCOPE:"jw-calendar-item-outofscope",JW_CALENDAR_ITEM_SELECTED_DATE:"selected-date",JW_CALENDAR_JW_TABLE_CENTURIES:"centuries-view",JW_CALENDAR_JW_TABLE_DECADES:"decades-view",JW_CALENDAR_JW_TABLE_MONTHS:"month-view",JW_CALENDAR_JW_TABLE_YEARS:"years-view",JW_CHECKBOX_INPUT:"jw-checkbox",JW_CLEAR_FLOAT_CLASS:"jw-clear-float",JW_BORDERED:"jw-bordered",JW_BUTTON_TEXT_BOX:"jw-button-textbox",JW_COMBOBOX_CLASS:"jw-combobox",JW_DATE_PICKER_CLASS:"jw-date-picker",JW_DIALOG_BODY:"jw-dialog-body",JW_DIALOG_BUTTONS_CONTAINER:"jw-dialog-buttons",JW_DIALOG_CONTAINER:"jw-dialog-container",JW_DIALOG_FOOTER:"jw-dialog-footer",JW_DIALOG_HEADER:"jw-dialog-header",JW_DIALOG_TITLE_CONTAINER:"title-container",JW_DIALOG_HEADER_BUTTON_CONTAINER:"header-button-container",JW_DISABLED:"jw-disabled",JW_DRAG_IMAGE:"jw-drag-image-container",JW_DROP_DOWN_LIST:"jw-drop-down-list",JW_DROP_DOWN_LIST_ITEM:"drop-down-list-item",JW_DROP_DOWN_BUTTON_MULTI_SELECT:"jw-drop-down-button-multi-select",JW_FOCUSED:"jw-focused",JW_GRID_CLASS:"jw-grid",JW_GRID_COLUMN_DRAG_IMAGE:"jw-grid-column-drag-image",JW_GRID_COLUMN_RESIZE_HANDLE:"jw-column-resize",JW_GRID_DATA:"jw-grid-data",JW_GRID_DATA_CONTAINER:"jw-grid-data-container",JW_GRID_FIELD_HAS_FILTER:"jw-grid-column-has-filter",JW_GRID_FILTER_ACTION_BUTTON_CLASS:"jw-grid-filter-action-button",JW_GRID_FILTER_BODY_CLASS:"jw-grid-filter-body",JW_GRID_FILTER_CONTAINER_CLASS:"jw-grid-filter-container",JW_GRID_FILTER_FOOTER_CLASS:"jw-grid-filter-footer",JW_GRID_FILTER_HEADER_CLASS:"jw-grid-filter-header",JW_GRID_FILTER_INPUT:"jw-filter-input",JW_GRID_FOCUSED_CELL_CLASS:"cell-focused",JW_GRID_FOOTER:"jw-grid-footer",JW_GRID_FOOTER_CONTAINER:"jw-grid-footer-container",JW_GRID_GROUPING_CONTAINER_CLASS:"jw-grid-group-container",JW_GRID_GROUP_CELL:"group-cell",JW_GRID_GROUP_KEY_CAPTION:"group-key-caption",JW_GRID_GROUPING_MESSAGE:"jw-grouping-message",JW_GRID_HEADER:"jw-grid-header",JW_GRID_HEADER_CELL_CAPTION_CONTAINER:"jw-header-cell-caption",JW_GRID_HEADER_CELL_ICON_CONTAINER:"jw-header-cell-icon",JW_GRID_HEADER_CONTAINER:"jw-grid-header-container",JW_GRID_HEADER_CONTAINER_NO_GROUPING:"no-grouping",JW_GRID_HEADER_JW_TABLE_CONTAINER:"jw-grid-header-table-container",JW_GRID_JW_TABLE_ALT_ROW_CLASS:"row-alt",JW_GRID_JW_TABLE_CELL_CLASS:"jw-grid-cell",JW_GRID_JW_TABLE_CELL_CONTENT_CONTAINER_CLASS:"jw-grid-cell-content",JW_GRID_JW_TABLE_GROUP_ROW_CLASS:"group-row",JW_GRID_JW_TABLE_NO_DATA_ROW_CLASS:"jw-grid-no-data-row",JW_GRID_JW_TABLE_ROW_CLASS:"jw-grid-row",JW_GRID_SELECTED_CELL_CLASS:"cell-selected",JW_GRID_SELECTED_ROW_CLASS:"row-selected",JW_GRID_REMOVE_GROUP_BUTTON:"jw-grid-remove-grouping",JW_GRID_UNSELECTABLE:"unselectable",JW_HAS_ARROW:"has-arrow",JW_HAS_CHECKBOX:"has-checkbox",JW_HAS_ICON:"has-icon",JW_JW_GRID_FILTER_BUTTON_APPLY:"apply-filter",JW_JW_GRID_FILTER_BUTTON_CLEAR:"clear-filter",JW_LABEL:"jw-label",JW_INVALID:"jw-invalid",JW_MENU_CLASS:"jw-menu",JW_MENU_CONTAINER_CLASS:"jw-menu-container",JW_MENU_HORIZONTAL:"horizontal",JW_MENU_VERTICAL:"vertical",JW_MENU_ITEM:"jw-menu-item",JW_MENU_ITEMS_CONTAINER_CLASS:"jw-menu-items-container",JW_MENU_ITEM_ARROW:"jw-menu-item-arrow",JW_MENU_ITEM_CAPTION:"jw-menu-item-caption",JW_MENU_ITEM_CAPTION_ONLY:"just-caption",JW_MENU_ITEM_CHECKBOX:"jw-menu-item-checkbox",JW_MENU_ITEM_CHECKBOX_CLASS:"jw-menu-item-checkbox",JW_MENU_ITEM_CLASS:"jw-menu-item",JW_MENU_ITEM_CLASS_ACTIVE:"jw-menu-item-active",JW_MENU_ITEM_CLICKABLE:"clickable",JW_MENU_ITEM_CONTENT:"menu-content",JW_MENU_ITEM_CONTENT_CLASS:"jw-menu-item-content",JW_MENU_ITEM_DISABLED:"disabled",JW_MENU_ITEM_DIVIDER:"divider",JW_MENU_ITEM_ICON:"jw-menu-item-icon",JW_NUMERIC_TEXT_BOX:"jw-numeric-textbox",JW_PAGER_CONTAINER_CLASS:"jw-grid-pager",JW_PAGER_CONTAINER_PAGE_INFO_CLASS:"jw-grid-pager-info",JW_POPOVER:"jw-popover",JW_POPOVER_HEADER:"jw-popover-header",JW_POPOVER_BODY:"jw-popover-body",JW_READONLY:"jw-readonly",JW_SELECTED:"jw-selected",JW_TAB_CONTAINER:"jw-tabcontrol-container",JW_TAB_PAGE_ACTIVE:"jw-tab-active",JW_TAB_PAGE_CLASS:"jw-tabcontrol-page",JW_TAB_PAGE_CONTAINER:"jw-tabcontrol-page-container",JW_TAB_PAGE_CONTENT_CONTAINER_CLASS:"jw-tabcontrol-page-container",JW_TAB_UL_CLASS:"jw-tabcontrol-list",JW_TEXT_BOX:"jw-textbox",JW_TEXT_INPUT:"jw-text-input",JW_TEXT_OVERFLOW:"jw-text-overflow",JW_TOP:"top",JW_BOTTOM:"bottom",JW_LEFT:"left",JW_RIGHT:"right",JW_MIDDLE:"middle",JW_ARROW_LEFT:"arrow-left",JW_ARROW_RIGHT:"arrow-right",JW_ARROW_MIDDLE:"arrow-middle",JW_UNSELECTABLE_TABLE:"jw-unselectable",JW_VALIDATION:"jw-validation-bubble",JW_VALIDATION_CONTAINER:"jw-validation-container",JW_VALIDATION_MESSAGE_CONTAINER:"jw-validation-message-container",JW_VALIDATION_MESSAGE:"jw-validation-message"},jw.DOM.attributeValues={JW_COMBOBOX_LIST_STATE_DOWN:"down",JW_COMBOBOX_LIST_STATE_UP:"up",JW_DIALOG_BUTTON_DATA_KEY:"jasonDialogButton",JW_MENU_ITEM_DATA_KEY:"jasonMenuItem"};var JW_ICON="jw-icon fa fa-fw ";jw.DOM.icons={CALENDAR:JW_ICON+"fa-calendar",CHEVRON_DOWN:JW_ICON+"fa-chevron-down",CHEVRON_UP:JW_ICON+"fa-chevron-up",CHEVRON_LEFT:JW_ICON+"fa-chevron-left",CHEVRON_RIGHT:JW_ICON+"fa-chevron-right",CIRCLE_ARROW_DOWN:JW_ICON+"fa-chevron-circle-down",CIRCLE_ARROW_UP:JW_ICON+"fa-chevron-circle-up",CIRCLE_ARROW_LEFT:JW_ICON+"fa-chevron-circle-left",CIRCLE_ARROW_RIGHT:JW_ICON+"fa-chevron-circle-right",CIRCLE_CHOOSE:JW_ICON+"fa-check-circle",CIRCLE_MINUS:JW_ICON+"fa-minus-circle",CIRCLE_PLUS:JW_ICON+"fa-plus-circle",CLOCK:JW_ICON+"fa-clock-o",CLOSE:JW_ICON+"fa-close",CLOSE_24x24:JW_ICON+"fa-close",FILTER:JW_ICON+"fa-filter",LIST:JW_ICON+"fa-list",MINUS:JW_ICON+"fa-minus",PLUS:JW_ICON+"fa-plus",REMOVE_SORT:JW_ICON+"fa-trash",REMOVE_FILTER:JW_ICON+"fa-trash",SEARCH:JW_ICON+"fa-search",SETTINGS:JW_ICON+"fa-cog",SIGNAL:JW_ICON+"fa-signal",SORT_ASC:JW_ICON+"fa-sort-amount-asc",SORT_DESC:JW_ICON+"fa-sort-amount-desc",CHEVRON_DOWN16x16:JW_ICON+"fa-chevron-down",CHEVRON_UP16x16:JW_ICON+"fa-chevron-up"},jasonWidgets.keycodes={backspace:8,tab:9,enter:13,shift:16,ctrl:17,alt:18,pause_break:19,caps_lock:20,escape:27,pageUp:33,pageDown:34,end:35,home:36,leftArrow:37,upArrow:38,rightArrow:39,downArrow:40,insert:45,"delete":46,zero:48,one:49,two:50,three:51,four:52,five:53,six:54,seven:55,eight:56,nine:57,A:65,B:66,C:67,D:68,E:69,F:70,G:71,H:72,I:73,J:74,K:75,L:76,M:77,N:78,O:79,P:80,Q:81,R:82,S:83,T:84,U:85,V:86,W:87,X:88,Y:89,Z:90,leftWindowKey:91,righWindowKey:92,selectKey:93,numpad0:96,numpad1:97,numpad2:98,numpad3:99,numpad4:100,numpad5:101,numpad6:102,numpad7:103,numpad8:104,numpad9:105,multiply:106,add:107,subtract:109,decimalPoint:110,divide:11,f1:112,f2:113,f3:114,f4:115,f5:116,f6:117,f7:118,f8:119,f9:120,f10:121,f11:122,f12:123,num_lock:144,scroll_lock:145,semi_colon:186,equal_sign:187,comma:188,dash:189,period:190,forward_slash:191,grave_accent:192,open_bracket:219,back_slash:220,close_bracket:221,single_quote:222},jw.htmlFactory=new jasonHTMLFactory,jasonBaseWidget.prototype.initialize=function(){if(this.options.validation)for(var e=0;e<=this.options.validation.length-1;e++){var t=this.options.validation[e];t.widget=this;var n=new jasonValidationRule(this.options.validation[e]);this._validationRules.push(n);var o=new jasonValidationRuleGroup(this.options.validation[e].ruleGroup);n.ruleGroup=o.name,jw.validationManager.addValidationGroup(o),jw.validationManager.addValidationRule(n)}},jasonBaseWidget.prototype.createEventNameSpace=function(e){return e+"."+this.nameSpace},jasonBaseWidget.prototype.addBaseClassName=function(e){e.classList.add(this.baseClassName)},jasonBaseWidget.prototype.addEventListener=function(e,t,n){"function"==typeof t&&this._eventListeners.push({eventName:e,listener:t,callingContext:n,enabled:!0})},jasonBaseWidget.prototype.destroy=function(){this.ui.clearUI()},jasonBaseWidget.prototype.createElement=function(e,t){return this.ui.createElement(e,t)},jasonBaseWidget.prototype.jwProc=function(e,t){switch(e){case jw.DOM.eventCodes.JGE_REDRAW:this.ui.renderUI()}},jasonBaseWidget.prototype.triggerEvent=function(e,t,n){for(var o=this._eventListeners.filter(function(t){return t.eventName==e&&t.listener&&t.enabled}),i=0;i<=o.length-1;i++){var s=o[i];s.callingContext?s.listener.call(s.callingContext,this,t):s.listener(this,t)}void 0!=n&&n()},jasonBaseWidget.prototype.enableEventListeners=function(e){this._eventListeners.forEach(function(t){t.enabled=e})},jasonBaseWidget.prototype.updateOptions=function(e){},jasonBaseWidget.prototype.validate=function(){if(!this.readonly&&this.enabled&&this._validationRules.length>0){for(var e=!1,t=0;t<=this._validationRules.length-1&&(e=this._validationRules[t].validate(),e);t++);e?this.htmlElement.classList.remove(jw.DOM.classes.JW_INVALID):this.htmlElement.classList.add(jw.DOM.classes.JW_INVALID)}},Object.defineProperty(jasonBaseWidget.prototype,"enabled",{get:function(){return this._enabled},set:function(e){this._enabled=e,this.ui._setEnable(this._enabled)},enumerable:!0,configurable:!1}),Object.defineProperty(jasonBaseWidget.prototype,"visible",{get:function(){return this._visible},set:function(e){this._visible=e,this.ui._setVisible(this._visible)},enumerable:!0,configurable:!1}),Object.defineProperty(jasonBaseWidget.prototype,"readonly",{get:function(){return this._readonly},set:function(e){this._readonly=e,this.ui._setReadOnly(this._readonly)},enumerable:!0,configurable:!1}),Object.defineProperty(jasonBaseWidgetUIHelper.prototype,"options",{get:function(){return this.widget.options},enumerable:!1,configurable:!1}),Object.defineProperty(jasonBaseWidgetUIHelper.prototype,"eventManager",{get:function(){return this.widget.eventManager},enumerable:!1,configurable:!1}),jasonBaseWidgetUIHelper.prototype.initialize=function(){this.initializeTemplates(),this.renderUI(),this.initializeEvents()},jasonBaseWidgetUIHelper.prototype.initializeEvents=function(){},jasonBaseWidgetUIHelper.prototype.initializeTemplates=function(){},jasonBaseWidgetUIHelper.prototype.createElement=function(e,t){var n=document.createElement(e);return 1==t&&this.createdElements.push(n),n},jasonBaseWidgetUIHelper.prototype.createTextNode=function(e,t){var n=document.createTextNode(e);return 1==t&&this.createdElements.push(n),n},jasonBaseWidgetUIHelper.prototype.createWidgetContainer=function(e){e=e?e:"div";var t=this.createElement(e);return t.classList.add(this.widget.baseClassName),t},jasonBaseWidgetUIHelper.prototype.renderUI=function(){},jasonBaseWidgetUIHelper.prototype.clearUI=function(){if(this.htmlElement){var e=this.htmlElement.parent;e.removeChild(this.htmlElement),this.createdElements=[]}},jasonBaseWidgetUIHelper.prototype.localizeStrings=function(e){},jasonBaseWidgetUIHelper.prototype.updateEnabled=function(e){},jasonBaseWidgetUIHelper.prototype.updateVisible=function(e){},jasonBaseWidgetUIHelper.prototype.updateReadOnly=function(e){},jasonBaseWidgetUIHelper.prototype._setEnable=function(e){this.htmlElement&&(e?this.htmlElement.classList.remove(jw.DOM.classes.JW_DISABLED):this.htmlElement.classList.add(jw.DOM.classes.JW_DISABLED),this.updateEnabled(e))},jasonBaseWidgetUIHelper.prototype._setVisible=function(e){this.htmlElement&&(e?this.htmlElement.style.display="":this.htmlElement.style.display="none",this.updateVisible(e))},jasonBaseWidgetUIHelper.prototype._setReadOnly=function(e){this.htmlElement&&(e?this.htmlElement.classList.add(jw.DOM.classes.JW_READONLY):this.htmlElement.classList.remove(jw.DOM.classes.JW_READONLY),this.updateReadOnly(e))},jw.data={},jw.data.map=function(e,t){var n=new jw_Map;if(e instanceof jw_Map)e.forEach(function(e,t){n.set(e,t)});else if(Array.isArray(e)){var o,i=-1,s=e.length;if(1===arguments.length)for(;++i<s;)n.set(i,e[i]);else for(;++i<s;)n.set(t.call(e,o=e[i],i),o)}else for(var a in e)n.set(a,e[a]);return n};var jw_map_proto="__proto__",jw_map_zero="\0";jw_class(jw_Map,{has:jw_map_has,get:function(e){return this._[jw_map_escape(e)]},set:function(e,t){return this._[jw_map_escape(e)]=t},remove:jw_map_remove,keys:jw_map_keys,values:function(){var e=[];for(var t in this._)e.push(this._[t]);return e},entries:function(){var e=[];for(var t in this._)e.push({key:jw_map_unescape(t),value:this._[t]});return e},size:jw_map_size,empty:jw_map_empty,forEach:function(e){for(var t in this._)e.call(this,jw_map_unescape(t),this._[t])}}),jw.data.nest=function(){function e(t,a,r){if(r>=s.length)return o?o.call(i,a):n?a.sort(n):a;for(var l,d,u,h,c=-1,p=a.length,m=s[r++],g=new jw_Map;++c<p;)d=a[c],l=m.field?d[m.field]:m.callBack(d),(h=g.get(l))?h.push(d):g.set(l,[d]);return t?(d=t(),u=function(n,o){d.set(n,e(t,o,r))}):(d={},u=function(n,o){d[n]=e(t,o,r)}),g.forEach(u),d}function t(e,n){if(n>=s.length)return e;var o=[],i=a[n++];return e.forEach(function(e,i){o.push({key:e,values:t(i,n),level:n-1})}),i?o.sort(function(e,t){return i(e.key,t.key)}):o}var n,o,i={},s=[],a=[];return i.map=function(t,n){return e(n,t,0)},i.entries=function(n){return t(e(jw.data.map,n,0),0)},i.key=function(e,t){return s.push({callBack:e,field:t}),i},i.sortKeys=function(e){return a[s.length-1]=e,i},i.sortValues=function(e){return n=e,i},i.rollup=function(e){return o=e,i},i},jasonDataSource.prototype.setData=function(e){this.data=e,this.processData(),this.options.onChange&&this.options.onChange()},jasonDataSource.prototype.datesAreEqual=function(e,t){return jw.common.dateComparison(e,t)==jw.enums.comparison.equal},jasonDataSource.prototype.datesAreNotEqual=function(e,t){return!this.datesAreEqual(e,t)},jasonDataSource.prototype.valuesAreEqual=function(e,t){return t==e},jasonDataSource.prototype.valuesAreNotEqual=function(e,t){return!this.valuesAreEqual(e,t)},jasonDataSource.prototype.valueIsLessThan=function(e,t){return e<t},jasonDataSource.prototype.valueIsLessEqualThan=function(e,t){return e<=t},jasonDataSource.prototype.valueIsGreaterThan=function(e,t){return e>t},jasonDataSource.prototype.valueIsGreaterEqualThan=function(e,t){return e>=t},jasonDataSource.prototype.valueStartsWith=function(e,t){return 0==e.indexOf(t)},jasonDataSource.prototype.valueEndsWith=function(e,t){var n=e.length-t.length;return e.indexOf(t,n)==n},jasonDataSource.prototype.valueContains=function(e,t){return e.indexOf(t)>=0},jasonDataSource.prototype.processData=function(e){var t=e?e:this.data;if(t)for(var n=null,o=0;o<=t.length-1;o++)n=t[o],"object"==typeof n&&(n._jwRowId=o)},jasonDataSource.prototype.defaultSortComparison=function(e,t){return e==t?0:e<t?-1:1},jasonDataSource.prototype.dataTypeSortComparison=function(e,t){var n=this.defaultSortComparison,o=n;return e&&(o=function(t,o){return n(e(t),e(o))}),1==t?function(e,t){return-1*o(e,t)}:o},jasonDataSource.prototype.addSorting=function(e,t){t=void 0==t||t;var n=this.sorting.filter(function(t){return t.name==e.name})[0];if(n?n.reverse=e.reverse:this.sorting.push(e),1==t)return this.sort(this.sorting,this.currentDataView)},jasonDataSource.prototype.removeSorting=function(e){var t=this.sorting.filter(function(e){return e.name==sortingConfiguration.name})[0];if(t){var n=this.sorting.indexOf(t);this.sorting.splice(n,1),0==this.sorting.length?this.currentDataView=[].concat(this.data):this.applySort()}},jasonDataSource.prototype.applySort=function(){this.sort()},jasonDataSource.prototype.clearSorting=function(){this.sorting=[],0==this.filters.length?this.currentDataView=[].concat(this.data):this.applyFilters()},jasonDataSource.prototype.sort=function(e,t){var n,o,i,s=t?t:[].concat(this.data),a=[];if(e)for(var r=0;r<=e.length-1;r++)"string"==typeof e[r]&&this.addSorting(e[r],!1);for(var r=0;r<=this.sorting.length-1;r++)n=this.sorting[r],"string"==typeof n?(o=n,i=default_cmp):(o=n.name,i=this.dataTypeSortComparison(n.primer,n.reverse)),a.push({name:o,compare:i});var l=s.sort(function(e,t){for(var i,s=0;s<=a.length-1&&(i=0,n=a[s],o=n.name,i=n.compare(e[o],t[o]),0===i);s++);return i});return this.currentDataView=[].concat(l),this.currentDataView},jasonDataSource.prototype.filter=function(e,t,n,o){var i=n?n:this.data,s=[];o=!!jasonWidgets.common.assigned(o)&&o;for(var a=0;a<=e.length-1;a++){var r=e[a].filterClause,l=null;if(r){switch(r.symbol){case"=":l=jw.common.getVariableType(e[a].value)==jw.enums.dataType.date?this.datesAreEqual:this.valuesAreEqual;break;case">":l=this.valueIsGreaterThan;break;case"<":l=this.valueIsLessThan;break;case">=":l=this.valueIsGreaterEqualThan;break;case"<=":l=this.valueIsLessEqualThan;break;case"!=":l=jw.common.getVariableType(e[a].value)==jw.enums.dataType.date?this.datesAreNotEqual:this.valuesAreNotEqual;break;case"startsWith":l=this.valueStartsWith;break;case"endsWith":l=this.valueEndsWith;break;case"contains":l=this.valueContains}e[a].evaluator=l}}for(var d=!1,a=0;a<=i.length-1;a++){var u=i[a],h=u[t];"string"==typeof h&&(h=o?h:h.toLowerCase());for(var c=0;c<=e.length-1;c++){var p=e[c],m=p.value;"string"==typeof m&&(m=o?m:m.toLowerCase());var g=e[c-1];if(g){if(void 0==m)break;var _=g.logicalOperator?g.logicalOperator.operator:"or";switch(_){case"and":d=d&&p.evaluator(h,m);break;case"or":d=d||p.evaluator(h,m)}}else p.evaluator&&(d=p.evaluator(h,m))}d&&(s.push(u),d=!1)}return this.currentDataView=[].concat(s),this.currentDataView},jasonDataSource.prototype.addFilter=function(e,t,n){n=void 0!=n&&n;var o=this.filters.filter(function(t){return t.filterField==e})[0],i=this.data;if(o?o.filterValues=t:(o={filterValues:t,filterField:e},this.filters.push(o)),n)return this.filter(t,e,i)},jasonDataSource.prototype.removeFilter=function(e){var t=-1,n=this.filters.filter(function(n,o){var i=n.filterField==e;if(i)return t=o,n})[0];if(n&&this.filters.splice(t,1),this.filters.length>0){this.currentDataView=[].concat(this.data);for(var o=0;o<=this.filters.length-1;o++){var i=this.filters[o];this.filter(i.filterValues,i.filterField,this.currentDataView)}}else this.currentDataView=[].concat(this.data)},jasonDataSource.prototype.applyFilters=function(){for(var e,t=0;t<=this.filters.length-1;t++){var n=this.filters[t];e=0==t?this.filter(n.filterValues,n.filterField,this.data):this.filter(n.filterValues,n.filterField,e)}return this.currentDataView},jasonDataSource.prototype.clearFilters=function(){this.filters=[],0==this.sorting.length?this.currentDataView=[].concat(this.data):this.sort()},jasonDataSource.prototype.search=function(e,t,n){var o=t?t:[].concat(this.data),i=[];e=n?e:e.toLowerCase();for(var s=0;s<=o.length-1;s++){var a=o[s];for(var r in a)if("string"==typeof a[r]){var l=a[r].toLowerCase();if(l.indexOf(e)>=0){i.push(a);break}}}return this.currentDataView=[].concat(i),this.currentDataView},jasonDataSource.prototype.searchByField=function(e,t,n,o,i){void 0==o&&(o=!1),void 0==i&&(i=!0);var s=n?n:[].concat(this.data),a=[];e.forEach(function(t,n){e[n]=o?t:t.toLowerCase()});for(var r=0;r<=s.length-1;r++){var l=s[r];if("string"==typeof l){var d=o?l:l.toLowerCase();d.indexOf(e[0])>=0&&a.push(l)}else{void 0===t&&jw.common.throwError(jw.errorTypes.referenceError,"Search fields are not defined");for(var u=null,h=0;h<=t.length-1;h++)if("string"==typeof l[t[h]]){var d=o?d:l[t[h]].toLowerCase();i?null==u?u=d.indexOf(e[h])>=0:void 0!=e[h]&&(u=u&&d.indexOf(e[h])>=0):d.indexOf(e[h])>=0&&a.push(l)}i&&u&&a.push(l)}}return this.currentDataView=[].concat(a),this.currentDataView},jasonDataSource.prototype.groupByField=function(e,t,n){var o=(t?t:[].concat(this.data),this.groupingExists(e));if(this.groupedData=[],!o){var i={field:e,level:this.grouping.length};this.grouping.push(i)}n&&this.groupData()},jasonDataSource.prototype.groupData=function(e){var t=e?e:[].concat(this.data);this.grouperDataSource||(this.grouperDataSource=new jasonDataSource({data:t})),this.grouperDataSource.clearSorting(),this.grouperDataSource.setData(t);for(var n=0;n<=this.grouping.length-1;n++){var o=this.grouping[n];this.grouperDataSource.addSorting({name:o.field,reverse:!1},!1)}t=this.grouperDataSource.sort();for(var i=this,s=new jw.data.nest,n=0;n<=this.grouping.length-1;n++)s.key(null,i.grouping[n].field);return s.entries(t)},jasonDataSource.prototype.groupingExists=function(e){return this.grouping.filter(function(t){return t.field==e}).length>0},jasonDataSource.prototype.removeGrouping=function(e){var t=-1;this.grouping.filter(function(n,o){if(n.field==e.field)return t=o,!0})[0],this.grouping.splice(t,1),this.groupData()},jasonDataSource.prototype.range=function(e,t){var n=this.currentDataView.slice(e,t+1);return this.grouping.length>0&&(n=this.groupData(n)),n};var jwDocumentEventManager=function(){var e=[],t=[];return{addDocumentEventListener:function(n,o){var i=t.filter(function(e){return e.event==n})[0],s={event:n,listener:o,enabled:!0,uid:jw.common.generateUUID()};return e.push(s),i||(t.push(s),document.addEventListener(n,function(t){for(var n=0;n<=e.length-1;n++)e[n].event==t.type&&e[n].enabled&&e[n].listener(t)})),e[e.length-1].uid},removeDocumentEventListener:function(t){for(var n=0;n<=e.length-1;n++)if(e[n].uid.toLowerCase()==t.toLowerCase()){document.removeEventListener(e[n].event,e[n].listener);
break}e.splice(n,1)},enableEventListeners:function(t){e.forEach(function(e){e.enabled=t})}}}(),jwWindowEventManager=function(){var e=[],t=[],n=!1,o=null,i=function(){var t=e.filter(function(e){return"resize"==e.event.toLowerCase()});t.forEach(function(e){e.listener(o)}),n=!1},s=function(){var t=e.filter(function(e){return"repaint"==e.event.toLowerCase()});t.forEach(function(e){e.listener(o)}),n=!1},a=function(e){n||(n=!0),o=e,window.requestAnimationFrame(i)},r=function(e){n||(n=!0),o=e,window.requestAnimationFrame(s),window.requestAnimationFrame(r)};return{addWindowEventListener:function(n,o,i){var s=t.filter(function(e){return e.event==n})[0],l={event:n,listener:o,enabled:!0,uid:jw.common.generateUUID()};return e.push(l),s||(t.push(l),"resize"==n.toLowerCase()||"repaint"==n.toLowerCase()?"resize"==n.toLowerCase()?window.addEventListener(n,a,i):window.requestAnimationFrame(r):window.addEventListener(n,function(t){for(var n=0;n<=e.length-1;n++)e[n].event==t.type&&e[n].enabled&&e[n].listener(t)},i)),e[e.length-1].uid},removeWindowEventListener:function(t){for(var n=0;n<=e.length-1;n++)if(e[n].uid.toLowerCase()==t.toLowerCase()){window.removeEventListener(e[n].event,e[n].listener);break}e.splice(n,1)},enableEventListeners:function(t){e.forEach(function(e){e.enabled=t})}}}();jasonWidgets.localizationManager=new jasonLocalizationManager,jasonElementResizer.prototype=Object.create(jasonBaseWidget.prototype),jasonElementResizer.prototype.constructor=jasonElementResizer,jasonElementResizer.prototype._startResize=function(){this._resizing=this._mousePositionInfo.canResize,this.triggerEvent(jw.DOM.events.JW_EVENT_ON_ELEMENT_RESIZING,this.htmlElement)},jasonElementResizer.prototype._stopResize=function(){this._resizing&&(this._resizing=!1,this.triggerEvent(jw.DOM.events.JW_EVENT_ON_ELEMENT_RESIZED,this.htmlElement))},jasonElementResizer.prototype._onMouseMove=function(e){this._mouseMoveEvent=e,this._mouseMoving=!0,clearTimeout(this._mouseMoveTimer),this._mouseMoveTimer=setTimeout(function(){this._mouseMoving=!1}.bind(this),50),setTimeout(function(){this._redrawing=!0}.bind(this))},jasonElementResizer.prototype._onElementMouseMove=function(e){this._resizing||this._updateCursor(e)},jasonElementResizer.prototype._onElementMouseDown=function(e){this._mousePositionInfo.canResize&&(this._startX=e.clientX,this._startY=e.clientY,this._startResize(),this._resizeElement())},jasonElementResizer.prototype._onMouseUp=function(e){this._stopResize()},jasonElementResizer.prototype._onTouchStart=function(e){this._startResize()},jasonElementResizer.prototype._onTouchMove=function(e){this._mouseMoveEvent=e.touches[0]},jasonElementResizer.prototype._onTouchEnd=function(e){0==e.touches.length&&this._stopResize()},jasonElementResizer.prototype._updateElementRight=function(e,t){this.htmlElement.style.width=e+"px"},jasonElementResizer.prototype._updateElementHeight=function(e){this.htmlElement.style.height=e+"px"},jasonElementResizer.prototype._updateElementLeft=function(e,t){this.htmlElement.style.width=t+"px",this.htmlElement.style.left=e+"px"},jasonElementResizer.prototype._updateElementTop=function(e,t){this.htmlElement.style.height=t+"px",this.htmlElement.style.top=e+"px"},jasonElementResizer.prototype._resizeElement=function(e){if(this._resizing&&window.requestAnimationFrame(this._resizeElement),this.enabled&&this._resizing&&this._mouseMoving){var t=0,n=0,o=0,i=0,s=0,a=0;this._mousePositionInfo.onRightEdge&&this.options.allowResize.right&&(t=this._mouseMoveEvent.clientX-this._startX,o=this._mousePositionInfo.elementRect.width+t,o>=this.options.minWidth&&this._updateElementRight(o,t)),this._mousePositionInfo.onLeftEdge&&this.options.allowResize.left&&(t=this._mouseMoveEvent.clientX-this._startX,o=this._mousePositionInfo.elementRect.width-t,i=this._mousePositionInfo.elementRect.left+t,o>=this.options.minWidth&&this._updateElementLeft(i,o)),this._mousePositionInfo.onTopEdge&&this.options.allowResize.top&&(n=this._mouseMoveEvent.clientY-this._startY,a=this._mousePositionInfo.elementRect.height-n,s=this._mousePositionInfo.elementRect.top+n,a>=this.options.minHeight&&this._updateElementTop(s,a)),this._mousePositionInfo.onBottomEdge&&this.options.allowResize.bottom&&(n=this._mouseMoveEvent.clientY-this._startY,a=this._mousePositionInfo.elementRect.height+n,a>=this.options.minHeight&&this._updateElementHeight(a))}},jasonElementResizer.prototype._updateCursor=function(e){if(e){this.update_mousePositionInfo(e);var t="default";(this._mousePositionInfo.onLeftEdge||this._mousePositionInfo.onRightEdge)&&(t="ew-resize"),(this._mousePositionInfo.onTopEdge||this._mousePositionInfo.onBottomEdge)&&(t="ns-resize"),this.htmlElement.style.cursor=t}},jasonElementResizer.prototype.update_mousePositionInfo=function(e){var t=this.htmlElement.getBoundingClientRect();this._mousePositionInfo.elementRect=t,this._mousePositionInfo.mousePixelsDifferenceLeft=Math.abs(e.clientX-t.left),this._mousePositionInfo.mousePixelsDifferenceTop=Math.abs(e.clientY-t.top),this._mousePositionInfo.mousePixelsDifferenceBottom=Math.abs(e.clientY-t.bottom),this._mousePositionInfo.mousePixelsDifferenceRight=Math.abs(e.clientX-t.right),this._mousePositionInfo.onTopEdge=this._mousePositionInfo.mousePixelsDifferenceTop<=this.options.margins&&this.options.allowResize.top,this._mousePositionInfo.onLeftEdge=this._mousePositionInfo.mousePixelsDifferenceLeft<=this.options.margins&&this.options.allowResize.left,this._mousePositionInfo.onBottomEdge=this._mousePositionInfo.mousePixelsDifferenceBottom<=this.options.margins&&this.options.allowResize.bottom,this._mousePositionInfo.onRightEdge=this._mousePositionInfo.mousePixelsDifferenceRight<=this.options.margins&&this.options.allowResize.right,this._mousePositionInfo.canResize=this._mousePositionInfo.onTopEdge||this._mousePositionInfo.onLeftEdge||this._mousePositionInfo.onBottomEdge||this._mousePositionInfo.onRightEdge},jasonElementResizer.prototype._initializeEvents=function(){this.htmlElement.addEventListener(jw.DOM.events.MOUSE_MOVE_EVENT,this._onElementMouseMove),this.htmlElement.addEventListener(jw.DOM.events.MOUSE_DOWN_EVENT,this._onElementMouseDown),jwWindowEventManager.addWindowEventListener(jw.DOM.events.MOUSE_UP_EVENT,this._onMouseUp),jwWindowEventManager.addWindowEventListener(jw.DOM.events.MOUSE_MOVE_EVENT,this._onMouseMove),jwWindowEventManager.addWindowEventListener(jw.DOM.events.TOUCH_END_EVENT,this._onTouchEnd)},jasonElementResizer.prototype.destroy=function(){this.htmlElement.removeEventListener(jw.DOM.events.MOUSE_MOVE_EVENT,this._onElementMouseMove),this.htmlElement.removeEventListener(jw.DOM.events.MOUSE_DOWN_EVENT,this._onElementMouseDown),jwWindowEventManager.removeWindowEventListener(jw.DOM.events.MOUSE_UP_EVENT,this._onMouseUp),jwWindowEventManager.removeWindowEventListener(jw.DOM.events.MOUSE_MOVE_EVENT,this._onMouseMove),jwWindowEventManager.removeWindowEventListener(jw.DOM.events.TOUCH_END_EVENT,this._onTouchEnd)},jasonElementDragger.prototype=Object.create(jasonBaseWidget.prototype),jasonElementDragger.prototype.constructor=jasonElementDragger,jasonElementDragger.prototype._initializeEvents=function(){jwWindowEventManager.addWindowEventListener(jw.DOM.events.MOUSE_UP_EVENT,this._onMouseUp),jwWindowEventManager.addWindowEventListener(jw.DOM.events.TOUCH_END_EVENT,this._onTouchEnd),jwWindowEventManager.addWindowEventListener(jw.DOM.events.MOUSE_MOVE_EVENT,this._onWindowMouseMove),this.htmlElement.addEventListener(jw.DOM.events.MOUSE_DOWN_EVENT,this._onMouseDown),this.htmlElement.addEventListener(jw.DOM.events.MOUSE_MOVE_EVENT,this._onMouseMove)},jasonElementDragger.prototype._onWindowMouseMove=function(e){this._mouseMoveEvent=e},jasonElementDragger.prototype._onMouseMove=function(e){this.options.changeCursor&&(this.htmlElement.style.cursor="move")},jasonElementDragger.prototype._onMouseDown=function(e){0==e.button&&(this._elementRect=this.htmlElement.getBoundingClientRect(),this._dragging=!0,this._startX=e.clientX,this._startY=e.clientY,this._mouseMoveEvent=e,this._dragElement())},jasonElementDragger.prototype._onMouseUp=function(e){this._dragging&&(this._dragging=!1,e.preventDefault(),e.stopPropagation(),this.triggerEvent(jw.DOM.events.DRAG_OVER_EVENT,e))},jasonElementDragger.prototype._onTouchEnd=function(e){this._onMouseUp(e)},jasonElementDragger.prototype.destroy=function(){jwWindowEventManager.removeWindowEventListener(jw.DOM.events.MOUSE_UP_EVENT,this._onMouseUp),jwWindowEventManager.removeWindowEventListener(jw.DOM.events.TOUCH_END_EVENT,this._onTouchEnd),jwWindowEventManager.removeWindowEventListener(jw.DOM.events.MOUSE_MOVE_EVENT,this._onWindowMouseMove),this.htmlElement.removeEventListener(jw.DOM.events.MOUSE_DOWN_EVENT,this._onMouseDown),this.htmlElement.removeEventListener(jw.DOM.events.MOUSE_MOVE_EVENT,this._onMouseMove)},jasonElementDragger.prototype._dragElement=function(){if(this._dragging&&this.enabled){window.requestAnimationFrame(this._dragElement);var e=this._elementRect.left+(this._mouseMoveEvent.clientX-this._startX),t=this._elementRect.top+(this._mouseMoveEvent.clientY-this._startY);this.htmlElement.style.left=e+"px",this.htmlElement.style.top=t+"px"}},jasonBlockUI.prototype.block=function(e){this.blockElement.parentNode&&this.blockElement.parentNode.removeChild(this.blockElement);var t={left:0,top:0};e&&"absolute"!=jw.common.getComputedStyleProperty(e,"position")&&(t=jw.common.getOffsetCoordinates(e));var n=e?e:document.getElementsByTagName("html")[0];n.parentNode.appendChild(this.blockElement),this.blockTarget=n,this.blockElement.style.height=n.offsetHeight+"px",this.blockElement.style.width=n.offsetWidth+"px",this.blockElement.style.top=n.offsetTop+"px",this.blockElement.style.left=n.offsetLeft+"px",this.blockElement.style.zIndex=jw.common.getNextZIndex(),this.blockElement.style.display="",this.addWindowEvents()},jasonBlockUI.prototype.unBlock=function(){this.blockElement.style.display="none",this.removeWindowEvents()},jasonBlockUI.prototype.addWindowEvents=function(){this.options.blockKeyboard&&(this.keydownListenerId=jwWindowEventManager.addWindowEventListener(jw.DOM.events.KEY_DOWN_EVENT,this.handleWindowsKeyDown),this.focusListenerId=jwWindowEventManager.addWindowEventListener(jw.DOM.events.FOCUS_EVENT,this.handleWindowsFocus))},jasonBlockUI.prototype.removeWindowEvents=function(){this.options.blockKeyboard&&(jwWindowEventManager.removeWindowEventListener(this.keydownListenerId),jwWindowEventManager.removeWindowEventListener(this.focusListenerId))},jasonBlockUI.prototype.handleWindowsKeyDown=function(e){if(0!=this.options.active){var t=!jw.common.contains(this.nonBlockElement,e.target);if(t){var n=jw.common.getFirstFocusableElement(this.nonBlockElement);n&&n.focus(),e.preventDefault(),e.stopPropagation()}}},jasonBlockUI.prototype.handleWindowsFocus=function(e){if(""==this.blockElement.style.display){var t=!jw.common.contains(this.nonBlockElement,e.target);if(t){var n=jw.common.getFirstFocusableElement(this.nonBlockElement);n&&n.focus(),e.preventDefault(),e.stopPropagation()}}},jw.validationManager=function(){var e=[];return{validationGroups:e,validate:function(t){if(t){var n=e.filter(function(e){return t==e.name});n&&n.validate()}else e.forEach(function(e){e.validate()})},addValidationGroup:function(t){var n=e.filter(function(e){return t.name==e.name})[0];n||e.push(t)},addValidationRule:function(t){var n=e.filter(function(e){return t.ruleGroup==e.name})[0];n&&n.rules.push(t)}}}(),jasonWidgetLanguageEL.prototype=Object.create(jasonWidgetLanguage.prototype),jasonWidgetLanguageEL.prototype.constructor=jasonWidgetLanguageEL,jasonWidgets.localizationManager.languages.el=new jasonWidgetLanguageEL,jasonWidgetLanguageEN.prototype=Object.create(jasonWidgetLanguage.prototype),jasonWidgetLanguageEN.prototype.constructor=jasonWidgetLanguageEN,jasonWidgets.localizationManager.languages["en-US"]=new jasonWidgetLanguageEN,jasonWidgetLanguageES.prototype=Object.create(jasonWidgetLanguage.prototype),jasonWidgetLanguageES.prototype.constructor=jasonWidgetLanguageES,jasonWidgets.localizationManager.languages.es=new jasonWidgetLanguageES,jasonWidgetLanguageIT.prototype=Object.create(jasonWidgetLanguage.prototype),jasonWidgetLanguageIT.prototype.constructor=jasonWidgetLanguageIT,jasonWidgets.localizationManager.languages.it=new jasonWidgetLanguageIT,jasonWidgetCultureEL.prototype=Object.create(jasonWidgetCulture.prototype),jasonWidgetCultureEL.prototype.constructor=jasonWidgetCultureEL,jasonWidgets.localizationManager.cultures.el=new jasonWidgetCultureEL,jasonWidgetCultureEN_US.prototype=Object.create(jasonWidgetCulture.prototype),jasonWidgetCultureEN_US.prototype.constructor=jasonWidgetCultureEN_US,jasonWidgets.localizationManager.cultures["en-US"]=new jasonWidgetCultureEN_US,jasonWidgetCultureES.prototype=Object.create(jasonWidgetCulture.prototype),jasonWidgetCultureES.prototype.constructor=jasonWidgetCultureES,jasonWidgets.localizationManager.cultures.es=new jasonWidgetCultureES,jasonWidgetCultureIT.prototype=Object.create(jasonWidgetCulture.prototype),jasonWidgetCultureIT.prototype.constructor=jasonWidgetCultureIT,jasonWidgets.localizationManager.cultures.it=new jasonWidgetCultureIT,jasonTextbox.prototype=Object.create(jasonBaseWidget.prototype),jasonTextbox.prototype.constructor=jasonTextbox,Object.defineProperty(jasonTextbox.prototype,"value",{get:function(){return this.readValue(this._value)},set:function(e){this.compareValue(e)!=jw.enums.comparison.equal?(this._value=this.setValue(e),this.ui.inputControl.value=this.formatValue(this._value),this.ui.inputControl.setAttribute(jw.DOM.attributes.TITLE_ATTR,this.ui.inputControl.value),this.validate(),this.triggerEvent(jw.DOM.events.JW_EVENT_ON_CHANGE,this._value)):this.ui.inputControl.value=this.formatValue(this._value)},enumerable:!0,configurable:!0}),jasonTextbox.prototype.readValue=function(e){return e},jasonTextbox.prototype.formatValue=function(e){return e},jasonTextbox.prototype.compareValue=function(e){return jw.common.stringComparison(this._value,e)},jasonTextbox.prototype.setValue=function(e){return e},jasonTextbox.prototype.updateOptions=function(e){e?e:this.options;this.inputControl.setAttribute(jw.DOM.attributes.TITLE,updateOptions.placeholder)},jasonTextboxUIHelper.prototype=Object.create(jasonBaseWidgetUIHelper.prototype),jasonTextboxUIHelper.prototype.constructor=jasonTextboxUIHelper,jasonTextboxUIHelper.prototype.renderUI=function(){this.htmlElement.classList.contains(jw.DOM.classes.JW_TEXT_BOX)||(this.htmlElement.classList.add(jw.DOM.classes.JW_TEXT_BOX),this.inputControl=jw.htmlFactory.createJWTextInput(null,this.widget.options.placeholder,this.widget.readonly),this.htmlElement.appendChild(this.inputControl))},jasonTextboxUIHelper.prototype.initializeEvents=function(){this.eventManager.addEventListener(this.inputControl,jw.DOM.events.BLUR_EVENT,this.onTextInputBlur,!0),this.eventManager.addEventListener(this.inputControl,jw.DOM.events.FOCUS_EVENT,this.onTextInputFocus,!0)},jasonTextboxUIHelper.prototype.onTextInputBlur=function(e,t){"jasonTextbox"!=this.widget.nameSpace&&"jasonButtonTextbox"!=this.widget.nameSpace||(this.widget.value=this.inputControl.value),this.htmlElement.classList.remove(jw.DOM.classes.JW_FOCUSED)},jasonTextboxUIHelper.prototype.onTextInputFocus=function(e,t){this.htmlElement.classList.add(jw.DOM.classes.JW_FOCUSED)},jasonTextboxUIHelper.prototype.updateEnabled=function(e){jasonBaseWidgetUIHelper.prototype.updateEnabled.call(this,e),e?this.inputControl.removeAttribute(jw.DOM.attributes.DISABLED_ATTR):this.inputControl.setAttribute(jw.DOM.attributes.DISABLED_ATTR,!0)},jasonTextboxUIHelper.prototype.updateVisible=function(e){jasonBaseWidgetUIHelper.prototype.updateVisible.call(this,e)},jasonTextboxUIHelper.prototype.updateReadOnly=function(e){jasonBaseWidgetUIHelper.prototype.updateReadOnly.call(this,e),e?this.inputControl.setAttribute(jw.DOM.attributes.READONLY_ATTR,!0):this.inputControl.removeAttribute(jw.DOM.attributes.READONLY_ATTR)},jasonButtonTextbox.prototype=Object.create(jasonTextbox.prototype),jasonButtonTextbox.prototype.constructor=jasonButtonTextbox,jasonButtonTextboxUIHelper.prototype=Object.create(jasonTextboxUIHelper.prototype),jasonButtonTextboxUIHelper.prototype.constructor=jasonButtonTextboxUIHelper,jasonButtonTextboxUIHelper.prototype.renderUI=function(){if(jasonTextboxUIHelper.prototype.renderUI.call(this),!this.htmlElement.classList.contains(jw.DOM.classes.JW_BUTTON_TEXT_BOX)){this.htmlElement.classList.add(jw.DOM.classes.JW_BUTTON_TEXT_BOX),this.button=jw.htmlFactory.createJWButton(null,this.options.icon),this.button.setAttribute(jw.DOM.attributes.TITLE_ATTR,void 0==this.options.title?"":this.options.title),this.htmlElement.appendChild(this.button);var e=this.options.icon?27:0;this.inputControl.style.width="calc(100% - "+e+"px)",""==this.inputControl.style.width&&(this.inputControl.style.width="-webkit-calc(100% - "+e+"px)")}},jasonButtonTextboxUIHelper.prototype.initializeEvents=function(){jasonTextboxUIHelper.prototype.initializeEvents.call(this),this.eventManager.addEventListener(this.button,jw.DOM.events.CLICK_EVENT,this.onButtonClick,!0)},jasonButtonTextboxUIHelper.prototype.onButtonClick=function(e){!this.widget.readonly&&this.widget.enabled&&this.widget.triggerEvent(jw.DOM.events.JW_EVENT_ON_BUTTON_CLICK)},jasonButtonTextboxUIHelper.prototype.onTextInputBlur=function(e,t){jasonTextboxUIHelper.prototype.onTextInputBlur.call(this,e,t)},jasonButtonTextboxUIHelper.prototype.onTextInputFocus=function(e,t){jasonTextboxUIHelper.prototype.onTextInputFocus.call(this,e,t)},jasonButtonTextboxUIHelper.prototype.updateEnabled=function(e){jasonTextboxUIHelper.prototype.updateEnabled.call(this,e),e?(this.button.removeAttribute(jw.DOM.attributes.DISABLED_ATTR),this.button.classList.remove(jw.DOM.classes.JW_DISABLED)):(this.button.setAttribute(jw.DOM.attributes.DISABLED_ATTR,!0),this.button.classList.add(jw.DOM.classes.JW_DISABLED))},jasonButtonTextboxUIHelper.prototype.updateVisible=function(e){jasonTextboxUIHelper.prototype.updateVisible.call(this,e)},jasonButtonTextboxUIHelper.prototype.updateReadOnly=function(e){jasonTextboxUIHelper.prototype.updateReadOnly.call(this,e),e?this.button.setAttribute(jw.DOM.attributes.READONLY_ATTR,!0):this.button.removeAttribute(jw.DOM.attributes.READONLY_ATTR)},jasonCombobox.prototype=Object.create(jasonButtonTextbox.prototype),jasonCombobox.prototype.constructor=jasonCombobox,Object.defineProperty(jasonCombobox.prototype,"selectedItemIndex",{get:function(){var e=[];return this.ui.dropDownListButton.selectedItems.forEach(function(t,n){e.push(t._jwRowId)}),e},set:function(e){var t=Array.isArray(e)?e:[e];t.forEach(function(e){this.ui.dropDownListButton.selectItem(e)}.bind(this))},enumerable:!0,configurable:!0}),jasonCombobox.prototype.clearSelection=function(){this.ui.clearSelection()},jasonCombobox.prototype.search=function(){if(this.ui.dropDownListButton.selectedItems.length>0)this.showList();else{var e=this.options.displayFields.length>1?this.ui.inputControl.value.replace(/[\W_]+/g," "):this.ui.inputControl.value;if(this.filteredData=this.dataSource.searchByField(e.split(" "),this.options.displayFields,null,this.options.caseSentiveSearch),0==this.filteredData.length){var t={_NoData_:jasonWidgets.common.formatString(this.options.localization.combobox.notFound,[this.ui.inputControl.value])};this.filteredData.push(t)}this.ui.dropDownListButton.ui.renderListItems(this.filteredData),this.ui.inputControl.focus()}},jasonCombobox.prototype.showList=function(){this.ui.showList()},jasonCombobox.prototype.hideList=function(){this.ui.hideList(!0)},jasonCombobox.prototype.toggleDropDownList=function(){this.ui.toggleDropdownList()},jasonCombobox.prototype.selectItem=function(e){this.ui.dropDownListButton.selectItem(e),this.ui.updateInputTextFromSelection()},jasonCombobox.prototype.onDataChange=function(){this.ui.dropDownListButton.dataSource.setData(this.dataSource.data)},jasonCombobox.prototype.readValue=function(e){return Array.isArray(e)&&1==e.length?e[0]:e},jasonCombobox.prototype.formatValue=function(e){return this.ui.dropDownListButton.ui.createCaptionFromSelection()},jasonCombobox.prototype.setValue=function(e){return e},jasonCombobox.prototype.compareValue=function(e){if(null==this._value&&void 0!=e)return jw.enums.comparison.notEqual;if(Array.isArray(e)&&Array.isArray(this._value)){if(this._value.length==e.length){for(var t=jw.enums.comparison.equal,n=0;n<=this._value.length-1&&(t=jw.common.simpleObjectComparison(this._value[n],e[n]),t==jw.enums.comparison.equal);n++);return t}return this._value.length==e.length?jw.enums.comparison.equal:jw.enums.comparison.notEqual}return"object"==typeof e?jw.common.simpleObjectComparison(this._value,e):jw.enums.comparison.notEqual},jasonComboboxUIHelper.prototype=Object.create(jasonButtonTextboxUIHelper.prototype),jasonComboboxUIHelper.prototype.constructor=jasonComboboxUIHelper,jasonComboboxUIHelper.prototype.renderUI=function(){if(jasonButtonTextboxUIHelper.prototype.renderUI.call(this),!this.htmlElement.classList.contains(jw.DOM.classes.JW_COMBOBOX_CLASS)){this.htmlElement.classList.add(jw.DOM.classes.JW_COMBOBOX_CLASS);var e={};jw.common.extendObject(this.options,e),e.validation=[],e.events=this.options.events,e.tetheredElement=this.htmlElement;var t=function(e){this.options.multiSelect||this.dropDownListButton.hideList(),this.widget.value=[].concat(this.dropDownListButton.selectedItems),setTimeout(function(){this.inputControl.focus()}.bind(this))};e.events.push({eventName:jw.DOM.events.JW_EVENT_ON_SELECT_ITEM,listener:t.bind(this),enabled:!0}),e.events.push({eventName:jw.DOM.events.JW_EVENT_ON_UNSELECT_ITEM,listener:t.bind(this),enabled:!0}),this.dropDownListButton=new jasonDropDownListButton(this.button,e),this.button.classList.remove(jw.DOM.classes.JW_BORDERED),this.button.classList.remove(jw.DOM.classes.JW_BUTTON_STANDALONE),this.options.dropDownList&&this.inputControl.setAttribute(jw.DOM.attributes.READONLY_ATTR,!0)}},jasonComboboxUIHelper.prototype.showList=function(){this.dropDownListButton.ui.showList()},jasonComboboxUIHelper.prototype.hideList=function(e){this.dropDownListButton.ui.hideList()},jasonComboboxUIHelper.prototype.toggleDropdownList=function(){this.dropDownListButton.ui.toggleList()},jasonComboboxUIHelper.prototype.initializeEvents=function(){this.eventManager.addEventListener(this.inputControl,jw.DOM.events.CLICK_EVENT,this.oninputControlClick),this.inputControl.addEventListener(jw.DOM.events.KEY_DOWN_EVENT,this.onComboboxKeyDown),this.inputControl.addEventListener(jw.DOM.events.KEY_UP_EVENT,this.onComboboxKeyUp)},jasonComboboxUIHelper.prototype.updateInputTextFromSelection=function(){this.widget.value=[].concat(this.dropDownListButton.selectedItems)},jasonComboboxUIHelper.prototype.formatinputControl=function(e){var t=[];this.options.displayFields&&this.options.displayFields.forEach(function(n){t.push(e[n])});var n=e._NoData_;return n||(n="string"==typeof e?e:jasonWidgets.common.formatString(this.options.displayFormat,t)),e._jw_Searchable_value=t.join(" "),n},jasonComboboxUIHelper.prototype.findItem=function(e){for(var t=0;t=this.dropDownListButton.ui.dropDownList.children.length-1;t++){var n=this.dropDownListButton.ui.dropDownList.children[t].innerText||this.dropDownListButton.ui.dropDownList.children[t].textContent;if(n==e)return this.dropDownListButton.ui.dropDownList.children[t]}return null},jasonComboboxUIHelper.prototype.oninputControlClick=function(e){!this.widget.readonly&&this.widget.enabled&&1==this.options.dropDownList&&this.toggleDropdownList()},jasonComboboxUIHelper.prototype.oninputControlChange=function(e){!this.widget.readonly&&this.widget.enabled&&(this.clearSelection(),e.stopPropagation())},jasonComboboxUIHelper.prototype.clearSelection=function(){this.dropDownListButton.ui.clearSelection()},jasonComboboxUIHelper.prototype.onTextInputBlur=function(e,t){jasonTextboxUIHelper.prototype.onTextInputBlur.call(this,e,t)},jasonComboboxUIHelper.prototype.onTextInputFocus=function(e,t){jasonTextboxUIHelper.prototype.onTextInputFocus.call(this,e,t)},jasonComboboxUIHelper.prototype.onComboboxKeyDown=function(e){if(!this.widget.readonly&&this.widget.enabled){var t=e.which||e.keyCode;switch(t){case 27:this.hideList(),this.inputControl.focus()}}},jasonComboboxUIHelper.prototype.onComboboxKeyUp=function(e){if(!this.widget.readonly&&this.widget.enabled){var t=e.which||e.keyCode,n=!1;switch(t){case jw.keycodes.backspace:case jw.keycodes["delete"]:this.widget.clearSelection();case jw.keycodes.downArrow:n=!0}if(this.dropDownListButton.selectedItems.length>0){var o=this,i=0==this.dropDownListButton.selectedItems.filter(function(e){return e._jw_Searchable_value==o.inputControl.value}).length;i&&this.widget.clearSelection()}(t>46||n)&&(this.showList(),this.options.autoFilter&&this.widget.search(),this.inputControl.focus(),t==jw.keycodes.downArrow&&this.dropDownListButton.ui.scrollItemIntoView(!0)),e.stopPropagation()}},jasonComboboxUIHelper.prototype.updateEnabled=function(e){jasonButtonTextboxUIHelper.prototype.updateEnabled.call(this,e),this.dropDownListButton.enabled=e},jasonComboboxUIHelper.prototype.updateVisible=function(e){jasonButtonTextboxUIHelper.prototype.updateVisible.call(this,e)},jasonComboboxUIHelper.prototype.updateReadOnly=function(e){jasonButtonTextboxUIHelper.prototype.updateReadOnly.call(this,e),this.dropDownListButton.readonly=e},jasonMenu.prototype=Object.create(jasonBaseWidget.prototype),jasonMenu.prototype.constructor=jasonMenu,jasonMenuItem.prototype=Object.create(jasonBaseWidget.prototype),jasonMenuItem.prototype.constructor=jasonMenuItem,jasonMenuItem.prototype.assign=function(e){this.caption=e.caption,this.title=e.title,this.enabled=e.enabled,this.items=e.items,this.content=e.content,this.level=e.level,this.name=e.name,this.hasCheckBox=e.hasCheckBox,this.checked=e.checked,this.clickable=e.clickable,this.icon=e.icon,this.isDivider=e.isDivider},jasonMenuWidgetParser.prototype.constructor=jasonMenuWidgetParser,jasonMenuWidgetDOMParser.prototype=Object.create(jasonMenuWidgetParser.prototype),jasonMenuWidgetDOMParser.prototype.constructor=jasonMenuWidgetDOMParser,jasonMenuWidgetJSONParser.prototype=Object.create(jasonMenuWidgetParser.prototype),jasonMenuWidgetJSONParser.prototype.constructor=jasonMenuWidgetJSONParser,jasonMenuWidgetParser.prototype.createSubItemsContainer=function(){var e=this.menuUI.createElement("div");return e.classList.add(jw.DOM.classes.JW_MENU_ITEMS_CONTAINER_CLASS),e.style.display="none",e},jasonMenuWidgetParser.prototype.createMenuItemCaption=function(e,t){var n=jasonWidgets.common.getNodeText(e);n&&(t.caption=n.textContent.trim(),jasonWidgets.common.removeNodeText(e));var o=this.menuUI.createElement("div");if(o.classList.add(jw.DOM.classes.JW_MENU_ITEM_CAPTION),t.isDivider)o.appendChild(this.menuUI.createElement("hr")),e.classList.add(jw.DOM.classes.JW_MENU_ITEM_DIVIDER),e.setAttribute(jw.DOM.classes.JW_MENU_ITEM_NO_HIGHLIGHT_ATTR,"true");else{var i=this.menuUI.createElement("div");i.classList.add(jw.DOM.classes.JW_MENU_ITEM_CAPTION),i.appendChild(this.menuUI.createTextNode(t.caption)),o.appendChild(i)}e._jasonMenuItemCaptionContainer=o,e.appendChild(o)},jasonMenuWidgetParser.prototype.createMenuItemArrowIcon=function(e){if(e._jasonMenuItemCaptionContainer){var t=jw.htmlFactory.createJWButton(null,"horizontal"==this.menuUI.options.orientation&&0==menuLevel?jw.DOM.icons.CHEVRON_DOWN:jw.DOM.icons.CHEVRON_RIGHT);e._jasonMenuItemCaptionContainer.appendChild(t)}},jasonMenuWidgetParser.prototype.createMenuItemIcon=function(e,t){if(e._jasonMenuItemCaptionContainer){var n=this.menuUI.createElement("div");n.classList.add(jw.DOM.classes.JW_MENU_ICON);var o=this.menuUI.createElement("i");o.className=t;e.getAttribute(jw.DOM.attributes.JW_MENU_ITEM_LEVEL_ATTRIBUTE);n.appendChild(o),e._jasonMenuItemCaptionContainer.insertBefore(n,e._jasonMenuItemCaptionContainer.firstChild)}},jasonMenuWidgetParser.prototype.mustAddArrowIcon=function(e){var t=!1;return t=e.children.length>0,1==e.children.length&&e.children[0].className==JW_MENU_ITEM_CAPTION&&(t=!1),t},jasonMenuWidgetParser.prototype.setMenuItemEvents=function(e,t){this.menuUI.eventManager.addEventListener(e,jw.DOM.events.CLICK_EVENT,this.menuUI.onItemClick,!0),this.menuUI.eventManager.addEventListener(e,jw.DOM.events.TOUCH_START_EVENT,this.menuUI.onItemTouch,!0),this.menuUI.eventManager.addEventListener(e,jw.DOM.events.MOUSE_ENTER_EVENT,this.menuUI.onItemMouseEnter,!0),this.menuUI.eventManager.addEventListener(e,jw.DOM.events.MOUSE_LEAVE_EVENT,this.menuUI.onItemMouseLeave,!0),this.menuUI.eventManager.addEventListener(e,jw.DOM.events.KEY_DOWN_EVENT,this.menuUI.onItemKeyDown,!0);var n=e.querySelectorAll(".jw-menu-item-arrow .jw-button")[0];n&&this.menuUI.eventManager.addEventListener(n,jw.DOM.events.CLICK_EVENT,this.menuUI.onItemArrowClick,!0),t.hasCheckBox&&t.checkBoxElement&&this.menuUI.eventManager.addEventListener(t.checkBoxElement,jw.DOM.events.CLICK_EVENT,this.menuUI.onCheckboxClick)},jasonMenuWidgetDOMParser.prototype.createMenuItem=function(e){var t=new jasonMenuItem(e,null,null),n=e.getAttribute(jw.DOM.attributes.JW_MENU_ITEM_LEVEL_ATTRIBUTE);return n&&(t.level=parseInt(n)),jasonWidgets.common.setData(e,jw.DOM.attributeValues.JW_MENU_ITEM_DATA_KEY,t),t},jasonMenuWidgetDOMParser.prototype.populateMenu=function(e){for(var t=this,n=this.menuUI.widget,o=function(e,n){for(var i=0;i<=n.children.length-1;i++){var s=n.children[i];if("UL"==s.tagName){var a=t.createSubItemsContainer(),r=t.menuUI.createElement("ul");a.appendChild(r),n.appendChild(a),n._jasonMenuItemsContainer=a,jw.common.moveChildrenTo(s,r),s.setAttribute("fordelete",!0);for(var l=0;l<=r.children.length-1;l++){var d=r.children[l],u=t.createMenuItem(d);u.level=e.level+1,jw.htmlFactory.convertToJWMenuItem(t.menuUI.options.orientation,d,u),t.setMenuItemEvents(d,u),e.items.push(u),u.parent=e,u.level=e.level+1,o(u,d)}}else"LI"==s.tagName&&jw.htmlFactory.convertToJWMenuItem(t.menuUI.options.orientation,s)}for(var h=jw.common.getElementsByAttribute(n,"fordelete","true"),i=0;i<=h.length-1;i++)n.removeChild(h[i])},i=0;i<=e.children.length-1;i++){var s=e.children[i];s.setAttribute(jw.DOM.attributes.JW_MENU_ITEM_LEVEL_ATTRIBUTE,0);var a=this.createMenuItem(s);jw.htmlFactory.convertToJWMenuItem(this.menuUI.options.orientation,s,a),this.setMenuItemEvents(s,a),a.level=0,n.items.push(a),o(a,s)}return n},jasonMenuWidgetJSONParser.prototype.populateMenu=function(e){for(var t=this,n=function(e,i){var s,a;e.items.length>0&&(a=t.createSubItemsContainer(),s=t.menuUI.createElement("ul"),a.appendChild(s),e.htmlElement.appendChild(a),e.htmlElement._jasonMenuItemsContainer=a);for(var r=void 0!=s?s:o,l=0;l<=e.items.length-1;l++){var d,u=jw.common.isJWWidget(e.items[l])?e.items[l]:null;null==u?(d=t.menuUI.createElement("li"),u=new jasonMenuItem(d,null,null),u.assign(e.items[l]),u.clickable=void 0==u.clickable||u.clickable,u.parent=e,u.level=e.level+1,t.createMenuElementFromItem(u,d)):d=t.createMenuElementFromItem(u,u.htmlElement),r.appendChild(d),e.items[l]=u,u.items.length>0&&n(u,r)}},o=this.menuUI.ulMenuElement,i=0;i<=e.items.length-1;i++){var s,a=jw.common.isJWWidget(e.items[i])?e.items[i]:null;null==a?(s=t.menuUI.createElement("li"),a=new jasonMenuItem(s,null,null),a.assign(e.items[i]),a.clickable=void 0==a.clickable||a.clickable,a.level=0,t.createMenuElementFromItem(a,s)):s=t.createMenuElementFromItem(a,a.htmlElement),s.setAttribute(jw.DOM.attributes.JW_MENU_ITEM_LEVEL_ATTRIBUTE,a.level),o.appendChild(s),e.items[i]=a,n(a,o)}return o},jasonMenuWidgetJSONParser.prototype.createMenuElementFromItem=function(e,t){var n;if(e.content){if(n=void 0===t?this.menuUI.createElement("li"):t,e.content.tagName)n.appendChild(e.content);else{var o=this.menuUI.createElement("div");o.innerHTML=e.content,n.appendChild(o)}n.classList.add(jw.DOM.classes.JW_MENU_ITEM_CONTENT),e.content.classList.add(jw.DOM.classes.JW_MENU_ITEM_CONTENT_CLASS)}else if(void 0===t?n=jw.htmlFactory.createJWMenuItem(this.menuUI.options.orientation,e):(n=t,jw.htmlFactory.createJWMenuItem(this.menuUI.options.orientation,e,n)),
e.htmlElement=n,e.isDivider&&(n.appendChild(this.menuUI.createElement("hr")),n.classList.add(jw.DOM.classes.JW_MENU_ITEM_DIVIDER),n.setAttribute(jw.DOM.attributeValues.JW_MENU_ITEM_NO_HIGHLIGHT_ATTR,"true")),!e.isDivider){if(e.hasCheckBox){var i=jw.common.getElementsByAttribute(n,"type","checkbox")[0];void 0!=i&&(e.checkBoxElement=i)}this.setMenuItemEvents(n,e)}return void 0==t&&jasonWidgets.common.setData(n,jw.DOM.attributeValues.JW_MENU_ITEM_DATA_KEY,e),n},jasonMenuUIHelper.prototype=Object.create(jasonBaseWidgetUIHelper.prototype),jasonMenuUIHelper.prototype.constructor=jasonMenuUIHelper,jasonMenuUIHelper.prototype.showMenu=function(e,t,n){if(e){this.invokableElement=e;var o=e.getBoundingClientRect();this.menuContainer.style.display="",this.ulMenuElement.style.width=this.getWiderElementWidthOfUL(this.ulMenuElement)+"px",this.menuContainer.style.top=n?n+"px":o.top+e.offsetHeight+1+"px";var i=window.innerWidth||document.documentElement.clientWidth||document.body.clientWidth;this.menuContainer.style.left=t?t+"px":o.left+this.menuContainer.offsetWidth>=i?o.left-this.menuContainer.offsetWidth+"px":o.left+"px",this.menuContainer.style.zIndex=jw.common.getNextAttributeValue("z-index")+1,this.widget.triggerEvent(jw.DOM.events.JW_EVENT_ON_SHOW);var s=jw.common.getFirstFocusableElement(this.menuContainer);s&&(s.focus(),this.previousShowMenuItem=this.getMenuItemFromElement(s))}},jasonMenuUIHelper.prototype.hideMenu=function(){for(var e=this.menuContainer.getElementsByClassName(jw.DOM.classes.JW_MENU_ITEMS_CONTAINER_CLASS),t=0;t<=e.length-1;t++)e[t].style.display="none";for(var n=this.menuContainer.getElementsByClassName(jw.DOM.classes.JW_MENU_ITEM_CLASS_ACTIVE),t=0;t<=n.length-1;t++)n[t].classList.remove(jw.DOM.classes.JW_MENU_ITEM_CLASS_ACTIVE);this.menuContainer.style.display="none",this.widget.triggerEvent(jw.DOM.events.JW_EVENT_ON_HIDE)},jasonMenuUIHelper.prototype.getWiderElementWidthOfUL=function(e){var t=0;if(e){if(e._jasonMenuWidgetWiderElementWidth)return e._jasonMenuWidgetWiderElementWidth;var n=e.getElementsByClassName(jw.DOM.classes.JW_MENU_ITEM_CONTENT_CLASS);n.length>0&&(e._jasonMenuWidgetWiderElementWidth=n[0].offsetWidth);for(var o=0;o<=e.children.length-1;o++){var i=(e.children[o].getElementsByClassName(jw.DOM.classes.JW_MENU_ITEM_CAPTION)[0],null),s=e.children[o].getElementsByClassName(jw.DOM.classes.JW_MENU_ITEM_ICON)[0],a=e.children[o].getElementsByClassName(jw.DOM.classes.JW_MENU_ITEM_ARROW)[0],r=e.children[o].getElementsByClassName(jw.DOM.classes.JW_MENU_ITEM_CHECKBOX)[0];s=s?s.offsetWidth:0,a=a?a.offsetWidth:0,r=r?r.offsetWidth:0,i=e.children[o].getElementsByClassName(jw.DOM.classes.JW_MENU_ITEM_CAPTION)[0];var l=0;if(i){var d=jasonWidgets.common.getComputedStyleProperty(i,"font-weight");d=d+" "+jasonWidgets.common.getComputedStyleProperty(i,"font-size"),d=d+" "+jasonWidgets.common.getComputedStyleProperty(i,"font-family"),d=d.replace("'",""),l=jasonWidgets.common.getTextWidth(i.textContent.trim(),d),l>300&&(l=300)}var u=l>e.children[o].offsetWidth?e.children[o].offsetWidth+l:e.children[o].offsetWidth+5;u>t&&(t=u+s+a+r)}return e._jasonMenuWidgetWiderElementWidth?e._jasonMenuWidgetWiderElementWidth=t>e._jasonMenuWidgetWiderElementWidth?t:e._jasonMenuWidgetWiderElementWidth:e._jasonMenuWidgetWiderElementWidth=t,e._jasonMenuWidgetWiderElementWidth}return t},jasonMenuUIHelper.prototype.getMenuItemFromEvent=function(e){var t="LI"==e.target.tagName?e.target:jasonWidgets.common.getParentElement("LI",e.target);return jasonWidgets.common.getData(t,jw.DOM.attributeValues.JW_MENU_ITEM_DATA_KEY)},jasonMenuUIHelper.prototype.getMenuItemFromElement=function(e){var t="LI"==e.tagName?event.target:jasonWidgets.common.getParentElement("LI",e);return jasonWidgets.common.getData(t,jw.DOM.attributeValues.JW_MENU_ITEM_DATA_KEY)},jasonMenuUIHelper.prototype.onCheckboxClick=function(e){!this.widget.readonly&&this.widget.enabled&&(this.toggleCheckBox(e),e.stopPropagation())},jasonMenuUIHelper.prototype.toggleCheckBox=function(e){if(!this.widget.readonly&&this.widget.enabled){var t=this.getMenuItemFromEvent(e);if(t&&t.checkBoxElement&&t.enabled){var n={event:e,item:t,checked:t.checkBoxElement.checked,cancel:!1};this.widget.triggerEvent(jw.DOM.events.JW_EVENT_ON_JW_MENU_CHECKBOX_CLICKED,n),n.cancel&&(t.checkBoxElement.checked=!t.checkBoxElement.checked)}}},jasonMenuUIHelper.prototype.onItemClick=function(e){if(!this.widget.readonly&&this.widget.enabled){var t=this.getMenuItemFromEvent(e);t&&t.clickable&&t.enabled&&(this.widget.triggerEvent(jw.DOM.events.JW_EVENT_ON_JW_MENU_ITEM_CLICKED,{event:e,item:t,uiHelper:this}),this.widget.options.autoHide&&!this.disableMouseEvents&&(this.widget.options.invokable?this.hideMenu():this.hideMenuItemsUpToRootItem(t))),e.stopPropagation()}},jasonMenuUIHelper.prototype.onItemArrowClick=function(e){if(!this.widget.readonly&&this.widget.enabled){var t=this.getMenuItemFromEvent(e);if(t){if(this.previousShowMenuItem&&t.level<=this.previousShowMenuItem.level)for(var n=this.previousShowMenuItem;n&&n.level>=t.level;)this.hideMenuItemContents(n),n=n.parent;this.showMenuItemContents(t),t.htmlElement._jasonMenuItemsContainer&&(focusable=jw.common.getFirstFocusableElement(t.htmlElement._jasonMenuItemsContainer),focusable&&focusable.focus())}}},jasonMenuUIHelper.prototype.onItemTouch=function(e){if(!this.widget.readonly&&this.widget.enabled){var t=this.getMenuItemFromEvent(e);if(t.htmlElement){var n=t.htmlElement._jasonWidgetsEventListeners_.filter(function(e){return e.eventName==jw.DOM.events.CLICK_EVENT})[0];n&&(n.enabled=!1)}if(!t.content||""!=t.content.style.display){if(this.widget.options.invokable){var o=0==t.items.length&&!t.content||t.content&&"none"==t.content.display;o&&this.hideMenu()}if(this.previousShowMenuItem&&t.level<=this.previousShowMenuItem.level)for(var i=this.previousShowMenuItem;i&&i.level>=t.level;)this.hideMenuItemContents(i),i=i.parent;this.showMenuItemContents(t),this.widget.options.autoHide&&0==t.items.length&&setTimeout(function(){this.hideMenuItemsUpToRootItem(t)}.bind(this),250),this.widget.triggerEvent(jw.DOM.events.JW_EVENT_ON_JW_MENU_ITEM_CLICKED,{event:e,item:t,uiHelper:this}),this.previousShowMenuItem=t}}},jasonMenuUIHelper.prototype.onItemKeyDown=function(e){var t=e.keyCode||e.which;switch(t){case 27:var n=null,o=this.getMenuItemFromEvent(e);0==o.level&&this.options.invokable?(this.hideMenu(),n=jw.common.getFirstFocusableElement(this.invokableElement),n&&n.focus()):(o=o.parent?o.parent:o,this.hideMenuItemContents(o,!0),n=jw.common.getFirstFocusableElement(o.htmlElement),n&&n.focus())}},jasonMenuUIHelper.prototype.showMenuItemContents=function(e){if(!this.widget.readonly&&this.widget.enabled&&e){var t=e.htmlElement;!t.getAttribute(jw.DOM.attributes.JW_MENU_ITEM_NO_HIGHLIGHT_ATTR)&&e.enabled&&t.classList.add(jw.DOM.classes.JW_MENU_ITEM_CLASS_ACTIVE);var n=!t._jasonMenuItemsContainer&&e.enabled||e.enabled&&"none"==t._jasonMenuItemsContainer.style.display;if(n){var o=t.parentNode==this.ulMenuElement?this.options.orientation.toLowerCase():null;this.placeMenuItemsContainer(t._jasonMenuItemsContainer,t,o,e),e.triggerEvent(jw.DOM.events.JW_EVENT_ON_JW_MENU_ITEM_CONTENT_SHOW),this.previousShowMenuItem=e}}},jasonMenuUIHelper.prototype.hideMenuItemContents=function(e,t){if(e){var n=e.htmlElement;this.options._debug||this.disableMouseEvents&&!t||n._jasonMenuItemsContainer&&this.canHideSubMenu&&(n._jasonMenuItemsContainer.style.display="none",this.previousShowMenuItem=null),e.enabled&&n.classList.remove(jw.DOM.classes.JW_MENU_ITEM_CLASS_ACTIVE)}},jasonMenuUIHelper.prototype.hideMenuItemsUpToRootItem=function(e){for(var t=e;t;)this.hideMenuItemContents(t),t=t.level>0?t.parent:null},jasonMenuUIHelper.prototype.onItemMouseEnter=function(e){this.showMenuItemContents(this.getMenuItemFromEvent(e))},jasonMenuUIHelper.prototype.onItemMouseLeave=function(e){this.hideMenuItemContents(this.getMenuItemFromEvent(e))},jasonMenuUIHelper.prototype.placeMenuItemsContainer=function(e,t,n,o){if(e){e.style.position="absolute";var i="horizontal"==n?t.offsetTop+t.offsetHeight+"px":t.offsetTop-t.offsetHeight/5.5+"px";e.style.top=i;var s=350-35*this.options.animation.delay;jasonWidgets.common.fadeIn(e,s);var a=e.getElementsByTagName("UL")[0];e.style.display="";var r=a.querySelectorAll(".jw-menu-item-content")[0];if(r){var l=a.querySelectorAll(".menu-content")[0];l&&(l.style.height=r.offsetHeight+"px")}var d=this.getWiderElementWidthOfUL(a),u=10;d>0&&(e.style.width=d+"px",u=0);var h=jasonWidgets.common.getOffsetCoordinates(t),c=window.innerWidth||document.documentElement.clientWidth||document.body.clientWidth,p=e.offsetWidth+h.left+t.offsetWidth>=c?t.offsetLeft-e.offsetWidth:"horizontal"==n?t.offsetLeft:t.offsetWidth;if("vertical"!=n||0!=o.level||this.options.invokable||(p+=h.left),e.style.left=p+"px",""==e.style.zIndex)e.style.zIndex=jw.common.getNextZIndex();else{var m=parseInt(e.style.zIndex),g=jw.common.getNextZIndex();m<g&&(e.style.zIndex=g)}}},jasonMenuUIHelper.prototype.createMenu=function(){var e=this;if("UL"==this.htmlElement.tagName){var t=new jasonMenuWidgetDOMParser(this);return this.options.invokable?(this.menuContainer.style.display="none",this.menuContainer.style.position="absolute",this.menuContainer.appendChild(this.ulMenuElement),document.body.appendChild(this.menuContainer)):(this.htmlElement.parentNode.replaceChild(this.menuContainer,this.htmlElement),this.menuContainer.appendChild(this.htmlElement)),t.populateMenu(this.ulMenuElement)}if(this.options.menu){var n=new jasonMenuWidgetJSONParser(this);this.ulMenuElement=n.populateMenu(this.options.menu),"horizontal"==this.widget.options.orientation.toLowerCase()&&this.ulMenuElement.classList.add(jw.DOM.classes.JW_MENU_HORIZONTAL),this.menuContainer.appendChild(this.ulMenuElement),this.options.invokable?(this.menuContainer.style.display="none",this.menuContainer.style.position="absolute",this.eventManager.addEventListener(this.menuContainer,jw.DOM.events.MOUSE_LEAVE_EVENT,function(t){e.disableMouseEvents||e.options._debug||(e.options.hideDelay?(e.canHideMenu=!0,setTimeout(function(){e.canHideMenu&&e.hideMenu()},e.options.hideDelay)):e.hideMenu())}),this.eventManager.addEventListener(this.menuContainer,jw.DOM.events.MOUSE_ENTER_EVENT,function(t){e.options._debug||(e.canHideMenu&&(e.canHideMenu=!1),e.disableMouseEvents&&(e.disableMouseEvents=!1))}),document.body.appendChild(this.menuContainer)):this.htmlElement.appendChild(this.menuContainer),this.eventManager.addEventListener(this.ulMenuElement,jw.DOM.events.MOUSE_ENTER_EVENT,function(t){e.disableMouseEvents=!1}),this.eventManager.addEventListener(this.ulMenuElement,jw.DOM.events.MOUSE_DOWN_EVENT,function(t){var n=jasonWidgets.common.getParentElement("LI",t.target),o=jasonWidgets.common.getData(n,jw.DOM.attributeValues.JW_MENU_ITEM_DATA_KEY);o&&o.content&&jw.common.isMouseEventOutOfContainer(e.ulMenuElement,t)&&(e.disableMouseEvents=!0)},!0)}},jasonMenuUIHelper.prototype.updateEnabled=function(e){jasonBaseWidgetUIHelper.prototype.updateEnabled.call(this,e);for(var t=this.htmlElement.getElementsByTagName("a"),n=0;n<=t.length-1;n++)e?(t[n].removeAttribute(jw.DOM.attributes.DISABLED_ATTR),t[n].classList.remove(jw.DOM.classes.JW_DISABLED)):(t[n].setAttribute(jw.DOM.attributes.DISABLED_ATTR,!0),t[n].classList.add(jw.DOM.classes.JW_DISABLED));for(var o=this.htmlElement.getElementsByTagName("input"),n=0;n<=o.length-1;n++)e?(o[n].removeAttribute(jw.DOM.attributes.DISABLED_ATTR),o[n].classList.remove(jw.DOM.classes.JW_DISABLED)):(o[n].setAttribute(jw.DOM.attributes.DISABLED_ATTR,!0),o[n].classList.add(jw.DOM.classes.JW_DISABLED))},jasonMenuUIHelper.prototype.updateVisible=function(e){jasonBaseWidgetUIHelper.prototype.updateVisible.call(this,e)},jasonMenuUIHelper.prototype.updateReadOnly=function(e){jasonBaseWidgetUIHelper.prototype.updateReadOnly.call(this,e);for(var t=this.htmlElement.getElementsByTagName("a"),n=0;n<=t.length-1;n++)e?(t[n].removeAttribute(jw.DOM.attributes.READONLY_ATTR),t[n].classList.remove(jw.DOM.classes.JW_READONLY)):(t[n].setAttribute(jw.DOM.attributes.READONLY_ATTR,!0),t[n].classList.add(jw.DOM.classes.JW_READONLY));for(var o=this.htmlElement.getElementsByTagName("input"),n=0;n<=o.length-1;n++)e?(o[n].removeAttribute(jw.DOM.attributes.READONLY_ATTR),o[n].classList.remove(jw.DOM.classes.JW_READONLY)):(o[n].setAttribute(jw.DOM.attributes.READONLY_ATTR,!0),o[n].classList.add(jw.DOM.classes.JW_READONLY))},jasonContextMenuUIHelper.prototype=Object.create(jasonMenuUIHelper.prototype),jasonContextMenuUIHelper.prototype.constructor=jasonContextMenuUIHelper,jasonContextMenuUIHelper.prototype.initializeEvents=function(){this.eventManager.addEventListener(this.options.target,jw.DOM.events.CONTEXT_MENU_EVENT,this.showContextMenu)},jasonContextMenuUIHelper.prototype.showContextMenu=function(e){2==e.button&&(e.preventDefault(),e.stopPropagation(),this.showMenu(e.target,e.pageX,e.pageY))},jasonContextMenuUIHelper.prototype.onContextItemClick=function(e,t){var n={event:event,item:t,checked:t.checkBoxElement.checked,cancel:!1};this.widget.triggerEvent(JW_EVENT_ON_JW_MENU_CHECKBOX_CLICKED,n),this.hideMenu(),this.options.target.focus(),e.stopPropagation(),e.preventDefault()},jasonCalendar.prototype=Object.create(jasonBaseWidget.prototype),jasonCalendar.prototype.constructor=jasonCalendar,Object.defineProperty(jasonCalendar.prototype,"date",{get:function(){return this._date},set:function(e){this._setDate(e)},enumerable:!0,configurable:!0}),Object.defineProperty(jasonCalendar.prototype,"specialDates",{get:function(){return this._specialDates},enumerable:!0,configurable:!0}),Object.defineProperty(jasonCalendar.prototype,"mode",{get:function(){return this._mode},set:function(e){this._setMode(e)},enumerable:!1,configurable:!1}),jasonCalendar.prototype._setDate=function(e){e&&0!=jw.common.dateComparison(this._date,e)&&(this._date=e,this.triggerEvent(jw.DOM.events.JW_EVENT_ON_CHANGE,this._date))},jasonCalendar.prototype._setMode=function(e){e&&this._mode!=e&&(this._mode=e,this.ui.renderCalendarItems(this.navigate(null)),this.triggerEvent(jw.DOM.events.JW_EVENT_JW_CALENDAR_MODE_CHANGE,this._mode))},jasonCalendar.prototype.addSpecialDate=function(e,t,n){this.specialDates.push({date:e,css:t,toolTip:n})},jasonCalendar.prototype.parseSpecialDates=function(e){if(e.specialDates)for(var t=0;t<=e.specialDates.length-1;t++){var n=e.specialDates[t];if(n.date){var o="date"==typeof n.date?n.date:Date.parse(n.date);if(!isNaN(o)){var i=new Date;i.setTime(o),this.specialDates.push({date:i,tooltip:n.tooltip,cssClass:n.cssClass,recurring:n.recurring||!1})}}}},jasonCalendar.prototype.createCalendarItem=function(e,t,n){var o=new jasonCalendarItem;o.year=n,o.month=t,o.day=e.getDate(),o.date=e;var i=e.getDay();i=this.options.localization.days[i],o.dayName=i.name,o.dayShortName=i.shortName;var s=this.options.localization.months[t-1<0?0:t-1];return o.monthName=s.name,o.monthShortName=s.shortName,o.displayValue=o.day,o},jasonCalendar.prototype.generateDays=function(e,t){var n=[],o=jasonWidgets.common.daysInMonth(e,t),i=new Date(e,t-1,1),s=i.getDay(),a=864e5;this.options.firstDayOfWeek>6&&(this.options.firstDayOfWeek=0);var r=0;this.options.firstDayOfWeek!=s&&(r=s<this.options.firstDayOfWeek?7-Math.abs(this.options.firstDayOfWeek-s):Math.abs(this.options.firstDayOfWeek-s));for(var l=r;l>=1;l--){var d=i.getTime()-l*a,u=new Date;u.setTime(d);var h=this.createCalendarItem(u,12==t?1:t-1,12==t?e-1:e);h.classList.push(jw.DOM.classes.JW_CALENDAR_ITEM_OUT_CURRENT_SCOPE),n.push(h)}for(var c=1;c<=o;c++)n.push(this.createCalendarItem(new Date(e,t-1,c),t,e));for(var p=42-n.length,m=new Date(e,t-1,o),g=1;g<=p;g++){var _=m.getTime()+g*a,E=new Date;E.setTime(_);var h=this.createCalendarItem(E,12==t?1:t+1,12==t?e+1:e);h.classList.push(jw.DOM.classes.JW_CALENDAR_ITEM_OUT_CURRENT_SCOPE),n.push(h)}return this.currentCalendarItems=n,n},jasonCalendar.prototype.generateMonths=function(e){e=e?e:this.date;for(var t=[],n=0;n<=11;n++){var o=new jasonCalendarItem;o.month=n+1;var i=this.options.localization.months[n];o.monthName=i.name,o.monthShortName=i.shortName,o.displayValue=i.shortName,o.day=1,o.year=e.getFullYear(),t.push(o)}return this.currentCalendarItems=t,t},jasonCalendar.prototype.generateYears=function(e,t){var n=[],o=new jasonCalendarItem;o.year=e-1,o.displayValue=o.year,o.classList.push(jw.DOM.classes.JW_CALENDAR_ITEM_OUT_CURRENT_SCOPE),n.push(o);for(var i=e;i<=t;i++){var s=new jasonCalendarItem;s.year=i,s.decadeStart=e,s.decadeStop=t,s.displayValue=s.year,n.push(s)}var a=new jasonCalendarItem;return a.year=t+1,a.displayValue=a.year,a.classList.push(jw.DOM.classes.JW_CALENDAR_ITEM_OUT_CURRENT_SCOPE),n.push(a),this.currentCalendarItems=n,n},jasonCalendar.prototype.generateDecades=function(e,t){for(var n=[],o=0;o<=9;o++){var i=new jasonCalendarItem,s=n[o-1];i.decadeStart=0==o?e:s.decadeStop+1,i.decadeStop=0==o?e+9:i.decadeStart+9,i.centuryStart=e,i.centuryStop=t,i.displayValue=i.decadeStart+" - \r\n"+i.decadeStop,n.push(i)}return this.currentCalendarItems=n,n},jasonCalendar.prototype.generateCenturies=function(e,t){var n=[],o=new jasonCalendarItem;o.centuryStart=e-100,o.centuryStop=o.centuryStart+99,o.classList.push(jw.DOM.classes.JW_CALENDAR_ITEM_OUT_CURRENT_SCOPE),o.displayValue=o.centuryStart+" - \r\n"+o.centuryStop,n.push(o);for(var i=0;i<=9;i++){var s=new jasonCalendarItem,a=n[i-1];s.centuryStart=0==i?e:a.centuryStop+1,s.centuryStop=0==i?e+99:s.centuryStart+99,s.mileniumStart=e,s.mileniumStop=t,s.displayValue=s.centuryStart+" - \r\n"+s.centuryStop,n.push(s)}var r=new jasonCalendarItem;return r.centuryStart=t+1,r.centuryStop=r.centuryStart+99,r.classList.push(jw.DOM.classes.JW_CALENDAR_ITEM_OUT_CURRENT_SCOPE),r.displayValue=centuryAftercCenturyStart+" - \r\n"+r.centuryStop,n.push(r),this.currentCalendarItems=n,n},jasonCalendar.prototype.generateCalendarItems=function(e){var t=e?e:this.date,n=t.getFullYear(),o=[];switch(this._mode){case"days":o=this.generateDays(t.getFullYear(),t.getMonth()+1);break;case"months":o=this.generateMonths(e);break;case"years":var i=parseInt(n.toString().substring(0,3)+"0"),s=i+9;o=this.generateYears(i,s);break;case"decades":var a=parseInt(n.toString().substring(0,2)+"00"),r=a+99;o=this.generateDecades(a,r);break;default:o=this.generateDays(t.getYear(),t.getMonth())}return this.currentCalendarItems=o,{calendarItems:this.currentCalendarItems,navDate:e}},jasonCalendar.prototype.getRowDivisionCount=function(){switch(this._mode){case"days":return 7;case"months":return 3;case"years":return 4;case"decades":return 3;default:return 7}},jasonCalendar.prototype.navigateBack=function(){this.ui.renderCalendarItems(this.navigate("back"))},jasonCalendar.prototype.navigateForward=function(){this.ui.renderCalendarItems(this.navigate("forward"))},jasonCalendar.prototype.navigate=function(e){var t=null,n=this._navigationDate.getMonth(),o=this._navigationDate.getFullYear(),i=this.currentCalendarItems[0],s=this.currentCalendarItems[this.currentCalendarItems.length-1];switch(this._mode){case"days":"back"==e&&(o=0==n?o-1:o,n=0==n?11:n-1),"forward"==e&&(o=11==n?o+1:o,n=11==n?0:n+1),t=new Date(o,n,1);break;case"months":e&&(o="back"==e?o-1:o+1),t=new Date(o,n,1);break;case"years":e&&(o="back"==e?i.year:s.year),t=new Date(o,0,1);break;case"decades":e&&(o="back"==e?i.decadeStart-100:s.decadeStop+1),t=new Date(o,0,1);break;default:date=null}return this._navigationDate=t,this.triggerEvent(jw.DOM.events.JW_EVENT_JW_CALENDAR_NAVIGATE,{navDirection:e,navDate:this._navigationDate}),this.generateCalendarItems(t)},jasonCalendarUIHelper.prototype=Object.create(jasonBaseWidgetUIHelper.prototype),jasonCalendarUIHelper.prototype.constructor=jasonCalendarUIHelper,jasonCalendarUIHelper.prototype.renderUI=function(){var e=this;this.htmlElement.classList.contains(jw.DOM.classes.JW_CALENDAR)||(this.htmlElement.style.width=this.widget.options.width+"px",this.htmlElement.style.height=this.widget.options.height+"px",this.htmlElement.classList.add(jw.DOM.classes.JW_CALENDAR),this.renderHeader(),this.renderBody(),this.renderFooter(),this.options.invokable&&(this.hideCalendar(),this.htmlElement.style.position="absolute",jwDocumentEventManager.addDocumentEventListener(jw.DOM.events.MOUSE_DOWN_EVENT,function(t){jasonWidgets.common.isMouseEventOutOfContainer(e.htmlElement,t)&&""==e.htmlElement.style.display&&e.hideCalendar()}),this.eventManager.addEventListener(this.htmlElement,jw.DOM.events.KEY_DOWN_EVENT,function(t){var n=t.which||t.keyCode;27==n&&e.hideCalendar()},!0)))},jasonCalendarUIHelper.prototype.renderHeader=function(){this.calendarHeader=this.createElement("div"),this.calendarHeader.classList.add(jw.DOM.classes.JW_CALENDAR_HEADER),this.calendarGoBackButton=jw.htmlFactory.createJWButton(null,jw.DOM.icons.CIRCLE_ARROW_LEFT),this.calendarGoBackButton.classList.add(jw.DOM.classes.JW_CALENDAR_GO_BACK),this.eventManager.addEventListener(this.calendarGoBackButton,jw.DOM.events.CLICK_EVENT,this.goBack,!0),this.calendarDisplayTitle=jw.htmlFactory.createJWLinkLabel(),this.calendarDisplayTitle.classList.add(jw.DOM.classes.JW_CALENDAR_DISPLAY),this.eventManager.addEventListener(this.calendarDisplayTitle,jw.DOM.events.CLICK_EVENT,this.calendarDisplayClick),this.calendarGoForwardButton=jw.htmlFactory.createJWButton(null,jw.DOM.icons.CIRCLE_ARROW_RIGHT),this.calendarGoForwardButton.classList.add(jw.DOM.classes.JW_CALENDAR_GO_FORWARD),this.eventManager.addEventListener(this.calendarGoForwardButton,jw.DOM.events.CLICK_EVENT,this.goForward,!0),this.calendarHeader.appendChild(this.calendarGoBackButton),this.calendarHeader.appendChild(this.calendarDisplayTitle),this.calendarHeader.appendChild(this.calendarGoForwardButton),this.htmlElement.appendChild(this.calendarHeader)},jasonCalendarUIHelper.prototype.renderBody=function(){this.calendarBody=this.createElement("div"),this.calendarBody.classList.add(jw.DOM.classes.JW_CALENDAR_BODY),this.calendarTable=this.createElement("table"),this.calendarBody.appendChild(this.calendarTable),this.renderCalendarItems(),this.htmlElement.appendChild(this.calendarBody)},jasonCalendarUIHelper.prototype.renderCalendarItems=function(e){if(!this.widget.readonly&&this.widget.enabled){var t;e=e?e:this.widget.generateCalendarItems(),t=e.calendarItems,this.calendarTable.innerHTML="";for(var n=this.calendarTable.classList.length-1;n>=0;n--)this.calendarTable.classList.remove(this.calendarTable.classList[n]);"months"==this.widget.mode&&this.calendarTable.classList.add(jw.DOM.classes.JW_CALENDAR_JW_TABLE_MONTHS),"years"==this.widget.mode&&this.calendarTable.classList.add(jw.DOM.classes.JW_CALENDAR_JW_TABLE_YEARS),"decades"==this.widget.mode&&this.calendarTable.classList.add(jw.DOM.classes.JW_CALENDAR_JW_TABLE_DECADES);var o=this.createElement("tbody"),i=this.widget.getRowDivisionCount();if("days"==this.widget.mode){var s=this.createElement("thead"),a=this.createElement("tr");s.appendChild(a);for(var n=0;n<=6;n++){var r=this.createElement("th"),l=this.createElement("span");l.appendChild(this.createTextNode(t[n].dayShortName)),l.setAttribute(jw.DOM.attributes.TITLE_ATTR,t[n].dayName),r.appendChild(l),a.appendChild(r)}this.calendarTable.appendChild(s)}this.calendarTable.appendChild(o);for(var d=0;d<=t.length-1;d++){var u,h=t[d],c=null;"days"==this.widget.mode&&(c=this.widget.specialDates.filter(function(e){return e.recurring?e.date.getMonth()==h.date.getMonth()&&e.date.getDate()==h.date.getDate():0==jasonWidgets.common.dateComparison(e.date,h.date)})[0]),0!=d&&d%i!=0||(u=this.createElement("tr"),o.appendChild(u));var p=this.createElement("td"),m=jw.htmlFactory.createJWLinkLabel(h.displayValue.toString());p.appendChild(m),c&&(p.setAttribute(jasonWidgets.DOM.attributes.TITLE_ATTR,c.tooltip),c.cssClass&&p.classList.add(c.cssClass)),jasonWidgets.common.setData(p,"jwCalendarItem",h),"days"==this.widget.mode&&jw.common.dateComparison(e.navDate,h.date)==jw.enums.comparison.equal&&p.classList.add(jw.DOM.classes.JW_CALENDAR_ITEM_SELECTED_DATE),this.eventManager.addEventListener(p,jw.DOM.events.CLICK_EVENT,this.calendarItemClick,!0);for(var g=0;g<=h.classList.length-1;g++)p.classList.add(h.classList[g]);u.appendChild(p)}this.updateCalendarDisplay(e?e.navDate:void 0)}},jasonCalendarUIHelper.prototype.renderFooter=function(){this.calendarFooter=this.createElement("div"),this.calendarFooter.classList.add(jw.DOM.classes.JW_CALENDAR_FOOTER),this.calendarFooterToday=jw.htmlFactory.createJWLinkLabel(jw.common.formatDateTime(new Date,jw.localizationManager.currentCulture.longDateFormat)),this.calendarFooter.appendChild(this.calendarFooterToday),this.htmlElement.appendChild(this.calendarFooter),this.eventManager.addEventListener(this.calendarFooterToday,jw.DOM.events.CLICK_EVENT,this.calendarNavigateToday,!0)},jasonCalendarUIHelper.prototype.showCalendar=function(e){if(this.options.invokableElement){this.calendarNavigateToday(e?e:this.widget.date);var t=this.options.invokableElement.getBoundingClientRect();this.htmlElement.style.left=t.left+"px",this.htmlElement.style.top=t.top+this.options.invokableElement.offsetHeight+"px",this.htmlElement.style.zIndex=jw.common.getNextAttributeValue("z-index")+1,this.htmlElement.style.display=""}},jasonCalendarUIHelper.prototype.hideCalendar=function(){this.htmlElement.style.display="none"},jasonCalendarUIHelper.prototype.calendarNavigateToday=function(e){if(!this.widget.readonly&&this.widget.enabled){var t=jw.common.getVariableType(e)==jw.enums.dataType.date?e:new Date;this.widget.mode="days";var n={calendarItems:this.widget.generateDays(t.getFullYear(),t.getMonth()+1),navDate:t};this.renderCalendarItems(n)}},jasonCalendarUIHelper.prototype.updateCalendarDisplay=function(e){e=e?e:this.widget.date;var t="",n=e.getMonth(),o=e.getFullYear();switch(this.widget.mode){case"days":n=this.widget.options.localization.months[n],t=jasonWidgets.common.formatString("{0} {1}",[n.name,o]);break;case"months":t=jasonWidgets.common.formatString("{0}",[o]);break;case"years":t=jasonWidgets.common.formatString("{0} - {1}",[this.widget.currentCalendarItems[1].decadeStart,this.widget.currentCalendarItems[1].decadeStop]);break;case"decades":t=jasonWidgets.common.formatString("{0} - {1}",[this.widget.currentCalendarItems[1].centuryStart,this.widget.currentCalendarItems[1].centuryStop]);break;default:date=null}jw.common.setData(this.calendarDisplayTitle,"navigationDate",e),jasonWidgets.common.replaceNodeText(this.calendarDisplayTitle,t,!0)},jasonCalendarUIHelper.prototype.goBack=function(e){this.renderCalendarItems(this.widget.navigate("back"))},jasonCalendarUIHelper.prototype.goForward=function(e){this.renderCalendarItems(this.widget.navigate("forward"))},jasonCalendarUIHelper.prototype.calendarDisplayClick=function(e){if(!this.widget.readonly&&this.widget.enabled){jw.common.getData(this.calendarDisplayTitle,"navigationDate");"years"==this.widget.mode&&(this.widget.mode="decades"),"months"==this.widget.mode&&(this.widget.mode="years"),"days"==this.widget.mode&&(this.widget.mode="months")}},jasonCalendarUIHelper.prototype.calendarItemClick=function(e){if(!this.widget.readonly&&this.widget.enabled){var t=864e5,n=jasonWidgets.common.getData(e.currentTarget,"jwCalendarItem");if(n){if("days"==this.widget.mode&&e.currentTarget.classList.contains(jw.DOM.classes.JW_CALENDAR_ITEM_OUT_CURRENT_SCOPE))return this.widget.date=n.date,this.widget._navigationDate=n.date,void this.calendarNavigateToday(n.date);var o=null;if("days"==this.widget.mode){var i=new Date(n.year,n.month-1,n.day);this.widget.date=i;var s=!0;if(e.ctrlKey&&(this.options.multiSelect||this.options.rangeSelect)){s=!1;var a=this.options.selectedDates.filter(function(e){return e.getTime()==i.getTime()})[0];if(!a){var r=!0;if(this.options.rangeSelect){var l=this.options.selectedDates[this.options.selectedDates.length-1],d=this.options.selectedDates[0],u=l.getTime(),h=d.getTime(),c=i.getTime();if(r=c==h-t||c==u+t,!r)return}r&&(this.widget.options.selectedDates.push(this.widget.date),this.widget.options.selectedDates.sort(function(e,t){return e.getTime()-t.getTime()}))}}else this.options.selectedDates=[],this.widget.options.selectedDates.push(this.widget.date);this.setActiveCalendarItem(e.currentTarget,s)}"months"==this.widget.mode&&(o=new Date(n.year,n.month-1,1),this.widget.mode="days",this.renderCalendarItems(this.widget.generateCalendarItems(o)),this.widget._navigationDate=o),"years"==this.widget.mode&&(o=new Date(n.year,0,1),this.widget.mode="months",this.renderCalendarItems(this.widget.generateCalendarItems(o)),this.widget._navigationDate=o),"decades"==this.widget.mode&&(o=new Date(n.decadeStart,0,1),this.widget.mode="years",this.renderCalendarItems(this.widget.generateCalendarItems(o)),this.widget._navigationDate=o)}}},jasonCalendarUIHelper.prototype.setActiveCalendarItem=function(e,t){var n=this.calendarTable.querySelectorAll("td");if(t)for(var o=0;o<=n.length-1;o++)n[o].classList.remove(jw.DOM.classes.JW_CALENDAR_ITEM_SELECTED_DATE);e.classList.add(jw.DOM.classes.JW_CALENDAR_ITEM_SELECTED_DATE)},jasonCalendarUIHelper.prototype.updateEnabled=function(e){jasonBaseWidgetUIHelper.prototype.updateEnabled.call(this,e);for(var t=this.htmlElement.getElementsByTagName("a"),n=0;n<=t.length-1;n++)e?(t[n].removeAttribute(jw.DOM.attributes.DISABLED_ATTR),t[n].classList.remove(jw.DOM.classes.JW_DISABLED)):(t[n].setAttribute(jw.DOM.attributes.DISABLED_ATTR,!0),t[n].classList.add(jw.DOM.classes.JW_DISABLED));for(var o=this.htmlElement.getElementsByTagName("input"),n=0;n<=o.length-1;n++)e?(o[n].removeAttribute(jw.DOM.attributes.DISABLED_ATTR),o[n].classList.remove(jw.DOM.classes.JW_DISABLED)):(o[n].setAttribute(jw.DOM.attributes.DISABLED_ATTR,!0),o[n].classList.add(jw.DOM.classes.JW_DISABLED))},jasonCalendarUIHelper.prototype.updateVisible=function(e){jasonBaseWidgetUIHelper.prototype.updateVisible.call(this,e)},jasonCalendarUIHelper.prototype.updateReadOnly=function(e){jasonBaseWidgetUIHelper.prototype.updateReadOnly.call(this,e);for(var t=this.htmlElement.getElementsByTagName("a"),n=0;n<=t.length-1;n++)e?(t[n].removeAttribute(jw.DOM.attributes.READONLY_ATTR),t[n].classList.remove(jw.DOM.classes.JW_READONLY)):(t[n].setAttribute(jw.DOM.attributes.READONLY_ATTR,!0),t[n].classList.add(jw.DOM.classes.JW_READONLY));for(var o=this.htmlElement.getElementsByTagName("input"),n=0;n<=o.length-1;n++)e?(o[n].removeAttribute(jw.DOM.attributes.READONLY_ATTR),o[n].classList.remove(jw.DOM.classes.JW_READONLY)):(o[n].setAttribute(jw.DOM.attributes.READONLY_ATTR,!0),o[n].classList.add(jw.DOM.classes.JW_READONLY))},jasonTabControl.prototype=Object.create(jasonBaseWidget.prototype),jasonTabControl.prototype.constructor=jasonTabControl,Object.defineProperty(jasonTabControl.prototype,"tabIndex",{get:function(){return this._tabIndex},set:function(e){this._tabIndex!=e&&(this._tabIndex=e,this.ui.setActiveTab(this.ui.tabContents[this._tabIndex]),this.triggerEvent(jw.DOM.events.JW_EVENT_ON_JW_TAB_ENTER,this._tabIndex))},enumerable:!0,configurable:!0}),jasonTabControl.prototype.tabVisible=function(e,t){this.ui.tabVisible(e,t)},jasonTabControlUIHelper.prototype=Object.create(jasonBaseWidgetUIHelper.prototype),jasonTabControlUIHelper.prototype.constructor=jasonTabControlUIHelper,jasonTabControlUIHelper.prototype.renderUI=function(){if(!this.tabsList){this.htmlElement.classList.add(jw.DOM.classes.JW_TAB_CONTAINER),this.tabsList="DIV"==this.htmlElement.tagName?this.htmlElement.children[0]:this.htmlElement,this.tabsList.classList.add(jw.DOM.classes.JW_TAB_UL_CLASS);for(var e=0;e<=this.tabsList.children.length-1;e++){var t=this.tabsList.children[e];t.classList.add(jw.DOM.classes.JW_TAB_PAGE_CLASS),t.setAttribute(jasonWidgets.DOM.attributes.JW_DATA_JW_ITEM_INDEX_ATTR,e),t.setAttribute(jasonWidgets.DOM.attributes.TABINDEX_ATTR,jasonWidgets.common.getNextTabIndex()),this.eventManager.addEventListener(t,jw.DOM.events.CLICK_EVENT,this.onTabClick,!0),this.eventManager.addEventListener(t,jw.DOM.events.TOUCH_START_EVENT,this.onTabTouchStart,!0)}for(var n=[],e=0;e<=this.htmlElement.children.length-1;e++)"DIV"==this.htmlElement.children[e].tagName&&n.push(this.htmlElement.children[e]);for(var e=0;e<=n.length-1;e++){var o=n[e];if("DIV"==o.tagName){
var i=this.createElement("div");this.htmlElement.removeChild(o),i.appendChild(o),i.classList.add(jw.DOM.classes.JW_TAB_PAGE_CONTAINER),this.widget.options.pageHeight&&(i.style.height=this.widget.options.pageHeight+"px"),i.setAttribute(jasonWidgets.DOM.attributes.JW_DATA_JW_ITEM_INDEX_ATTR,e),this.tabContents.push(i)}}for(var e=0;e<=this.tabContents.length-1;e++)this.htmlElement.appendChild(this.tabContents[e])}},jasonTabControlUIHelper.prototype.onTabClick=function(e){if(!this.widget.readonly&&this.widget.enabled){for(var t=e.target;"LI"!=t.tagName;)t=t.parentNode;this.widget.tabIndex=parseInt(t.getAttribute(jasonWidgets.DOM.attributes.JW_DATA_JW_ITEM_INDEX_ATTR))}},jasonTabControlUIHelper.prototype.onTabTouchStart=function(e){this.onTabClick(e)},jasonTabControlUIHelper.prototype.setActiveTab=function(e){for(var t=0;t<=this.tabsList.children.length-1;t++){var n=this.tabsList.children[t],o=this.tabContents[t];n.classList.remove(jw.DOM.classes.JW_TAB_PAGE_ACTIVE),o&&o.classList.remove(jw.DOM.classes.JW_TAB_PAGE_ACTIVE)}var i=parseInt(e.getAttribute(jasonWidgets.DOM.attributes.JW_DATA_JW_ITEM_INDEX_ATTR));isNaN(i)||(e.classList.add(jw.DOM.classes.JW_TAB_PAGE_ACTIVE),this.tabsList.children[i].classList.add(jw.DOM.classes.JW_TAB_PAGE_ACTIVE),this.tabContents.forEach(function(e,t){e.style.display="none"}),this.tabContents[i].style.display="")},jasonTabControlUIHelper.prototype.updateEnabled=function(e){jasonBaseWidgetUIHelper.prototype.updateEnabled.call(this,e);for(var t=0;t<=this.tabsList.children.length-1;t++)e?this.tabsList.children[t].classList.remove(jw.DOM.classes.JW_DISABLED):this.tabsList.children[t].classList.add(jw.DOM.classes.JW_DISABLED)},jasonTabControlUIHelper.prototype.updateVisible=function(e){jasonBaseWidgetUIHelper.prototype.updateVisible.call(this,e)},jasonTabControlUIHelper.prototype.updateReadOnly=function(e){jasonBaseWidgetUIHelper.prototype.updateReadOnly.call(this,e)},jasonTabControlUIHelper.prototype.tabVisible=function(e,t){var n=this.tabsList.children[e];n&&(n.style.display=t?"":"none")},jasonNumericTextbox.prototype=Object.create(jasonTextbox.prototype),jasonNumericTextbox.prototype.constructor=jasonNumericTextbox,jasonNumericTextbox.prototype.readValue=function(e){return e},jasonNumericTextbox.prototype.setValue=function(e){var t=jw.common.getVariableType(e),n=!1;switch(t){case jw.enums.dataType.string:var o=parseFloat(e);if(isNaN(o)){n=!0;break}return o;case jw.enums.dataType.number:return e;default:n=!0}n&&jw.common.throwError(jw.errorTypes.typeError,"Invalid value type for jasonNumericTextBox.")},jasonNumericTextbox.prototype.formatValue=function(e){this.options.min&&this._value<this.options.min&&(this._value=this.options.min),this.options.max&&this._value>this.options.max&&(this._value=this.options.max);var t=jw.common.formatNumber("percent"==this.options.style.toLowerCase()?this._value/100:this._value,this.options);return(this.options.prefix?this.options.prefix:"")+t+(this.options.suffix?this.options.suffix:"")},jasonNumericTextbox.prototype.compareValue=function(e){return this._value==e?jw.enums.comparison.equal:jw.enums.comparison.notEqual},jasonNumericTextboxUIHelper.prototype=Object.create(jasonTextboxUIHelper.prototype),jasonNumericTextboxUIHelper.prototype.constructor=jasonNumericTextboxUIHelper,jasonNumericTextboxUIHelper.prototype.renderUI=function(){jasonTextboxUIHelper.prototype.renderUI.call(this),this.htmlElement.classList.contains(jw.DOM.classes.JW_NUMERIC_TEXT_BOX)||(this.htmlElement.classList.add(jw.DOM.classes.JW_NUMERIC_TEXT_BOX),this.numericUpButton=jw.htmlFactory.createJWButton(null,jw.DOM.icons.CHEVRON_UP),this.numericUpButton.setAttribute(jw.DOM.attributes.TITLE_ATTR,this.options.localization.numericTextBox.increaseValue),this.numericDownButton=jw.htmlFactory.createJWButton(null,jw.DOM.icons.CHEVRON_DOWN),this.numericDownButton.setAttribute(jw.DOM.attributes.TITLE_ATTR,this.options.localization.numericTextBox.decreaseValue),this.numericUpButton.setAttribute(jw.DOM.attributes.JW_DIRECTION_ATTR,jw.DOM.attributeValues.JW_COMBOBOX_LIST_STATE_UP),this.numericDownButton.setAttribute(jw.DOM.attributes.JW_DIRECTION_ATTR,jw.DOM.attributeValues.JW_COMBOBOX_LIST_STATE_DOWN),this.htmlElement.appendChild(this.numericUpButton),this.htmlElement.appendChild(this.numericDownButton))},jasonNumericTextboxUIHelper.prototype.initializeEvents=function(){jasonTextboxUIHelper.prototype.initializeEvents.call(this),this.eventManager.addEventListener(this.numericUpButton,jw.DOM.events.CLICK_EVENT,this.onNumericButtonClick,!0),this.eventManager.addEventListener(this.numericDownButton,jw.DOM.events.CLICK_EVENT,this.onNumericButtonClick,!0),this.eventManager.addEventListener(this.inputControl,jw.DOM.events.KEY_DOWN_EVENT,this.onNumericInputKeyDown,!0)},jasonNumericTextboxUIHelper.prototype.onNumericButtonClick=function(e){if(!this.widget.readonly&&this.widget.enabled){var t=e.currentTarget.getAttribute(jw.DOM.attributes.JW_DIRECTION_ATTR);if(void 0!=t&&t.trim().length>0)if(void 0==this.widget.value||void 0!=this.widget.value&&0==this.widget.value.length)this.widget.value=t==jw.DOM.attributeValues.JW_COMBOBOX_LIST_STATE_DOWN?-1:0;else{var n=t==jw.DOM.attributeValues.JW_COMBOBOX_LIST_STATE_DOWN?this.widget.value-this.options.step:this.widget.value+this.options.step;this.widget.value=n}}},jasonNumericTextboxUIHelper.prototype.onNumericInputKeyDown=function(e){if(!this.widget.readonly&&this.widget.enabled){var t=e.which||e.keyCode,n=this._acceptableKeyCodes.indexOf(t)<0;if((t==jw.keycodes.A&&e.ctrlKey||t==jw.keycodes.C&&e.ctrlKey||t==jw.keycodes.V&&e.ctrlKey)&&(n=!1),t==jw.keycodes.enter){var o=parseFloat(this.inputControl.value);isNaN(o)||(this.widget.value=o)}n&&e.preventDefault()}},jasonNumericTextboxUIHelper.prototype.onTextInputBlur=function(e,t){if(!this.widget.readonly&&this.widget.enabled){var n=parseFloat(this.inputControl.value);this.widget.value=isNaN(n)?null:n,jasonTextboxUIHelper.prototype.onTextInputBlur.call(this,e,t)}},jasonNumericTextboxUIHelper.prototype.onTextInputFocus=function(e,t){!this.widget.readonly&&this.widget.enabled&&(jasonTextboxUIHelper.prototype.onTextInputFocus.call(this,e,t),this.widget.value&&(this.inputControl.value=this.widget.value))},jasonNumericTextboxUIHelper.prototype.updateEnabled=function(e){jasonTextboxUIHelper.prototype.updateEnabled.call(this,e),e?(this.numericUpButton.removeAttribute(jw.DOM.attributes.DISABLED_ATTR),this.numericUpButton.classList.remove(jw.DOM.classes.JW_DISABLED),this.numericDownButton.removeAttribute(jw.DOM.attributes.DISABLED_ATTR),this.numericDownButton.classList.remove(jw.DOM.classes.JW_DISABLED)):(this.numericUpButton.setAttribute(jw.DOM.attributes.DISABLED_ATTR,!0),this.numericUpButton.classList.add(jw.DOM.classes.JW_DISABLED),this.numericDownButton.setAttribute(jw.DOM.attributes.DISABLED_ATTR,!0),this.numericDownButton.classList.add(jw.DOM.classes.JW_DISABLED))},jasonNumericTextboxUIHelper.prototype.updateVisible=function(e){jasonTextboxUIHelper.prototype.updateVisible.call(this,e)},jasonNumericTextboxUIHelper.prototype.updateReadOnly=function(e){jasonTextboxUIHelper.prototype.updateReadOnly.call(this,e),e?(this.numericUpButton.setAttribute(jw.DOM.attributes.READONLY_ATTR,!0),this.numericDownButton.setAttribute(jw.DOM.attributes.READONLY_ATTR,!0)):(this.numericUpButton.removeAttribute(jw.DOM.attributes.READONLY_ATTR),this.numericDownButton.removeAttribute(jw.DOM.attributes.READONLY_ATTR))},jasonGridUIHelper.prototype=Object.create(jasonBaseWidgetUIHelper.prototype),jasonGridUIHelper.prototype.constructor=jasonGridUIHelper,jasonGridUIHelper.prototype.initializeTemplates=function(){var e="function"==typeof this.options.customization.rowTemplate?this.options.customization.rowTemplate():this.options.customization.rowTemplate,t=document.getElementById(e);if(e=t?"SCRIPT"==t.tagName?t.innerHTML:t.outerHTML:"string"==typeof e&&e.trim().length>0?e:null,this.options.customization.rowTemplate=e,this.options.columns)for(var n=0;n<=this.options.columns.length-1;n++){var o=this.options.columns[n],i="function"==typeof o.headerTemplate?o.headerTemplate():o.headerTemplate,t=document.getElementById(i);i=t?"SCRIPT"==t.tagName?t.innerHTML:t.outerHTML:"string"==typeof i&&i.trim().length>0?i:null,o.headerTemplate=i;var s="function"==typeof o.cellTemplate?o.cellTemplate():o.cellTemplate;t=document.getElementById(s),s=t?"SCRIPT"==t.tagName?t.innerHTML:t.outerHTML:"string"==typeof s&&s.trim().length>0?s:null,o.cellTemplate=s}},jasonGridUIHelper.prototype.initialize=function(){this._renderGridContainers(),this._renderHeader(),this._enableColumnDragResize(),jasonBaseWidgetUIHelper.prototype.initialize.call(this)},jasonGridUIHelper.prototype._createColumnMenu=function(){this.columnMenu=new jasonMenu(this.gridHeaderTableContainer,{_debug:this.options._debug,menu:this.widget.defaultGridColumnMenu,invokable:!0,hideDelay:350,orientation:"vertical",autoHide:!0,events:[{eventName:jw.DOM.events.JW_EVENT_ON_JW_MENU_CHECKBOX_CLICKED,listener:this._onColumnMenuItemChecked,callingContext:this},{eventName:jw.DOM.events.JW_EVENT_ON_JW_MENU_ITEM_CLICKED,listener:this._onColumnMenuItemClicked,callingContext:this},{eventName:jw.DOM.events.JW_EVENT_ON_HIDE,listener:this._onColumnMenuHidden,callingContext:this}]},jasonMenuUIHelper)},jasonGridUIHelper.prototype._initializeEvents=function(){this.eventManager.addEventListener(this.gridDataTable,jw.DOM.events.MOUSE_DOWN_EVENT,this._onSelectionChange,!0),this.eventManager.addEventListener(this.gridDataContainer,jw.DOM.events.SCROLL_EVENT,this._onDataContainerScroll),jwWindowEventManager.addWindowEventListener("resize",this._onResize);var e=this;this.eventManager.addEventListener(this.pagerButtonFirst,jw.DOM.events.CLICK_EVENT,function(t){e._goToPage(1,t),t.stopPropagation()}),this.eventManager.addEventListener(this.pagerButtonPrior,jw.DOM.events.CLICK_EVENT,function(t){e._goToPage(e._currentPage-1,t),t.stopPropagation()}),this.eventManager.addEventListener(this.pagerButtonNext,jw.DOM.events.CLICK_EVENT,function(t){e._goToPage(e._currentPage+1,t),t.stopPropagation()}),this.eventManager.addEventListener(this.pagerButtonLast,jw.DOM.events.CLICK_EVENT,function(t){e._goToPage(e._pageCount,t),t.stopPropagation()}),this.eventManager.addEventListener(this.pagerInput,jw.DOM.events.BLUR_EVENT,function(t){e._goToPage(e.pagerInput.value,t),t.stopPropagation()}),this.eventManager.addEventListener(this.pagerInput,jw.DOM.events.INPUT_EVENT,function(t){e._goToPage(e.pagerInput.value,t),t.stopPropagation()})},jasonGridUIHelper.prototype._clearHeaderEvents=function(){for(var e=0;e<=this.gridHeaderTableRow.children.length-1;e++){var t=this.gridHeaderTableRow.children[e],n=jw.common.getData(t,"jwColumnResizer");n&&n.destroy();var o=jw.common.getData(t,"jwColumnReOrdering");o&&o.destroy(),jw.common.removeJWEvents(t,!0)}},jasonGridUIHelper.prototype._onColumnMenuItemChecked=function(e,t){var n,o=this.options.columns.filter(function(e){return e.fieldName==t.item.name})[0];n=t.checked?this.widget.showColumn(o):this.widget.hideColumn(o),n||(t.cancel=!0)},jasonGridUIHelper.prototype._onColumnMenuItemClicked=function(e,t){var n=this._currentFilterColumn;switch(t.item.name){case"mnuSortAsc":this.widget.sortBy(n.fieldName,"asc"),this.columnMenu.ui.hideMenu();break;case"mnuSortDesc":this.widget.sortBy(n.fieldName,"desc"),this.columnMenu.ui.hideMenu();break;case"mnuClearSorting":this.widget.dataSource.clearSorting(),this._goToPage(this._currentPage,!0),this.columnMenu.ui.hideMenu();break;case"mnuClearFiltering":this.widget.dataSource.clearFilters();for(var o=this.gridHeaderTableRow.getElementsByTagName("th"),i=0;i<=o.length-1;i++)o[i].classList.remove(jw.DOM.classes.JW_GRID_FIELD_HAS_FILTER);this._clearFilterControls(),this._goToPage(this._currentPage,!0),this.columnMenu.ui.hideMenu()}},jasonGridUIHelper.prototype._onColumnMenuHidden=function(){this._clearFilterControls()},jasonGridUIHelper.prototype._manageCellSelection=function(e,t){var n=this.gridSelectedCells[this.gridSelectedCells.indexOf(e)];(1==this.options.cellMultiSelect&&0==t||!this.options.cellMultiSelect)&&(this.gridSelectedCells.forEach(function(e){e.children[0].classList.remove(jw.DOM.classes.JW_GRID_SELECTED_CELL_CLASS)}),this.gridSelectedCells=new Array),n&&0==this.options.cellMultiSelect||n&&1==this.options.cellMultiSelect&&n.children[0].classList.contains(jw.DOM.classes.JW_GRID_SELECTED_CELL_CLASS)?n.children[0].classList.remove(jw.DOM.classes.JW_GRID_SELECTED_CELL_CLASS):e.children[0].classList.add(jw.DOM.classes.JW_GRID_SELECTED_CELL_CLASS),this.gridSelectedCells.push(e)},jasonGridUIHelper.prototype._manageCellFocused=function(e){this._focusedCell&&this._focusedCell.children[0].classList.remove(jw.DOM.classes.JW_GRID_FOCUSED_CELL_CLASS),e.children[0].classList.add(jw.DOM.classes.JW_GRID_FOCUSED_CELL_CLASS),this._focusedCell=e},jasonGridUIHelper.prototype._manageRowSelection=function(e,t){var n=this.gridSelectedRows[this.gridSelectedRows.indexOf(e)];1==this.options.multiSelect&&0==t&&(this.gridSelectedRows.forEach(function(e){e.classList.remove(jw.DOM.classes.JW_GRID_SELECTED_ROW_CLASS)}),this.gridSelectedRows=new Array,this.widget.selectedRows=new Array),n&&0==this.options.multiSelect||n&&1==this.options.multiSelect&&n.classList.contains(jw.DOM.classes.JW_GRID_SELECTED_ROW_CLASS)?n.classList.remove(jw.DOM.classes.JW_GRID_SELECTED_ROW_CLASS):e.classList.add(jw.DOM.classes.JW_GRID_SELECTED_ROW_CLASS);var o=e.getAttribute(jasonWidgets.DOM.attributes.JW_DATA_ROW_ID_ATTR);this.options.multiSelect||(this.gridSelectedRows=new Array,this.widget.selectedRows=new Array),this.widget.selectedRows.push(this.widget.dataSource.data[o]),this.gridSelectedRows.push(e)},jasonGridUIHelper.prototype._onSelectionChange=function(e){if(!this.widget.readonly&&this.widget.enabled){var t=e.target,n=e.target;if("TABLE"!=n.tagName){for(;n&&"TR"!=n.tagName;)n=n.parentNode;for(;"TD"!=t.tagName;)t=t.parentNode;n.className.indexOf(jw.DOM.classes.JW_GRID_JW_TABLE_GROUP_ROW_CLASS)>=0||(this._manageRowSelection(n,e.ctrlKey),this._manageCellSelection(t,e.ctrlKey),this._manageCellFocused(t),this.widget.triggerEvent(jw.DOM.events.JW_EVENT_ON_SELECTION_CHANGE,this.widget.selectedRows))}}},jasonGridUIHelper.prototype._onGridFilterButtonClick=function(e){},jasonGridUIHelper.prototype._keyboardNavigateToCell=function(e,t){var n=this._focusedCell,o=jw.common.getParentElement("tr",n),i=null;switch(e=e.toLowerCase()){case"left":if(i=n.previousSibling,!i){var s=o.previousSibling;i=s.childNodes[s.childNodes.length-1]}this._manageCellFocused(i);break;case"up":var a=n.cellIndex,s=o.previousSibling;if(s)s.classList.contains(jw.DOM.classes.JW_GRID_JW_TABLE_GROUP_ROW_CLASS)?s.getElementsByClassName(jw.DOM.classes.JW_BUTTON)[0]&&s.getElementsByClassName(jw.DOM.classes.JW_BUTTON)[0].focus():(i=s.children[a],this._manageCellFocused(i));else{var r=this.gridHeaderTableRow.children[a];if(r){var l=r.getElementsByClassName("jw-header-cell-caption")[0];if(l){var d=l.getElementsByTagName("a")[0];d&&d.focus()}}}break;case"right":var i=n.nextSibling;if(!i){var u=o.nextSibling;i=u.childNodes[0]}this._manageCellFocused(i);break;case"down":var a=n.cellIndex,u=o.nextSibling;u&&(i=u.classList.contains(jw.DOM.classes.JW_GRID_JW_TABLE_GROUP_ROW_CLASS)?u.getElementsByClassName(jw.DOM.classes.JW_BUTTON)[0]:u.children[a],this._manageCellFocused(i))}if(i){var h=this.gridDataContainer.offsetHeight+this.gridDataContainer.scrollTop,c=this.gridDataContainer.offsetWidth+this.gridDataContainer.scrollLeft,p=i.offsetTop+i.offsetHeight,m=i.offsetLeft+i.offsetWidth,g=p>=h||Math.abs(h-p)<=i.offsetHeight,_=Math.abs(h-p)>=this.gridDataContainer.offsetHeight||this.gridDataContainer.offsetHeight-Math.abs(p-h)<=i.offsetHeight,E=m>=c||Math.abs(c-m)<=i.offsetWidth,w=Math.abs(c-m)>=this.gridDataContainer.offsetWidth||this.gridDataContainer.offsetWidth-Math.abs(m-c)<=i.offsetWidth;if(g||_||E||w){var f;g&&(f=this.gridDataContainer.scrollTop+i.offsetHeight,Math.abs(this.gridDataContainer.offsetHeight+f-i.offsetTop)<=i.offsetHeight&&(f+=i.offsetHeight),this.gridDataContainer.scrollTop=f),_&&(f=this.gridDataContainer.scrollTop-i.offsetHeight,Math.abs(this.gridDataContainer.offsetHeight-f-i.offsetTop)>=i.offsetHeight&&(f-=i.offsetHeight),this.gridDataContainer.scrollTop=f),E&&(f=this.gridDataContainer.scrollLeft+i.offsetWidth,Math.abs(this.gridDataContainer.offsetWidth-f-i.offsetLeft)>=i.offsetWidth&&(f+=i.offsetWidth),this.gridDataContainer.scrollLeft=f),w&&(f=this.gridDataContainer.scrollLeft-i.offsetWidth,Math.abs(this.gridDataContainer.offsetWidth-f-i.offsetLeft)>=i.offsetWidth&&(f-=i.offsetWidth),this.gridDataContainer.scrollLeft=f)}}},jasonGridUIHelper.prototype._onGridCellKeyDown=function(e){var t=e.keyCode||e.which,n=!0;switch(t){case 9:n=!1;break;case 37:this._keyboardNavigateToCell("left",e.ctrlKey);break;case 38:this._keyboardNavigateToCell("up",e.ctrlKey);break;case 39:this._keyboardNavigateToCell("right",e.ctrlKey);break;case 40:this._keyboardNavigateToCell("down",e.ctrlKey);break;case 32:this._manageCellSelection(this._focusedCell,e.ctrlKey);break;case 13:e.ctrlKey&&this._manageRowSelection(this._focusedCell.parentNode,e.ctrlKey)}e.stopPropagation(),n&&e.preventDefault()},jasonGridUIHelper.prototype._onGridFocus=function(e){if(!this.widget.readonly&&this.widget.enabled&&!this._focusedCell){var t=this.gridDataTableBody.children[0];t&&(t=t.children[0],t&&(this._manageCellSelection(t,!1),this._manageCellFocused(t)))}},jasonGridUIHelper.prototype._onGridColumnMenuIconClick=function(e){e.stopPropagation(),!this.widget.readonly&&this.widget.enabled&&0==e.button&&(this._currentTHElement=jasonWidgets.common.getParentElement("TH",e.currentTarget),this._currentTHElement&&(this._currentFilterColumn=this.widget._columnByField(this._currentTHElement.getAttribute(jw.DOM.attributes.JW_GRID_COLUMN_FIELD_ATTR)),this._currentFilterField=this._currentFilterColumn.fieldName,this.columnMenu.ui.hideMenu(),this.columnMenu.ui.showMenu(e.currentTarget.parentElement),this._updateFilterInputTypes()))},jasonGridUIHelper.prototype._onResize=function(e){this._sizeColumns()},jasonGridUIHelper.prototype._onDataContainerScroll=function(e){this.gridHeaderTableContainer.scrollLeft=this.gridDataContainer.scrollLeft},jasonGridUIHelper.prototype._onGridColumnCaptionClick=function(e){if(!this.widget.readonly&&this.widget.enabled){var t=jw.common.getParentElement("TH",e.target);if(t){var n=e.keyCode||e.which;if("mousedown"==e.type&&0==e.button||32==n||13==n){var o=parseInt(t.getAttribute(jw.DOM.attributes.JW_GRID_COLUMN_ID_ATTR)),i=t.getAttribute(jw.DOM.attributes.JW_GRID_COLUMN_SORT_ATTR);i=i&&"asc"==i?"desc":"asc",t.setAttribute(jw.DOM.attributes.JW_GRID_COLUMN_SORT_ATTR,i),this.widget.sortBy(this.options.columns[o].fieldName,i),e.stopPropagation()}}}},jasonGridUIHelper.prototype._onGridColumnKeyDown=function(e){if(!this.widget.readonly&&this.widget.enabled){var t=e.keyCode||e.which;switch(t){case 40:e.preventDefault();var n=parseInt(e.currentTarget.getAttribute(jw.DOM.attributes.JW_GRID_COLUMN_ID_ATTR));this.gridDataTableBody.children[0]&&this.gridDataTableBody.children[0].children[n]&&this._manageCellFocused(this.gridDataTableBody.children[0].children[n]),this.gridDataTable.focus();break;case 9:var o=this,i=e.currentTarget.parentNode.lastChild,s=!e.shiftKey&&e.currentTarget==i&&e.target.parentNode==i.lastChild;setTimeout(function(){o.gridDataContainer.scrollLeft=o.gridHeaderTableContainer.scrollLeft,s&&o.gridDataTable.focus()})}}},jasonGridUIHelper.prototype._onGridFooterKeyDown=function(e){if(!this.widget.readonly&&this.widget.enabled){var t=e.keyCode||e.which;switch(t){case 9:var n=this,o=n.pagerContainer.firstChild==e.target;setTimeout(function(){o&&e.shiftKey&&n.gridDataTable.focus()})}}},jasonGridUIHelper.prototype._onGridColumnFocus=function(e){this.gridDataContainer.scrollLeft=this.gridHeaderTableContainer.scrollLeft},jasonGridUIHelper.prototype._onGroupCollapseExpandIconClick=function(e){if(!this.widget.readonly&&this.widget.enabled){var t="SPAN"==e.target.tagName?e.target:e.target.children[0];this._collapseExpandGroup(null,null,t)}},jasonGridUIHelper.prototype._collapseExpandGroup=function(e,t,n){var o=void 0==n?jw.common.getElementsByAttributes(this.gridDataTableBody,[jasonWidgets.DOM.attributes.JW_DATA_GROUPING_LEVEL_ATTR,jasonWidgets.DOM.attributes.JW_DATA_GROUPING_KEY_ATTR],[e,t],"tr."+jw.DOM.classes.JW_GRID_JW_TABLE_GROUP_ROW_CLASS)[0]:jw.common.getParentElement("TR",n);n=void 0==n?o.getElementsByTagName("SPAN")[0]:"SPAN"==n.tagName?n:n.getElementsByTagName("SPAN")[0],n.className.indexOf(jw.DOM.icons.CIRCLE_ARROW_UP)>=0?(n.className=jw.DOM.icons.CIRCLE_ARROW_DOWN,o.setAttribute(jasonWidgets.DOM.attributes.JW_DATA_GROUP_EXPANDED_ATTR,"false"),this._collapseGroup(o),this.widget.triggerEvent(jw.DOM.events.JW_EVENT_ON_GROUP_COLLAPSE,o.getAttribute(jasonWidgets.DOM.attributes.JW_DATA_GROUPING_KEY_ATTR))):(n.className=jw.DOM.icons.CIRCLE_ARROW_UP,o.setAttribute(jasonWidgets.DOM.attributes.JW_DATA_GROUP_EXPANDED_ATTR,"true"),this._expandGroup(o),this.widget.triggerEvent(jw.DOM.events.JW_EVENT_ON_GROUP_EXPAND,o.getAttribute(jasonWidgets.DOM.attributes.JW_DATA_GROUPING_KEY_ATTR)))},jasonGridUIHelper.prototype._isGroupExpanded=function(e,t,n){var o,i=void 0==n?jw.common.getElementsByAttributse(this.gridDataTableBody,[jasonWidgets.DOM.attributes.JW_DATA_GROUPING_LEVEL_ATTR,jasonWidgets.DOM.attributes.JW_DATA_GROUPING_KEY_ATTR],[e,t])[0]:jw.common.getParentElement("TR",n);return o=i.getAttribute(jasonWidgets.DOM.attributes.JW_DATA_GROUP_EXPANDED_ATTR),void 0!=o&&jw.common.strToBool(o)},jasonGridUIHelper.prototype._onColumnDrop=function(e,t){this._makeGridSelectable();var n=t.event,o=t.column;if(!this.widget.readonly&&this.widget.enabled){n.preventDefault&&n.preventDefault();var i=document.elementFromPoint(n.clientX,n.clientY);if(i){var s=o.getAttribute(jw.DOM.attributes.JW_GRID_COLUMN_FIELD_ATTR),a=this.widget._columnByField(s);if((i==this.gridGroupingContainer||jw.common.contains(this.gridGroupingContainer,i))&&a&&this.options.grouping&&a.fieldName){var r=this.widget.dataSource.groupingExists(a.fieldName);a&&!r&&this.widget.groupByField(a.fieldName)}var l=jw.common.getParentElement("TH",i);if("TH"==l.tagName){var d=l.getAttribute(jw.DOM.attributes.JW_GRID_COLUMN_FIELD_ATTR),u=this.widget._columnByField(d);u.index!=a.index&&this.moveColumn(a,u.index)}}this.isColumnMoveResize=!1}},jasonGridUIHelper.prototype._onMoveResizeStart=function(e,t){this.isColumnMoveResize=!0},jasonGridUIHelper.prototype.moveColumn=function(e,t){var n=this.widget.dataSource.grouping.length;jw.common.moveItemsInArray(this.options.columns,e.index+n,t+n),jw.common.moveDomElements(this.gridHeaderTableRow,e.index+n,t+n),jw.common.moveDomElements(this.headerTableColGroup,e.index+n,t+n),jw.common.moveDomElements(this.dataTableColGroup,e.index+n,t+n),this._refreshCurrentView(),this.widget.triggerEvent(jw.DOM.events.JW_EVENT_ON_COLUMN_POSITION_CHANGE,{column:e,fromIndex:e.index+n,toIndex:t+n})},jasonGridUIHelper.prototype._onColumnResizeEnd=function(e,t){var n=t.getAttribute(jw.DOM.attributes.JW_GRID_COLUMN_FIELD_ATTR),o=this.widget._columnByField(n);o&&(o.width=t.offsetWidth),this.widget.triggerEvent(jw.DOM.events.JW_EVENT_ON_COLUMN_RESIZED,{column:o,newWidth:o.width}),this.isColumnMoveResize=!1},jasonGridUIHelper.prototype._onGroupColumnRemoveClick=function(e){var t=jw.common.getParentElement("DIV",e.target),n=t.getAttribute(jasonWidgets.DOM.attributes.JW_DATA_GROUPING_FIELD_ATTR);this.widget.removeGrouping(n)},jasonGridUIHelper.prototype.renderUI=function(e,t){this._calculatePageCount(this.widget.dataSource.data);var n=e?e:0,o=t?t:0;0==o&&(o=this.widget.dataSource.data?this.widget.dataSource.data.length:0,o=this.widget.options.paging&&this.widget.options.paging.pagesize&&o>this.widget.options.paging.pagesize?this.widget.options.paging.pagesize:o),this._renderRows(n,o-1),this._sizeColumns(),this._renderFooter(o);var i=35;this.options.grouping&&(i+=35),this.options.paging&&(i+=35),this.gridDataContainer.style.height=jw.common.formatString("calc(100% - {0}px",[i]),""==this.gridDataContainer.style.height&&(this.gridDataContainer.style.height=jw.common.formatString("calc(100% - {0}px",[i]))},jasonGridUIHelper.prototype._renderGridContainers=function(){if(!this.gridHeaderContainer){if(this.htmlElement.classList.add(jw.DOM.classes.JW_GRID_CLASS),this.gridHeaderContainer=this.createElement("div"),this.gridHeaderContainer.classList.add(jw.DOM.classes.JW_GRID_HEADER_CONTAINER),this.gridHeaderTableContainer=this.createElement("div"),this.gridHeaderTableContainer.classList.add(jw.DOM.classes.JW_GRID_HEADER_JW_TABLE_CONTAINER),this.gridHeaderContainer.appendChild(this.gridHeaderTableContainer),this.widget.options.grouping||this.gridHeaderContainer.classList.add(jw.DOM.classes.JW_GRID_HEADER_CONTAINER_NO_GROUPING),this.gridDataContainer=this.createElement("div"),this.gridDataContainer.classList.add(jw.DOM.classes.JW_GRID_DATA_CONTAINER),this.gridFooterContainer=this.createElement("div"),this.gridFooterContainer.classList.add(jw.DOM.classes.JW_GRID_FOOTER_CONTAINER),this.eventManager.addEventListener(this.gridFooterContainer,jw.DOM.events.KEY_DOWN_EVENT,this._onGridFooterKeyDown,!0),1==this.options.grouping&&!this.gridGroupingContainer){this.gridGroupingContainer=this.htmlElement.appendChild(this.createElement("div")),this.gridGroupingContainer.classList.add(jw.DOM.classes.JW_GRID_GROUPING_CONTAINER_CLASS);var e=this.createElement("span");e.classList.add(jw.DOM.classes.JW_GRID_GROUPING_MESSAGE),this.gridGroupingContainer.appendChild(e)}this.htmlElement.appendChild(this.gridHeaderContainer),this.htmlElement.appendChild(this.gridDataContainer),this.htmlElement.appendChild(this.gridFooterContainer)}},jasonGridUIHelper.prototype._makeGridUnselectable=function(){this.htmlElement.classList.add(jw.DOM.classes.JW_GRID_UNSELECTABLE)},jasonGridUIHelper.prototype._makeGridSelectable=function(){this.htmlElement.classList.remove(jw.DOM.classes.JW_GRID_UNSELECTABLE)},jasonGridUIHelper.prototype._enableColumnDragResize=function(){this.options.reordering||this.options.grouping||this.options.resizing?(this._gridResizer=new jasonGridResizer(this.widget,{events:[{eventName:jw.DOM.events.JW_EVENT_ON_ELEMENT_RESIZING,listener:this._makeGridUnselectable.bind(this)},{eventName:jw.DOM.events.JW_EVENT_ON_ELEMENT_RESIZED,listener:this._makeGridSelectable.bind(this)}]}),this._gridColumnDragger=new jasonGridColumnDragger(this.widget,{events:[{eventName:jw.DOM.events.DRAG_START_EVENT,listener:this._makeGridUnselectable.bind(this)},{eventName:jw.DOM.events.DRAG_OVER_EVENT,listener:this._onColumnDrop}],changeCursor:!1})):(this._gridResizer&&(this._gridResizer.destroy(),this._gridResizer=null),this._gridColumnDragger&&(this._gridColumnDragger.destroy(),this._gridColumnDragger=null))},jasonGridUIHelper.prototype._sizeColumns=function(){this.hasScrollBars=this.gridDataContainer.scrollHeight>this.gridHeaderContainer.parentNode.clientHeight,this.scrollBarWidth||(this.scrollBarWidth=jasonWidgets.common.scrollBarWidth());var e=this._fixedWidthColumnsSum();if(this.gridHeaderTableContainer.style.width=this.hasScrollBars?"calc(100% - "+this.scrollBarWidth+"px)":"",""==this.gridHeaderTableContainer.style.width&&(this.gridHeaderTableContainer.style.width=this.hasScrollBars?"-webkit-calc(100% - "+this.scrollBarWidth+"px)":""),this.gridHeaderTable.clientWidth!=this.gridDataTable.clientWidth){var t=this.gridHeaderTableContainer.clientWidth;this.gridHeaderTable.style.width=t+"px",this.gridDataTable.style.width=t+"px"}for(var n=(this.gridHeaderTableContainer.clientWidth-e-1)/this._columnCountWithNoFixedWidth()-this._groupColumnsWidth(),o=this.gridHeaderTable.getElementsByTagName("colgroup")[0],i=this.gridDataTable.getElementsByTagName("colgroup")[0],s=0;s<=o.children.length-1;s++){var a=this.options.columns[s],r=o.children[s],l=i.children[s],t="0px";if(a.visible){if(a.width&&isNaN(a.width)&&a.width.indexOf("%")>=0){var d=parseFloat(a.width.replace("%",""));a.width=this.gridHeaderTableContainer.clientWidth*d/100}t=a.width?isNaN(a.width)?a.width:a.width+"px":n+"px",r.style.width=t,l.style.width=t}}if(window.navigator.vendor.indexOf("Apple")>=0){this._firstRun=!1;var u=this;this.htmlElement.style.display="none",setTimeout(function(){u.htmlElement.style.display=""})}},jasonGridUIHelper.prototype._fixedWidthColumnsSum=function(){var e=0,t=(new RegExp("/[^0-9.,]/g"),this);return this.options.columns.forEach(function(n){if(n.width&&!n.groupColumn&&n.visible){var o=0;if(n.width&&isNaN(n.width)&&n.width.indexOf("%")>=0){var i=parseFloat(n.width.replace("%",""));o=t.gridHeaderTableContainer.clientWidth*i/100}else o=isNaN(n.width)?parseFloat(n.width.replace(/\D/g,"")):n.width;e+=o}}),e},jasonGridUIHelper.prototype._columnCountWithNoFixedWidth=function(){return this.options.columns.filter(function(e){return!e.width}).length},jasonGridUIHelper.prototype._groupColumnsWidth=function(){return 25*this.options.columns.filter(function(e){return!!e.groupColumn}).length},jasonGridUIHelper.prototype._updateFilterInputTypes=function(){if(this._currentFilterColumn)switch(this._prepareFilterValues(this._currentFilterColumn.dataType),this.firstFilterCombobox.dataSource.setData(this.filterValues),this.secondFilterCombobox.dataSource.setData(this.filterValues),jw.common.removeChildren(this.firstFilterInputContainer),jw.common.removeChildren(this.secondFilterInputContainer),this.firstFilterInputContainer.className=jw.DOM.classes.JW_GRID_FILTER_INPUT,this.secondFilterInputContainer.className=jw.DOM.classes.JW_GRID_FILTER_INPUT,this._currentFilterColumn.dataType){case jw.enums.dataType.string:this.firstFilterInput=new jasonTextbox(this.firstFilterInputContainer,{placeholder:this.options.localization.search.searchPlaceHolder}),this.secondFilterInput=new jasonTextbox(this.secondFilterInputContainer,{placeholder:this.options.localization.search.searchPlaceHolder});break;case jw.enums.dataType.number:this.firstFilterInput=new jasonNumericTextbox(this.firstFilterInputContainer,{placeholder:this.options.localization.search.searchPlaceHolder}),this.secondFilterInput=new jasonNumericTextbox(this.secondFilterInputContainer,{placeholder:this.options.localization.search.searchPlaceHolder});break;case jw.enums.dataType.integer:this.firstFilterInput=new jasonNumericTextbox(this.firstFilterInputContainer,{placeholder:this.options.localization.search.searchPlaceHolder,minimumFractionDigits:0}),this.secondFilterInput=new jasonNumericTextbox(this.secondFilterInputContainer,{placeholder:this.options.localization.search.searchPlaceHolder,minimumFractionDigits:0});break;case jw.enums.dataType.currency:this.firstFilterInput=new jasonNumericTextbox(this.firstFilterInputContainer,{placeholder:this.options.localization.search.searchPlaceHolder,style:"currency"}),this.secondFilterInput=new jasonNumericTextbox(this.secondFilterInputContainer,{placeholder:this.options.localization.search.searchPlaceHolder,style:"currency"});break;case jw.enums.dataType.date:this.firstFilterInput=new jasonDatePicker(this.firstFilterInputContainer,{placeholder:this.options.localization.search.searchPlaceHolder}),this.secondFilterInput=new jasonDatePicker(this.secondFilterInputContainer,{placeholder:this.options.localization.search.searchPlaceHolder})}},jasonGridUIHelper.prototype._renderFilterUI=function(){var e=this;if(!this.filterContainer){this._prepareFilterValues(jw.enums.dataType.string),this.filterContainer=this.createElement("div"),this.filterContainer.className=jw.DOM.classes.JW_GRID_FILTER_CONTAINER_CLASS,this.filterContainer.style.display="none",this.filterHeader=this.createElement("div"),this.filterHeader.className=jw.DOM.classes.JW_GRID_FILTER_HEADER_CLASS,this.filterHeaderTitle=this.createElement("span"),this.filterHeaderTitle.appendChild(this.createTextNode(e.options.localization.grid.filtering.filterHeaderCaption)),this.filterHeader.appendChild(this.filterHeaderTitle),this.filterBody=this.createElement("div"),this.filterBody.className=jw.DOM.classes.JW_GRID_FILTER_BODY_CLASS,this.firstFilterOperatorContainer=this.createElement("div"),
this.filterLogicalOperator=this.createElement("div"),this.secondFilterOperatorContainer=this.createElement("div"),this.firstFilterCombobox=new jasonCombobox(this.firstFilterOperatorContainer,{data:this.filterValues,displayFields:["title"],displayFormat:"{0}",keyFieldName:"key",readonly:!0,dropDownList:!0,placeholder:this.options.localization.search.searchPlaceHolder}),this.secondFilterCombobox=new jasonCombobox(this.secondFilterOperatorContainer,{data:this.filterValues,displayFields:["title"],displayFormat:"{0}",keyFieldName:"key",readonly:!0,dropDownList:!0,placeholder:this.options.localization.search.searchPlaceHolder}),this.logicalOperatorCombobox=new jasonCombobox(this.filterLogicalOperator,{data:this.filterLogicalOperators,displayFields:["title"],displayFormat:"{0}",keyFieldName:"Key",readonly:!0,placeHolder:this.options.localization.search.searchPlaceHolder,dropDownList:!0}),this.firstFilterInputContainer=this.createElement("div"),this.firstFilterInputContainer.className=jw.DOM.classes.JW_GRID_FILTER_INPUT,this.secondFilterInputContainer=this.createElement("div"),this.secondFilterInputContainer.className=jw.DOM.classes.JW_GRID_FILTER_INPUT,this.filterBody.appendChild(this.firstFilterOperatorContainer),this.filterBody.appendChild(this.firstFilterInputContainer),this.filterBody.appendChild(this.filterLogicalOperator),this.filterBody.appendChild(this.secondFilterOperatorContainer),this.filterBody.appendChild(this.secondFilterInputContainer),this.filterFooter=this.createElement("div"),this.filterFooter.className=jw.DOM.classes.JW_GRID_FILTER_FOOTER_CLASS,this.filterBtnApply=jw.htmlFactory.createJWButton(this.options.localization.grid.filtering.applyButtonText,jw.DOM.icons.CIRCLE_CHOOSE),this.filterBtnApply.classList.add(jw.DOM.classes.JW_JW_GRID_FILTER_BUTTON_APPLY),this.filterBtnApply.classList.add(jw.DOM.classes.JW_BUTTON_STANDALONE),this.eventManager.addEventListener(this.filterBtnApply,jw.DOM.events.CLICK_EVENT,function(t){e._applyFilter()},!0),this.filterBtnClear=jw.htmlFactory.createJWButton(this.options.localization.grid.filtering.clearButtonText,jw.DOM.icons.CLOSE),this.filterBtnClear.classList.add(jw.DOM.classes.JW_JW_GRID_FILTER_BUTTON_CLEAR),this.filterBtnClear.classList.add(jw.DOM.classes.JW_BUTTON_STANDALONE),this.eventManager.addEventListener(this.filterBtnClear,jw.DOM.events.CLICK_EVENT,function(t){e._clearFilterControls(),e.widget.clearFilter(e._currentFilterField)},!0),jwDocumentEventManager.addDocumentEventListener(jw.DOM.events.MOUSE_DOWN_EVENT,function(t){var n=e.filterContainer.getBoundingClientRect(),o=t.x>n.right||t.x<n.left,i=t.y>n.bottom||t.y<n.top;(o||i)&&""==e.filterContainer.style.display});var t=this.createElement("div");t.classList.add(jw.DOM.classes.JW_CLEAR_FLOAT_CLASS),this.filterFooter.appendChild(this.filterBtnClear),this.filterFooter.appendChild(this.filterBtnApply),this.filterFooter.appendChild(t),this.filterContainer.appendChild(this.filterHeader),this.filterContainer.appendChild(this.filterBody),this.filterContainer.appendChild(this.filterFooter),this._clearFilterControls(),this.widget.htmlElement.appendChild(this.filterContainer)}},jasonGridUIHelper.prototype._applyFilter=function(){var e=[],t=this.firstFilterInput.value;t&&("string"==typeof t&&(t=0==t.trim().length?void 0:t),this._currentFilterColumn.dataType&&(t=jasonWidgets.common.convertValue(t,this._currentFilterColumn.dataType)),e.push({value:t,filterClause:this.firstFilterCombobox.value,logicalOperator:this.logicalOperatorCombobox.value})),secondFilterValue=this.secondFilterInput.value,secondFilterValue&&("string"==typeof secondFilterValue&&(secondFilterValue=0==secondFilterValue.trim().length?void 0:secondFilterValue),this._currentFilterColumn.dataType&&(secondFilterValue=jasonWidgets.common.convertValue(secondFilterValue,this._currentFilterColumn.dataType)),e.push({value:secondFilterValue,filterClause:void 0==secondFilterValue?null:this.secondFilterCombobox.value,logicalOperator:this.secondFilterInput.value?this.secondFilterCombobox.value:null})),e.length>0?this.widget.filterBy(this._currentFilterField,e):this.widget.clearFilter(this._currentFilterField)},jasonGridUIHelper.prototype._clearFilterControls=function(){this.firstFilterCombobox.ui.hideList(),this.secondFilterCombobox.ui.hideList(),this.logicalOperatorCombobox.ui.hideList(),this.firstFilterCombobox.selectItem(0),this.secondFilterCombobox.selectItem(0),this.logicalOperatorCombobox.selectItem(0)},jasonGridUIHelper.prototype._loadFilterValues=function(e){if(e){var t=e.filterValues[0];t&&(this.firstFilterCombobox.selectItem(t.filterClause.key),this.firstFilterInput.value=t.value,this.logicalOperatorCombobox.selectItem(t.logicalOperator.key));var n=e.filterValues[1];n&&n.filterClause&&(this.secondFilterCombobox.selectItem(n.filterClause.key),this.secondFilterInput.value=n.value)}},jasonGridUIHelper.prototype._prepareFilterValues=function(e){var t=this;this.filterValues=[],this.filterValues.push({title:t.options.localization.filter.values.filterValueIsEqual,visible:!0,symbol:"="}),this.filterValues.push({title:t.options.localization.filter.values.filterValueIsNotEqual,visible:!0,symbol:"!="}),e==jw.enums.dataType.string&&(this.filterValues.push({title:t.options.localization.filter.values.filterValueStartsWith,visible:!0,symbol:"startsWith"}),this.filterValues.push({title:t.options.localization.filter.values.filterValueEndsWith,visible:!0,symbol:"endsWith"}),this.filterValues.push({title:t.options.localization.filter.values.filterValueContains,visible:!0,symbol:"contains"})),e!=jw.enums.dataType.string&&(this.filterValues.push({title:t.options.localization.filter.values.filterValueGreaterThan,visible:!0,symbol:">"}),this.filterValues.push({title:t.options.localization.filter.values.filterValueGreaterEqualTo,visible:!0,symbol:">="}),this.filterValues.push({title:t.options.localization.filter.values.filterValueLessThan,visible:!0,symbol:"<"}),this.filterValues.push({title:t.options.localization.filter.values.filterValueLessEqualTo,visible:!0,symbol:"<="})),this.filterValues.forEach(function(e,t){e.key=t}),this.filterLogicalOperators=[],this.filterLogicalOperators.push({title:t.options.localization.filter.operators.and,visible:!0,operator:"and"}),this.filterLogicalOperators.push({title:t.options.localization.filter.operators.or,visible:!0,operator:"or"}),this.filterLogicalOperators.forEach(function(e,t){e.key=t})},jasonGridUIHelper.prototype._columnVisible=function(e,t){var n=this.options.columns.filter(function(e){return 1==e.visible});if(e&&(n.length>1||n[0].fieldName!=e.fieldName)){e.visible=t;var o=t?"":"none",i="th["+jw.DOM.attributes.JW_GRID_COLUMN_FIELD_ATTR+"='"+e.fieldName+"']",s=this.gridHeaderTableRow.querySelectorAll(i)[0];s&&(s.style.display=o),i="col["+jw.DOM.attributes.JW_GRID_COLUMN_FIELD_ATTR+"='"+e.fieldName+"']";var a=this.headerTableColGroup.querySelectorAll(i)[0];a&&(a.style.display=o);var r=this.dataTableColGroup.querySelectorAll("col["+jw.DOM.attributes.JW_GRID_COLUMN_FIELD_ATTR+"='"+e.fieldName+"']")[0];r&&(r.style.display=o);for(var l=document.querySelectorAll("td["+jw.DOM.attributes.JW_DATA_CELL_ID_ATTR+"='"+e.index+"']"),d=0;d<=l.length-1;d++)l[d].style.display=o;for(var u=this.gridDataTableBody.querySelectorAll(".group-row td"),h=this.options.columns.filter(function(e){return 1==e.visible}).length,d=0;d<=u.length-1;d++)u[d].setAttribute(jasonWidgets.DOM.attributes.COLSPAN_ATTR,h);return!0}return!1},jasonGridUIHelper.prototype._refreshCurrentView=function(){var e=this.widget.dataSource.currentDataView;this._calculatePageCount(this.widget.dataSource.currentDataView);var t=this.options.paging?this.options.paging.pagesize:e.length,n=(this._currentPage-1)*t,o=n+t-1;o>e.length&&(o=e.length-1),e=this.widget.dataSource.range(n,o),this._recordPosition.recordStart=n,this._recordPosition.recordStop=o,this._renderRows(0,e.length-1,e)},jasonGridUIHelper.prototype._renderHeader=function(){if(!this.gridHeaderTable){this.gridHeaderTable=this.gridHeaderTableContainer.appendChild(this.createElement("table")),this.headerTableColGroup=this.gridHeaderTable.appendChild(this.createElement("colgroup"));var e=this.gridHeaderTable.appendChild(this.createElement("thead"));this.gridDataTable=this.gridDataContainer.appendChild(this.createElement("table")),this.dataTableColGroup=this.gridDataTable.appendChild(this.createElement("colgroup")),this.gridDataTableBody=this.gridDataTable.appendChild(this.createElement("tbody")),this.gridHeaderTableRow=e.appendChild(this.createElement("tr")),this.gridDataTable.setAttribute(jasonWidgets.DOM.attributes.TABINDEX_ATTR,-1),this.eventManager.addEventListener(this.gridDataTable,jw.DOM.events.KEY_DOWN_EVENT,this._onGridCellKeyDown,!0),this.eventManager.addEventListener(this.gridDataTable,jw.DOM.events.FOCUS_EVENT,this._onGridFocus,!0)}this.headerTableColGroup||(this.headerTableColGroup=this.gridHeaderTable.getElementsByTagName("colgroup")[0]),this.dataTableColGroup||(this.dataTableColGroup=this.gridDataTable.getElementsByTagName("colgroup")[0]),this._renderHeaderColumns(this.headerTableColGroup,this.dataTableColGroup)},jasonGridUIHelper.prototype._renderHeaderColumns=function(e,t){this._clearHeaderEvents(),jw.common.removeChildren(this.gridHeaderTableRow),jw.common.removeChildren(this.headerTableColGroup),jw.common.removeChildren(this.dataTableColGroup);for(var n=this,o=0;o<=this.options.columns.length-1;o++)if(gridColumn=this.options.columns[o],columnIndex=o,gridColumn.visible){var i=e.appendChild(this.createElement("col")),s=t.appendChild(this.createElement("col")),a=this.gridHeaderTableRow.appendChild(this.createElement("th")),r=a.appendChild(this.createElement("div"));r.classList.add(jw.DOM.classes.JW_GRID_HEADER_CELL_CAPTION_CONTAINER);var l=a.appendChild(this.createElement("div"));l.classList.add(jw.DOM.classes.JW_GRID_HEADER_CELL_ICON_CONTAINER),this.eventManager.addEventListener(a,jw.DOM.events.KEY_DOWN_EVENT,this._onGridColumnKeyDown,!0),this.eventManager.addEventListener(a,jw.DOM.events.FOCUS_EVENT,this._onGridColumnFocus,!0,!0);var d=gridColumn.Tooltip?gridColumn.Tooltip:gridColumn.caption;if(gridColumn.groupColumn?(i.style.width="25px",s.style.width="25px"):(i.setAttribute(jw.DOM.attributes.JW_GRID_COLUMN_FIELD_ATTR,gridColumn.fieldName),s.setAttribute(jw.DOM.attributes.JW_GRID_COLUMN_FIELD_ATTR,gridColumn.fieldName)),gridColumn.fieldName){a.setAttribute(jw.DOM.attributes.JW_GRID_COLUMN_ID_ATTR,columnIndex),a.setAttribute(jw.DOM.attributes.JW_GRID_COLUMN_FIELD_ATTR,gridColumn.fieldName),a.setAttribute(jasonWidgets.DOM.attributes.TITLE_ATTR,d);var u=r.appendChild(jw.htmlFactory.createJWLinkLabel(gridColumn.caption));u.setAttribute(jw.DOM.attributes.HREF_ATTR,"javascript:void(0)"),u.setAttribute(jw.DOM.attributes.DRAGGABLE_ATTR,"false"),gridColumn.headerTemplate&&(u.innerHTML=gridColumn.headerTemplate),this.eventManager.addEventListener(u,jw.DOM.events.MOUSE_DOWN_EVENT,this._onGridColumnCaptionClick,!0),this.eventManager.addEventListener(u,jw.DOM.events.KEY_DOWN_EVENT,this._onGridColumnCaptionClick,!0),this.eventManager.addEventListener(u,jw.DOM.events.TOUCH_START_EVENT,function(e){e.preventDefault(),e.stopPropagation(),e.button=0,n._onGridColumnCaptionClick(e)},!0)}if(1==this.options.columnMenu&&!gridColumn.groupColumn){var h=jw.htmlFactory.createJWButton(null,jw.DOM.icons.LIST);h.setAttribute(jw.DOM.attributes.JW_GRID_COLUMN_ID_ATTR,columnIndex),this.eventManager.addEventListener(h,jw.DOM.events.CLICK_EVENT,this._onGridColumnMenuIconClick,!0),this.eventManager.addEventListener(h,jw.DOM.events.TOUCH_START_EVENT,function(e){e.preventDefault(),e.stopPropagation(),e.button=0,n._onGridColumnMenuIconClick(e)},!0),this.eventManager.addEventListener(h,jw.DOM.events.MOUSE_DOWN_EVENT,function(e){e.stopPropagation()},!0),l.appendChild(h)}if(1==this.options.filtering&&0==this.options.columnMenu){var c=this.createElement("i");c.className=jw.DOM.icons.SEARCH,c.style.cssFloat="right",c.style.cursor="pointer",this.eventManager.addEventListener(c,jw.DOM.events.CLICK_EVENT,this._onGridFilterButtonClick),l.appendChild(c)}}},jasonGridUIHelper.prototype.updateEnabled=function(e){jasonBaseWidgetUIHelper.prototype.updateEnabled.call(this,e);for(var t=this.htmlElement.getElementsByTagName("a"),n=0;n<=t.length-1;n++)e?(t[n].removeAttribute(jw.DOM.attributes.DISABLED_ATTR),t[n].classList.remove(jw.DOM.classes.JW_DISABLED)):(t[n].setAttribute(jw.DOM.attributes.DISABLED_ATTR,!0),t[n].classList.add(jw.DOM.classes.JW_DISABLED));for(var o=this.htmlElement.getElementsByTagName("input"),n=0;n<=o.length-1;n++)e?(o[n].removeAttribute(jw.DOM.attributes.DISABLED_ATTR),o[n].classList.remove(jw.DOM.classes.JW_DISABLED)):(o[n].setAttribute(jw.DOM.attributes.DISABLED_ATTR,!0),o[n].classList.add(jw.DOM.classes.JW_DISABLED))},jasonGridUIHelper.prototype.updateVisible=function(e){jasonBaseWidgetUIHelper.prototype.updateVisible.call(this,e)},jasonGridUIHelper.prototype.updateReadOnly=function(e){jasonBaseWidgetUIHelper.prototype.updateReadOnly.call(this,e);for(var t=this.htmlElement.getElementsByTagName("a"),n=0;n<=t.length-1;n++)e?(t[n].removeAttribute(jw.DOM.attributes.READONLY_ATTR),t[n].classList.remove(jw.DOM.classes.JW_READONLY)):(t[n].setAttribute(jw.DOM.attributes.READONLY_ATTR,!0),t[n].classList.add(jw.DOM.classes.JW_READONLY));for(var o=this.htmlElement.getElementsByTagName("input"),n=0;n<=o.length-1;n++)e?(o[n].removeAttribute(jw.DOM.attributes.READONLY_ATTR),o[n].classList.remove(jw.DOM.classes.JW_READONLY)):(o[n].setAttribute(jw.DOM.attributes.READONLY_ATTR,!0),o[n].classList.add(jw.DOM.classes.JW_READONLY))},jasonGridUIHelper.prototype._renderRows=function(e,t,n){if(void 0===n&&(n=null),this.focusedCell=null,jw.common.removeChildren(this.gridDataTableBody),this.gridSelectedCells=new Array,this.gridSelectedRows=new Array,this._focusedCell=null,this.widget.dataSource.grouping.length>0)this._initiliazeRenderingGroupedData();else{var o=null,i=n?n:this.widget.dataSource.data,s=null;if(this.currentView=new Array,i.length>0)for(var a=e;a<=t;a++)s=i[a],s.RowIndex=a,this.currentView.push(s),o=this._createRowElementWithContentFromData(s),a%2==0&&o.classList.add(jw.DOM.classes.JW_GRID_JW_TABLE_ALT_ROW_CLASS),this.gridDataTableBody.appendChild(o);else this.gridDataTableBody.appendChild(this._renderNoDataRow())}},jasonGridUIHelper.prototype._renderNoDataRow=function(){var e=this.createElement("tr"),t=this.createElement("td");return t.setAttribute(jasonWidgets.DOM.attributes.COLSPAN_ATTR,this.options.columns.filter(function(e){return 1==e.visible}).length),t.appendChild(this.createTextNode(this.options.localization.data.noData)),e.appendChild(t),e.classList.add(jw.DOM.classes.JW_GRID_JW_TABLE_NO_DATA_ROW_CLASS),e},jasonGridUIHelper.prototype._createRowElementFromData=function(e){var t=this.createElement("tr");return t.setAttribute(jasonWidgets.DOM.attributes.JW_DATA_ROW_ID_ATTR,e.RowIndex),t.className=jw.DOM.classes.JW_GRID_JW_TABLE_ROW_CLASS,t},jasonGridUIHelper.prototype._createRowElementWithContentFromData=function(e){var t=this._createRowElementFromData(e);if(this.options.customization.rowTemplate){jw.common.applyTemplate(t,this.options.customization.rowTemplate,this.options.customization.dataFieldAttribute,e),jw.common.removeNodeText(t);for(var n=0;n<=t.children.length-1;n++){var o=t.children[n];if(o&&"TD"==o.tagName){o.setAttribute(jw.DOM.attributes.JW_DATA_CELL_ID_ATTR,n);var i=this.createElement("div");i.classList.add(jw.DOM.classes.JW_GRID_JW_TABLE_CELL_CONTENT_CONTAINER_CLASS),i.innerHTML=o.innerHTML,o.innerHTML="",jw.common.removeNodeText(o),o.appendChild(i)}}}else for(var s=0;s<=this.options.columns.length-1;s++){var a=this.options.columns[s];newCell=this._createCellElementFromColumn(a,e),a.visible||(newCell.style.display="none"),t.appendChild(newCell)}return t},jasonGridUIHelper.prototype._createCellElementFromColumn=function(e,t){var n=this.createElement("td"),o=this.createElement("div");if(o.classList.add(jw.DOM.classes.JW_GRID_JW_TABLE_CELL_CONTENT_CONTAINER_CLASS),n.appendChild(o),1!=e.groupColumn)if(n.className=jw.DOM.classes.JW_GRID_JW_TABLE_CELL_CLASS,n.setAttribute(jasonWidgets.DOM.attributes.JW_DATA_CELL_ID_ATTR,e.index),e.cellTemplate){o.innerHTML=e.cellTemplate;for(var i=n.querySelectorAll("*["+this.options.customization.dataFieldAttribute+"]"),s=0;s<=i.length-1;s++){var a=i[s];jw.common.replaceNodeText(a,t[a.getAttribute(this.options.customization.dataFieldAttribute)],!0)}}else textNode=this.createTextNode(t[e.fieldName]),o.appendChild(textNode);else n.className=jw.DOM.classes.JW_GRID_GROUP_CELL,o.innerHTML="&nbsp";return n},jasonGridUIHelper.prototype._createGrouppingRow=function(e){var t=this.createElement("tr"),n=this.createElement("td"),o=jw.htmlFactory.createJWButton(null,jw.DOM.icons.CIRCLE_ARROW_UP),i=this.createElement("span");i.appendChild(this.createTextNode(e.key)),i.classList.add(jw.DOM.classes.JW_GRID_GROUP_KEY_CAPTION);var s=this;return this.eventManager.addEventListener(o,jw.DOM.events.CLICK_EVENT,this._onGroupCollapseExpandIconClick,!0),this.eventManager.addEventListener(o,jw.DOM.events.KEY_DOWN_EVENT,function(e){var t=e.keyCode||e.which;switch(t){case jw.keycodes.enter:s._onGroupCollapseExpandIconClick(e);break;case jw.keycodes.downArrow:s._isGroupExpanded(null,null,e.target)||s._collapseExpandGroup(null,null,e.target);var n=jw.common.getParentElement("TR",e.target);n&&n.nextSibling&&(s.gridDataTable.focus(),s._manageCellFocused(n.nextSibling.children[0])),e.preventDefault(),e.stopPropagation();break;case jw.keycodes.upArrow:var n=jw.common.getParentElement("TR",e.target);if(void 0==n.previousSibling){var o=s.widget.dataSource.grouping[s.widget.dataSource.grouping.length-1].level+1,i=s.gridHeaderTableRow.children[o];if(i){var a=i.getElementsByClassName("jw-header-cell-caption")[0];if(a){var r=a.getElementsByTagName("a")[0];r&&r.focus()}}e.preventDefault(),e.stopPropagation()}else n.previousSibling.getElementsByClassName(jw.DOM.classes.JW_BUTTON)[0]&&(n.previousSibling.getElementsByClassName(jw.DOM.classes.JW_BUTTON)[0].focus(),e.preventDefault(),e.stopPropagation())}},!0),t.classList.add(jw.DOM.classes.JW_GRID_JW_TABLE_ROW_CLASS),t.classList.add(jw.DOM.classes.JW_GRID_JW_TABLE_GROUP_ROW_CLASS),t.setAttribute(jasonWidgets.DOM.attributes.JW_DATA_GROUPING_LEVEL_ATTR,e.level),t.setAttribute(jasonWidgets.DOM.attributes.JW_DATA_GROUPING_KEY_ATTR,e.key),n.setAttribute(jasonWidgets.DOM.attributes.COLSPAN_ATTR,this.options.columns.filter(function(e){return 1==e.visible}).length),n.appendChild(o),n.style.paddingLeft=25*e.level+"px",n.appendChild(i),t.appendChild(n),t},jasonGridUIHelper.prototype._renderFooter=function(e){if(!this.pagerContainer){this.pagerContainer=this.createElement("div"),this.pagerContainer.classList.add(jw.DOM.classes.JW_PAGER_CONTAINER_CLASS),this.pagerInfoContainer=this.createElement("div"),this.pagerInfoContainer.classList.add(jw.DOM.classes.JW_PAGER_CONTAINER_PAGE_INFO_CLASS),this.pagerInfo=this.createElement("span"),this.pagerInfoContainer.appendChild(this.pagerInfo),this.pagerButtonFirst=jw.htmlFactory.createJWButton(this.options.localization.grid.paging.firstPageButton),this.pagerButtonPrior=jw.htmlFactory.createJWButton(this.options.localization.grid.paging.priorPageButton),this.pagerButtonLast=jw.htmlFactory.createJWButton(this.options.localization.grid.paging.nextPageButton),this.pagerButtonNext=jw.htmlFactory.createJWButton(this.options.localization.grid.paging.lastPageButton),this.pagerInput=jw.htmlFactory.createJWTextInput(null,null,null,"number"),this.pagerInput.setAttribute("value","1"),this.pagerInput.setAttribute("min","1"),this.pagerContainer.appendChild(this.pagerButtonFirst),this.pagerContainer.appendChild(this.pagerButtonPrior),this.pagerContainer.appendChild(this.pagerInput),this.pagerContainer.appendChild(this.pagerButtonNext),this.pagerContainer.appendChild(this.pagerButtonLast),this.gridFooterContainer.appendChild(this.pagerContainer),this.gridFooterContainer.appendChild(this.pagerInfoContainer),this.options.paging&&this._updatePagerInfo(0,e,this.widget.dataSource.data.length)}},jasonGridUIHelper.prototype._updatePagerInfo=function(e,t,n){this.pagerInfo.childNodes.length>0&&this.pagerInfo.removeChild(this.pagerInfo.childNodes[0]);var o=jw.common.formatString("{0} - {1} {2} {3}",[e+1,t,this.options.localization.grid.paging.pagerInfoOfRecordCount,n]);this.pagerInfo.appendChild(this.createTextNode(o)),this.pagerInfo.setAttribute(jasonWidgets.DOM.attributes.TITLE_ATTR,o)},jasonGridUIHelper.prototype._calculatePageCount=function(e){this.options.paging&&(this._pageCount=e.length<=this.options.paging.pagesize?0:Math.ceil(e.length/this.options.paging.pagesize)),this._pageCount=this._pageCount<=0?1:this._pageCount},jasonGridUIHelper.prototype._goToPage=function(e,t,n){jw.common.getVariableType(e)!=jw.enums.dataType.number&&(e=parseInt(e),isNaN(e))||e<1||e>this._pageCount||e==this._currentPage&&1!=t||(e<0&&(e=0),e>this._pageCount&&(e=this._pageCount),this._currentPage=e,this._refreshCurrentView(),this.options.paging&&(this._updatePagerInfo(this._recordPosition.recordStart,this._recordPosition.recordStop+1,this.widget.dataSource.currentDataView.length),this.pagerInput.value=this._currentPage,this.widget.triggerEvent(jw.DOM.events.JW_EVENT_ON_PAGE_CHANGE,e)))},jasonGridUIHelper.prototype._refreshCurrentPage=function(){this._goToPage(this._currentPage,!0)},jasonGridUIHelper.prototype._collapseGroup=function(e){for(var t=parseInt(e.getAttribute(jasonWidgets.DOM.attributes.JW_DATA_GROUPING_LEVEL_ATTR)),n=e.sectionRowIndex+1;n<=this.gridDataTableBody.childNodes.length-1;n++){var o=this.gridDataTableBody.childNodes[n];if(o.className.indexOf(jw.DOM.classes.JW_GRID_JW_TABLE_GROUP_ROW_CLASS)>=0){var i=parseInt(o.getAttribute(jasonWidgets.DOM.attributes.JW_DATA_GROUPING_LEVEL_ATTR));if(!(i>t))return;o.style.display="none"}else o.style.display="none"}},jasonGridUIHelper.prototype._expandGroup=function(e){for(var t=parseInt(e.getAttribute(jasonWidgets.DOM.attributes.JW_DATA_GROUPING_LEVEL_ATTR)),n=e.sectionRowIndex+1;n<=this.gridDataTableBody.childNodes.length-1;n++){var o=this.gridDataTableBody.childNodes[n];if(o.className.indexOf(jw.DOM.classes.JW_GRID_JW_TABLE_GROUP_ROW_CLASS)>=0){var i=o.getAttribute(jasonWidgets.DOM.attributes.JW_DATA_GROUP_EXPANDED_ATTR),s=parseInt(o.getAttribute(jasonWidgets.DOM.attributes.JW_DATA_GROUPING_LEVEL_ATTR));if(!(s>t))return;o.style.display="","true"==i&&this._expandGroup(o)}else{var s=o.getAttribute(jasonWidgets.DOM.attributes.JW_DATA_GROUPING_LEVEL_ATTR);s==t&&(o.style.display="")}}},jasonGridUIHelper.prototype._initiliazeRenderingGroupedData=function(){var e=this.options.paging?(this._currentPage-1)*this.options.paging.pagesize:0,t=this.options.paging?e+this.options.paging.pagesize-1:this.widget.dataSource.data.length;this._renderGroupedData(this.widget.dataSource.range(e,t))},jasonGridUIHelper.prototype._renderGroupRow=function(e){var t=this._createGrouppingRow(e);t.setAttribute(jasonWidgets.DOM.attributes.JW_DATA_GROUP_EXPANDED_ATTR,"true"),this.gridDataTableBody.appendChild(t)},jasonGridUIHelper.prototype._renderGroupData=function(e){this._renderGroupRow(e);for(var t=0;t<=e.values.length-1;t++)if(e.values[t].values)this._renderGroupData(e.values[t]);else{var n=this._createRowElementWithContentFromData(e.values[t]);n.setAttribute(jasonWidgets.DOM.attributes.JW_DATA_GROUPING_LEVEL_ATTR,e.level),this.gridDataTableBody.appendChild(n)}},jasonGridUIHelper.prototype._renderGroupedData=function(e){jw.common.removeChildren(this.gridDataTableBody),this.gridSelectedCells=new Array,this.gridSelectedRows=new Array,this._focusedCell=null;for(var t=0;t<=e.length-1;t++)this._renderGroupData(e[t])},jasonGridUIHelper.prototype._groupByField=function(e){if(e){var t=this.createElement("div"),n=jw.htmlFactory.createJWButton(null,jw.DOM.icons.CLOSE),o=jw.htmlFactory.createJWLinkLabel(e.caption);t.setAttribute(jasonWidgets.DOM.attributes.JW_DATA_GROUPING_FIELD_ATTR,e.fieldName),n.classList.add(jw.DOM.classes.JW_GRID_REMOVE_GROUP_BUTTON),n.setAttribute(jasonWidgets.DOM.attributes.TITLE_ATTR,this.options.localization.grid.grouping.removeGrouping+e.caption),t.appendChild(o),t.appendChild(n),this.gridGroupingContainer.appendChild(t),this.gridGroupingContainer.setAttribute(jasonWidgets.DOM.attributes.TITLE_ATTR,e.caption),this.eventManager.addEventListener(n,jw.DOM.events.CLICK_EVENT,this._onGroupColumnRemoveClick,!0),this.gridGroupingContainer.childNodes[0].style.display="none";var i=this.widget.dataSource.grouping[this.widget.dataSource.grouping.length-1];this.options.columns.splice(i.level,0,{width:"25px",groupColumn:!0,visible:!0,groupField:e.fieldName});var s=this.createElement("col"),a=this.createElement("col"),r=this.createElement("th");s.style.width="25px",a.style.width="25px",r.setAttribute(jasonWidgets.DOM.attributes.JW_GRID_GROUP_FIELD,e.fieldName),s.setAttribute(jasonWidgets.DOM.attributes.JW_GRID_GROUP_FIELD,e.fieldName),a.setAttribute(jasonWidgets.DOM.attributes.JW_GRID_GROUP_FIELD,e.fieldName),this.headerTableColGroup.insertBefore(s,this.headerTableColGroup.firstChild),this.dataTableColGroup.insertBefore(a,this.dataTableColGroup.firstChild),this.gridHeaderTableRow.insertBefore(r,this.gridHeaderTableRow.firstChild),this._initiliazeRenderingGroupedData(),this._sizeColumns()}},jasonGridUIHelper.prototype._getGroupingContainerByFieldName=function(e){return jw.common.getElementsByAttribute(this.gridGroupingContainer,jasonWidgets.DOM.attributes.JW_DATA_GROUPING_FIELD_ATTR,e)[0]},jasonGridUIHelper.prototype._removeGroupByField=function(e){var t=this._getGroupingContainerByFieldName(e);t&&this.gridGroupingContainer.removeChild(t);var n=this.gridHeaderTableRow.querySelectorAll("th["+jw.DOM.attributes.JW_GRID_GROUP_FIELD+"='"+e+"']")[0];if(n){this.gridHeaderTableRow.removeChild(n);var o=this.headerTableColGroup.querySelectorAll("col["+jw.DOM.attributes.JW_GRID_GROUP_FIELD+"='"+e+"']")[0];o&&this.headerTableColGroup.removeChild(o),o=this.dataTableColGroup.querySelectorAll("col["+jw.DOM.attributes.JW_GRID_GROUP_FIELD+"='"+e+"']")[0],o&&this.dataTableColGroup.removeChild(o)}0==this.widget.dataSource.grouping.length?(this._goToPage(this._currentPage,!0),this.gridGroupingContainer.childNodes[0].style.display=""):this._initiliazeRenderingGroupedData()},jasonGridUIHelper.prototype.updateColumnSortIcon=function(e,t){},jasonGridUIHelper.prototype._sortByField=function(e,t){var n=null;if(column.dataType){var o=column.dataType.toLower();switch(o){case"string":n=null;break;case"int":n=parseInt;break;case"float":n=parseFloat;break;case"datetime":n=Date.parse}}var i=new jasonDataSourceSorting(column.fieldName,"asc"!=e,n);this.options.sorting.multiple||this.widget.dataSource.clearSorting(),this.widget.dataSource.addSorting(i),this.gridPager.goToPage(this.gridPager._currentPage,!0)},jasonGridUIHelper.prototype.localizeStrings=function(e){if(e||(e=this.options.localization),1==this.options.grouping&&this.gridGroupingContainer&&(this.gridGroupingContainer.childNodes[0].innerText=e.grid.grouping.groupingMessage),1==this.options.filtering){for(var t=0;t<=this.gridHeaderTableRow.childNodes.length-1;t++)for(var n=this.gridHeaderTableRow.childNodes[t],o=0;o<=n.childNodes.length-1;o++)"I"==n.childNodes[o].tagName&&n.childNodes[o].setAttribute(jasonWidgets.DOM.attributes.TITLE_ATTR,e.grid.filtering.iconTooltip);this.filterContainer}this.options.paging&&(this.pagerButtonFirst.innerText=e.grid.paging.firstPageButton,this.pagerButtonPrior.innerText=e.grid.paging.priorPageButton,this.pagerButtonLast.innerText=e.grid.paging.lastPageButton,this.pagerButtonNext.innerText=e.grid.paging.nextPageButton,this.pagerInput.setAttribute(jasonWidgets.DOM.attributes.TITLE_ATTR,e.grid.paging.pagerInputTooltip)),this.options.columnMenu&&(this.widget.defaultGridColumnMenu.items[0].caption=e.grid.columnMenu.sortAscending,this.widget.defaultGridColumnMenu.items[1].caption=e.grid.columnMenu.sortDescending,this.widget.defaultGridColumnMenu.items[2].caption=e.grid.columnMenu.columns,this.widget.defaultGridColumnMenu.items[3].caption=e.grid.columnMenu.filter,this.widget.defaultGridColumnMenu.items.forEach(function(e){e.title=e.caption}))},jasonGrid.prototype=Object.create(jasonBaseWidget.prototype),jasonGrid.prototype.constructor=jasonGrid,jasonGrid.prototype._initializeColumns=function(e){if(e=void 0==e?this.options:e,e.columns&&0!=e.columns.length)for(var t=0;t<=e.columns.length-1;t++){var n=e.columns[t];null!=n.visible&&void 0!=n.visible||(n.visible=!0),n.index=t}else{e.columns=[];var o=this.dataSource.data?this.dataSource.data[0]:null;if(o){var t=0;for(var i in o)"_jwRowId"!=i&&e.columns.push({caption:i,fieldName:i,index:t++,tooltip:i,width:null,visible:!0,dataType:jw.enums.dataType.unknown})}}},jasonGrid.prototype._initializeDefaultColumnMenu=function(){if(this.defaultGridColumnMenu={items:[]},this.options.sorting){var e=new jasonMenuItem(this.ui.createElement("li"),null,null);e.name="mnuSortAsc",e.caption=this.options.localization.grid.columnMenu.sortAscending,e.title=e.caption,e.clickable=!0,e.enabled=jasonWidgets.common.assigned(this.options.sorting),e.icon=jw.DOM.icons.SORT_ASC,e.level=0,this.defaultGridColumnMenu.items.push(e);var t=new jasonMenuItem(this.ui.createElement("li"),null,null);t.name="mnuSortDesc",t.caption=this.options.localization.grid.columnMenu.sortDescending,t.title=t.caption,t.enabled=jasonWidgets.common.assigned(this.options.sorting),t.clickable=!0,t.icon=jw.DOM.icons.SORT_DESC,t.level=0,this.defaultGridColumnMenu.items.push(t)}var n=new jasonMenuItem(this.ui.createElement("li"),null,null);if(n.name="mnuColumns",n.caption=this.options.localization.grid.columnMenu.columns,n.title=n.caption,n.icon=jw.DOM.icons.LIST,n.level=0,this.defaultGridColumnMenu.items.push(n),this.options.filtering){var o=new jasonMenuItem(this.ui.createElement("li"),null,null);o.name="mnuFilter",o.caption=this.options.localization.grid.columnMenu.filter,o.title=o.caption,o.icon=jw.DOM.icons.SEARCH,o.level=0,o.addEventListener(jw.DOM.events.JW_EVENT_ON_JW_MENU_ITEM_CONTENT_SHOW,this._onFilterShown,this),this.defaultGridColumnMenu.items.push(o)}var i=!1;if(this.options.sorting){this.defaultGridColumnMenu.items.push(createJasonMenuDividerItem()),i=!0;var s=new jasonMenuItem(this.ui.createElement("li"),null,null);s.name="mnuClearSorting",s.caption=this.options.localization.grid.columnMenu.clearSorting,s.title=s.caption,s.enabled=jasonWidgets.common.assigned(this.options.sorting),s.clickable=!0,s.icon=jw.DOM.icons.REMOVE_SORT,s.level=0,this.defaultGridColumnMenu.items.push(s)}if(this.options.filtering){var a=new jasonMenuItem(this.ui.createElement("li"),null,null);a.name="mnuClearFiltering",a.caption=this.options.localization.grid.columnMenu.clearFilters,a.title=a.caption,a.enabled=jasonWidgets.common.assigned(this.options.sorting),a.clickable=!0,a.icon=jw.DOM.icons.REMOVE_FILTER,a.level=0,this.defaultGridColumnMenu.items.push(a),i||this.defaultGridColumnMenu.items.push(createJasonMenuDividerItem())}this._addColumnsToMenu(),this.options.filtering&&this._addFilterToMenu()},jasonGrid.prototype._addColumnsToMenu=function(){for(var e=this.defaultGridColumnMenu.items.filter(function(e){return"mnuColumns"==e.name})[0],t=0;t<=this.options.columns.length-1;t++){var n=this.options.columns[t],o=new jasonMenuItem;o.name=n.fieldName,o.caption=n.caption,o.title=n.title?n.title:n.caption,o.hasCheckBox=!0,o.checked=!0,o.clickable=!0,o.level=e.level+1,o.parent=e,e.items.push(o)}},jasonGrid.prototype._addFilterToMenu=function(){var e=this.defaultGridColumnMenu.items.filter(function(e){return"mnuFilter"==e.name})[0];this.ui._renderFilterUI(),this.ui.filterContainer.style.display="";var t=new jasonMenuItem;t.name="",t.caption="",t.content=this.ui.filterContainer,t.parent=e,e.items.push(t)},jasonGrid.prototype._onDataChanged=function(){this._initializeColumns(),this.ui.renderUI(),this.triggerEvent(jw.DOM.events.JW_EVENT_ON_DATA_CHANGE)},jasonGrid.prototype._onFilterShown=function(){var e=this,t=this.dataSource.filters.filter(function(t){return t.filterField==e.ui._currentFilterField})[0];t&&this.ui._loadFilterValues(t)},jasonGrid.prototype._columnByField=function(e){
return this.options.columns.filter(function(t){return t.fieldName==e})[0]},jasonGrid.prototype.initialize=function(){if(jasonBaseWidget.prototype.initialize.call(this),this.selectedRows=new Array,this.currentView=new Array,this.groupping=new Array,this.filters=new Array,this.sorting=new Array,"object"!=typeof this.options.sorting){var e=this.options.sorting;"string"==typeof this.options.sorting&&(e=jasonWidgets.common.strToBool(e)),this.options.sorting=e?{multiple:!1}:null}if("object"!=typeof this.options.paging){var t=this.options.paging;"string"==typeof this.options.paging&&(t=jasonWidgets.common.strToBool(t)),this.options.paging=t?{Pagesize:200}:null}if(this._initializeDefaultColumnMenu(),this.options.data&&this.options.data.length>0){var n=this.options.data[0];if("object"==typeof n)for(var o in n){var i=this._columnByField(o.toString());!i||void 0!=i.dataType&&i.dataType!=jw.enums.dataType.unknown||i&&(i.dataType=jw.common.getVariableType(n[o]))}}},jasonGrid.prototype.groupByField=function(e){e&&!this.dataSource.groupingExists(e)&&(this.dataSource.groupByField(e),this.ui._groupByField(this._columnByField(e)),this.triggerEvent(jw.DOM.events.JW_EVENT_ON_GROUP_BY_FIELD,e))},jasonGrid.prototype.removeGrouping=function(e){if(e){var t=-1,n=this.dataSource.grouping.filter(function(n,o){if(n.field==e)return t=o,!0})[0];if(t>=0){var n=this.dataSource.grouping[t];this.dataSource.removeGrouping(n);for(var o=-1,i=0;i<=this.options.columns.length-1;i++)this.options.columns[i].groupField==n.field&&(o=i);o>=0&&this.options.columns.splice(o,1),this.ui._removeGroupByField(e),this.triggerEvent(jw.DOM.events.JW_EVENT_ON_UNGROUP_FIELD,e)}}},jasonGrid.prototype.sortBy=function(e,t){if(e){t=void 0==t?"asc":t;var n=this._columnByField(e),o=null;if(n.dataType)switch(n.dataType){case jw.enums.dataType.string:o=null;break;case jw.enums.dataType.number:o=parseFloat;break;case jw.enums.dataType.date:o=Date.parse}var i=new jasonDataSourceSorting(n.fieldName,"asc"!=t,o);this.options.sorting.multiple||this.dataSource.clearSorting(),this.dataSource.addSorting(i),this.ui._refreshCurrentPage()}},jasonGrid.prototype.removeSorting=function(e){e&&(this.dataSource.removeSorting(e),this.ui._refreshCurrentPage())},jasonGrid.prototype.filterBy=function(e,t){e&&t&&(this.dataSource.addFilter(e,t),this.dataSource.applyFilters(),this.ui._goToPage(1,!0),this.ui._sizeColumns(),this.ui.columnMenu.ui.hideMenu(),null==this.ui._currentTHElement&&(this.ui._currentTHElement=jw.common.getElementsByAttribute(this.ui.gridHeaderTable,jw.DOM.attributes.JW_GRID_COLUMN_FIELD_ATTR,e,"th")[0]),this.ui._currentTHElement.classList.add(jw.DOM.classes.JW_GRID_FIELD_HAS_FILTER))},jasonGrid.prototype.clearFilter=function(e){e&&(this.dataSource.removeFilter(e),this.ui._goToPage(1,!0),this.ui._sizeColumns(),this.ui.columnMenu.ui.hideMenu(),this.ui._currentTHElement.classList.remove(jw.DOM.classes.JW_GRID_FIELD_HAS_FILTER))},jasonGrid.prototype.goToPage=function(e){e&&this.options.paging&&this.ui._goToPage(e,!0)},jasonGrid.prototype.showColumn=function(e){return!(e&&!e.visible)||this.ui._columnVisible(e,!0)},jasonGrid.prototype.hideColumn=function(e){return!(!e||!e.visible)&&this.ui._columnVisible(e,!1)},jasonGrid.prototype.moveColumnTo=function(e,t){this.ui.moveColumn(e,t)},jasonGrid.prototype.selectRow=function(e){var t=this.dataSource.currentDataView[e];this.options.multiSelect?this.selectedRows.push(t):this.selectedRows=[t]},jasonGrid.prototype.toggleCollapseDatagroup=function(e,t){this.ui._collapseExpandGroup(e,t)},jasonGrid.prototype.exportToCSV=function(e){throw new Error("Not implemented yet.")},jasonGrid.prototype.exportToPDF=function(e){throw new Error("Not implemented yet.")},jasonGrid.prototype.exportToExcel=function(e){throw new Error("Not implemented yet.")},jasonGridResizer.prototype=Object.create(jasonBaseWidget.prototype),jasonGridResizer.prototype.constructor=jasonGridResizer,jasonGridResizer.prototype.initialize=function(){this._headerTableColGroup=this._gridInstance.ui.headerTableColGroup,this._dataTableColGroup=this._gridInstance.ui.dataTableColGroup,this._initializeEvents()},jasonGridResizer.prototype._initializeEvents=function(){for(var e=0;e<=this._gridInstance.ui.gridHeaderTableRow.children.length-1;e++)this._gridInstance.ui.gridHeaderTableRow.children[e].addEventListener(jw.DOM.events.MOUSE_MOVE_EVENT,this._onColumnMouseMove),this._gridInstance.ui.gridHeaderTableRow.children[e].addEventListener(jw.DOM.events.MOUSE_DOWN_EVENT,this._onColumnMouseDown),this._gridInstance.ui.gridHeaderTableRow.children[e].addEventListener(jw.DOM.events.TOUCH_START_EVENT,this._onTouchStart);jwWindowEventManager.addWindowEventListener(jw.DOM.events.MOUSE_MOVE_EVENT,this._onDocumentMouseMove),jwWindowEventManager.addWindowEventListener(jw.DOM.events.MOUSE_UP_EVENT,this._onDocumentMouseUp),jwWindowEventManager.addWindowEventListener(jw.DOM.events.TOUCH_MOVE_EVENT,this._onTouchMove),jwWindowEventManager.addWindowEventListener(jw.DOM.events.TOUCH_END_EVENT,this._onTouchEnd)},jasonGridResizer.prototype.destroy=function(){jasonBaseWidget.prototype.destroy.call(this);for(var e=0;e<=this._gridInstance.ui.gridHeaderTableRow.children.length-1;e++)this._gridInstance.ui.gridHeaderTableRow.children[e].removeEventListener(jw.DOM.events.MOUSE_MOVE_EVENT,this._onColumnMouseMove),this._gridInstance.ui.gridHeaderTableRow.children[e].removeEventListener(jw.DOM.events.MOUSE_DOWN_EVENT,this._onColumnMouseDown),this._gridInstance.ui.gridHeaderTableRow.children[e].removeEventListener(jw.DOM.events.TOUCH_START_EVENT,this._onTouchStart);jwWindowEventManager.removeWindowEventListener(jw.DOM.events.MOUSE_MOVE_EVENT,this._onDocumentMouseMove),jwWindowEventManager.removeWindowEventListener(jw.DOM.events.MOUSE_UP_EVENT,this._onDocumentMouseUp),jwWindowEventManager.removeWindowEventListener(jw.DOM.events.TOUCH_MOVE_EVENT,this._onTouchMove),jwWindowEventManager.removeWindowEventListener(jw.DOM.events.TOUCH_END_EVENT,this._onTouchEnd)},jasonGridResizer.prototype._startResize=function(){this._resizing=this._mousePositionInfo.canResize&&this.enabled,this.triggerEvent(jw.DOM.events.JW_EVENT_ON_ELEMENT_RESIZING,this.htmlElement),document.body.style.cursor="col-resize"},jasonGridResizer.prototype._stopResize=function(e){this._resizing&&(this._resizing=!1,this.triggerEvent(jw.DOM.events.JW_EVENT_ON_ELEMENT_RESIZED,this.htmlElement)),document.body.style.cursor="default"},jasonGridResizer.prototype._updateCursor=function(e){var t="default";(this._mousePositionInfo.onLeftEdge||this._mousePositionInfo.onRightEdge)&&(t="col-resize"),e.style.cursor=t},jasonGridResizer.prototype._onColumnMouseMove=function(e){if(!this._resizing){var t="TH"==e.target.tagName?e.target:jw.common.getParentElement("TH",e.target);this.update_mousePositionInfo(e,t),this._updateCursor(t)}},jasonGridResizer.prototype._onColumnMouseDown=function(e){if(this._mousePositionInfo.canResize){var t="TH"==e.target.tagName?e.target:jw.common.getParentElement("TH",e.target);this._startX=e.clientX,this._startY=e.clientY;var n=this._gridInstance.ui.gridHeaderTable.style.width.match(/[0-9]+/g);n&&(this._tableOriginalWidth=n=parseInt(n[0])),this._currentColumn=t,this._currentHeaderCol=this._headerTableColGroup.children[this._currentColumn.cellIndex],this._currentDataCol=this._dataTableColGroup.children[this._currentColumn.cellIndex],this._startResize(),this._resizeColumn()}},jasonGridResizer.prototype._onDocumentMouseMove=function(e){this._resizing&&(this._mouseMoveEvent=e,this._mouseMoving=!0,clearTimeout(this._mouseMoveTimer),this._mouseMoveTimer=setTimeout(function(){this._mouseMoving=!1}.bind(this),50))},jasonGridResizer.prototype._onDocumentMouseUp=function(e){this._stopResize(e)},jasonGridResizer.prototype._onTouchStart=function(e){this._startResize()},jasonGridResizer.prototype._onTouchMove=function(e){this._mouseMoveEvent=e.touches[0]},jasonGridResizer.prototype._onTouchEnd=function(e){0==e.touches.length&&this._stopResize()},jasonGridResizer.prototype.update_mousePositionInfo=function(e,t){var n=t.getBoundingClientRect();this._mousePositionInfo.elementRect=n,this._mousePositionInfo.mousePixelsDifferenceLeft=Math.abs(e.clientX-n.left),this._mousePositionInfo.mousePixelsDifferenceTop=Math.abs(e.clientY-n.top),this._mousePositionInfo.mousePixelsDifferenceBottom=Math.abs(e.clientY-n.bottom),this._mousePositionInfo.mousePixelsDifferenceRight=Math.abs(e.clientX-n.right),this._mousePositionInfo.onRightEdge=this._mousePositionInfo.mousePixelsDifferenceRight<=this._margins&&this.enabled,this._mousePositionInfo.canResize=this._mousePositionInfo.onRightEdge},jasonGridResizer.prototype._resizeColumn=function(e){if(this._resizing&&window.requestAnimationFrame(this._resizeColumn),this._resizing&&this._mouseMoving&&null!=this._currentColumn){var t=0,n=0;try{this._mousePositionInfo.onRightEdge&&this.enabled&&(t=this._mouseMoveEvent.clientX-this._startX,n=this._mousePositionInfo.elementRect.width+t,n>=this.options.minWidth&&n!=this._mousePositionInfo.elementRect.width&&(this._currentHeaderCol.style.width=n+"px",this._currentDataCol.style.width=n+"px",this._gridInstance.ui.gridHeaderTable.style.width=this._tableOriginalWidth+t+"px",this._gridInstance.ui.gridDataTable.style.width=this._tableOriginalWidth+t+"px"))}catch(o){this.enabled=!1,jw.common.throwError(jw.errorTypes.referenceError,o.message)}}},jasonGridColumnDragger.prototype=Object.create(jasonBaseWidget.prototype),jasonGridColumnDragger.prototype.constructor=jasonGridColumnDragger,jasonGridColumnDragger.prototype.initialize=function(){this._headerTableColGroup=this._gridInstance.ui.headerTableColGroup,this._dataTableColGroup=this._gridInstance.ui.dataTableColGroup,this._initializeEvents()},jasonGridColumnDragger.prototype._initializeEvents=function(){for(var e=0;e<=this._gridInstance.ui.gridHeaderTableRow.children.length-1;e++){var t=this._gridInstance.ui.gridHeaderTableRow.children[e].getElementsByClassName(jw.DOM.classes.JW_GRID_HEADER_CELL_CAPTION_CONTAINER)[0];t.addEventListener(jw.DOM.events.MOUSE_MOVE_EVENT,this._onMouseMove,!0),t.addEventListener(jw.DOM.events.MOUSE_DOWN_EVENT,this._onMouseDown,!0),t.addEventListener(jw.DOM.events.TOUCH_START_EVENT,this._onTouchStart,!0)}jwWindowEventManager.addWindowEventListener(jw.DOM.events.MOUSE_UP_EVENT,this._onMouseUp),jwWindowEventManager.addWindowEventListener(jw.DOM.events.MOUSE_MOVE_EVENT,this._onWindowMouseMove),jwWindowEventManager.addWindowEventListener(jw.DOM.events.TOUCH_MOVE_EVENT,this._onTouchMove),jwWindowEventManager.addWindowEventListener(jw.DOM.events.TOUCH_END_EVENT,this._onTouchEnd)},jasonGridColumnDragger.prototype._onTouchStart=function(e){var t=e.touches[0];t&&(t.button=0,this._onMouseDown(t))},jasonGridColumnDragger.prototype._onTouchMove=function(e){this._mouseMoveEvent=e.touches[0]},jasonGridColumnDragger.prototype._onTouchEnd=function(e){0==e.touches.length&&this._cloneNode&&(this._onMouseUp(e),e.preventDefault(),e.stopPropagation())},jasonGridColumnDragger.prototype._onWindowMouseMove=function(e){this._mouseMoveEvent=e},jasonGridColumnDragger.prototype._onMouseMove=function(e){this.enabled&&null==this._cloneNode&&this.options.changeCursor&&(e.target.style.cursor="move")},jasonGridColumnDragger.prototype._onMouseDown=function(e){if(0==e.button&&e.target.classList.contains(jw.DOM.classes.JW_GRID_HEADER_CELL_CAPTION_CONTAINER)){this._currentColumn="TH"==e.target.tagName?e.target:jw.common.getParentElement("TH",e.target);var t=this._currentColumn.getBoundingClientRect();this._cloneNode||(this._cloneNode=this._currentColumn.getElementsByClassName(jw.DOM.classes.JW_GRID_HEADER_CELL_CAPTION_CONTAINER)[0].cloneNode(!0),this._cloneNode.style.left=t.left+"px",this._cloneNode.style.top=t.top+"px",this._cloneNode.style.height=t.height+"px",this._cloneNode.style.width=t.width+"px",this._cloneNode.removeAttribute(jw.DOM.attributes.ID_ATTR),this._cloneNode.classList.add(jw.DOM.classes.JW_GRID_COLUMN_DRAG_IMAGE),this._cloneNode.style.display="none",document.body.appendChild(this._cloneNode)),this._mouseMoveEvent||(this._mouseMoveEvent=e),this._dragColumn(),this.triggerEvent(jw.DOM.events.DRAG_START_EVENT,e),e.stopPropagation&&(e.stopPropagation(),e.preventDefault())}},jasonGridColumnDragger.prototype._onMouseUp=function(e){this._cloneNode&&this._cloneNode.parentElement&&(document.body.removeChild(this._cloneNode),this._cloneNode=null,e.stopPropagation&&(e.stopPropagation(),e.preventDefault()),e.clientX=e.clientX?e.clientX:this._mouseMoveEvent.clientX,e.clientY=e.clientY?e.clientY:this._mouseMoveEvent.clientY,this.triggerEvent(jw.DOM.events.DRAG_OVER_EVENT,{event:e,column:this._currentColumn}))},jasonGridColumnDragger.prototype.destroy=function(){jasonBaseWidget.prototype.destroy.call(this);for(var e=0;e<=this._gridInstance.ui.gridHeaderTableRow.children.length-1;e++){var t=this._gridInstance.ui.gridHeaderTableRow.children[e].getElementsByClassName(jw.DOM.classes.JW_GRID_HEADER_CELL_CAPTION_CONTAINER)[0];t.removeEventListener(jw.DOM.events.MOUSE_MOVE_EVENT,this._onMouseMove),t.removeEventListener(jw.DOM.events.MOUSE_DOWN_EVENT,this._onMouseDown),t.removeEventListener(jw.DOM.events.TOUCH_START_EVENT,this._onTouchStart)}jwWindowEventManager.removeWindowEventListener(jw.DOM.events.MOUSE_UP_EVENT,this._onMouseUp),jwWindowEventManager.removeWindowEventListener(jw.DOM.events.MOUSE_MOVE_EVENT,this._onWindowMouseMove),jwWindowEventManager.removeWindowEventListener(jw.DOM.events.TOUCH_MOVE_EVENT,this._onTouchMove),jwWindowEventManager.removeWindowEventListener(jw.DOM.events.TOUCH_START_EVENT,this._onTouchStart),jwWindowEventManager.removeWindowEventListener(jw.DOM.events.TOUCH_END_EVENT,this._onTouchEnd)},jasonGridColumnDragger.prototype._dragColumn=function(){this._cloneNode&&(window.requestAnimationFrame(this._dragColumn),this._cloneNode.style.display="",this._cloneNode.style.left=this._mouseMoveEvent.clientX-this._cloneNode.offsetWidth/2+"px",this._cloneNode.style.top=this._mouseMoveEvent.clientY-this._cloneNode.offsetHeight/2+"px")},jasonDatePicker.prototype=Object.create(jasonButtonTextbox.prototype),jasonDatePicker.prototype.constructor=jasonDatePicker,jasonDatePicker.prototype.formatValue=function(e){return jw.common.formatDateTime(e,this.options.displayFormat)},jasonDatePicker.prototype.compareValue=function(e){var t=jw.common.getVariableType(e);switch(t){case jw.enums.dataType.string:return jw.common.dateComparison(this._value,jw.common.parseDateValue(e));case jw.enums.dataType.date:return jw.common.dateComparison(this._value,e);default:jw.common.throwError(jw.errorTypes.typeError,"Invalid value type for jasonDatePicker.")}},jasonDatePicker.prototype.readValue=function(e){return e},jasonDatePicker.prototype.setValue=function(e){var t=jw.common.getVariableType(e);switch(t){case jw.enums.dataType.string:return jw.common.parseDateValue(e,this.options.displayFormat);case jw.enums.dataType.date:return e;default:jw.common.throwError(jw.errorTypes.typeError,"Invalid value type for jasonDatePicker.")}},jasonDatePickerUIHelper.prototype=Object.create(jasonButtonTextboxUIHelper.prototype),jasonDatePickerUIHelper.prototype.constructor=jasonDatePickerUIHelper,jasonDatePickerUIHelper.prototype.renderUI=function(){jasonButtonTextboxUIHelper.prototype.renderUI.call(this),this.htmlElement.classList.contains(jw.DOM.classes.JW_DATE_PICKER_CLASS)||(this.htmlElement.classList.add(jw.DOM.classes.JW_DATE_PICKER_CLASS),this.widget.options.placeholder&&this.inputControl.setAttribute(jasonWidgets.DOM.attributes.PLACEHOLDER_ATTR,this.widget.options.placeholder),1==this.widget.readonly&&this.inputControl.setAttribute(jasonWidgets.DOM.attributes.READONLY_ATTR,this.widget.readonly),this.htmlElement.appendChild(this.inputControl),this.htmlElement.appendChild(this.button),this.widget.value&&(this.inputControl.value=jasonWidgets.common.formatDateTime(this.widget.value,this.options.displayFormat)),this.calendarContainer=this.createElement("div"),document.body.appendChild(this.calendarContainer),this.jasonCalendar=new jasonCalendar(this.calendarContainer,{invokable:!0,autoHide:!0,invokableElement:this.htmlElement,width:this.options.width}),this.jasonCalendar.addEventListener(jw.DOM.events.JW_EVENT_ON_CHANGE,this.onCalendarDateChange))},jasonDatePickerUIHelper.prototype.initializeEvents=function(){this.eventManager.addEventListener(this.button,jw.DOM.events.CLICK_EVENT,this.buttonClick,!0),this.eventManager.addEventListener(this.inputControl,jw.DOM.events.BLUR_EVENT,this.onTextInputBlur),this.eventManager.addEventListener(this.inputControl,jw.DOM.events.KEY_DOWN_EVENT,this.inputKeyDown)},jasonDatePickerUIHelper.prototype.onTextInputBlur=function(e,t){jasonTextboxUIHelper.prototype.onTextInputBlur.call(this,e,t),this.inputControl.value.length>0&&this.changed&&(this.widget.value=this.inputControl.value)},jasonDatePickerUIHelper.prototype.onTextInputFocus=function(e,t){jasonTextboxUIHelper.prototype.onTextInputFocus.call(this,e,t)},jasonDatePickerUIHelper.prototype.inputKeyDown=function(e){var t=e.which||e.keyCode;this.changed=!0,13==t&&this.inputControl.value.length>0&&(this.widget.value=this.inputControl.value)},jasonDatePickerUIHelper.prototype.onCalendarDateChange=function(e,t){this.widget.value=t,this.jasonCalendar&&this.jasonCalendar.ui.hideCalendar(),this.inputControl.focus()},jasonDatePickerUIHelper.prototype.buttonClick=function(e){!this.widget.readonly&&this.widget.enabled&&this.jasonCalendar.ui.showCalendar(this.widget.value)},jasonTimePicker.prototype=Object.create(jasonCombobox.prototype),jasonTimePicker.prototype.constructor=jasonTimePicker,jasonTimePicker.prototype.compareValue=function(e){var t=jw.common.getVariableType(e);switch(t){case jw.enums.dataType.string:return jw.common.timeComparison(jw.common.parseTimeValue(e),this.value);case jw.enums.dataType.date:return jw.common.timeComparison(e,this.value);case jw.enums.dataType.array:return jw.common.timeComparison(Array.isArray(e)?e[0].time:e,this.value);default:jw.common.throwError(jw.errorTypes.typeError,"Invalid value type for jasonTimePicker.")}},jasonTimePicker.prototype.readValue=function(e){return e},jasonTimePicker.prototype.formatValue=function(e){return jw.common.formatDateTime(e,this.options.timeFormat)},jasonTimePicker.prototype.setValue=function(e){var t=Array.isArray(e)?e[0].time:e,n=jw.common.getVariableType(t),o=null;switch(n){case jw.enums.dataType.string:o=jw.common.parseDateTimeValue(t,this.options.timeFormat);break;case jw.enums.dataType.date:o=t;break;default:jw.common.throwError(jw.errorTypes.typeError,"Invalid value type for jasonTimePicker.")}return o&&this._selectItemFromTime(o),this._hasKeyStroke=!1,o},jasonTimePicker.prototype.prepareData=function(e){var t=[],n=Math.round(1440/e.interval);e.interval<1&&jw.common.throwError(jw.errorTypes.rangeError,"Timepicker interval cannot be less than a minute.");for(var o=0;o<=n-1;o++){var i={key:o,time:null,formattedTime:null};i.time=new Date;var s=null,a=null,r=t[t.length-1];(r&&r.time.getMinutes()+e.interval)>=60?(s=r.time.getHours()+1,a=0):(s=0==o?0:r.time.getHours(),a=0==o?0:r.time.getMinutes()+e.interval),i.time.setHours(s),i.time.setMinutes(a),i.time.setSeconds(0),i.time.setMilliseconds(0),i.formattedTime=jasonWidgets.common.formatDateTime(i.time,e.timeFormat),t.push(i)}e.data=t},jasonTimePicker.prototype.onTimePickerSelectItem=function(e,t){t.selectedItem&&(this.value=t.selectedItem.time)},jasonTimePicker.prototype._selectItemFromTime=function(e){for(var t=null,n=0;n<=this.dataSource.data.length-1;n++){var o=this.dataSource.data[n];if(jw.common.timeComparison(o.time,e)==jw.enums.comparison.equal){t=o;break}}t&&(this.clearSelection(),this.ui.dropDownListButton.selectedItems.push(t))},jasonTimePicker.prototype.onTextInputBlur=function(e){this.ui.inputControl.value.length>0&&this._hasKeyStroke&&(this.value=this.ui.inputControl.value)},jasonTimePicker.prototype.cmbInputKeyDown=function(e){var t=e.which||e.keyCode;switch(t){case jw.keycodes.enter:this.ui.inputControl.value.length>0&&(this.value=this.ui.inputControl.value,this.ui.hideList());break;case jw.keycodes.downArrow:this._hasKeyStroke=!1;break;default:this._hasKeyStroke=!0}},jasonDateTimePicker.prototype=Object.create(jasonButtonTextbox.prototype),jasonDateTimePicker.prototype.constructor=jasonDateTimePicker,jasonDateTimePicker.prototype.formatValue=function(e){switch(this.options.mode){case"date":return jw.common.formatDateTime(e,this.options.dateFormat);case"time":return jw.common.formatDateTime(e,this.options.timeFormat);case"datetime":default:return jw.common.formatDateTime(e,this.options.dateFormat+" "+this.options.timeFormat)}},jasonDateTimePicker.prototype.readValue=function(e){return e},jasonDateTimePicker.prototype.compareValue=function(e){var t=jw.common.getVariableType(e);switch(t){case jw.enums.dataType.string:break;case jw.enums.dataType.date:break;default:jw.common.throwError(jw.errorTypes.typeError,"Invalid value type for jasonDateTimePicker.")}var n=t==jw.enums.dataType.string?this.parseValue(e):e;switch(this.options.mode){case"date":return jw.common.dateComparison(this._value,n);case"time":return jw.common.timeComparison(this._value,n);case"datetime":return jw.common.dateComparison(this._value,n)==jw.enums.comparison.equal&&jw.common.timeComparison(this._value,n)==jw.enums.comparison.equal?jw.enums.equal:jw.enums.notEqual;default:return jw.enums.notEqual}},jasonDateTimePicker.prototype.setValue=function(e){var t=jw.common.getVariableType(e);switch(t){case jw.enums.dataType.string:return this.parseValue(e);case jw.enums.dataType.date:return e;default:jw.common.throwError(jw.errorTypes.typeError,"Invalid value type for jasonDateTimePicker.")}},jasonDateTimePicker.prototype.prepareData=function(e){var t=[];e.interval=e.interval?e.interval:this.defaultOptions.interval,e.dateFormat=e.dateFormat?e.dateFormat:this.defaultOptions.dateFormat,e.timeFormat=e.timeFormat?e.timeFormat:this.defaultOptions.timeFormat;for(var n=Math.round(1440/e.interval),o=0;o<=n-1;o++){var i={key:o,time:null,formattedTime:null};i.time=new Date;var s=null,a=null,r=t[t.length-1];(r&&r.time.getMinutes()+e.interval)>=60?(s=r.time.getHours()+1,a=0):(s=0==o?0:r.time.getHours(),a=0==o?0:r.time.getMinutes()+e.interval),i.time.setHours(s),i.time.setMinutes(a),i.time.setSeconds(0),i.time.setMilliseconds(0),i.formattedTime=jasonWidgets.common.formatDateTime(i.time,e.timeFormat),t.push(i)}e.data=t},jasonDateTimePicker.prototype.parseValue=function(e){var t=null;switch(this.options.mode){case"date":t=jw.common.parseDateValue(e,this.options.dateFormat);break;case"time":t=jw.common.parseTimeValue(e,this.options.timeFormat);break;case"datetime":t=jw.common.parseDateTimeValue(e,this.options.dateFormat,this.options.timeFormat)}return t},jasonDateTimePickerUIHelper.prototype=Object.create(jasonButtonTextboxUIHelper.prototype),jasonDateTimePickerUIHelper.prototype.constructor=jasonDateTimePickerUIHelper,jasonDateTimePickerUIHelper.prototype.renderUI=function(){var e=this;if(jasonButtonTextboxUIHelper.prototype.renderUI.call(this),!this.htmlElement.classList.contains(jw.DOM.classes.JW_DATE_PICKER_CLASS)){this.htmlElement.classList.add(jw.DOM.classes.JW_DATE_PICKER_CLASS),this.widget.options.placeholder&&this.inputControl.setAttribute(jasonWidgets.DOM.attributes.PLACEHOLDER_ATTR,this.widget.options.placeholder),1==this.widget.readonly&&this.inputControl.setAttribute(jasonWidgets.DOM.attributes.READONLY_ATTR,this.widget.readonly);var t={};jw.common.extendObject(this.options,t),t.icon=jw.DOM.icons.CLOCK,t.tetheredElement=this.htmlElement,t.events.push({eventName:jw.DOM.events.JW_EVENT_ON_SELECT_ITEM,listener:function(t,n){e.timeButton.hideList();var o=e.widget.value,i=null;i=o?new Date(o.getFullYear(),o.getMonth(),o.getDate(),n.selectedItem.time.getHours(),n.selectedItem.time.getMinutes(),n.selectedItem.time.getSeconds()):n.selectedItem.time,e.widget.value=i,setTimeout(function(){e.inputControl.focus()})}}),this.timeButton=new jasonDropDownListButton(jw.htmlFactory.createJWButton(null,jw.DOM.icons.CLOCK),t),this.timeButton.htmlElement.classList.remove(jw.DOM.classes.JW_BORDERED),this.timeButton.htmlElement.classList.remove(jw.DOM.classes.JW_BUTTON_STANDALONE),this.timeButton.visible="date"!=this.options.mode,this.button.style.display="time"==this.options.mode?"none":"",this.htmlElement.appendChild(this.inputControl),this.htmlElement.appendChild(this.button),this.htmlElement.appendChild(this.timeButton.htmlElement);var n="datetime"==this.options.mode?70:34;this.inputControl.style.width="calc(100% - "+n+"px)",""==this.inputControl.style.width&&(this.inputControl.style.width="-webkit-calc(100% - "+n+"px)"),this.widget.value&&(this.inputControl.value=jasonWidgets.common.formatDateTime(this.widget.value,this.options.dateFormat+" "+this.options.timeFormat)),this.calendarContainer=this.createElement("div"),document.body.appendChild(this.calendarContainer),this.jasonCalendar=new jasonCalendar(this.calendarContainer,{invokable:!0,autoHide:!0,invokableElement:this.htmlElement,width:this.options.width}),this.jasonCalendar.addEventListener(jw.DOM.events.JW_EVENT_ON_CHANGE,this.onCalendarDateChange),this.widget.readonly=!!this.options.readonly&&this.options.readonly}},jasonDateTimePickerUIHelper.prototype.initializeEvents=function(){this.eventManager.addEventListener(this.button,jw.DOM.events.CLICK_EVENT,this.buttonClick,!0),this.eventManager.addEventListener(this.timeButton.htmlElement,jw.DOM.events.CLICK_EVENT,this.timeButtonClick,!0),this.eventManager.addEventListener(this.inputControl,jw.DOM.events.BLUR_EVENT,this.onTextInputBlur),this.eventManager.addEventListener(this.inputControl,jw.DOM.events.KEY_DOWN_EVENT,this.inputKeyDown)},jasonDateTimePickerUIHelper.prototype.onTextInputBlur=function(e,t){jasonTextboxUIHelper.prototype.onTextInputBlur.call(this,e,t),this.inputControl.value.length>0&&this.changed&&(this.widget.value=this.inputControl.value)},jasonDateTimePickerUIHelper.prototype.onTextInputFocus=function(e,t){jasonTextboxUIHelper.prototype.onTextInputFocus.call(this,e,t)},jasonDateTimePickerUIHelper.prototype.inputKeyDown=function(e){var t=e.which||e.keyCode;this.changed=!0,13==t&&this.inputControl.value.length>0&&(this.widget.value=this.inputControl.value)},jasonDateTimePickerUIHelper.prototype.onCalendarDateChange=function(e,t){var n=t;this.widget.value&&(n=new Date(n.getFullYear(),n.getMonth(),n.getDate(),this.widget.value.getHours(),this.widget.value.getMinutes(),this.widget.value.getSeconds())),this.widget.value=n,this.jasonCalendar&&this.jasonCalendar.ui.hideCalendar(),this.inputControl.focus()},jasonDateTimePickerUIHelper.prototype.buttonClick=function(e){!this.widget.readonly&&this.widget.enabled&&(this.jasonCalendar.ui.showCalendar(this.widget.value),this.timeButton.hideList())},jasonDateTimePickerUIHelper.prototype.timeButtonClick=function(e){!this.widget.readonly&&this.widget.enabled&&this.jasonCalendar.ui.hideCalendar()},jasonDateTimePickerUIHelper.prototype.updateEnabled=function(e){jasonButtonTextboxUIHelper.prototype.updateEnabled.call(this,e),e?(this.inputControl.removeAttribute(jw.DOM.attributes.DISABLED_ATTR),this.button.removeAttribute(jw.DOM.attributes.DISABLED_ATTR)):(this.inputControl.setAttribute(jw.DOM.attributes.DISABLED_ATTR,!0),this.button.setAttribute(jw.DOM.attributes.DISABLED_ATTR,!0)),this.timeButton.enabled=e},jasonDateTimePickerUIHelper.prototype.updateReadOnly=function(e){jasonButtonTextboxUIHelper.prototype.updateReadOnly.call(this,e),this.timeButton.readonly=e},jasonDialog.prototype=Object.create(jasonBaseWidget.prototype),jasonDialog.prototype.constructor=jasonDialog;var jasonDialogButtonResult={OK:1,CANCEL:2,NO:3,YES:4,ABORT:5,RETRY:6,IGNORE:7};jasonDialog.prototype.show=function(){this.ui.renderUI(),this.ui.show()},jasonDialog.prototype.hide=function(){this.ui.hide()},jasonDialog.prototype._initializeTemplates=function(e){var t="function"==typeof e.customization.headerTemplate?e.customization.headerTemplate():e.customization.headerTemplate,n=document.getElementById(t);t=n?"SCRIPT"==n.tagName?n.innerHTML:n.outerHTML:"string"==typeof t&&t.trim().length>0?t:null,e.customization.headerTemplate=t,t="function"==typeof e.customization.bodyTemplate?e.customization.bodyTemplate():e.customization.bodyTemplate,n=document.getElementById(t),t=n?"SCRIPT"==n.tagName?n.innerHTML:n.outerHTML:"string"==typeof t&&t.trim().length>0?t:null,e.customization.bodyTemplate=t},jasonDialogUIHelper.prototype=Object.create(jasonBaseWidgetUIHelper.prototype),jasonDialogUIHelper.prototype.constructor=jasonDialogUIHelper,jasonDialogUIHelper.prototype.renderUI=function(){this.dialogContainer||(this.dialogContainer=this.createElement("DIV"),this.dialogContainer.style.display="none",this.dialogContainer.classList.add(jw.DOM.classes.JW_DIALOG_CONTAINER),this.dialogContainer.jasonWidgetsData=[].concat(this.htmlElement.jasonWidgetsData),this.dialogContainer.setAttribute(jw.DOM.attributes.DRAGGABLE_ATTR,"false"),this.htmlElement.parentNode.removeChild(this.htmlElement),this.blockUI=new jasonBlockUI(this.dialogContainer,{opacity:"0.5"}),this.dialogHeader=this.createElement("DIV"),this.dialogHeader.classList.add(jw.DOM.classes.JW_DIALOG_HEADER),this.dialogTitleContainer=this.createElement("DIV"),this.dialogTitleContainer.classList.add(jw.DOM.classes.JW_DIALOG_TITLE_CONTAINER),this.dialogHeaderButtonContainer=this.createElement("DIV"),this.dialogHeaderButtonContainer.classList.add(jw.DOM.classes.JW_DIALOG_HEADER_BUTTON_CONTAINER),this.dialogHeader.appendChild(this.dialogTitleContainer),this.dialogHeader.appendChild(this.dialogHeaderButtonContainer),void 0==this.options.customization.headerTemplate?(this.dialogTitle=jw.htmlFactory.createJWLinkLabel(this.options.title),this.dialogTitle.setAttribute(jw.DOM.attributes.DRAGGABLE_ATTR,"false"),this.dialogTitleContainer.appendChild(this.dialogTitle),this.options.closeButton&&(this.dialogHeaderButton=jw.htmlFactory.createJWButton(null,jw.DOM.icons.CLOSE),jw.common.setData(this.dialogHeaderButton,jw.DOM.attributeValues.JW_DIALOG_BUTTON_DATA_KEY,{name:"closeBtn",result:jasonDialogButtonResult.CANCEL}),this.eventManager.addEventListener(this.dialogHeaderButton,jw.DOM.events.CLICK_EVENT,this._onDialogButtonClick,!0),this.dialogHeaderButtonContainer.appendChild(this.dialogHeaderButton))):jw.common.applyTemplate(this.dialogHeader,this.options.customization.headerTemplate,this.options.customization.dataFieldAttribute,this.options.model),this.dialogBody=this.createElement("DIV"),void 0==this.options.customization.bodyTemplate?this.dialogBody.appendChild(this.htmlElement):jw.common.applyTemplate(this.dialogBody,this.options.customization.bodyTemplate,this.options.customization.dataFieldAttribute,this.options.model),this.dialogBody.classList.add(jw.DOM.classes.JW_DIALOG_BODY),this.dialogFooter=this.createElement("DIV"),this.dialogFooter.classList.add(jw.DOM.classes.JW_DIALOG_FOOTER),this.buttonsContainer=this.createElement("div"),this.buttonsContainer.classList.add(jw.DOM.classes.JW_DIALOG_BUTTONS_CONTAINER),this.dialogFooter.appendChild(this.buttonsContainer),this._renderButtons(),this.dialogContainer.appendChild(this.dialogHeader),this.dialogContainer.appendChild(this.dialogBody),this.dialogContainer.appendChild(this.dialogFooter),this.dialogContainer.appendChild(jw.htmlFactory.createClearFloat()),this.dialogResizer=new jasonElementResizer(this.dialogContainer,{allowResize:!!this.options.resizeable&&{top:!0,left:!0,bottom:!0,right:!0},minHeight:this.options.minHeight,minWidth:this.options.minWidth,events:[{eventName:jw.DOM.events.JW_EVENT_ON_ELEMENT_RESIZING,listener:function(){this.dialogDragger.enabled=!1,this.dialogContainer.classList.add(jw.DOM.classes.JW_GRID_UNSELECTABLE)}.bind(this)},{eventName:jw.DOM.events.JW_EVENT_ON_ELEMENT_RESIZED,listener:function(){this.dialogDragger.enabled=!0,this.dialogContainer.classList.remove(jw.DOM.classes.JW_GRID_UNSELECTABLE)}.bind(this)}]},"jasonDialogDragResize"),this.dialogDragger=new jasonElementDragger(this.dialogContainer,{changeCursor:!1}))},jasonDialogUIHelper.prototype._renderButtons=function(e){if(0==this.options.buttons.length){
var t=this.options.localization.dialog.buttons.filter(function(e){return"btnOK"==e.name})[0];this.options.buttons.push({caption:t.caption,result:jasonDialogButtonResult.OK})}for(var n=0;n<=this.options.buttons.length-1;n++){var o=jw.htmlFactory.createJWButton(this.options.buttons[n].caption);this.options.buttons[n].element=o,this.eventManager.addEventListener(o,jw.DOM.events.CLICK_EVENT,this._onDialogButtonClick,!0),jw.common.setData(o,jw.DOM.attributeValues.JW_DIALOG_BUTTON_DATA_KEY,this.options.buttons[n]),this.buttonsContainer.appendChild(o)}},jasonDialogUIHelper.prototype._onDialogButtonClick=function(e){var t=jw.common.getData(e.currentTarget,jw.DOM.attributeValues.JW_DIALOG_BUTTON_DATA_KEY);this.widget.triggerEvent(jw.DOM.events.JW_EVENT_ON_JW_DIALOG_BUTTON_CLICK,t),0!=t.controlsDialogClose&&void 0!=t.controlsDialogClose||this.hide()},jasonDialogUIHelper.prototype.show=function(){if(!this.widget.readonly&&this.widget.enabled){if(this.resizeEventListenerId=jwWindowEventManager.addWindowEventListener(jw.DOM.events.RESIZE_EVENT,function(e){this._dialogInCenter()}.bind(this)),this.options.modal){for(var e=document.querySelectorAll(".jw-dialog-container"),t=null,n=e.length-1;n>=0;n--)if(""==e[n].style.display){t=e[n];break}t&&(this.existingBlockedDialogInstance=jw.common.getData(t,"jasonDialog"),this.existingBlockedDialogInstance&&(this.existingBlockedDialogInstance.ui.blockUI.options.active=!1)),this.blockUI.options.blockKeyboard=!0,this.blockUI.block(null==t?this.options.blockTarget:t)}if(this.options.width&&(this.dialogContainer.style.width=parseFloat(this.options.width)+"px"),this.options.height&&(this.dialogContainer.style.height=parseFloat(this.options.height)+"px"),this.options.top&&(this.dialogContainer.style.top=parseFloat(this.options.top)+"px"),this.options.left&&(this.dialogContainer.style.left=parseFloat(this.options.left)),document.body.appendChild(this.dialogContainer),this.dialogContainer.style.display="",""==this.dialogContainer.style.zIndex)this.dialogContainer.style.zIndex=jw.common.getNextZIndex();else{var o=parseInt(this.dialogContainer.style.zIndex),i=jw.common.getNextZIndex();o<i&&(this.dialogContainer.style.zIndex=i)}if(this._dialogInCenter(),void 0!=this.dialogTitle&&this.dialogTitle.focus(),this.options.animation){var s=!this.options.animation.delay||this.options.animation.delay>10?25:5*this.options.animation.delay,a=this;jw.common.fadeIn(this.dialogContainer,s,function(){a.widget.triggerEvent(jw.DOM.events.JW_EVENT_ON_SHOW)})}else this.widget.triggerEvent(jw.DOM.events.JW_EVENT_ON_SHOW)}},jasonDialogUIHelper.prototype.hide=function(){if(this.existingBlockedDialogInstance&&(this.existingBlockedDialogInstance.ui.blockUI.options.active=!0,this.existingBlockedDialogInstance=null),this.options.animation){var e=!this.options.animation.delay||this.options.animation.delay>10?25:5*this.options.animation.delay;jw.common.fadeOut(this.dialogContainer,e,function(){this.blockUI.unBlock(),jwWindowEventManager.removeWindowEventListener(this.resizeEventListenerId),document.body.removeChild(this.dialogContainer),this.widget.triggerEvent(jw.DOM.events.JW_EVENT_ON_HIDE)}.bind(this))}else this.blockUI.unBlock(),document.body.removeChild(this.dialogContainer),this.widget.triggerEvent(jw.DOM.events.JW_EVENT_ON_HIDE)},jasonDialogUIHelper.prototype._dialogInCenter=function(){if(void 0==this.options.left){var e=window.innerWidth/2-this.dialogContainer.offsetWidth/2;this.dialogContainer.style.left=e+"px"}if(void 0==this.options.top){var t=window.innerHeight/2-this.dialogContainer.offsetHeight/2;this.dialogContainer.style.top=t+"px"}},jasonButton.prototype=Object.create(jasonBaseWidget.prototype),jasonButton.prototype.constructor=jasonButton,jasonButtonUIHelper.prototype=Object.create(jasonBaseWidgetUIHelper.prototype),jasonButtonUIHelper.prototype.constructor=jasonButtonUIHelper,jasonButtonUIHelper.prototype.renderUI=function(){jw.htmlFactory.createJWButton(this.options.caption,this.options.icon,this.htmlElement),this.htmlElement.classList.add(jw.DOM.classes.JW_BORDERED),this.htmlElement.classList.add(jw.DOM.classes.JW_BUTTON_STANDALONE)},jasonButtonUIHelper.prototype.initializeEvents=function(){this.eventManager.addEventListener(this.htmlElement,jw.DOM.events.CLICK_EVENT,this.buttonClick,!0)},jasonButtonUIHelper.prototype.buttonClick=function(){!this.widget.readonly&&this.widget.enabled&&this.widget.triggerEvent(jw.DOM.events.CLICK_EVENT)},jasonButtonUIHelper.prototype.updateEnabled=function(e){jasonBaseWidgetUIHelper.prototype.updateEnabled.call(this,e),e?this.htmlElement.removeAttribute(jw.DOM.attributes.DISABLED_ATTR):this.htmlElement.setAttribute(jw.DOM.attributes.DISABLED_ATTR,!0)},jasonButtonUIHelper.prototype.updateVisible=function(e){jasonBaseWidgetUIHelper.prototype.updateVisible.call(this,e)},jasonButtonUIHelper.prototype.updateReadOnly=function(e){jasonBaseWidgetUIHelper.prototype.updateReadOnly.call(this,e),e?this.htmlElement.removeAttribute(jw.DOM.attributes.READONLY_ATTR):this.htmlElement.setAttribute(jw.DOM.attributes.READONLY_ATTR,!0)},jasonDropDownListButton.prototype=Object.create(jasonBaseWidget.prototype),jasonDropDownListButton.prototype.constructor=jasonDropDownListButton,jasonDropDownListButton.prototype.onDataChange=function(){this.ui.renderListItems()},jasonDropDownListButton.prototype.showList=function(){this.ui.showList()},jasonDropDownListButton.prototype.hideList=function(){this.ui.hideList()},jasonDropDownListButton.prototype.selectItem=function(e){if("number"==typeof e){this.options.multiSelect||(this.selectedItems=[]);var t=this.dataSource.data[e];t&&(this.selectedItems.push(t),this.selectedItemIndex=e,this.ui.updateCaption(),this.triggerEvent(jw.DOM.events.JW_EVENT_ON_SELECT_ITEM,{selectedItem:t,selectedItemIndex:e}),this.validate())}},jasonDropDownListButton.prototype.deSelectItem=function(e){var t=this.dataSource.data[e];if(t){var n=-1;this.selectedItems.filter(function(e,o){var i=e._jwRowId==t._jwRowId;if(i)return void(n=o)}),n>=0&&(this.selectedItems.splice(n,1),this.ui.updateCaption(),this.triggerEvent(jw.DOM.events.JW_EVENT_ON_UNSELECT_ITEM,{selectedItem:t,selectedItemIndex:e}))}},jasonDropDownListButtonUIHelper.prototype=Object.create(jasonBaseWidgetUIHelper.prototype),jasonDropDownListButtonUIHelper.prototype.constructor=jasonDropDownListButtonUIHelper,jasonDropDownListButtonUIHelper.prototype.monitorForDocumentClick=function(e){if(this.dropDownListContainer&&""==this.dropDownListContainer.style.display){if(jw.common.contains(this.htmlElement,e.target))return;jw.common.isMouseEventOutOfContainer(this.dropDownListContainer,e)&&this.hideList()}},jasonDropDownListButtonUIHelper.prototype.renderUI=function(){jasonButtonUIHelper.prototype.renderUI.call(this),this.dropDownListContainer=this.createElement("DIV"),this.dropDownList=this.createElement("UL"),this.renderListItems(),this.dropDownListContainer.appendChild(this.dropDownList),this.dropDownListContainer.style.display="none",this.dropDownListContainer.style.position="absolute",this.dropDownListContainer.classList.add(jw.DOM.classes.JW_DROP_DOWN_LIST),this.options.multiSelect&&this.htmlElement.classList.add(jw.DOM.classes.JW_DROP_DOWN_BUTTON_MULTI_SELECT)},jasonDropDownListButtonUIHelper.prototype.createCaptionFromSelection=function(){var e=this,t="",n=[];return this.widget.selectedItems.forEach(function(o,i){e.options.displayFields.forEach(function(e){n.push(o[e])}),t+=jasonWidgets.common.formatString(e.options.displayFormat,n),e.widget.selectedItems.length>1&&i<e.widget.selectedItems.length-1&&(t=t+" "+e.options.multipleSelectionSeparator+" "),n=[]}),t},jasonDropDownListButtonUIHelper.prototype.updateCaption=function(){var e=this.createCaptionFromSelection();jw.common.replaceNodeText(this.htmlElement.children[0],e),this.htmlElement.children[0].setAttribute(jw.DOM.attributes.TITLE_ATTR,e)},jasonDropDownListButtonUIHelper.prototype.renderListItems=function(e){var t=e?e:this.widget.dataSource.data;jw.common.removeChildren(this.dropDownList);for(var n=jasonWidgets.common.getNextTabIndex(),o=0;o<=t.length-1;o++){var i=this.createElement("li"),s=t[o],a=null;if(this.options.customization.itemTemplate)jw.common.applyTemplate(i,this.options.customization.itemTemplate,this.options.customization.dataFieldAttribute,s);else{var r=this.formatDataItem(s);a=jw.htmlFactory.createJWLabel(r);var l=null;this.options.checkboxes&&(l=jw.htmlFactory.createJWCheckBoxInput(!1,null),i.appendChild(l)),i.appendChild(a)}i.className=jw.DOM.classes.JW_DROP_DOWN_LIST_ITEM,i.setAttribute(jasonWidgets.DOM.attributes.JW_DATA_JW_ITEM_INDEX_ATTR,s._jwRowId),i.setAttribute(jasonWidgets.DOM.attributes.JW_ITEM_INDEX_ATTR,o),i.setAttribute(jasonWidgets.DOM.attributes.TABINDEX_ATTR,n),jasonWidgets.common.setData(i,"jDropDownListDataItem",s),this.eventManager.addEventListener(i,jw.DOM.events.KEY_DOWN_EVENT,this.onListItemKeyDown,!0),this.eventManager.addEventListener(i,jw.DOM.events.MOUSE_DOWN_EVENT,this.onListItemClick,!0),n++,this.dropDownList.appendChild(i)}},jasonDropDownListButtonUIHelper.prototype.formatDataItem=function(e){var t=[];this.options.displayFields&&this.options.displayFields.forEach(function(n){t.push(e[n])});var n=e._NoData_;return n||(n="string"==typeof e?e:jasonWidgets.common.formatString(this.options.displayFormat,t)),e._jw_Searchable_value=t.join(" "),n},jasonDropDownListButtonUIHelper.prototype.initializeTemplates=function(){var e="function"==typeof this.options.customization.itemTemplate?this.options.customization.itemTemplate():this.options.customization.itemTemplate,t=document.getElementById(e);e=t?"SCRIPT"==t.tagName?t.innerHTML:t.outerHTML:"string"==typeof e&&e.trim().length>0?e:null,this.options.customization.itemTemplate=e},jasonDropDownListButtonUIHelper.prototype.initializeEvents=function(){this.eventManager.addEventListener(this.htmlElement,jw.DOM.events.CLICK_EVENT,this.buttonClick,!0)},jasonDropDownListButtonUIHelper.prototype.buttonClick=function(){this.toggleList(),jasonButtonUIHelper.prototype.buttonClick.call(this)},jasonDropDownListButtonUIHelper.prototype.toggleList=function(){"none"==this.dropDownListContainer.style.display?this.showList():this.hideList()},jasonDropDownListButtonUIHelper.prototype.showList=function(){if(!this.widget.readonly&&this.widget.enabled&&(this.dropDownListContainer.style.display="none")){var e=this.options.tetheredElement?jw.common.getBoundingClientRect(this.options.tetheredElement):jw.common.getBoundingClientRect(this.htmlElement);document.body.appendChild(this.dropDownListContainer);var t=this.options.tetheredElement?this.options.tetheredElement.offsetWidth:this.htmlElement.offsetWidth,n=this.options.tetheredElement?this.options.tetheredElement.offsetHeight:this.htmlElement.offsetHeight,o=e.top+n,i=e.left;t&&(this.dropDownListContainer.style.width=t+"px"),this.dropDownListContainer.style.top=o+"px",this.dropDownListContainer.style.left=i+"px",this.dropDownListContainer.style.zIndex=jw.common.getNextAttributeValue("z-index")+1,this.dropDownListContainer.style.display="",jw.common.getFirstFocusableElement(this.dropDownList),this.scrollItemIntoView(),this.widget.selectedItems.forEach(function(e,t){var n=this.dropDownList.children[e._jwRowId];n&&(n.classList.contains(jw.DOM.classes.JW_SELECTED)||this.toggleLIElementSelection(n))}.bind(this)),this.widget.triggerEvent(jw.DOM.events.JW_EVENT_ON_SHOW)}},jasonDropDownListButtonUIHelper.prototype.hideList=function(){!this.widget.readonly&&this.widget.enabled&&""==this.dropDownListContainer.style.display&&(this.dropDownListContainer.style.display="none",document.body.removeChild(this.dropDownListContainer),this.widget.triggerEvent(jw.DOM.events.JW_EVENT_ON_HIDE))},jasonDropDownListButtonUIHelper.prototype.clearSelection=function(e){for(var t=this.dropDownList.getElementsByClassName(jw.DOM.classes.JW_SELECTED),n=0;n<=t.length-1;n++)t[n]!=e&&t[n].classList.remove(jw.DOM.classes.JW_SELECTED);this.widget.selectedItemIndex=-1,this.widget.selectedItems=[]},jasonDropDownListButtonUIHelper.prototype.onListItemClick=function(e){if(0==e.button){var t=("INPUT"!=e.target.tagName,"LI"==e.target.tagName?e.target:jw.common.getParentElement("LI",e.target)),n=t.getElementsByTagName("input")[0];if(!this.options.multiSelect&&this.options.checkboxes)for(var o=this.dropDownList.getElementsByTagName("input"),i=0;i<=o.length-1;i++)o[i]!=n&&(o[i].checked=!1);this.options.multiSelect||this.clearSelection(t),t.classList.contains(jw.DOM.classes.JW_SELECTED)?this.widget.deSelectItem(parseInt(t.getAttribute(jasonWidgets.DOM.attributes.JW_DATA_JW_ITEM_INDEX_ATTR))):this.widget.selectItem(parseInt(t.getAttribute(jasonWidgets.DOM.attributes.JW_DATA_JW_ITEM_INDEX_ATTR))),this.toggleLIElementSelection(t,e),this.options.multiSelect||this.hideList()}},jasonDropDownListButtonUIHelper.prototype.toggleLIElementSelection=function(e,t){var n=e.getElementsByTagName("input")[0];t&&n==t.target&&(n=null),e.classList.contains(jw.DOM.classes.JW_SELECTED)?(e.classList.remove(jw.DOM.classes.JW_SELECTED),n&&(n.checked=!1)):(e.classList.add(jw.DOM.classes.JW_SELECTED),n&&(n.checked=!0))},jasonDropDownListButtonUIHelper.prototype.onListItemKeyDown=function(e){var t=e.which||e.keyCode;switch(t){case 9:this.setFocusToListItem(e.currentTarget,e.shiftKey?jw.DOM.attributeValues.JW_COMBOBOX_LIST_STATE_UP:jw.DOM.attributeValues.JW_COMBOBOX_LIST_STATE_DOWN),e.preventDefault();break;case jw.keycodes.enter:var n=parseInt(e.currentTarget.getAttribute(jasonWidgets.DOM.attributes.JW_DATA_JW_ITEM_INDEX_ATTR));this.widget.selectItem(n),this.hideList(!0),this.htmlElement.focus();break;case jw.keycodes.escape:this.hideList();break;case jw.keycodes.upArrow:this.setFocusToListItem(e.currentTarget,jw.DOM.attributeValues.JW_COMBOBOX_LIST_STATE_UP),e.preventDefault();break;case jw.keycodes.downArrow:this.setFocusToListItem(e.currentTarget,jw.DOM.attributeValues.JW_COMBOBOX_LIST_STATE_DOWN),e.preventDefault()}},jasonDropDownListButtonUIHelper.prototype.setFocusToListItem=function(e,t){var n=parseInt(e.getAttribute(jasonWidgets.DOM.attributes.JW_ITEM_INDEX_ATTR));"up"==t?n-1<0?this.htmlElement.focus():this.dropDownList.children[n-1].focus():this.dropDownList.children.length!=n+1&&this.dropDownList.children[n+1].focus()},jasonDropDownListButtonUIHelper.prototype.scrollSelectedIntoView=function(e){if(""==this.dropDownListContainer.style.display&&this.widget.selectedItemIndex>=0){var t=jw.common.getElementsByAttribute(this.dropDownList,jasonWidgets.DOM.attributes.JW_DATA_JW_ITEM_INDEX_ATTR,this.widget.selectedItemIndex)[0];void 0!=t&&(this.dropDownListContainer.scrollTop=t.offsetTop,e&&t.focus())}},jasonDropDownListButtonUIHelper.prototype.scrollFirstItemIntoView=function(e){""==this.dropDownListContainer.style.display&&this.dropDownList.children.length>0&&(this.dropDownListContainer.scrollTop=this.dropDownList.children[0].offsetTop,e&&this.dropDownList.children[0].focus())},jasonDropDownListButtonUIHelper.prototype.scrollItemIntoView=function(e){this.widget.selectedItems.length>0?this.scrollSelectedIntoView(e):this.scrollFirstItemIntoView(e)},jasonDropDownListButtonUIHelper.prototype.updateEnabled=function(e){jasonButtonUIHelper.prototype.updateEnabled.call(this,e)},jasonDropDownListButtonUIHelper.prototype.updateVisible=function(e){jasonButtonUIHelper.prototype.updateVisible.call(this,e)},jasonDropDownListButtonUIHelper.prototype.updateReadOnly=function(e){jasonButtonUIHelper.prototype.updateReadOnly.call(this,e)},jasonPopover.prototype=Object.create(jasonBaseWidget.prototype),jasonPopover.prototype.constructor=jasonPopover,jasonPopover.prototype.show=function(){if(!this.readonly&&this.enabled&&"none"==this.htmlElement.style.display){if(document.body.appendChild(this.htmlElement),this.htmlElement.style.display="",""==this.htmlElement.style.zIndex)this.htmlElement.style.zIndex=jw.common.getNextZIndex();else{var e=parseInt(this.htmlElement.style.zIndex),t=jw.common.getNextZIndex();e<t&&(this.htmlElement.style.zIndex=t)}this._placePopover(),this.ui.targetElementClientRect=this.options.targetElement.getBoundingClientRect(),this.ui.monitorTargetElement(),this.triggerEvent(jw.DOM.events.JW_EVENT_ON_SHOW,this)}},jasonPopover.prototype.hide=function(){""==this.htmlElement.style.display&&(this.htmlElement.style.display="none",document.body.removeChild(this.htmlElement),this.triggerEvent(jw.DOM.events.JW_EVENT_ON_HIDE,this))},jasonPopover.prototype.toggle=function(e){""==this.htmlElement.style.display?this.hide():this.show()},jasonPopover.prototype._getSpaceInformation=function(e,t,n){var o=t?t:this._spaceInformation,i=(this.htmlElement.getBoundingClientRect(),n?n:{height:this.htmlElement.offsetHeight,width:this.htmlElement.offsetWidth});o.exceedingLeftPixels=i.width+this.arrowSize-e.left,o.exceedingRightPixels=e.right+i.width+this.arrowSize-document.body.offsetWidth,o.exceedingTopPixels=i.height+this.arrowSize-e.clientRect.top,o.exceedingBottomPixels=i.height+this.arrowSize-(document.documentElement.offsetHeight-e.clientRect.bottom);var s=e.left+e.width/2-i.width/2,a=e.top+e.height/2-i.height/2-this.arrowSize;if(o.leftForVertical=s,o.topForHorizontal=a,o.canShowOnTop=o.exceedingTopPixels<=0,o.canShowOnTop&&(s<0&&(s=0),o.canShowOnTop=o.canShowOnTop&&s>=0,o.canShowOnTop&&(o.canShowOnTop=o.canShowOnTop&&s<e.left,o.canShowOnTop&&(o.canShowOnTop=o.canShowOnTop&&s+i.width+e.scrolling.left<document.body.offsetWidth,o.canShowOnTop&&s>0&&(o.canShowOnTop=o.canShowOnTop&&s+e.scrolling.left+i.width/2<e.right)))),o.canShowOnBottom=o.exceedingBottomPixels<=0,o.canShowOnBottom&&(s<0&&(s=0),o.canShowOnBottom=o.canShowOnBottom&&s>=0,o.canShowOnBottom&&(o.canShowOnBottom=o.canShowOnBottom&&s<e.left,o.canShowOnBottom&&(o.canShowOnBottom=o.canShowOnBottom&&s+i.width+e.scrolling.left<document.body.offsetWidth,o.canShowOnBottom&&s>0&&(o.canShowOnBottom=o.canShowOnBottom&&s+e.scrolling.left+i.width/2<e.right)))),o.canShowOnLeft=o.exceedingLeftPixels<=0,o.canShowOnLeft&&(o.canShowOnLeft=o.canShowOnLeft&&a>=0,o.canShowOnLeft)){e.bottom>e.clientRect.bottom?e.bottom:e.clientRect.bottom;o.canShowOnLeft=o.canShowOnLeft&&a+i.height/2<document.documentElement.offsetHeight}if(o.canShowOnRight=o.exceedingRightPixels<=0,o.canShowOnRight&&(o.canShowOnRight=o.canShowOnRight&&a>=0,o.canShowOnRight)){e.bottom>e.clientRect.bottom?e.bottom:e.clientRect.bottom;o.canShowOnRight=o.canShowOnRight&&a+i.height/2<document.documentElement.offsetHeight}return o.needsResize=!(o.canShowOnTop||o.canShowOnBottom||o.canShowOnLeft||o.canShowOnRight),o},jasonPopover.prototype._placePopover=function(){var e={left:0,top:0};this.htmlElement.classList.remove(jw.DOM.classes.JW_TOP),this.htmlElement.classList.remove(jw.DOM.classes.JW_BOTTOM),this.htmlElement.classList.remove(jw.DOM.classes.JW_LEFT),this.htmlElement.classList.remove(jw.DOM.classes.JW_RIGHT),this.htmlElement.classList.remove(jw.DOM.classes.JW_ARROW_LEFT),this.htmlElement.classList.remove(jw.DOM.classes.JW_ARROW_MIDDLE),this.htmlElement.classList.remove(jw.DOM.classes.JW_ARROW_RIGHT);var t=null;switch(this.options.coordinates?(e.top=this.options.coordinates.top,e.left=this.options.coordinates.left):this.options.targetElement&&(this.htmlElement.style.height="",this.htmlElement.style.width="",this.htmlElement.style.top="0px",this.htmlElement.style.left="0px",t=jw.common.getBoundingClientRect(this.options.targetElement),this._getSpaceInformation(t),this.options.autoPlacement&&(this.options.arrowPlacement="middle",this._choosePosition()),this.options.autoSize&&this._spaceInformation.needsResize?(this._resizePopover(t),this._getSpaceInformation(t),this.options.autoPlacement&&this._choosePosition()):"none"==this.options.position&&(this.options.position="top"),e=this._getCoordinates(t)),this.options.position.toLowerCase()){case jw.DOM.classes.JW_TOP:this.htmlElement.classList.add(jw.DOM.classes.JW_TOP);break;case jw.DOM.classes.JW_LEFT:this.htmlElement.classList.add(jw.DOM.classes.JW_LEFT);break;case jw.DOM.classes.JW_BOTTOM:this.htmlElement.classList.add(jw.DOM.classes.JW_BOTTOM);break;case jw.DOM.classes.JW_RIGHT:this.htmlElement.classList.add(jw.DOM.classes.JW_RIGHT)}switch(this.options.arrowPlacement.toLowerCase()){case jw.DOM.classes.JW_LEFT:this.htmlElement.classList.add(jw.DOM.classes.JW_ARROW_LEFT);break;case jw.DOM.classes.JW_RIGHT:this.htmlElement.classList.add(jw.DOM.classes.JW_ARROW_RIGHT)}this.htmlElement.style.top=e.top+"px",this.htmlElement.style.left=e.left+"px"},jasonPopover.prototype._choosePosition=function(){return this._spaceInformation.canShowOnTop?void(this.options.position="top"):this._spaceInformation.canShowOnBottom?void(this.options.position="bottom"):this._spaceInformation.canShowOnLeft?void(this.options.position="left"):this._spaceInformation.canShowOnRight?void(this.options.position="right"):void(this.options.position="none")},jasonPopover.prototype._resizePopover=function(e){var t=this.htmlElement.offsetHeight,n=this.htmlElement.offsetWidth,o="none";if(this.options.autoPlacement){var i={left:e.left,top:document.documentElement.offsetHeight-e.top,right:document.body.offsetWidth-e.right,bottom:document.documentElement.offsetHeight-(e.clientRect.bottom+e.scrolling.top)};i.top>i.right&&i.top>i.left&&i.top>i.bottom&&(o="top"),i.left>i.top&&i.left>i.right&&i.left>i.bottom&&(o="left"),i.right>i.top&&i.right>i.left&&i.right>i.bottom&&(o="right"),i.bottom>i.top&&i.bottom>i.left&&i.bottom>i.right&&(o="bottom")}else o=this.options.position.toLowerCase();var s={},a=n,r=t;switch(o){case"top":for(s=this._getSpaceInformation(e,s);!s.canShowOnTop&&((s.leftForVertical+a>document.body.offsetWidth||s.leftForVertical<0)&&(a-=Math.abs(s.leftForVertical)),s.exceedingTopPixels>0&&(r-=s.exceedingTopPixels+this.arrowSize),r<0&&(r=50),s=this._getSpaceInformation(e,s,{height:Math.round(r),width:Math.round(a)}),s.needsResize););break;case"left":for(s=this._getSpaceInformation(e,s);!s.canShowOnLeft&&(s.exceedingLeftPixels>0&&(a-=s.exceedingLeftPixels+this.arrowSize),(s.topForHorizontal+r>document.documentElement.offsetHeight||s.topForHorizontal<0)&&(r-=Math.abs(s.topForHorizontal)),r<0&&(r=50),s=this._getSpaceInformation(e,s,{height:Math.round(r),width:Math.round(a)}),s.needsResize););break;case"bottom":for(s=this._getSpaceInformation(e,s);!s.canShowOnBottom&&((s.leftForVertical+a>document.body.offsetWidth||s.leftForVertical<0)&&(a-=Math.abs(s.leftForVertical)),s.exceedingBottomPixels>0&&(r-=s.exceedingBottomPixels+this.arrowSize),r<0&&(r=50),s=this._getSpaceInformation(e,s,{height:Math.round(r),width:Math.round(a)}),s.needsResize););break;case"right":for(s=this._getSpaceInformation(e,s);!s.canShowOnRight&&(s.exceedingRightPixels>0&&(a-=s.exceedingRightPixels+this.arrowSize),(s.topForHorizontal+r>document.documentElement.offsetHeight||s.topForHorizontal<0)&&(r-=Math.abs(s.topForHorizontal)),r<0&&(r=50),s=this._getSpaceInformation(e,s,{height:Math.round(r),width:Math.round(a)}),s.needsResize););}this.htmlElement.style.width=a+"px",this.htmlElement.style.height=r+"px"},jasonPopover.prototype._getCoordinates=function(e,t,n){var o=t?t.toLowerCase():this.options.position.toLowerCase(),i=n?n:{height:this.htmlElement.offsetHeight,width:this.htmlElement.offsetWidth},s={left:0,top:0};switch(o){case jw.DOM.classes.JW_TOP:switch(s.top=e.top-i.height-this.arrowSize,s.left=e.left+e.width/2-i.width/2,s.left<0&&this.options.autoPlacement&&(this.options.arrowPlacement=jw.DOM.classes.JW_LEFT),this.options.arrowPlacement.toLowerCase()){case jw.DOM.classes.JW_LEFT:s.left=e.left;break;case jw.DOM.classes.JW_RIGHT:s.left=Math.abs(e.right-i.width)}break;case jw.DOM.classes.JW_LEFT:switch(s.left=e.left-i.width,this.options.arrowPlacement.toLowerCase()){case jw.DOM.classes.JW_LEFT:s.top=e.top;break;case jw.DOM.classes.JW_RIGHT:s.top=e.bottom;break;default:s.top=e.top+e.height/2-i.height/2}break;case jw.DOM.classes.JW_BOTTOM:switch(s.top=e.top+e.height+this.arrowSize,s.left=e.left+e.width/2-i.width/2,s.left<0&&this.options.autoPlacement&&(this.options.arrowPlacement=jw.DOM.classes.JW_LEFT),this.options.arrowPlacement.toLowerCase()){case jw.DOM.classes.JW_LEFT:s.left=e.left;break;case jw.DOM.classes.JW_RIGHT:s.left=e.right-i.width}break;case jw.DOM.classes.JW_RIGHT:switch(s.left=e.right+this.arrowSize,this.options.arrowPlacement.toLowerCase()){case jw.DOM.classes.JW_LEFT:s.top=e.top;break;case jw.DOM.classes.JW_RIGHT:s.top=e.bottom;break;default:s.top=e.top+e.height/2-i.height/2}}return s},jasonPopoverUIHelper.prototype=Object.create(jasonBaseWidgetUIHelper.prototype),jasonPopoverUIHelper.prototype.constructor=jasonPopoverUIHelper,jasonPopoverUIHelper.prototype.initializeEvents=function(){this.options.targetElement&&"popover"==this.options.mode.toLowerCase()&&this.eventManager.addEventListener(this.options.targetElement,jw.DOM.events.CLICK_EVENT,this.widget.toggle);var e=this;"validation"!=this.options.mode.toLowerCase()&&jwDocumentEventManager.addDocumentEventListener(jw.DOM.events.MOUSE_DOWN_EVENT,function(t){jw.common.isMouseEventOutOfContainer(e.widget.htmlElement,t)&&e.widget.hide()})},jasonPopoverUIHelper.prototype.initializeContent=function(){this.options.content=jw.common.parseTemplateContent(this.options.content)},jasonPopoverUIHelper.prototype.renderUI=function(){var e=this;if(!this.htmlElement.classList.contains(jw.DOM.classes.JW_POPOVER)){if(this.htmlElement.classList.add(jw.DOM.classes.JW_POPOVER),this.header=this.createElement("DIV"),this.header.classList.add(jw.DOM.classes.JW_POPOVER_HEADER),this.title=jw.htmlFactory.createJWLinkLabel(this.options.title),this.header.appendChild(this.title),this.options.closeButton&&(this.closeButton=jw.htmlFactory.createJWButton(null,jw.DOM.icons.CLOSE),this.header.appendChild(this.closeButton),this.title.classList.add(jw.DOM.classes.JW_HAS_ICON),this.eventManager.addEventListener(this.closeButton,jw.DOM.events.CLICK_EVENT,function(t){e.widget.hide()},!0)),jwWindowEventManager.addWindowEventListener(jw.DOM.events.RESIZE_EVENT,function(t){"validation"==e.widget.options.mode.toLowerCase()?setTimeout(function(){e.widget._placePopover()}):e.widget.hide()}),"tooltip"==this.options.mode.toLowerCase()){var t=!0;this.eventManager.addEventListener(this.options.targetElement,jw.DOM.events.MOUSE_ENTER_EVENT,function(n){t=!0,setTimeout(function(){t&&e.widget.show()},500)}),this.eventManager.addEventListener(this.options.targetElement,jw.DOM.events.MOUSE_LEAVE_EVENT,function(n){t=!1,setTimeout(function(){e.widget.hide()},750)})}this.body=this.createElement("DIV"),this.body.classList.add(jw.DOM.classes.JW_POPOVER_BODY),this.options.content&&jw.common.applyTemplate(this.body,this.options.content,this.options.customization.dataFieldAttribute,this.options.model),this.htmlElement.appendChild(this.header),this.htmlElement.appendChild(this.body)}},jasonPopoverUIHelper.prototype.monitorTargetElement=function(){if(""==this.htmlElement.style.display){var e=this.options.targetElement.getBoundingClientRect();jw.common.simpleObjectComparison(this.targetElementClientRect,e)!=jw.enums.comparison.equal&&(this.widget._placePopover(),this.targetElementClientRect=e),window.requestAnimationFrame(this.monitorTargetElement)}};