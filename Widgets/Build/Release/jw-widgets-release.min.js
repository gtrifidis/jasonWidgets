function jasonCommon(){this.HTMLCanvas=null,this._benchmark=!1,this._jwWidgetsCatalog=[],this.globalEventListeners=[];var t=this;this._registerWidget=function(e){t._jwWidgetsCatalog.push({uid:e._uid,widget:e})},jasonCommon.prototype.extendObject=function(t,e){e||(e={});for(var n in t)void 0!=e[n]&&null!=e[n]||(e[n]=t[n]),e[n]&&"object"==typeof e[n]&&"object"==typeof t[n]&&this.extendObject(t[n],e[n])},jasonCommon.prototype.formatString=function(t,e){for(var n=0;n<e.length;n++){var o=new RegExp("\\{"+n+"\\}","gi");t=t.replace(o,e[n])}return t},jasonCommon.prototype.charCountInString=function(t,e){return e.split(t).length-1},jasonCommon.prototype.formatDateTime=function(t,e){var n="";try{if(Intl.DateTimeFormat&&"object"==typeof e)return n=new Intl.DateTimeFormat(jw.localizationManager.currentCulture.key,e),n.format(t)}catch(o){console.log(o)}e||(e=jasonWidgets.localizationManager.currentCulture.dateFormat);var i=t.getFullYear(),a=t.getMonth()+1,s=t.getDay(),r=t.getDate(),l=t.getHours(),d=t.getMinutes(),u=t.getSeconds(),h=t.getMilliseconds(),c=["d","M","m","y","H","h","s","m","f","t"],p=function(t){return c.indexOf(t)>=0};if(t){var m=null,g=null;e.indexOf(jasonWidgets.localizationManager.postMeridiemString)>=0&&e.replace(jasonWidgets.localizationManager.postMeridiemString,""),e.indexOf(jasonWidgets.localizationManager.anteMeridiemString)>=0&&e.replace(jasonWidgets.localizationManager.anteMeridiemString,"");for(var E=0;E<=e.length-1;E++){var _=e[E],w=0;switch(_){case"y":for(w=0,g=E,m=_;p(m);)g++,w++,m=e[g];E=g-1,n=w>2?n+i:i.toString().substr(2,2);break;case"d":for(w=0,g=E,m=_;p(m);)g++,w++,m=e[g];switch(E=g-1,w){case 1:n+=r;break;case 2:n=r>9?n+r:n+"0"+r;break;case 3:n+=jasonWidgets.localizationManager.currentLanguage.calendar.days[s].shortname;break;case 4:n+=jasonWidgets.localizationManager.currentLanguage.calendar.days[s].name}break;case"M":for(w=0,g=E,m=_;p(m);)g++,w++,m=e[g];switch(E=g-1,w){case 1:n+=a;break;case 2:n=a>9?n+a:n+"0"+a;break;case 3:n+=jasonWidgets.localizationManager.currentLanguage.calendar.months[a-1].shortname;break;case 4:n+=jasonWidgets.localizationManager.currentLanguage.calendar.months[a-1].name}break;case"h":for(w=0,g=E,m=_;p(m);)g++,w++,m=e[g];switch(E=g-1,w){case 1:n+=l-12;break;case 2:jasonWidgets.localizationManager.isTwelveHourClock?((l>12||0==l)&&(l=Math.abs(l-12)),n=l>9?n+l:n+"0"+l):n=l>9?n+l:n+"0"+l}break;case"H":for(w=0,g=E,m=_;p(m);)g++,w++,m=e[g];switch(E=g-1,w){case 1:n+=l;break;case 2:n=l>9?n+l:n+"0"+l}break;case"m":for(w=0,g=E,m=_;p(m);)g++,w++,m=e[g];switch(E=g-1,w){case 1:n+=d;break;case 2:n=d>9?n+d:n+"0"+d}break;case"s":for(w=0,g=E,m=_;p(m);)g++,w++,m=e[g];switch(E=g-1,w){case 1:n+=u;break;case 2:n=u>9?n+u:n+"0"+u}break;case"f":for(w=0,g=E,m=_;p(m);)g++,w++,m=e[g];switch(E=g-1,w){case 1:n+=h;break;case 2:n=h>9?h<99?n+"00"+h:n+h:n+"0"+h}break;case"t":break;default:n+=_}}}return e.indexOf("h")>=0&&jasonWidgets.localizationManager.isTwelveHourClock&&(n=t.getHours()>=12?n+" "+jasonWidgets.localizationManager.postMeridiemString:n+" "+jasonWidgets.localizationManager.anteMeridiemString),n},jasonCommon.prototype.formatNumber=function(t,e){var n="",o={useGrouping:!0,minimumFractionDigits:2};return void 0==t?n:(e=void 0==e?{}:e,jasonWidgets.common.extendObject(o,e),Intl.NumberFormat?(e.style&&"currency"==e.style.toLowerCase()&&(e.style="currency",e.currency=jw.localizationManager.currentCulture.currencyCode),numberFormat=new Intl.NumberFormat(jw.localizationManager.currentCulture.key,e),n=numberFormat.format(t),numberFormat=null):e.minimumFractionDigits?n+=t.toFixed(e.minimumFractionDigits?e.minimumFractionDigits:0):n=t.toString(),n)},jasonCommon.prototype.getParentElement=function(t,e){var n=e.parentNode;t=t.toUpperCase();for(var o=!1;!o&&jasonWidgets.common.assigned(n)&&n!=document;)o=n.getAttribute("id")==t||n.classList.contains(t)||n.tagName==t,o||(n=n.parentNode);return n},jasonCommon.prototype.containsClasses=function(t,e){for(var n=!1,o=0;o<=e.length-1&&!(n=t.classList.contains(e[o]));o++);return n},jasonCommon.prototype.scrollBarWidth=function(){var t=document.createElement("div");t.style.width="50px",t.style.height="50px",t.style.overflowY="scroll",t.style.position="absolute",t.style.top="-200px";var e=document.createElement("div");e.style.height="100%",e.style.width="100%",t.appendChild(e),document.body.appendChild(t);var n=t.offsetWidth,o=e.clientWidth;return document.body.removeChild(t),n-o},jasonCommon.prototype.setData=function(t,e,n){t&&(t.jasonWidgetsData||(t.jasonWidgetsData=[]),t.jasonWidgetsData.push({dataName:e,dataValue:n}))},jasonCommon.prototype.removeData=function(t,e){if(t.jasonWidgetsData){var n=-1;t.jasonWidgetsData.filter(function(t,o){if(t.dataName==e)return void(n=o)}),n>=0&&t.jasonWidgetsData.splice(n,1)}},jasonCommon.prototype.getData=function(t,e){if(t.jasonWidgetsData){var n=t.jasonWidgetsData.filter(function(t){return t.dataName==e})[0];return n?n.dataValue:null}return null},jasonCommon.prototype.swapItemsInArray=function(t,e,n){var o=t[e],i=t[n];o&&i&&(t[e]=i,t[n]=o)},jasonCommon.prototype.swapDomElements=function(t,e,n){if(void 0!=t&&void 0!=e&&void 0!=n){domElementToMove=t.children[e],domElementNew=t.children[n];var o=domElementToMove.nextSibling,i=domElementNew.nextSibling;t.insertBefore(domElementToMove,i),t.insertBefore(domElementNew,o)}},jasonCommon.prototype.moveChildrenTo=function(t,e,n,o,i){var a=[];n=n?n:[],o=o?o:[],i=i?i:[];for(var s=function(t,e,n){return e.length>0&&n.length>0?e.indexOf(t.tagName)>=0||n.indexOf(t.className)>=0:e.length>0&&n.length<=0?e.indexOf(t.tagName)>=0:e.length<=0&&n.length>0&&n.indexOf(t.className)>=0},r=t.children.length-1;r>=0;r--)0==o.length&&0==n.length?a.push(t.removeChild(t.children[r])):(n.length>0&&n.indexOf(t.children[r].tagName)>=0&&a.push(t.removeChild(t.children[r])),s(t.children[r],o,i)||a.push(t.removeChild(t.children[r])));for(var r=a.length-1;r>=0;r--)e.appendChild(a[r])},jasonCommon.prototype.applyStyleProperty=function(t,e,n,o,i){for(var a=0;a<=t.children.length-1;a++){var s=t.children[a];o?(s.getAttribute("id")==o||s.classList.contains(o)||s.tagName==o)&&(s.style[e]=n):s.style[e]=n,1==i&&this.applyStyleProperty(s,e,n,o,i)}},jasonCommon.prototype.cssClass=function(t,e,n,o,i){for(var a=0;a<=t.children.length-1;a++){var s=t.children[a];o?(s.getAttribute("id")==o||s.classList.contains(o)||s.tagName==o)&&(n?s.classList.add(e):s.classList.remove(e)):n?s.classList.add(e):s.classList.remove(e),1==i&&this.applyStyleProperty(s,e,n,o,i)}},jasonCommon.prototype.fadeIn=function(t,e,n){if(!t._jasonWidgetsFadeOut){t._jasonWidgetsFadeOut=!0;var o=0;t.style.opacity="0";var i=setInterval(function(){t.style.opacity=o,o>=1?(t.style.opacity="",clearInterval(i),t._jasonWidgetsFadeOut=void 0,n&&n()):o+=.1},e)}},jasonCommon.prototype.fadeOut=function(t,e,n){if(!t._jasonWidgetsFadeOut){t._jasonWidgetsFadeOut=!0;var o=1;t.style.opacity="1";var i=setInterval(function(){t.style.opacity=o,o<=0?(t.style.opacity="",clearInterval(i),t._jasonWidgetsFadeOut=void 0,n&&n()):o-=.1},e)}},jasonCommon.prototype.isInlineElement=function(t){var e=this.inlineElements.indexOf(t.tagName);return e>=0},jasonCommon.prototype.isBlockElement=function(t){var e=this.blockElements.indexOf(t.tagName);return e>=0},jasonCommon.prototype.getOffsetCoordinates=function(t){for(var e={left:0,top:0,scrollTop:0,scrollLeft:0},n=t;n;)e.left+=n.offsetLeft,e.scrollLeft+=n.scrollLeft,e.top+=n.offsetTop,e.scrollTop+=n.scrollTop,n=n.offsetParent;return e},jasonCommon.prototype.getElementScrolling=function(t){for(var e={top:0,left:0},n=t;n;)e.left+=n.scrollLeft,e.top+=n.scrollTop,n=n.parentElement;return e},jasonCommon.prototype.getBoundingClientRect=function(t){var e=t.getBoundingClientRect(),n={left:0,right:0,bottom:0,height:0,top:0,width:0,offSet:null,clientRect:null,scrolling:null},o=window.pageYOffset||document.scrollTop||document.body.scrollTop,i=window.pageXOffset||document.scrollLeft||document.body.scrollLeft,a=document.clientTop||document.body.clientTop||0,s=document.clientLeft||document.body.clientLeft||0,r=e.top+o-a,l=e.left+i-s;return n.top=Math.round(r),n.left=Math.round(l),n.right=e.right,n.height=e.height,n.width=e.width,n.clientRect=e,n.scrolling=jw.common.getElementScrolling(t),n},jasonCommon.prototype.getTextWidth=function(t,e){var n=this.HTMLCanvas||(this.HTMLCanvas=document.createElement("canvas")),o=n.getContext("2d");o.font=e;var i=o.measureText(t);return i.width},jasonCommon.prototype.getComputedStyleProperty=function(t,e){return window.getComputedStyle(t,null).getPropertyValue(e)},jasonCommon.prototype.replaceNodeText=function(t,e,n){for(var o=null,i=0;i<=t.childNodes.length-1;i++)if(3==t.childNodes[i].nodeType){o=t.childNodes[i];break}o?t.replaceChild(document.createTextNode(e),o):n&&t.appendChild(document.createTextNode(e))},jasonCommon.prototype.removeNodeText=function(t){for(var e=null,n=0;n<=t.childNodes.length-1;n++)if(3==t.childNodes[n].nodeType){e=t.childNodes[n];break}e&&t.removeChild(e)},jasonCommon.prototype.getNodeText=function(t){for(var e=null,n=0;n<=t.childNodes.length-1;n++)if(3==t.childNodes[n].nodeType){e=t.childNodes[n];break}return e},jasonCommon.prototype.getElementsByAttribute=function(t,e,n,o){var i=t?t:document,a=void 0===o?"*[{0}='{1}']":o+"[{0}='{1}']";return i.querySelectorAll(jw.common.formatString(a,[e,n]))},jasonCommon.prototype.getElementsByAttributes=function(t,e,n,o){for(var i="",a=0;a<=e.length-1;a++)i+=jw.common.formatString("[{0}='{1}']",[e[a],n[a]]);return i=void 0==o?"*"+i:o+i,t.querySelectorAll(i)},jasonCommon.prototype.getNextTabIndex=function(){for(var t=document.querySelectorAll("*[tabindex]"),e=0,n=0;n<=t.length-1;n++){var o=t[n].getAttribute("tabindex");o&&(o=parseInt(o),o>e&&(e=o))}return e+1},jasonCommon.prototype.getNextAttributeValue=function(t){for(var e=document.querySelectorAll("*["+t+"]"),n=0,o=0;o<=e.length-1;o++){var i=e[o].getAttribute(t);i&&(i=parseInt(i),i>n&&(n=i))}return n+1},jasonCommon.prototype.getNextZIndex=function(){for(var t=Number.MIN_VALUE,e=document.getElementsByTagName("*"),n=0;n<=e.length-1;n++){var o;o=e[n].style.zIndex.length>0?parseInt(e[n].style.zIndex):parseInt(jw.common.getComputedStyleProperty(e[n],"z-index")),!isNaN(o)&&o>t&&(t=o)}return t+1},jasonCommon.prototype.contains=function(t,e){var n=[].slice.call(t.getElementsByTagName(e.tagName));return 1==n.filter(function(t){return t==e}).length},jasonCommon.prototype.getFocusableElements=function(t){return t=void 0==t?document:t,t.querySelectorAll(jw.common.focusableElements)},jasonCommon.prototype.getFirstFocusableElement=function(t,e){if(t=void 0==t?document:t,jw.common.focusableElements.indexOf(t.tagName)>=0||t.getAttribute(jw.DOM.attributes.TABINDEX_ATTR))return t;var n=null,o=function(t){if(!n)for(var i=0;i<=t.children.length-1;i++){if(jw.common.focusableElements.indexOf(t.children[i].tagName)>=0||t.children[i].getAttribute(jw.DOM.attributes.TABINDEX_ATTR)){n=t.children[i],e&&n.focus();break}t.children[i].children.length>0&&o(t.children[i])}};return o(t),n},jasonCommon.prototype.assigned=function(t){return!(void 0==t)},jasonCommon.prototype.strToBool=function(t){return!(!t||"true"!=t.toLowerCase()&&"yes"!=t.toLowerCase())},jasonCommon.prototype.boolToStr=function(t){return t?"true":"false"},jasonCommon.prototype.convertValue=function(t,e){if("string"==typeof t)switch(e){case jw.enums.dataType.number:return parseFloat(t);case jw.enums.dataType["boolean"]:return jasonWidgets.common.strToBool(t);case jw.enums.dataType.date:return new Date(t);case jw.enums.dataType.string:return t}if("number"==typeof t)switch(e){case jw.enums.dataType.string:return t.toString();case jw.enums.dataType["boolean"]:return 0!=t;case jw.enums.dataType.date:var n=new Date;n.setTime(t)}if("date"==typeof t)switch(e){case jw.enums.dataType.string:return t.toString();case jw.enums.dataType["boolean"]:jw.common.throwError(jw.errorTypes.error,"Cannot convert a date to a boolean value");break;case jw.enums.dataType.number:return t.getTime()}if("boolean"==typeof t)switch(e){case jw.enums.dataType.string:return jasonWidgets.common.boolToStr(t);case jw.enums.dataType.date:jw.common.throwError(jw.errorTypes.error,"Cannot convert a boolean to a date value");break;case jw.enums.dataType.number:return t?1:0}return t},jasonCommon.prototype.dateOf=function(t){var e=null;return t=t?t:new Date,t&&(e=new Date,e.setHours(0,0,0,0),e.setYear(t.getFullYear()),e.setMonth(t.getMonth()),e.setDate(t.getDate())),e},jasonCommon.prototype.timeOf=function(t){var e=null;return t=t?t:new Date,t&&(e=new Date,e.setHours(t.getHours()),e.setMinutes(t.getMinutes()),e.setSeconds(t.getSeconds()),e.setMilliseconds(t.getMilliseconds())),e},jasonCommon.prototype.dateComparison=function(t,e){var n=jw.enums.comparison.equal;if(void 0==t&&void 0!=e||void 0==e&&void 0!=t)return jw.enums.comparison.notEqual;var o=jasonWidgets.common.dateOf(t).getTime(),i=jasonWidgets.common.dateOf(e).getTime();return o>i&&(n=jw.enums.comparison.firstIsGreater),o<i&&(n=jw.enums.comparison.secondIsGreater),n},jasonCommon.prototype.timeComparison=function(t,e){var n=jw.enums.comparison.equal,o=jasonWidgets.common.timeOf(t).getTime(),i=jasonWidgets.common.timeOf(e).getTime();return o>i&&(n=jw.enums.comparison.firstIsGreater),o<i&&(n=jw.enums.comparison.secondIsGreater),n},jasonCommon.prototype.stringComparison=function(t,e,n){return void 0==t&&void 0==e?jw.enums.comparison.equal:void 0==t&&void 0!=e?jw.enums.comparison.notEqual:void 0==e&&void 0!=t?jw.enums.comparison.notEqual:n?t==e:t.toLocaleLowerCase()==e.toLocaleLowerCase()?jw.enums.comparison.equal:jw.enums.comparison.notEqual},jasonCommon.prototype.simpleObjectComparison=function(t,e){var n=jw.enums.comparison.equal;if(t===e)return jw.enums.comparison.equal;if(void 0==t&&void 0!=e)return jw.enums.comparison.notEqual;if(void 0==e&&void 0!=t)return jw.enums.comparison.notEqual;for(var o in t)if(t[o]!==e[o]){n=jw.enums.comparison.notEqual;break}return n},jasonCommon.prototype.daysInMonth=function(t,e){return new Date(t,e,0).getDate()},jasonCommon.prototype.daysInYear=function(t){return t%4!==0||t%100===0&&t%400!==0?365:366},jasonCommon.prototype.parseDateValue=function(t,e){var e=e?e:jw.localizationManager.localeDateFormat,n=t.match(/\D\W/g),o=null,i=new Date;if(n)o=new Date(t),t.indexOf(i.getFullYear())<0&&o.setYear(i.getFullYear()),o=jasonWidgets.common.dateOf(o);else{for(var a=t.match(/[^0-9]/g),s=a?t.split(a[0]):[t],r=a?e.split(a[0]):e.split(jw.localizationManager.localeDateSeparator),l=null,d=null,u=null,h=0;h<=r.length-1;h++){var c=s[h];c&&(c=parseInt(c)),r[h].indexOf("y")>=0&&(u=c),r[h].indexOf("M")>=0&&c<=12&&(d=c),r[h].indexOf("d")>=0&&c<=31&&(l=c)}u||(u=i.getFullYear()),l||(l=i.getDate()),d||(d=i.getMonth()+1),l&&d&&u&&(o=new Date,o.setHours(0),o.setMinutes(0),o.setSeconds(0),o.setMilliseconds(0),o.setDate(l),o.setMonth(d-1),o.setYear(u),o=jasonWidgets.common.dateOf(o))}return o},jasonCommon.prototype.parseTimeValue=function(t,e){var e=e?e:jw.localizationManager.localeTimeFormat,n=!1,o=!1;jw.localizationManager.isTwelveHourClock&&(n=t.indexOf(jw.localizationManager.anteMeridiemString)>=0,o=t.indexOf(jw.localizationManager.postMeridiemString)>=0,t=n?t.replace(jw.localizationManager.anteMeridiemString,""):t.replace(jw.localizationManager.postMeridiemString,""));for(var i=t.match(/[^0-9]/g),a=i?i[0]:jw.localizationManager.localeTimeSeparator,s=t.split(a),r=e.split(a),l=null,d=null,u=null,h=null,c=0;c<=r.length-1;c++)(r[c].indexOf("h")>=0||r[c].indexOf("H")>=0)&&(l=parseInt(s[c]),jw.localizationManager.isTwelveHourClock&&n&&(l=l>12?l-12:l),jw.localizationManager.isTwelveHourClock&&o&&(l=l>12?l:l+12)),r[c].indexOf("m")>=0&&(d=parseInt(s[c])),r[c].indexOf("s")>=0&&(u=parseInt(s[c]));return(!u||isNaN(u)||u>60)&&(u=0),(!d||isNaN(d)||d>60)&&(d=0),l>=24&&(l=0),null!=l&&null!=d&&null!=u&&(h=new Date,h.setHours(l),h.setMinutes(d),h.setSeconds(u),h.setMilliseconds(0),h=h),h},jasonCommon.prototype.parseDateTimeValue=function(t,e,n){var o=null,i=null,n=n?n:jw.localizationManager.localeTimeFormat,e=e?e:jw.localizationManager.localeDateFormat,a=e.match(/[^a-z]/gi),s=new RegExp(jw.common.formatString("\\d+[{0}+]\\d+[{0}+]\\d+",a[0]),"gi"),r=t.match(s);r&&(o=jw.common.parseDateValue(r[0]));var l=n.match(/[^a-z]/gi),d=new RegExp(jw.common.formatString("\\d+[{0}]\\d+",l[0]),"gi"),u=t.match(d);if(u&&(t.indexOf(jw.localizationManager.anteMeridiemString)>=0?u[0]=u[0]+" "+jw.localizationManager.anteMeridiemString:t.indexOf(jw.localizationManager.postMeridiemString)>=0&&(u[0]=u[0]+" "+jw.localizationManager.postMeridiemString),i=jw.common.parseTimeValue(u[0])),!r){var h=u?t.replace(u[0],""):t,c=h.match(/\w+/gi);if(c){var p=null,m=null,g=null,E=jw.localizationManager.currentLanguage;c.forEach(function(t){var e,n=E.calendar.days.filter(function(n,o){var i=n.name.toLowerCase()==t.toLowerCase()||n.shortName.toLowerCase()==t.toLowerCase();return i&&(e=o),i}).length>0,o=E.calendar.months.filter(function(n,o){var i=n.name.toLowerCase()==t.toLowerCase()||n.shortName.toLowerCase()==t.toLowerCase();return i&&(e=o),i}).length>0;n&&(g=e,h=h.replace(t,"")),o&&(m=e,h=h.replace(t,""));var i=parseInt(t);isNaN(i)||i>31&&(p=i,h=h.replace(t,""))})}if(void 0==g){var _=parseInt(h);isNaN(_)||(g=_)}(p||m||g)&&(o=new Date,void 0!=p&&o.setYear(p),void 0!=m&&o.setMonth(m),void 0!=g&&o.setDate(g))}if(o||i)return o||(o=new Date),i||(i=new Date),new Date(o.getFullYear(),o.getMonth(),o.getDate(),i.getHours(),i.getMinutes(),i.getSeconds());try{return new Date(t)}catch(w){}},jasonCommon.prototype.objectHasProperty=function(t,e){var n=!1;for(var o in t)if(o===e){n=!0;break}return n},jasonCommon.prototype.isMouseEventOutOfContainer=function(t,e){var n=t.getBoundingClientRect(),o=e.x||e.pageX,i=e.y||e.pageY,a=o>n.right||o<n.left,s=i>n.bottom||i<n.top;return a||s},jasonCommon.prototype.isMouseEventOutOfContainerAndNotAChild=function(t,e){var n=jw.common.isMouseEventOutOfContainer(t,e);return n&&!jw.common.contains(t,e.target)},jasonCommon.prototype.isTimeString=function(t,e){var n=e?e:jw.localizationManager.localeTimeFormat,o=n.match(/[^a-z]/gi)?n.match(/[^a-z]/gi)[0]:null,i=t.match(/[0-9]/g);return t.indexOf(o)>0||void 0!=i&&i.length==t.length},jasonCommon.prototype.isDateString=function(t,e){var n=!0,o=e?e:jw.localizationManager.localeDateFormat,i=o.match(/[^a-z]/gi)?o.match(/[^a-z]/gi)[0]:null,a=t.match(/[0-9]/g),s=t.match(/[a-z]\w+/gi);if(s)for(var r=jw.localizationManager.currentLanguage,l=0;l<=s.length-1;l++){var d=s[l],u=r.calendar.days.filter(function(t){return t.name.toLowerCase()==d.toLowerCase()||t.shortName.toLowerCase()==d.toLowerCase()}).length>0,h=r.calendar.months.filter(function(t){return t.name.toLowerCase()==d.toLowerCase()||t.shortName.toLowerCase()==d.toLowerCase()}).length>0;if(!u&&!h){n=!1;break}}return n&&t.indexOf(i)>0||void 0!=a&&a.length==t.length},jasonCommon.prototype.removeJWEvents=function(t,e){var n=t._jasonWidgetsEventListeners_;if(n){for(var o=n.length-1;o>=0;o--)t.removeEventListener(n[o].eventName,n[o].listener),n.splice(o,1);if(e&&t.children.length>0)for(var o=0;o<=t.children.length-1;o++)jw.common.removeJWEvents(t.children[o],e)}else if(t.children)for(var o=0;o<=t.children.length-1;o++)jw.common.removeJWEvents(t.children[o],e)},jasonCommon.prototype.removeChildren=function(t){for(;t.firstChild;)jw.common.removeJWEvents(t.firstChild),jw.common.removeChildren(t.firstChild),t.removeChild(t.firstChild)},jasonCommon.prototype.addGlobalEventListener=function(t){this.globalEventListeners.push(t)},jasonCommon.prototype.getVariableType=function(t){var e=jw.enums.dataType.unknown;if(void 0==t)return e;if("object"==typeof t){e=jw.enums.dataType.object;var n=t.constructor?t.constructor.toString():"";n.indexOf("Date()")>0&&n.indexOf("native code")>0&&(e=jw.enums.dataType.date),Array.isArray(t)&&(e=jw.enums.dataType.array)}else"number"==typeof t&&(e=jw.enums.dataType.number),"boolean"==typeof t&&(e=jw.enums.dataType["boolean"]),"function"==typeof t&&(e=jw.enums.dataType.method),"string"==typeof t&&(e=jw.enums.dataType.string);return e},jasonCommon.prototype.isInteger=function(t){return"number"==typeof t&&isFinite(t)&&Math.floor(t)===t},jasonCommon.prototype.triggerGlobalEvent=function(t,e){for(var n=0;n<=this.globalEventListeners.length-1;n++)this.globalEventListeners[n](t,e)},jasonCommon.prototype.isJWWidget=function(t){return this._jwWidgetsCatalog.filter(function(e){return e.uid===t._uid}).length>0},jasonCommon.prototype.generateUUID=function(){var t=(new Date).getTime(),e="xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){var n=(t+16*Math.random())%16|0;return t=Math.floor(t/16),("x"==e?n:3&n|8).toString(16)});return e},jasonCommon.prototype.inlineElements=["BUTTON","SPAN","INPUT","LABEL","SELECT","A","I"],jasonCommon.prototype.blockElements=["DIV","P","JW_TABLE","THEAD","TFOOT","TBODY","HR","UL","OL","FIELDSET","NAV","H1","H2","H3","H4","H5","H6"],jasonCommon.prototype.focusableElements=["BUTTON","INPUT","A","SELECT","TEXTAREA"],jasonCommon.prototype.throwError=function(t,e){switch(t){case jw.errorTypes.error:throw new Error(e);case jw.errorTypes.evalError:throw new EvalError(e);case jw.errorTypes.rangeError:throw new RangeError(e);case jw.errorTypes.referenceError:throw new ReferenceError(e);case jw.errorTypes.syntaxError:throw new SyntaxError(e);case jw.errorTypes.typeError:throw new TypeError(e);case jw.errorTypes.uriError:throw new URIError(e);default:throw new Error(e)}},jasonCommon.prototype.applyTemplate=function(t,e,n,o){if(t.innerHTML=e,void 0!=n&&void 0!=o)for(var i=t.querySelectorAll("*["+n+"]"),a=0;a<=i.length-1;a++){var s=i[a];jw.common.replaceNodeText(s,o[s.getAttribute(n)],!0)}},jasonCommon.prototype.parseTemplateContent=function(t){var e=null,n=document.getElementById(t),o=null!=n||t instanceof HTMLElement;if(o){var i=n||t;e="SCRIPT"==i.tagName?i.innerHTML:i.outerHTML}else e="function"==typeof t?t():t,e="string"==typeof t&&t.trim().length>0?t:null;return e}}function jasonHTMLFactory(){jasonHTMLFactory.prototype.createJWButton=function(t,e,n){var o=n?n:document.createElement("a");if(o.classList.add(jw.DOM.classes.JW_BUTTON),o.setAttribute("href","javascript:void(0)"),void 0!=t&&t.trim().length>0){var i=document.createElement("span");i.classList.add(jw.DOM.classes.JW_LABEL),i.classList.add(jw.DOM.classes.JW_TEXT_OVERFLOW),i.appendChild(document.createTextNode(t)),i.setAttribute(jasonWidgets.DOM.attributes.TITLE_ATTR,t),o.appendChild(i)}if(void 0!=e&&e.trim().length>0){var a=o.querySelectorAll("span.jw-icon")[0];if(a)a.className=e;else{var s=document.createElement("span");s.className=e,o.appendChild(s)}}return o},jasonHTMLFactory.prototype.createJWTextInput=function(t,e,n,o){var i=document.createElement("input");return i.classList.add(jw.DOM.classes.JW_TEXT_INPUT),i.setAttribute(jasonWidgets.DOM.attributes.TYPE_ATTR,"text"),void 0!=o&&o.trim().length>0&&i.setAttribute(jasonWidgets.DOM.attributes.TYPE_ATTR,o),void 0!=t&&t.trim().length>0&&i.setAttribute(jasonWidgets.DOM.attributes.INPUT_MODE_ATTR,t),void 0!=e&&e.trim().length>0&&i.setAttribute(jasonWidgets.DOM.attributes.PLACEHOLDER_ATTR,e),void 0!=n&&n&&i.setAttribute(jasonWidgets.DOM.attributes.READONLY_ATTR,n),i},jasonHTMLFactory.prototype.createJWCheckBoxInput=function(t,e,n){var o=document.createElement("input");return o.classList.add(jw.DOM.classes.JW_CHECKBOX_INPUT),o.setAttribute(jasonWidgets.DOM.attributes.TYPE_ATTR,"checkbox"),void 0!=t&&t&&o.setAttribute(jasonWidgets.DOM.attributes.READONLY_ATTR,t),void 0!=e&&e.trim().length>0&&o.setAttribute(jasonWidgets.DOM.attributes.TITLE_ATTR,e),void 0!=n&&n.trim().length>0&&o.setAttribute(jasonWidgets.DOM.attributes.ID_ATTR,n),o},jasonHTMLFactory.prototype.createJWLinkLabel=function(t){var e=document.createElement("a");if(e.setAttribute("href","javascript:void(0)"),e.classList.add(jw.DOM.classes.JW_LABEL),e.classList.add(jw.DOM.classes.JW_TEXT_OVERFLOW),void 0!=t&&t.trim().length>0){var n=document.createElement("span");n.appendChild(document.createTextNode(t)),n.setAttribute(jw.DOM.attributes.TITLE_ATTR,t),e.appendChild(n)}return e},jasonHTMLFactory.prototype.createJWLabel=function(t){var e=document.createElement("label");return e.classList.add(jw.DOM.classes.JW_TEXT_OVERFLOW),void 0!=t&&t.trim().length>0&&(e.setAttribute(jw.DOM.attributes.TITLE_ATTR,t),e.appendChild(document.createTextNode(t))),e},jasonHTMLFactory.prototype.createJWMenuItem=function(t,e,n){var o,i=void 0==n?document.createElement("li"):n;if(i.classList.add(jw.DOM.classes.JW_MENU_ITEM),e.clickable&&i.classList.add(jw.DOM.classes.JW_MENU_ITEM_CLICKABLE),e.enabled||i.classList.add(jw.DOM.classes.JW_MENU_ITEM_DISABLED),i.setAttribute(jasonWidgets.DOM.attributes.TITLE_ATTR,e.title),void 0!=e.caption&&e.caption.trim().length>0&&(o=document.createElement("div"),o.classList.add(jw.DOM.classes.JW_MENU_ITEM_CAPTION),o.appendChild(jw.htmlFactory.createJWLinkLabel(e.caption)),o.classList.add(jw.DOM.classes.JW_TEXT_OVERFLOW),o.classList.add(jw.DOM.classes.JW_MENU_ITEM_CAPTION_ONLY),i.appendChild(o)),void 0!=e.icon&&e.icon.trim().length>0){var a=document.createElement("div"),s=document.createElement("span");s.className=e.icon,a.classList.add(jw.DOM.classes.JW_MENU_ITEM_ICON),a.appendChild(s),o.classList.add(jw.DOM.classes.JW_HAS_ICON),o.classList.remove(jw.DOM.classes.JW_MENU_ITEM_CAPTION_ONLY),i.appendChild(a)}if(void 0!=e.hasCheckBox&&e.hasCheckBox){var r=document.createElement("div"),l=document.createElement("input");l.setAttribute(jasonWidgets.DOM.attributes.TYPE_ATTR,"checkbox"),l.checked=e.checked,r.appendChild(l),r.classList.add(jw.DOM.classes.JW_MENU_ITEM_CHECKBOX),o.classList.add(jw.DOM.classes.JW_HAS_CHECKBOX),o.classList.remove(jw.DOM.classes.JW_MENU_ITEM_CAPTION_ONLY),i.appendChild(r)}if(void 0!=e.caption&&e.caption.trim().length>0&&i.appendChild(o),void 0!=e.items&&e.items.length>0){var d=document.createElement("div"),u=null,h=null;h=0==e.level?"horizontal"==t?jw.DOM.icons.CHEVRON_DOWN:jw.DOM.icons.CHEVRON_RIGHT:"horizontal"==t?jw.DOM.icons.CHEVRON_RIGHT:jw.DOM.icons.JCHEVRON_DOWN,u=jw.htmlFactory.createJWButton(null,h),jw.common.setData(u,jw.DOM.attributeValues.JW_MENU_ITEM_DATA_KEY,e),o.classList.add(jw.DOM.classes.JW_HAS_ARROW),d.appendChild(u),d.classList.add(jw.DOM.classes.JW_MENU_ITEM_ARROW),o.classList.remove(jw.DOM.classes.JW_MENU_ITEM_CAPTION_ONLY),i.appendChild(d)}return i},jasonHTMLFactory.prototype.convertToJWMenuItem=function(t,e,n){if(void 0!=e){e.classList.add(jw.DOM.classes.JW_MENU_ITEM),e.classList.add(jw.DOM.classes.JW_MENU_ITEM_CLICKABLE);var o=jw.common.getNodeText(e);void 0!=o&&(menuCaption=document.createElement("div"),menuCaption.classList.add(jw.DOM.classes.JW_MENU_ITEM_CAPTION),menuCaption.appendChild(jw.htmlFactory.createJWLinkLabel(o.textContent)),menuCaption.classList.add(jw.DOM.classes.JW_TEXT_OVERFLOW),menuCaption.classList.add(jw.DOM.classes.JW_MENU_ITEM_CAPTION_ONLY),e.replaceChild(menuCaption,o),n.caption=o.textContent.trim(),n.name="mnu_"+n.caption);var i=e.getAttribute(jasonWidgets.DOM.attributes.READONLY_ATTR);void 0!=i&&1==i&&e.classList.add(jw.DOM.classes.JW_MENU_ITEM_DISABLED);var a=e.getElementsByTagName("input");if(a.length>0){for(var s=null,r=0;r<=a.length-1;r++){var l=a[r].getAttribute(jw.DOM.attributes.TYPE_ATTR);if(l&&"checkbox"==l.toLowerCase()){s=a[r];break}}if(s&&s.parentNode==e){s.parentNode.removeChild(s);var d=document.createElement("div");s.setAttribute(jasonWidgets.DOM.attributes.TYPE_ATTR,"checkbox"),d.appendChild(s),d.classList.add(jw.DOM.classes.JW_MENU_ITEM_CHECKBOX),menuCaption.classList.add(jw.DOM.classes.JW_HAS_CHECKBOX),menuCaption.classList.remove(jw.DOM.classes.JW_MENU_ITEM_CAPTION_ONLY),e.appendChild(d),n.hasCheckBox=!0,n.checkBoxElement=s}}var u=e.getElementsByTagName("UL").length>0;if(u){var h=jw.htmlFactory.createJWButton(null,"horizontal"==t?jw.DOM.icons.CHEVRON_RIGHT:jw.DOM.icons.CHEVRON_DOWN),c=document.createElement("div");jw.common.setData(h,jw.DOM.attributeValues.JW_MENU_ITEM_DATA_KEY,n),menuCaption.classList.add(jw.DOM.classes.JW_HAS_ARROW),c.appendChild(h),c.classList.add(jw.DOM.classes.JW_MENU_ITEM_ARROW),e.appendChild(c)}}},jasonHTMLFactory.prototype.createClearFloat=function(){var t=document.createElement("div");return t.classList.add(jw.DOM.classes.JW_CLEAR_FLOAT_CLASS),t}}function jasonBaseWidget(t,e,n,o){return this.htmlElement=e,this.nameSpace=t,this._emptyDefaultOptions={events:[],customization:{dataFieldAttribute:jw.DOM.attributes.DATA_FIELD},dataIsSimpleJS:!0},this._enabled=!0,this._visible=!0,this._readonly=!1,this._uid=jw.common.generateUUID(),this._validationRules=[],jw.common._registerWidget(this),this.defaultOptions?jasonWidgets.common.extendObject(this._emptyDefaultOptions,this.defaultOptions):this.defaultOptions=this._emptyDefaultOptions,n||(n={}),jasonWidgets.common.extendObject(this.defaultOptions,n),this._eventListeners=n.events?n.events:[],this._eventListeners.forEach(function(t){void 0==t.enabled&&(t.enabled=!0)}),this.options=n,this.options.localization=this.options.localization?this.options.localization:jasonWidgets.localizationManager.currentLanguage,this.eventManager=new jasonEventManager,this.baseClassName="jasonWidget",this.htmlElement&&(jasonWidgets.common.setData(this.htmlElement,this.nameSpace,this),this.htmlElement.classList.add(this.baseClassName)),this.jwProc=this.jwProc.bind(this),this.validate=this.validate.bind(this),this.ui="function"==typeof o?new o(this,e):new jasonBaseWidgetUIHelper(this),this.ui.initialize(),jw.common.addGlobalEventListener(this.jwProc),this.initialize(),jasonBaseWidget}function jasonBaseWidgetUIHelper(t,e){this.widget=t,this.htmlElement=e,this.createdElements=new Array}function jw_Map(){this._=Object.create(null)}function jw_map_escape(t){return(t+="")===jw_map_proto||t[0]===jw_map_zero?jw_map_zero+t:t}function jw_map_unescape(t){return(t+="")[0]===jw_map_zero?t.slice(1):t}function jw_map_has(t){return jw_map_escape(t)in this._}function jw_map_remove(t){return(t=jw_map_escape(t))in this._&&delete this._[t]}function jw_map_keys(){var t=[];for(var e in this._)t.push(jw_map_unescape(e));return t}function jw_map_size(){var t=0;for(var e in this._)++t;return t}function jw_map_empty(){for(var t in this._)return!1;return!0}function jw_class(t,e){for(var n in e)Object.defineProperty(t.prototype,n,{value:e[n],enumerable:!1})}function jasonDataSourceSorting(t,e,n){this.name=t,this.reverse=e,this.primer=n}function jasonDataSource(t){this.defaultOptions={data:null,onChange:null,onSort:null,onGroup:null},jasonWidgets.common.extendObject(this.defaultOptions,t),this.options=t,this.data=t.data,this.processData(),this.currentDataView=[].concat(this.data),this.grouping=[],this.dictionaries=[],this.filters=[],this.sorting=[],this.datesAreEqual=this.datesAreEqual.bind(this),this.valuesAreEqual=this.valuesAreEqual.bind(this),this.valuesAreNotEqual=this.valuesAreNotEqual.bind(this),this.valueContains=this.valueContains.bind(this),this.valueEndsWith=this.valueEndsWith.bind(this),this.valueIsGreaterEqualThan=this.valueIsGreaterEqualThan.bind(this),this.valueIsGreaterThan=this.valueIsGreaterThan.bind(this),this.valueIsLessEqualThan=this.valueIsLessEqualThan.bind(this),this.valueIsLessThan=this.valueIsLessThan.bind(this)}function jasonEventManager(){this.eventListeners=new Array,jasonEventManager.prototype.mouseEnterLeaveHandler=function(t,e){var n=t.relatedTarget;if(!n||n!==e&&!jasonWidgets.common.contains(e,n)){var o;"mouseover"!=t.type&&"pointerover"!=t.type||(o="mouseenter"),"mouseout"!=t.type&&"pointerout"!=t.type||(o="mouseleave"),this.triggerEvent(o,e,t)}},jasonEventManager.prototype.addEventListener=function(t,e,n,o,i){var a=this;if(void 0==t.nodeType&&jw.common.throwError(jw.errorTypes.error,"Element is not a HTMLElement"),t._jasonWidgetsEventListeners_||(t._jasonWidgetsEventListeners_=[]),t._jasonWidgetsEventListeners_.indexOf(e)<0){var s=e,r=function(t){a.triggerEvent(e,o?t.currentTarget:t.target,t)};i=void 0!==i&&i,t.addEventListener(s,r,i)}var l={element:t,eventName:e,listener:n,enabled:!0,uid:jw.common.generateUUID()};return this.eventListeners.push(l),t._jasonWidgetsEventListeners_.push(l),l.uid},jasonEventManager.prototype.triggerEvent=function(t,e,n){
var o=this.eventListeners.filter(function(n){return n.eventName==t&&n.element==e&&n.enabled})[0];o&&("function"==typeof o.listener?o.listener(n,e):new Error("event listener is not a function"))},jasonEventManager.prototype.clearEvents=function(){this.eventListeners.forEach(function(t){t.element&&(t.element.removeEventListener(t.eventName,t.listener),t.element._jasonWidgetsEventListeners_=null)}),this.eventListeners=[]},this.triggerEvent=this.triggerEvent.bind(this),this.mouseEnterLeaveHandler=this.mouseEnterLeaveHandler.bind(this)}function jasonLocalizationManager(){var t=this;Object.defineProperty(t,"currentLanguage",{get:function(){var t=this.languages[this.currentLanguageKey];if(!t)if(this.currentLanguageKey.indexOf("-")>=0){var e=this.currentLanguageKey.split("-"),n=e[0]+"-"+e[1].toLowerCase();t||(n=e[0]+"-"+e[1].toUpperCase(),t=this.languages[n],t||(t=this.languages["en-US"]))}else t=this.languages["en-US"];return t},enumerable:!0}),Object.defineProperty(t,"currentCulture",{get:function(){var t=this.cultures[this.currentCultureKey];if(!t)if(this.currentCultureKey.indexOf("-")>=0){var e=this.currentCultureKey.split("-"),n=e[0]+"-"+e[1].toLowerCase();t||(n=e[0]+"-"+e[1].toUpperCase(),language=this.cultures[n],t||(t=this.cultures["en-US"]))}else t=this.cultures["en-US"];return t},set:function(t){this.currentCultureKey=t,this.determineDateFormat(),this.determineTimeFormat()},enumerable:!0}),this.currentLanguageKey=navigator.browserLanguage||navigator.language,this.currentCultureKey=navigator.browserLanguage||navigator.language,this.languages={},this.cultures={},this.determineDateFormat=function(){var t="",e=new Date;e.setHours(0),e.setMinutes(0),e.setSeconds(0),e.setMilliseconds(0),e.setYear(1999),e.setMonth(11),e.setDate(31);var n=e.toLocaleDateString().replace(/\u200E/g,""),o=n.match(/[^0-9]/g),i=o[0];this.localeDateSeparator=i;for(var a=n.split(i),s=0;s<=a.length-1;s++)if(a[s].length>2&&(s>0&&(t+=i),t+="yyyy"),2==a[s].length){var r=parseInt(a[s]);12==r&&(s>0&&(t+=i),t+="MM"),31==r&&(s>0&&(t+=i),t+="dd"),99==r&&(s>0&&(t+=i),t+="dd")}return t},this.determineTimeFormat=function(){var t="",e=new Date,n="",o="";e.setHours(11),e.setMinutes(59),e.setSeconds(59),e.setMilliseconds(0);var i=e.toLocaleTimeString(this.currentCultureKey);i=i.replace(/\u200E/g,"");for(var a=0;a<=i.length-1;a++)if(""!=i[a]){var s=i.charCodeAt(a);if(!isNaN(s)&&s>64){o=i.substr(a,i.length-a);break}}this.anteMeridiemString=o,e.setHours(23),e.setMinutes(24),e.setSeconds(25),e.setMilliseconds(26),i=e.toLocaleTimeString(this.currentCultureKey),i=i.replace(/\u200E/g,"");for(var a=0;a<=i.length-1;a++)if(""!=i[a]){var s=i.charCodeAt(a);if(!isNaN(s)&&s>64){o=i.substr(a,i.length-a);break}}this.postMeridiemString=o,n=e.toLocaleTimeString(this.currentCultureKey),n=n.replace(this.postMeridiemString,""),n=n.replace(/\u200E/g,""),n=n.trim();var r=n.match(/\D/g),l=r[0],d=n.split(l);this.localeTimeSeparator=l;for(var a=0;a<=d.length-1;a++)if(2==d[a].length){var u=parseInt(d[a]);23!=u&&11!=u||(this.isTwelveHourClock=11==u,a>0&&(t+=l),t=this.isTwelveHourClock?t+"hh":t+"HH"),24==u&&(a>0&&(t+=l),t+="mm"),25==u&&(a>0&&(t+=l),t+="ss"),26==u&&(a>0&&(t+=l),t+="f")}return t},this.localeDateFormat=this.determineDateFormat(),this.localeTimeFormat=this.determineTimeFormat()}function jasonWidgetLanguage(){return jasonWidgetLanguage.prototype.key="",jasonWidgetLanguage.prototype.search={searchPlaceHolder:""},jasonWidgetLanguage.prototype.filter={values:{filterValueIsEqual:"",filterValueIsNotEqual:"",filterValueStartsWith:"",filterValueEndsWith:"",filterValueContains:"",filterValueGreaterThan:"",filterValueGreaterEqualTo:"",filterValueLessThan:"",filterValueLessEqualTo:"",filterHeaderCaption:""},operators:{and:"",or:""}},jasonWidgetLanguage.prototype.data={noData:""},jasonWidgetLanguage.prototype.grid={paging:{firstPageButton:"",priorPageButton:"",nextPageButton:"",lastPageButton:"",pagerInputTooltip:""},grouping:{groupingMessage:""},filtering:{clearButtonText:"",clearButtonTooplip:"",applyButtonText:"",applyButtonTooltip:""}},jasonWidgetLanguage.prototype.combobox={},jasonWidgetLanguage}function jasonWidgetCulture(){jasonWidgetCulture.prototype.key="",jasonWidgetCulture.prototype.dateFormat="",jasonWidgetCulture.prototype.shortDateFormat="",jasonWidgetCulture.prototype.longDateFormat="",jasonWidgetCulture.prototype.timeDateFormat=""}function jasonDragResize(t,e,n){this.defaultOptions={allowDrag:!0,allowResize:{top:!0,left:!0,bottom:!0,right:!0},minHeight:60,minWidth:40,dependantElements:[],onMoveStart:null,onMoveEnd:null,onResizeEnd:null,onResizeStart:null,ghostPanelCSS:null,ghostPanelContents:null,changeDragCursor:!0,gridMode:!1},jasonBaseWidget.call(this,n,t,e,null);var o=this;this.eventManager=new jasonEventManager,this.htmlElement=t,this.margins=4,this.fullScreenMargins=-10,this.redraw=!1,this.boundingClientRect=null,this.left=null,this.top=null,this.onTopEdge=null,this.onLeftEdge=null,this.onRightEdge=null,this.onBottomEdge=null,this.rightScreenEdge=null,this.bottomScreenEdge=null,this.clickActionInfo=null,this.mouseMoveEvent=null,this.preSnapped=null,this.ghostPanel=document.createElement("div"),this.ghostPanel.style.display="none","boolean"==typeof this.options.allowDrag&&(this.options.allowDrag={draggable:this.options.allowDrag,element:t}),document.body.appendChild(o.ghostPanel),this.options.ghostPanelCSS&&this.ghostPanel.classList.add(this.options.ghostPanelCSS),this.options.ghostPanelContents&&(this.ghostPanel.innerHTML=this.options.ghostPanelContents),this.setBounds=function(t,e,n,o,i){t.style.left=e+"px",t.style.top=n+"px",t.style.width=o+"px",t.style.height=i+"px"},this.hideGhostPanel=function(){o.setBounds(o.ghostPanel,o.boundingClientRect.left,o.boundingClientRect.top,o.boundingClientRect.width,o.boundingClientRect.height),o.ghostPanel.style.display="none"},this.calculateAction=function(t){o.boundingClientRect=o.htmlElement.getBoundingClientRect(),o.dragBoundingClientRect=o.options.allowDrag.element.getBoundingClientRect(),o.left=t.clientX-o.boundingClientRect.left,o.top=t.clientY-o.boundingClientRect.top,o.onTopEdge=o.top<o.margins,o.onBottomEdge=o.top>=o.boundingClientRect.height-o.margins,o.onLeftEdge=o.left<o.margins,o.onRightEdge=o.left>=o.boundingClientRect.width-o.margins,o.rightScreenEdge=window.innerWidth-o.margins,o.bottomScreenEdge=window.innerHeight-o.margins},this.onDown=function(t){o.calculateAction(t);var e=!!o.options.allowResize&&(o.onRightEdge||o.onLeftEdge||o.onTopEdge||o.onBottomEdge);o.clickActionInfo={left:o.left,top:o.top,clientX:t.clientX,clientY:t.clientY,width:o.boundingClientRect.width,height:o.boundingClientRect.height,isResizing:e,isMoving:!e&&o.canMove(),onTopEdge:o.onTopEdge,onLeftEdge:o.onLeftEdge,onRightEdge:o.onRightEdge,onBottomEdge:o.onBottomEdge}},this.canMove=function(){return!!o.options.allowDrag.draggable&&(o.left>0&&o.left<o.dragBoundingClientRect.width&&o.top>0&&o.top<o.dragBoundingClientRect.height)},this.onTouchStart=function(t){o.onDown(t.touches[0]),t.preventDefault(),t.stopPropagation()},this.onTouchMove=function(t){o.onMouseMove(t.touches[0]),o.redraw=!0,o.animateMove()},this.onTouchEnd=function(t){0==t.touches.length&&o.onMouseUp(t.changedTouches[0])},this.onMouseDown=function(t){o.onDown(t),t.preventDefault(),t.stopPropagation(),o.clickActionInfo&&o.clickActionInfo.isMoving&&(o.hideGhostPanel(),o.options.onMoveStart&&o.options.onMoveStart(t,o.htmlElement)),o.clickActionInfo&&o.clickActionInfo.isResizing&&o.options.onResizeStart&&o.options.onResizeStart(t,o.htmlElement)},this.onMouseMove=function(t){o.calculateAction(t),o.mouseMoveEvent=t,o.redraw=!0},this.onMouseUp=function(t){o.calculateAction(t),o.clickActionInfo&&o.clickActionInfo.isMoving&&(o.hideGhostPanel(),o.options.onMoveEnd&&o.options.onMoveEnd(t,o.htmlElement)),o.clickActionInfo&&o.clickActionInfo.isResizing&&o.options.onResizeEnd&&o.options.onResizeEnd(t,o.htmlElement),o.clickActionInfo=null},this.animateMove=function(){window.requestAnimationFrame(o.animateMove);var t=!1;if(o.mouseMoveEvent&&void 0!=o.mouseMoveEvent.button&&(t=0!=o.mouseMoveEvent.button),t!==!0&&o.redraw!==!1)if(o.redraw=!1,o.clickActionInfo&&o.clickActionInfo.isResizing){if(o.clickActionInfo.onRightEdge&&o.options.allowResize.right){if(!o.options.gridMode){var e=Math.max(o.clickActionInfo.width+(o.mouseMoveEvent.clientX-o.clickActionInfo.clientX),o.options.minWidth);e>o.options.minWidth&&(o.htmlElement.style.width=e+"px")}if(o.options.dependantElements)for(var n=0;n<=o.options.dependantElements.length-1;n++)o.options.dependantElements[n].style.width=Math.max(o.left,o.options.minWidth)+"px"}if(o.clickActionInfo.onBottomEdge&&o.options.allowResize.bottom){if(!o.options.gridMode){var i=Math.max(o.clickActionInfo.height+(o.mouseMoveEvent.clientY-o.clickActionInfo.clientY),o.options.minHeight);i>o.options.minHeight&&(o.htmlElement.style.height=i+"px")}if(o.options.dependantElements)for(var n=0;n<=o.options.dependantElements.length-1;n++)o.options.dependantElements[n].style.height=Math.max(o.top,o.options.minHeight)+"px"}if(o.clickActionInfo.onLeftEdge&&o.options.allowResize.left){if(!o.options.gridMode){var e=Math.max(o.clickActionInfo.clientX-o.mouseMoveEvent.clientX+o.clickActionInfo.width,o.options.minWidth);e>o.options.minWidth&&(o.htmlElement.style.width=e+"px",o.htmlElement.style.left=o.mouseMoveEvent.clientX+"px")}if(o.options.dependantElements)for(var n=0;n<=o.options.dependantElements.length-1;n++)o.options.dependantElements[n].style.width=e}if(o.clickActionInfo.onTopEdge&&o.options.allowResize.top){if(!o.options.gridMode){var i=Math.max(o.clickActionInfo.clientY-o.mouseMoveEvent.clientY+o.clickActionInfo.height,o.options.minHeight);i>o.options.minHeight&&(o.htmlElement.style.height=i+"px",o.htmlElement.style.top=o.mouseMoveEvent.clientY+"px")}if(o.options.dependantElements)for(var n=0;n<=o.options.dependantElements.length-1;n++)o.options.dependantElements[n].style.height=i}}else if(o.clickActionInfo&&o.clickActionInfo.isMoving){var a=.2,s=!0;if(o.ghostPanel.style.display="",(o.boundingClientRect.top<o.fullScreenMargins||o.boundingClientRect.left<o.fullScreenMargins||o.boundingClientRect.right>window.innerWidth-o.fullScreenMargins||o.boundingClientRect.bottom>window.innerHeight-o.fullScreenMargins)&&(o.setBounds(o.ghostPanel,0,0,window.innerWidth,window.innerHeight),s=!1),o.boundingClientRect.top<o.margins&&(o.setBounds(o.ghostPanel,0,0,window.innerWidth,window.innerHeight/2),s=!1),o.boundingClientRect.left<o.margins&&(o.setBounds(o.ghostPanel,0,0,window.innerWidth/2,window.innerHeight),s=!1),o.boundingClientRect.right>o.rightScreenEdge&&(o.setBounds(o.ghostPanel,window.innerWidth/2,0,window.innerWidth/2,window.innerHeight),s=!1),o.boundingClientRect.bottom>o.bottomScreenEdge&&(o.setBounds(o.ghostPanel,0,window.innerHeight/2,window.innerWidth,window.innerWidth/2),s=!1),s||(o.ghostPanel.style.opacity=a),s&&o.hideGhostPanel(),o.options.gridMode?(o.ghostPanel.style.display="",o.ghostPanel.style.top=o.mouseMoveEvent.clientY-o.clickActionInfo.top+"px",o.ghostPanel.style.left=o.mouseMoveEvent.clientX-o.clickActionInfo.left+"px"):(o.htmlElement.style.top=o.mouseMoveEvent.clientY-o.clickActionInfo.top+"px",o.htmlElement.style.left=o.mouseMoveEvent.clientX-o.clickActionInfo.left+"px"),o.options.dependantElements)for(var n=0;n<=o.options.dependantElements.length-1;n++)o.options.dependantElements[n].style.top=o.mouseMoveEvent.clientY-o.clickActionInfo.top+"px",o.options.dependantElements[n].style.left=o.mouseMoveEvent.clientX-o.clickActionInfo.left+"px"}else{var r="default";o.canMove()&&o.options.changeDragCursor&&(r="move"),o.options.allowResize.left&&o.onLeftEdge&&(r="ew-resize"),o.options.allowResize.right&&o.onRightEdge&&(r="ew-resize"),o.options.allowResize.top&&o.onTopEdge&&(r="ns-resize"),o.options.allowResize.bottom&&o.onBottomEdge&&(r="ns-resize"),o.htmlElement.style.cursor=r}},this.destroy=function(){o.thElement.removeEventListener(jw.DOM.events.MOUSE_DOWN_EVENT,this.onMouseDown),o.thElement.removeEventListener(jw.DOM.events.TOUCH_START_EVENT,this.onTouchStart),jwDocumentEventManager.removeDocumentEventListener(jw.DOM.events.MOUSE_MOVE_EVENT,this.onMouseMove),jwDocumentEventManager.removeDocumentEventListener(jw.DOM.events.MOUSE_UP_EVENT,this.onMouseUp),jwDocumentEventManager.removeDocumentEventListener(jw.DOM.events.TOUCH_MOVE_EVENT,this.onTouchMove),jwDocumentEventManager.removeDocumentEventListener(Tjw.DOM.events.OUCH_END_EVENT,this.onTouchEnd)},this.htmlElement.addEventListener(jw.DOM.events.MOUSE_DOWN_EVENT,this.onMouseDown),this.htmlElement.addEventListener(jw.DOM.events.TOUCH_START_EVENT,this.onTouchStart),jwDocumentEventManager.addDocumentEventListener(jw.DOM.events.MOUSE_MOVE_EVENT,this.onMouseMove),jwDocumentEventManager.addDocumentEventListener(jw.DOM.events.MOUSE_UP_EVENT,this.onMouseUp),jwDocumentEventManager.addDocumentEventListener(jw.DOM.events.TOUCH_MOVE_EVENT,this.onTouchMove),jwDocumentEventManager.addDocumentEventListener(jw.DOM.events.TOUCH_END_EVENT,this.onTouchEnd),this.animateMove()}function jasonBlockUI(t,e){this.defaultOptions={opacity:"0.8",backgroundColor:"white",blockKeyboard:!1},void 0==e&&(e={}),jw.common.extendObject(this.defaultOptions,e),this.options=e,this.nonBlockElement=t,this.blockElement=document.createElement("DIV"),this.blockElement.style.display="none",this.blockElement.style.opacity=this.options.opacity,this.blockElement.style.backgroundColor=this.options.backgroundColor,void 0!=this.options.cssClass&&this.blockElement.classList.add(this.options.cssClass),this.blockElement.classList.add(jw.DOM.classes.JW_BLOCK_ELEMENT),this.blockElement.style.position="absolute",this.blockElement.addEventListener(jw.DOM.events.CLICK_EVENT,function(t){t.preventDefault(),t.stopPropagation()}),this.blockElement.addEventListener(jw.DOM.events.MOUSE_DOWN_EVENT,function(t){t.preventDefault(),t.stopPropagation()}),this.addWindowEvents=this.addWindowEvents.bind(this),this.removeWindowEvents=this.removeWindowEvents.bind(this),this.handleWindowsFocus=this.handleWindowsFocus.bind(this),this.handleWindowsKeyDown=this.handleWindowsKeyDown.bind(this)}function jasonValidationRule(t){var e=this;this.options=t,this._closeEventAssigned=!1,this.validate=function(){if(e.widget||(e.widget=e.options.widget,e._initializeContent(),e._createUI(),e.validationMessage.innerHTML=e.options.message,e.validationPopover=new jasonPopover({targetElement:e.widget.htmlElement,title:t.title,content:e.validationContainer,autoPlacement:void 0==e.options.bubblePosition,position:e.options.bubblePosition,mode:"validation"}),e.validationPopover.htmlElement.classList.add(jw.DOM.classes.JW_VALIDATION)),e.options.validatorFunction&&"function"==typeof e.options.validatorFunction&&e.widget){var n=e.options.validatorFunction(e.widget,e.widget.value,e.options.validValue);if(0==n){if(e.validationPopover.show(),!this._closeEventAssigned){var o=e.validationPopover.ui.body.getElementsByClassName(jw.DOM.classes.JW_BUTTON)[0];e.validationPopover.eventManager.addEventListener(o,jw.DOM.events.CLICK_EVENT,function(t){e.validationPopover.hide()},!0),this._closeEventAssigned=!0}}else e.validationPopover.hide();return n}},this._initializeContent=function(){this.options.message=jw.common.parseTemplateContent(this.options.message)},this._createUI=function(){e.validationContainer=document.createElement("DIV"),e.validationContainer.classList.add(jw.DOM.classes.JW_VALIDATION_CONTAINER),e.validationMessageContainer=document.createElement("DIV"),e.validationMessageContainer.classList.add(jw.DOM.classes.JW_VALIDATION_MESSAGE_CONTAINER),e.validationMessage=document.createElement("SPAN"),e.validationMessage.classList.add(jw.DOM.classes.JW_VALIDATION_MESSAGE),e.validationMessageContainer.appendChild(e.validationMessage),e.validationCloseButton=jw.htmlFactory.createJWButton(null,jw.DOM.icons.CLOSE_24x24),e.validationContainer.appendChild(e.validationCloseButton),e.validationContainer.appendChild(e.validationMessageContainer)}}function jasonValidationRuleGroup(t){var e=this;this.name=void 0==t?"default":t,this.rules=[],this.validate=function(){e.rules.forEach(function(t){t.options.widget?t.options.widget.validate():t.validate()})},jw.validationManager.addValidationGroup(this)}function jasonWidgetLanguageEL(){this.search={searchPlaceHolder:"Όρος αναζήτησης"},this.filter={values:{filterValueIsEqual:"Ίση με",filterValueIsNotEqual:"Δεν είναι ίσο με",filterValueStartsWith:"Αρχίζει με",filterValueEndsWith:"Τέλειώνει με",filterValueContains:"Περιέχει",filterValueGreaterThan:"Μεγαλύτερο απο",filterValueGreaterEqualTo:"Μεγαλύτερο ίσο απο",filterValueLessThan:"Μικρότερο απο",filterValueLessEqualTo:"Μικρότερο ίσο απο"},operators:{and:"Και",or:"ή"}},this.data={noData:"Δεν υπάρχουν δεδομένα"},this.grid={paging:{firstPageButton:"Πρώτη",priorPageButton:"Προηγούμενη",nextPageButton:"Επόμενη",lastPageButton:"Τελευταία",pagerInputTooltip:"Πληκτρολογήστε αριθμό σελίδας",pagerInfoOfRecordCount:"απο"},grouping:{groupingMessage:"Σύρετε μια στήλη εδώ , για να ομαδόποιήσετε τα δεδομένα με βάση τη στήλη αυτή",removeGrouping:"Αφαίρεση ομαδόποιησης για "},filtering:{clearButtonText:"Καθαρισμός",clearButtonToollip:"Καθαρισμός όλων των φίλτρων",applyButtonText:"Εφαρμογή",applyButtonTooltip:"Εφαρμογή του φίλτρου",iconTooltip:"Φιλτράρισμα δεδομένων",filterHeaderCaption:"Προβολή τιμών όπου"},columnMenu:{sortAscending:"Αύξουσα Ταξινόμηση",sortDescending:"Φθίνουσα Ταξινόμηση",filter:"Φίλτρο",columns:"Στήλες",clearSorting:"Αναίρεση Ταξινόμησης",clearFilters:"Αναίρεση Φίλτρου"}},this.combobox={notFound:"Ο όρος αναζήτησης [ {0} ] δεν βρέθηκε"},this.key="EL",this.calendar={days:[{name:"Κυριακή",shortName:"Κυρ"},{name:"Δευτέρα",shortName:"Δευ"},{name:"Tρίτη",shortName:"Tρι"},{name:"Τετάρτη",shortName:"Τετ"},{name:"Πέμπτη",shortName:"Πεμ"},{name:"Παρασκευή",shortName:"Παρ"},{name:"Σάββατο",shortName:"Σαβ"}],months:[{name:"Ιανουάριος",shortName:"Ιαν"},{name:"Φεβρουάριος",shortName:"Φεβ"},{name:"Μάρτιος",shortName:"Μαρ"},{name:"Απρίλιος",shortName:"Απρ"},{name:"Μαϊος",shortName:"Μαϊ"},{name:"Ιουνίος",shortName:"Ιουν"},{name:"Ιούλιος",shortName:"Ιουλ"},{name:"Αύγουστος",shortName:"Αυγ"},{name:"Σεπτέμβριος",shortName:"Σεπ"},{name:"Οκτώβριος",shortName:"Οκτ"},{name:"Νοέμβριος",shortName:"Νοε"},{name:"Δεκέμβριος",shortName:"Δεκ"}]},this.dialog={buttons:[{name:"btnOK",caption:"OK"},{name:"btnYes",caption:"Ναι"},{name:"btnNo",caption:"Όχι"},{name:"btnCancel",caption:"Ακύρωση"},{name:"btnAbort",caption:"Ματαιώση"},{name:"btnRetry",caption:"Επανάληψη"},{name:"btnIgnore",caption:"Παράλειψη"}]},this.numericTextBox={increaseValue:"Αύξηση τιμής",decreaseValue:"Μειώση τιμής"}}function jasonWidgetLanguageEN(){this.search={searchPlaceHolder:"Type in a value to search"},this.filter={values:{filterValueIsEqual:"Equal to",filterValueIsNotEqual:"Not equal to",filterValueStartsWith:"Starts with",filterValueEndsWith:"Ends with",filterValueContains:"Contains",filterValueGreaterThan:"Greater than",filterValueGreaterEqualTo:"Greater equal to",filterValueLessThan:"Less than",filterValueLessEqualTo:"Less equal than"},operators:{and:"And",or:"Or"}},this.data={noData:"No data"},this.grid={paging:{firstPageButton:"First",priorPageButton:"Prior",nextPageButton:"Next",lastPageButton:"Last",pagerInputTooltip:"Type in a page number",pagerInfoOfRecordCount:"of"},grouping:{groupingMessage:"Drag a column here to group the data based on that column.",removeGrouping:"Remove grouping for "},filtering:{clearButtonText:"Clear",clearButtonToollip:"Clear all filters",applyButtonText:"Apply",applyButtonTooltip:"Apply filter",iconTooltip:"Filtering data",filterHeaderCaption:"Show values where"},columnMenu:{sortAscending:"Sort Ascending",sortDescending:"Sort Descending",filter:"Filter",columns:"Columns",clearSorting:"Clear Sorting",clearFilters:"Clear Filters"}},this.combobox={notFound:"Search term [ {0} ] not found"},this.key="EN",this.calendar={days:[{name:"Sunday",shortName:"Sun"},{name:"Monday",shortName:"Mon"},{name:"Tuesday",shortName:"Tue"},{name:"Wednesday",shortName:"Wed"},{name:"Thursday",shortName:"Thu"},{name:"Friday",shortName:"Fri"},{name:"Saturday",shortName:"Sat"}],months:[{name:"January",shortName:"Jan"},{name:"February",shortName:"Feb"},{name:"March",shortName:"Mar"},{name:"April",shortName:"Apr"},{name:"May",shortName:"May"},{name:"June",shortName:"Jun"},{name:"July",shortName:"Jul"},{name:"August",shortName:"Aug"},{name:"September",shortName:"Sep"},{name:"October",shortName:"Oct"},{name:"November",shortName:"Nov"},{name:"December",shortName:"Dec"}]},this.dialog={buttons:[{name:"btnOK",caption:"OK"},{name:"btnYes",caption:"Yes"},{name:"btnNo",caption:"No"},{name:"btnCancel",caption:"Cancel"},{name:"btnAbort",caption:"Abort"},{name:"btnRetry",caption:"Retry"},{name:"btnIgnore",caption:"Ignore"}]},this.numericTextBox={increaseValue:"Increase value",decreaseValue:"Decrease value"}}function jasonWidgetLanguageES(){this.search={searchPlaceHolder:"Escriba un valor para buscar"},this.filter={values:{filterValueIsEqual:"Igual a",filterValueIsNotEqual:"No igual a",filterValueStartsWith:"Comienza con",filterValueEndsWith:"Termina con",filterValueContains:"Contiene",filterValueGreaterThan:"Mas grande que",filterValueGreaterEqualTo:"Mayor igual a",filterValueLessThan:"Menos que",filterValueLessEqualTo:"Menos iguales que"},operators:{and:"Y",or:"O"}},this.data={noData:"Sin datos"},this.grid={paging:{firstPageButton:"Primero",priorPageButton:"Anterior",nextPageButton:"Siguiente",lastPageButton:"Ultimo",pagerInputTooltip:"Teclear un número de página",pagerInfoOfRecordCount:"de"},grouping:{groupingMessage:"Arrastre una columna aquí para agrupar los datos en función de esa columna.",removeGrouping:"Eliminar la agrupación de "},filtering:{clearButtonText:"Claro",clearButtonToollip:"Borrar todos los filtros",applyButtonText:"Applicar",applyButtonTooltip:"Applicar filtro",iconTooltip:"Filtrado de datos",filterHeaderCaption:"Mostrar valores en donde"},columnMenu:{sortAscending:"Orden ascendente",sortDescending:"Orden descendiente",filter:"Filtrar",columns:"Columnas",clearSorting:"Claro ordenación",clearFilters:"Eliminar filtros"}},this.combobox={notFound:"Término de búsqueda [{0}] no encontrado"},this.key="ES",this.calendar={days:[{name:"Domenica",shortName:"Dom"},{name:"Lunedi",shortName:"Lun"},{name:"Martedi",shortName:"Mar"},{name:"Mercoledi",shortName:"Mer"},{name:"Giovedi",shortName:"Gio"},{name:"Venerdi",shortName:"Ven"},{name:"Sabato",shortName:"Sab"}],months:[{name:"Enero",shortName:"Genn"},{name:"Febrero",shortName:"Febbr"},{name:"Marzo",shortName:"Mar"},{name:"Abril",shortName:"Apr"},{name:"Mayo",shortName:"Magg"},{name:"Junio",shortName:"Giu"},{name:"Julio",shortName:"Lug"},{name:"Agosto",shortName:"Ago"},{name:"Septiembre",shortName:"Sett"},{name:"Octubre",shortName:"Ott"},{name:"Noviembre",shortName:"Nov"},{name:"Diciembre",shortName:"Dic"}]},this.dialog={buttons:[{name:"btnOK",caption:"OK"},{name:"btnYes",caption:"Sì"},{name:"btnNo",caption:"No"},{name:"btnCancel",caption:"Cancelar"},{name:"btnAbort",caption:"Abortar"},{name:"btnRetry",caption:"Rever"},{name:"btnIgnore",caption:"Ignorar"}]},this.numericTextBox={increaseValue:"Aumentar el valor",decreaseValue:"Disminuye el valor"}}function jasonWidgetLanguageIT(){this.search={searchPlaceHolder:"Digitare un valore per la ricerca"},this.filter={values:{filterValueIsEqual:"Uguale a",filterValueIsNotEqual:"Non uguale a",filterValueStartsWith:"Inizia con",filterValueEndsWith:"Finisce con",filterValueContains:"Contiene",filterValueGreaterThan:"Più grande di",filterValueGreaterEqualTo:"Maggiore pari a",filterValueLessThan:"Meno di",filterValueLessEqualTo:"Meno uguali degli"},operators:{and:"e",or:"O"}},this.data={noData:"Nessun dati"},this.grid={paging:{firstPageButton:"Primo",priorPageButton:"Precedente",nextPageButton:"Prossimo",lastPageButton:"Ultimo",pagerInputTooltip:"Digitare un numero di pagina",pagerInfoOfRecordCount:"di"},grouping:{groupingMessage:"Trascinare una colonna qui, per raggruppare i dati in base a quella colonna",removeGrouping:"Rimuovere raggruppamento per "},filtering:{clearButtonText:"Cancella",clearButtonToollip:"Cancella tutti i filtri",applyButtonText:"Applica",applyButtonTooltip:"Applica il filtro",iconTooltip:"Filtraggio dei dati",filterHeaderCaption:"Mostra i valori in cui"},columnMenu:{sortAscending:"Ordine crescente",sortDescending:"Ordine decrescente",filter:"Filtro",columns:"Colonne",clearSorting:"Cancella ordinamento",clearFilters:"Cancella filtri"}},this.combobox={notFound:"Il termino di ricerca [ {0} ] non trovato"},this.key="IT",this.calendar={days:[{name:"Domenica",shortName:"Dom"},{name:"Lunedi",shortName:"Lun"},{name:"Martedi",shortName:"Mar"},{name:"Mercoledi",shortName:"Mer"},{name:"Giovedi",shortName:"Gio"},{name:"Venerdi",shortName:"Ven"},{name:"Sabato",shortName:"Sab"}],months:[{name:"Gennaio",shortName:"Genn"},{name:"Febbraio",shortName:"Febbr"},{name:"Marzo",shortName:"Mar"},{name:"Aprile",shortName:"Apr"},{name:"Maggio",shortName:"Magg"},{name:"Giugno",shortName:"Giu"},{name:"Luglio",shortName:"Lug"},{name:"Agosto",shortName:"Ago"},{name:"Settembre",shortName:"Sett"},{name:"Ottobre",shortName:"Ott"},{name:"Novembre",shortName:"Nov"},{name:"Dicembre",shortName:"Dic"}]},this.dialog={buttons:[{name:"btnOK",caption:"OK"},{name:"btnYes",caption:"Sì"},{name:"btnNo",caption:"No"},{name:"btnCancel",caption:"Annulla"},{name:"btnAbort",caption:"Interrompe"},{name:"btnRetry",caption:"Riprova"},{name:"btnIgnore",caption:"Ignorare"}]},this.numericTextBox={increaseValue:"Aumentare il valore",decreaseValue:"Riduzione valore"}}function jasonWidgetCultureEL(){this.dateFormat="dd/MM/yyyy",this.shortDateFormat="dd MMM YYYY",this.longDateFormat="dd MMMM yyyy",this.timeFormat="hh:mm:ss",this.postMeridiem=[],this.anteMeridiem=[],this.currencyCode="EUR",this.key="el"}function jasonWidgetCultureEN_US(){this.dateFormat="MM/dd/yyyy",this.shortDateFormat="MMM dd yyyy",this.longDateFormat="dddd MMMM dd yyyy",this.timeFormat="hh:mm:ss",this.postMeridiem=[],this.anteMeridiem=[],this.currencyCode="USD",this.key="en-US"}function jasonWidgetCultureES(){this.dateFormat="dd/MM/yyyy",this.shortDateFormat="dd MMM YYYY",this.longDateFormat="dd MMMM yyyy",this.timeFormat="hh:mm:ss",this.postMeridiem=[],this.anteMeridiem=[],this.currencyCode="EUR",this.key="es"}function jasonWidgetCultureIT(){this.dateFormat="dd/MM/yyyy",this.shortDateFormat="dd MMM YYYY",this.longDateFormat="dd MMMM yyyy",this.timeFormat="hh:mm:ss",this.postMeridiem=[],this.anteMeridiem=[],this.currencyCode="EUR",this.key="it"}function jasonTextbox(t,e,n,o){if("DIV"!=t.tagName)throw new Error("Textbox container element must be a div");this.defaultOptions||(this.defaultOptions={}),jasonBaseWidget.call(this,void 0==n?"jasonTextbox":n,t,e,void 0==o?jasonTextboxUIHelper:o),this._value=null}function jasonTextboxUIHelper(t,e){this.onTextInputBlur=this.onTextInputBlur.bind(this),this.onTextInputFocus=this.onTextInputFocus.bind(this),jasonBaseWidgetUIHelper.call(this,t,e)}function jasonButtonTextbox(t,e,n,o){this.defaultOptions||(this.defaultOptions={}),jasonTextbox.call(this,t,e,void 0==n?"jasonButtonTextbox":n,void 0==o?jasonButtonTextboxUIHelper:o)}function jasonButtonTextboxUIHelper(t,e){this.onButtonClick=this.onButtonClick.bind(this),this.onTextInputBlur=this.onTextInputBlur.bind(this),this.onTextInputFocus=this.onTextInputFocus.bind(this),jasonTextboxUIHelper.call(this,t,e)}function jasonCombobox(t,e,n){this.defaultOptions={data:null,keyFieldName:void 0,displayFields:void 0,displayFormat:void 0,placeholder:void 0,inputMode:"verbatim",readonly:!1,caseSentiveSearch:!1,autoFilter:!1,icon:jw.DOM.icons.CHEVRON_DOWN,multipleSelectionSeparator:"|",customization:{itemTemplate:null,dataFieldAttribute:"data-field"}},n=void 0===n?"jasonCombobox":n,jasonButtonTextbox.call(this,t,e,n,jasonComboboxUIHelper),this.onDataChange=this.onDataChange.bind(this),this.dataSource=new jasonDataSource({data:this.options.data,onChange:this.onDataChange}),this.filteredData=[],this.search=this.search.bind(this),this.options.localization=jasonWidgets.localizationManager.currentLanguage?jasonWidgets.localizationManager.currentLanguage:this.options.localization,this.dataChanged=!0}function jasonComboboxUIHelper(t,e){this.oninputControlClick=this.oninputControlClick.bind(this),this.oninputControlChange=this.oninputControlChange.bind(this),this.onTextInputBlur=this.onTextInputBlur.bind(this),this.onTextInputFocus=this.onTextInputFocus.bind(this),this.showList=this.showList.bind(this),this.hideList=this.hideList.bind(this),this.onComboboxKeyUp=this.onComboboxKeyUp.bind(this),this.onComboboxKeyDown=this.onComboboxKeyDown.bind(this),this.dropDownListButton=null,jasonButtonTextboxUIHelper.call(this,t,e)}function jasonMenu(t,e,n){this.items=[],this.defaultOptions={orientation:"vertical",animation:{delay:9},expandMenuOnHover:!0,invokable:!1},jasonBaseWidget.call(this,"jasonMenu",t,e,n)}function createJasonMenuDividerItem(){var t=new jasonMenuItem;return t.isDivider=!0,t.clickable=!1,t}function jasonMenuItem(t,e,n){jasonBaseWidget.call(this,"jasonMenuItem",t,e,n),this.caption="",this.title="",this.enabled=!0,this.items=[],this.parent=null,this.content=null,this.level=null,this.name=null,this.hasCheckBox=!1,this.checked=!1,this.clickable=!0,this.checkBoxElement=null,this.icon=null,this.isDivider=!1,this.assign=this.assign.bind(this)}function jasonMenuWidgetParser(t){return this.menuUI=t,jasonMenuWidgetParser}function jasonMenuWidgetDOMParser(t){jasonMenuWidgetParser.call(this,t)}function jasonMenuWidgetJSONParser(t){jasonMenuWidgetParser.call(this,t),this.createMenuElementFromItem=this.createMenuElementFromItem.bind(this)}function jasonMenuUIHelper(t,e){jasonBaseWidgetUIHelper.call(this,t,e),void 0==this.htmlElement&&(this.htmlElement=this.createElement("span")),this.ulMenuElement="UL"==this.htmlElement.tagName?this.htmlElement:this.createElement("ul"),this.ulMenuElement.classList.contains(this.baseClassName)||this.widget.addBaseClassName(this.ulMenuElement),this.menuContainer=this.createElement("div"),this.menuContainer.classList.add(jw.DOM.classes.JW_MENU_CONTAINER_CLASS),this.ulMenuElement.classList.add(jw.DOM.classes.JW_MENU_CLASS),this.invokableElement=null,this.widget.options.width&&(this.ulMenuElement.style.width=this.options.width+"px"),this.widget.options.height&&(this.ulMenuElement.style.height=this.options.height+"px"),"horizontal"==this.widget.options.orientation.toLowerCase()&&this.htmlElement.classList.add(jw.DOM.classes.JW_MENU_HORIZONTAL),this.checkBoxElements=[],this.showMenu=this.showMenu.bind(this),this.hideMenu=this.hideMenu.bind(this),this.onCheckboxClick=this.onCheckboxClick.bind(this),this.onItemClick=this.onItemClick.bind(this),this.onItemTouch=this.onItemTouch.bind(this),this.onItemMouseEnter=this.onItemMouseEnter.bind(this),this.onItemMouseLeave=this.onItemMouseLeave.bind(this),this.onItemKeyDown=this.onItemKeyDown.bind(this),this.toggleCheckBox=this.toggleCheckBox.bind(this),this.onItemArrowClick=this.onItemArrowClick.bind(this);var n=this;this.options.autoHide&&jwDocumentEventManager.addDocumentEventListener(jw.DOM.events.MOUSE_DOWN_EVENT,function(t){if("none"!=n.menuContainer.style.display){var e=jasonWidgets.common.isMouseEventOutOfContainerAndNotAChild(n.menuContainer,t);e&&n.canHideMenu&&n.hideMenu()}}),jwDocumentEventManager.addDocumentEventListener(jw.DOM.events.TOUCH_END_EVENT,function(t){if("none"!=n.menuContainer.style.display){var e=jasonWidgets.common.isMouseEventOutOfContainerAndNotAChild(n.menuContainer,t.changedTouches[0]);if(e&&n.previousShowMenuItem)for(var o=n.previousShowMenuItem;o;)n.hideMenuItemContents(o),o=o.parent}}),this.menu=this.createMenu(),this.canHideMenu=!0,this.canHideSubMenu=!0,this.disableMouseEvents=!1,this.previousShowMenuItem=null,this.lastMenuItemVisibleContents=null}function jasonContextMenuUIHelper(t,e){jasonWidgets.common.extendObject({invokable:!0,orientation:"vertical",autoHide:!0},t.options),this.showContextMenu=this.showContextMenu.bind(this),t.options.invokable=!0,jasonMenuUIHelper.call(this,t,e),this.menuContainer.style.display="none",
this.menuContainer.parentElement.removeChild(this.menuContainer),document.body.appendChild(this.menuContainer),this.menuContainer.style.width=t.options.width+"px",this.menuContainer.style.position="absolute"}function jasonCalendarItem(){this.dayName=null,this.dayShortName=null,this.date=null,this.day=null,this.month=null,this.monthName=null,this.monthShortName=null,this.year=null,this.weekNumber=null,this.decadeStart=null,this.decadeStop=null,this.centuryStart=null,this.centuryStop=null,this.mileniumStart=null,this.mileniumStop=null,this.toolTip=null,this.classList=[],this.displayValue=null}function jasonCalendar(t,e){this.defaultOptions={invokable:!1,autoHide:!1,invokableElement:null,firstDayOfWeek:1,width:300,height:220,mode:"days",specialDates:[],selectedDates:[],multiSelect:!1,rangeSelect:!1,localization:jasonWidgets.localizationManager.currentLanguage?jasonWidgets.localizationManager.currentLanguage.calendar:e.localization},this._date=jasonWidgets.common.dateOf(new Date),this._navigationDate=jasonWidgets.common.dateOf(new Date),this._specialDates=[],this._mode=e.mode?e.mode:"days",this.currentCalendarItems=[],this.parseSpecialDates(e),jasonBaseWidget.call(this,"jasonCalendar",t,e,jasonCalendarUIHelper)}function jasonCalendarUIHelper(t,e){this.goBack=this.goBack.bind(this),this.goForward=this.goForward.bind(this),this.calendarDisplayClick=this.calendarDisplayClick.bind(this),this.calendarItemClick=this.calendarItemClick.bind(this),this.calendarNavigateToday=this.calendarNavigateToday.bind(this),this.renderedCalendarItems=[];var n=this;jwDocumentEventManager.addDocumentEventListener(jw.DOM.events.SCROLL_EVENT,function(t){n.options.invokable&&n.hideCalendar()}),jwDocumentEventManager.addDocumentEventListener(jw.DOM.events.TOUCH_MOVE_EVENT,function(t){n.options.invokable&&n.hideCalendar()}),jasonBaseWidgetUIHelper.call(this,t,e)}function jasonTabControl(t,e){if("DIV"!=t.tagName&&t.children[0]&&"UL"!=t.children[0].tagName)throw new Error("Tabcontrol container must a DIV containing a UL element as first child");jasonBaseWidget.call(this,"jasonTabControl",t,e,jasonTabControlUIHelper),this._tabIndex=-1,this.htmlElement.style.display="",this.tabIndex=0}function jasonTabControlUIHelper(t,e){this.tabContents=[],this.setActiveTab=this.setActiveTab.bind(this),jasonBaseWidgetUIHelper.call(this,t,e)}function jasonNumericTextbox(t,e){this.defaultOptions={minimumFractionDigits:2,step:1,style:"decimal"},jasonTextbox.call(this,t,e,"jasonNumericTextbox",jasonNumericTextboxUIHelper)}function jasonNumericTextboxUIHelper(t,e){this.onNumericButtonClick=this.onNumericButtonClick.bind(this),this.onNumericInputKeyDown=this.onNumericInputKeyDown.bind(this),this.onTextInputBlur=this.onTextInputBlur.bind(this),this.onTextInputFocus=this.onTextInputFocus.bind(this),this._acceptableKeyCodes=[jw.keycodes.backspace,jw.keycodes.tab,jw.keycodes.shift,jw.keycodes.ctrl,jw.keycodes.alt,jw.keycodes.home,jw.keycodes.end,44,jw.keycodes["delete"],jw.keycodes.zero,jw.keycodes.one,jw.keycodes.two,jw.keycodes.three,jw.keycodes.four,jw.keycodes.five,jw.keycodes.six,jw.keycodes.seven,jw.keycodes.eight,jw.keycodes.nine,jw.keycodes.numpad0,jw.keycodes.numpad1,jw.keycodes.numpad2,jw.keycodes.numpad3,jw.keycodes.numpad3,jw.keycodes.numpad4,jw.keycodes.numpad5,jw.keycodes.numpad6,jw.keycodes.numpad7,jw.keycodes.numpad8,jw.keycodes.numpad9,jw.keycodes.dash,jw.keycodes.subtract,jw.keycodes.decimalPoint],jasonTextboxUIHelper.call(this,t,e)}function jasonGridUIHelper(t,e){this.resizeTimeout=null,this._onColumnMenuItemChecked=this._onColumnMenuItemChecked.bind(this),this._onColumnMenuItemClicked=this._onColumnMenuItemClicked.bind(this),this._onColumnMenuHidden=this._onColumnMenuHidden.bind(this),this._onGridFilterButtonClick=this._onGridFilterButtonClick.bind(this),this._onGridColumnMenuIconClick=this._onGridColumnMenuIconClick.bind(this),this._onGridColumnCaptionClick=this._onGridColumnCaptionClick.bind(this),this._onGridColumnKeyDown=this._onGridColumnKeyDown.bind(this),this._onGridColumnFocus=this._onGridColumnFocus.bind(this),this._onGridCellKeyDown=this._onGridCellKeyDown.bind(this),this._onGridFocus=this._onGridFocus.bind(this),this._onGridFooterKeyDown=this._onGridFooterKeyDown.bind(this),this._onResize=this._onResize.bind(this),this._onDataContainerScroll=this._onDataContainerScroll.bind(this),this._onGroupCollapseExpandIconClick=this._onGroupCollapseExpandIconClick.bind(this),this._onGroupColumnRemoveClick=this._onGroupColumnRemoveClick.bind(this),this._onColumnDrop=this._onColumnDrop.bind(this),this._onMoveResizeStart=this._onMoveResizeStart.bind(this),this._onColumnResizeEnd=this._onColumnResizeEnd.bind(this),this._onSelectionChange=this._onSelectionChange.bind(this),this.gridSelectedRows=new Array,this.gridSelectedCells=new Array,this._currentPage=1,this._currentFilterField=null,this._currentFilterColumn=null,this._currentTHElement=null,this._firstRun=!0,this.isReRendering=!1,this.isColumnMoveResize=!1,this.monitorChanges=this.monitorChanges.bind(this),jasonBaseWidgetUIHelper.call(this,t,e)}function jasonGrid(t,e){if("DIV"!=t.tagName)throw new Error("Grid container element must be a div");this.defaultOptions={multiSelect:!1,cellMultiSelect:!1,data:null,columns:null,selectedRows:null,paging:{pagesize:200},grouping:!0,filtering:!0,columnMenu:!0,resizing:!0,sorting:!0,reordering:!0,customization:{rowTemplate:null,dataFieldAttribute:"data-field"}},this.dataSource=new jasonDataSource({data:"function"==typeof e.data?e.data():e.data,onChange:this._onDataChanged.bind(this)}),this._initializeColumns(e),jasonBaseWidget.call(this,"jasonGrid",t,e,jasonGridUIHelper),this.initialize(),this.ui._createColumnMenu(),this.ui._initializeEvents(),this.ui.localizeStrings(this.options.localization),this.ui.monitorChanges()}function jasonDatePicker(t,e){this.defaultOptions={displayFormat:jasonWidgets.localizationManager.localeDateFormat,mode:"date",icon:jw.DOM.icons.CALENDAR},jasonButtonTextbox.call(this,t,e,"jasonDatePicker",jasonDatePickerUIHelper),this.readonly=!!this.options.readonly&&this.options.readonly}function jasonDatePickerUIHelper(t,e){this.onTextInputBlur=this.onTextInputBlur.bind(this),this.onTextInputFocus=this.onTextInputFocus.bind(this),this.inputKeyDown=this.inputKeyDown.bind(this),this.buttonClick=this.buttonClick.bind(this),this.onCalendarDateChange=this.onCalendarDateChange.bind(this),this.datePickerSetDateFlag=!1,jasonButtonTextboxUIHelper.call(this,t,e)}function jasonTimePicker(t,e){this.defaultOptions={timeFormat:jasonWidgets.localizationManager.localeTimeFormat,interval:15,keyFieldName:"key",displayFields:["formattedTime"],displayFormat:"{0}",icon:jw.DOM.icons.CLOCK,autoFilter:!0,events:[{eventName:jw.DOM.events.JW_EVENT_ON_SHOW,listener:function(t){this._hasKeyStroke=!1}.bind(this)}]},jasonWidgets.common.extendObject(this.defaultOptions,e),this.prepareData(e),jasonCombobox.call(this,t,e,"jasonTimePicker"),this._hasKeyStroke=!1,this._time=jasonWidgets.common.timeOf(this.options.time?this.options.time:new Date),this.onTextInputBlur=this.onTextInputBlur.bind(this),this.cmbInputKeyDown=this.cmbInputKeyDown.bind(this),this.onTimePickerSelectItem=this.onTimePickerSelectItem.bind(this),this.eventManager.addEventListener(this.ui.inputControl,jw.DOM.events.BLUR_EVENT,this.onTextInputBlur),this.eventManager.addEventListener(this.ui.inputControl,jw.DOM.events.KEY_DOWN_EVENT,this.cmbInputKeyDown)}function jasonDateTimePicker(t,e){this.defaultOptions={dateFormat:jasonWidgets.localizationManager.localeDateFormat,timeFormat:jasonWidgets.localizationManager.localeTimeFormat,mode:"datetime",icon:jw.DOM.icons.CALENDAR,interval:15,keyFieldName:"key",displayFields:["formattedTime"],displayFormat:"{0}"},this.prepareData(e),jasonButtonTextbox.call(this,t,e,"jasonDateTimePicker",jasonDateTimePickerUIHelper)}function jasonDateTimePickerUIHelper(t,e){this.onTextInputBlur=this.onTextInputBlur.bind(this),this.onTextInputFocus=this.onTextInputFocus.bind(this),this.inputKeyDown=this.inputKeyDown.bind(this),this.buttonClick=this.buttonClick.bind(this),this.timeButtonClick=this.timeButtonClick.bind(this),this.onCalendarDateChange=this.onCalendarDateChange.bind(this),this.datePickerSetDateFlag=!1,this.timeButton=null,jasonButtonTextboxUIHelper.call(this,t,e)}function jasonDialog(t,e){this.defaultOptions={height:300,width:400,closeButton:!0,resizeable:!1,draggable:!1,modal:!1,buttons:[],model:null,minWidth:140,minHeight:170,customization:{headerTemplate:null,bodyTemplate:null,dataFieldAttribute:"data-field"}},this._initializeTemplates(e),jasonBaseWidget.call(this,"jasonDialog",t,e,jasonDialogUIHelper)}function jasonDialogUIHelper(t,e){this._onDialogButtonClick=this._onDialogButtonClick.bind(this),this._dialogInCenter=this._dialogInCenter.bind(this),this.resizeEventListenerId=null,jasonBaseWidgetUIHelper.call(this,t,e)}function jasonButton(t,e,n,o){jasonBaseWidget.call(this,void 0==n?"jasonButton":n,t,e,void 0==o?jasonButtonUIHelper:o)}function jasonButtonUIHelper(t,e){this.buttonClick=this.buttonClick.bind(this),jasonBaseWidgetUIHelper.call(this,t,e)}function jasonDropDownListButton(t,e){this.defaultOptions={multiSelect:!1,checkboxes:!1,multipleSelectionSeparator:"|"},this.onDataChange=this.onDataChange.bind(this),this.dataSource=new jasonDataSource({data:e.data,onChange:this.onDataChange}),jasonButton.call(this,t,e,"jasonDropDownListButton",jasonDropDownListButtonUIHelper),this._initializeTemplates(),this.selectedItems=[]}function jasonDropDownListButtonUIHelper(t,e){this.dropDownListContainer=null,this.dropDownList=null,this.onListItemClick=this.onListItemClick.bind(this),this.onListItemKeyDown=this.onListItemKeyDown.bind(this),jwDocumentEventManager.addDocumentEventListener(jw.DOM.events.MOUSE_DOWN_EVENT,this.monitorForDocumentClick.bind(this));var n=this;jwDocumentEventManager.addDocumentEventListener(jw.DOM.events.TOUCH_MOVE_EVENT,function(t){n.hideList()}),jasonButtonUIHelper.call(this,t,e)}function jasonPopover(t){this.defaultOptions={autoPlacement:!0,autoSize:!1,closeButton:!0,position:"top",mode:"popover",arrowPlacement:"middle"};var e=document.createElement("DIV");e.style.display="none",this.toggle=this.toggle.bind(this),jasonBaseWidget.call(this,"jasonPopover",e,t,jasonPopoverUIHelper),"tooltip"!=this.options.mode.toLowerCase()||this.options.targetElement||jw.common.throwError(jw.errorTypes.error,"Popover widget is set to be in tooltip mode but no target element has been defined."),this.arrowSize=7,this._spaceInformation={exceedingLeftPixels:null,exceedingRightPixels:null,exceedingTopPixels:null,exceedingBottomPixels:null,needsResize:!1,canShowOnTop:!1,canShowOnLeft:!1,canShowOnRight:!1,canShowOnBottom:!1,leftForVertical:null,topForHorizontal:null}}function jasonPopoverUIHelper(t,e){jasonBaseWidgetUIHelper.call(this,t,e),this.header=null,this.body=null,this.closeButton=null,this.title=null,"string"==typeof this.options.targetElement&&(this.options.targetElement=document.getElementById(this.options.targetElement)),this.initializeContent(),this.targetElementClientRect=null,this.monitorTargetElement=this.monitorTargetElement.bind(this)}var jasonWidgets={};jw=jasonWidgets,jasonWidgets.common=new jasonCommon,jasonWidgets.enums={},jasonWidgets.jwAngularJSModuleName="jwWidgets",jasonWidgets.enums.dataType={unknown:0,number:1,integer:2,date:3,dateTime:4,"boolean":5,object:6,string:7,currency:8,method:9,array:10},jasonWidgets.enums.comparison={equal:0,firstIsGreater:1,secondIsGreater:2,notEqual:3},jasonWidgets.errorTypes={error:0,evalError:1,rangeError:2,referenceError:3,syntaxError:4,typeError:5,uriError:6},jasonWidgets.DOM={},jasonWidgets.DOM.attributes={COLSPAN_ATTR:"colspan",DRAGGABLE_ATTR:"draggable",HREF_ATTR:"href",INPUT_MODE_ATTR:"inputmode",ID_ATTR:"id",FOR_ATTR:"for",DISABLED_ATTR:"disabled",DATA_FIELD:"data-field",JW_COMBOBOX_LIST_STATE_ATTR:"jw-drop-down-list-state",JW_DATA_CELL_ID_ATTR:"jw-data-cell-id",JW_DATA_GROUPING_FIELD_ATTR:"jw-data-grouping-field",JW_DATA_GROUPING_KEY_ATTR:"jw-data-group-key",JW_DATA_GROUPING_LEVEL_ATTR:"jw-data-grouping-level",JW_DATA_GROUP_COLLAPSED_ATTR:"jw-data-group-collpsed",JW_DATA_GROUP_EXPANDED_ATTR:"jw-data-group-expanded",JW_DATA_JW_ITEM_INDEX_ATTR:"jw-data-item-index",JW_DATA_ROW_ID_ATTR:"jw-data-row-id",JW_DIRECTION_ATTR:"jw-direction",JW_GRID_GROUP_FIELD:"jw-group-field",JW_GRID_COLUMN_ID_ATTR:"jw-column-id",JW_GRID_COLUMN_FIELD_ATTR:"jw-column-field",JW_GRID_COLUMN_SORT_ATTR:"jw-column-sort",JW_ITEM_INDEX_ATTR:"jw-item-index",JW_MENU_ITEM_LEVEL_ATTRIBUTE:"data-jason-menu-item-level",JW_MENU_ITEM_NO_HIGHLIGHT_ATTR:"no-highlight",PATTERN_ATTR:"pattern",PLACEHOLDER_ATTR:"placeholder",READONLY_ATTR:"readonly",TABINDEX_ATTR:"tabindex",TITLE_ATTR:"title",TYPE_ATTR:"type"},jasonWidgets.DOM.events={BLUR_EVENT:"blur",CHANGE_EVENT:"change",CLICK_EVENT:"click",CONTEXT_MENU_EVENT:"contextmenu",DRAG_END_EVENT:"dragend",DRAG_ENTER_EVENT:"dragenter",DRAG_EVENT:"drag",DRAG_EXIT_EVENT:"dragexit",DRAG_OVER_EVENT:"dragover",DRAG_START_EVENT:"dragstart",DROP_EVENT:"drop",FOCUS_EVENT:"focus",INPUT_EVENT:"input",JW_EVENT_JW_CALENDAR_MODE_CHANGE:"onModeChange",JW_EVENT_JW_CALENDAR_NAVIGATE:"onNavigate",JW_EVENT_ON_CHANGE:"onChange",JW_EVENT_ON_BUTTON_CLICK:"onButtonClick",JW_EVENT_ON_COLUMN_POSITION_CHANGE:"onColumnPositionChange",JW_EVENT_ON_COLUMN_RESIZED:"onColumnResize",JW_EVENT_ON_DATA_CHANGE:"onDataChange",JW_EVENT_ON_JW_DIALOG_BUTTON_CLICK:"onDialogButtonClick",JW_EVENT_ON_JW_DIALOG_HIDE:"onDialogHide",JW_EVENT_ON_JW_DIALOG_SHOW:"onDialogShow",JW_EVENT_ON_GROUP_BY_FIELD:"onGroupByField",JW_EVENT_ON_GROUP_COLLAPSE:"onGroupCollapse",JW_EVENT_ON_GROUP_EXPAND:"onGroupExpand",JW_EVENT_ON_JW_MENU_CHECKBOX_CLICKED:"onCheckboxClicked",JW_EVENT_ON_JW_MENU_ITEM_CLICKED:"onItemClick",JW_EVENT_ON_JW_MENU_ITEM_CONTENT_SHOW:"onItemContentShown",JW_EVENT_ON_PAGE_CHANGE:"onPageChange",JW_EVENT_ON_SELECTION_CHANGE:"onSelectionChange",JW_EVENT_ON_SELECT_ITEM:"onSelectItem",JW_EVENT_ON_UNSELECT_ITEM:"onUnSelectItem",JW_EVENT_ON_JW_TAB_ENTER:"onTabEnter",JW_EVENT_ON_UNGROUP_FIELD:"onUnGroupField",JW_EVENT_ON_SHOW:"onShow",JW_EVENT_ON_HIDE:"onHide",KEY_DOWN_EVENT:"keydown",KEY_PRESS_EVENT:"keypress",KEY_UP_EVENT:"keyup",MOUSE_DOWN_EVENT:"mousedown",MOUSE_ENTER_EVENT:"mouseenter",MOUSE_LEAVE_EVENT:"mouseleave",MOUSE_MOVE_EVENT:"mousemove",MOUSE_OUT_EVENT:"mouseout",MOUSE_OVER_EVENT:"mouseover",MOUSE_UP_EVENT:"mouseup",REPAINT_EVENT:"repaint",RESIZE_EVENT:"resize",SCROLL_EVENT:"scroll",TOUCH_CANCEL_EVENT:"touchcancel",TOUCH_END_EVENT:"touchend",TOUCH_EVENT:"touch",TOUCH_MOVE_EVENT:"touchmove",TOUCH_START_EVENT:"touchstart"},jw.DOM.eventCodes={JGE_REDRAW:1e3},jw.DOM.classes={JW_BUTTON:"jw-button",JW_BUTTON_ELEMENT:"jw-button-element",JW_BLOCK_ELEMENT:"jw-block-element",JW_CALENDAR:"jw-calendar",JW_CALENDAR_BODY:"jw-calendar-body",JW_CALENDAR_DISPLAY:"jw-calendar-display",JW_CALENDAR_FOOTER:"jw-calendar-footer",JW_CALENDAR_GO_BACK:"jw-calendar-back",JW_CALENDAR_GO_FORWARD:"jw-calendar-forward",JW_CALENDAR_HEADER:"jw-calendar-header",JW_CALENDAR_ITEM_OUT_CURRENT_SCOPE:"jw-calendar-item-outofscope",JW_CALENDAR_ITEM_SELECTED_DATE:"selected-date",JW_CALENDAR_JW_TABLE_CENTURIES:"centuries-view",JW_CALENDAR_JW_TABLE_DECADES:"decades-view",JW_CALENDAR_JW_TABLE_MONTHS:"month-view",JW_CALENDAR_JW_TABLE_YEARS:"years-view",JW_CHECKBOX_INPUT:"jw-checkbox",JW_CLEAR_FLOAT_CLASS:"jw-clear-float",JW_BORDERED:"jw-bordered",JW_BUTTON_TEXT_BOX:"jw-button-textbox",JW_COMBOBOX_CLASS:"jw-combobox",JW_DATE_PICKER_CLASS:"jw-date-picker",JW_DIALOG_BODY:"jw-dialog-body",JW_DIALOG_BUTTONS_CONTAINER:"jw-dialog-buttons",JW_DIALOG_CONTAINER:"jw-dialog-container",JW_DIALOG_FOOTER:"jw-dialog-footer",JW_DIALOG_HEADER:"jw-dialog-header",JW_DIALOG_TITLE_CONTAINER:"title-container",JW_DIALOG_HEADER_BUTTON_CONTAINER:"header-button-container",JW_DISABLED:"jw-disabled",JW_DRAG_IMAGE:"jw-drag-image-container",JW_DROP_DOWN_LIST:"jw-drop-down-list",JW_DROP_DOWN_LIST_ITEM:"drop-down-list-item",JW_DROP_DOWN_BUTTON_MULTI_SELECT:"jw-drop-down-button-multi-select",JW_FOCUSED:"jw-focused",JW_GRID_CLASS:"jw-grid",JW_GRID_COLUMN_DRAG_IMAGE:"jw-grid-column-drag-image",JW_GRID_COLUMN_RESIZE_HANDLE:"jw-column-resize",JW_GRID_DATA:"jw-grid-data",JW_GRID_DATA_CONTAINER:"jw-grid-data-container",JW_GRID_FIELD_HAS_FILTER:"jw-grid-column-has-filter",JW_GRID_FILTER_ACTION_BUTTON_CLASS:"jw-grid-filter-action-button",JW_GRID_FILTER_BODY_CLASS:"jw-grid-filter-body",JW_GRID_FILTER_CONTAINER_CLASS:"jw-grid-filter-container",JW_GRID_FILTER_FOOTER_CLASS:"jw-grid-filter-footer",JW_GRID_FILTER_HEADER_CLASS:"jw-grid-filter-header",JW_GRID_FILTER_INPUT:"jw-filter-input",JW_GRID_FOCUSED_CELL_CLASS:"cell-focused",JW_GRID_FOOTER:"jw-grid-footer",JW_GRID_FOOTER_CONTAINER:"jw-grid-footer-container",JW_GRID_GROUPING_CONTAINER_CLASS:"jw-grid-group-container",JW_GRID_GROUP_CELL:"group-cell",JW_GRID_GROUPING_MESSAGE:"jw-grouping-message",JW_GRID_HEADER:"jw-grid-header",JW_GRID_HEADER_CELL_CAPTION_CONTAINER:"jw-header-cell-caption",JW_GRID_HEADER_CELL_ICON_CONTAINER:"jw-header-cell-icon",JW_GRID_HEADER_CONTAINER:"jw-grid-header-container",JW_GRID_HEADER_CONTAINER_NO_GROUPING:"no-grouping",JW_GRID_HEADER_JW_TABLE_CONTAINER:"jw-grid-header-table-container",JW_GRID_JW_TABLE_ALT_ROW_CLASS:"row-alt",JW_GRID_JW_TABLE_CELL_CLASS:"jw-grid-cell",JW_GRID_JW_TABLE_CELL_CONTENT_CONTAINER_CLASS:"jw-grid-cell-content",JW_GRID_JW_TABLE_GROUP_ROW_CLASS:"group-row",JW_GRID_JW_TABLE_NO_DATA_ROW_CLASS:"jw-grid-no-data-row",JW_GRID_JW_TABLE_ROW_CLASS:"jw-grid-row",JW_GRID_SELECTED_CELL_CLASS:"cell-selected",JW_GRID_SELECTED_ROW_CLASS:"row-selected",JW_HAS_ARROW:"has-arrow",JW_HAS_CHECKBOX:"has-checkbox",JW_HAS_ICON:"has-icon",JW_JW_GRID_FILTER_BUTTON_APPLY:"apply-filter",JW_JW_GRID_FILTER_BUTTON_CLEAR:"clear-filter",JW_LABEL:"jw-label",JW_INVALID:"jw-invalid",JW_MENU_CLASS:"jw-menu",JW_MENU_CONTAINER_CLASS:"jw-menu-container",JW_MENU_HORIZONTAL:"horizontal",JW_MENU_ITEM:"jw-menu-item",JW_MENU_ITEMS_CONTAINER_CLASS:"jw-menu-items-container",JW_MENU_ITEM_ARROW:"jw-menu-item-arrow",JW_MENU_ITEM_CAPTION:"jw-menu-item-caption",JW_MENU_ITEM_CAPTION_ONLY:"just-caption",JW_MENU_ITEM_CHECKBOX:"jw-menu-item-checkbox",JW_MENU_ITEM_CHECKBOX_CLASS:"jw-menu-item-checkbox",JW_MENU_ITEM_CLASS:"jw-menu-item",JW_MENU_ITEM_CLASS_ACTIVE:"jw-menu-item-active",JW_MENU_ITEM_CLICKABLE:"clickable",JW_MENU_ITEM_CONTENT:"menu-content",JW_MENU_ITEM_CONTENT_CLASS:"jw-menu-item-content",JW_MENU_ITEM_DISABLED:"disabled",JW_MENU_ITEM_DIVIDER:"divider",JW_MENU_ITEM_ICON:"jw-menu-item-icon",JW_NUMERIC_TEXT_BOX:"jw-numeric-textbox",JW_PAGER_CONTAINER_CLASS:"jw-grid-pager",JW_PAGER_CONTAINER_PAGE_INFO_CLASS:"jw-grid-pager-info",JW_POPOVER:"jw-popover",JW_POPOVER_HEADER:"jw-popover-header",JW_POPOVER_BODY:"jw-popover-body",JW_READONLY:"jw-readonly",JW_SELECTED:"jw-selected",JW_TAB_CONTAINER:"jw-tabcontrol-container",JW_TAB_PAGE_ACTIVE:"jw-tab-active",JW_TAB_PAGE_CLASS:"jw-tabcontrol-page",JW_TAB_PAGE_CONTAINER:"jw-tabcontrol-page-container",JW_TAB_PAGE_CONTENT_CONTAINER_CLASS:"jw-tabcontrol-page-container",JW_TAB_UL_CLASS:"jw-tabcontrol-list",JW_TEXT_BOX:"jw-textbox",JW_TEXT_INPUT:"jw-text-input",JW_TEXT_OVERFLOW:"jw-text-overflow",JW_TOP:"top",JW_BOTTOM:"bottom",JW_LEFT:"left",JW_RIGHT:"right",JW_MIDDLE:"middle",JW_ARROW_LEFT:"arrow-left",JW_ARROW_RIGHT:"arrow-right",JW_ARROW_MIDDLE:"arrow-middle",JW_UNSELECTABLE_TABLE:"jw-unselectable",JW_VALIDATION:"jw-validation-bubble",JW_VALIDATION_CONTAINER:"jw-validation-container",JW_VALIDATION_MESSAGE_CONTAINER:"jw-validation-message-container",JW_VALIDATION_MESSAGE:"jw-validation-message"},jw.DOM.attributeValues={JW_COMBOBOX_LIST_STATE_DOWN:"down",JW_COMBOBOX_LIST_STATE_UP:"up",JW_DIALOG_BUTTON_DATA_KEY:"jasonDialogButton",JW_MENU_ITEM_DATA_KEY:"jasonMenuItem"};var JW_ICON="jw-icon ";jw.DOM.icons={CALENDAR:JW_ICON+"calendar32x32",CHEVRON_DOWN:JW_ICON+"chevron_down32x32",CHEVRON_UP:JW_ICON+"chevron_up32x32",CHEVRON_LEFT:JW_ICON+"chevron_left32x32",CHEVRON_RIGHT:JW_ICON+"chevron_right32x32",CIRCLE_ARROW_DOWN:JW_ICON+"circle_arrow_down32x32",CIRCLE_ARROW_UP:JW_ICON+"circle_arrow_up32x32",CIRCLE_ARROW_LEFT:JW_ICON+"circle_arrow_left32x32",CIRCLE_ARROW_RIGHT:JW_ICON+"circle_arrow_right32x32",CIRCLE_CHOOSE:JW_ICON+"circle_choose32x32",CIRCLE_MINUS:JW_ICON+"circle_minus32x32",CIRCLE_PLUS:JW_ICON+"circle_plus32x32",CLOCK:JW_ICON+"clock32x32",CLOSE:JW_ICON+"close32x32",CLOSE_24x24:JW_ICON+"close24x24",FILTER:JW_ICON+"filter32x32",LIST:JW_ICON+"list32x32",MINUS:JW_ICON+"minus32x32",PLUS:JW_ICON+"plus32x32",REMOVE_SORT:JW_ICON+"remove-sorting32x32",REMOVE_FILTER:JW_ICON+"remove-filter32x32",SEARCH:JW_ICON+"search32x32",SETTINGS:JW_ICON+"settings32x32",SIGNAL:JW_ICON+"singal32x32",SORT_ASC:JW_ICON+"sort_asc32x32",SORT_DESC:JW_ICON+"sort_desc32x32",CHEVRON_DOWN16x16:JW_ICON+"chevron_down16x16",CHEVRON_UP16x16:JW_ICON+"chevron_up16x16"},jasonWidgets.keycodes={backspace:8,tab:9,enter:13,shift:16,ctrl:17,alt:18,pause_break:19,caps_lock:20,escape:27,pageUp:33,pageDown:34,end:35,home:36,leftArrow:37,upArrow:38,rightArrow:39,downArrow:40,insert:45,"delete":46,zero:48,one:49,two:50,three:51,four:52,five:53,six:54,seven:55,eight:56,nine:57,A:65,B:66,C:67,D:68,E:69,F:70,G:71,H:72,I:73,J:74,K:75,L:76,M:77,N:78,O:79,P:80,Q:81,R:82,S:83,T:84,U:85,V:86,W:87,X:88,Y:89,Z:90,leftWindowKey:91,righWindowKey:92,selectKey:93,numpad0:96,numpad1:97,numpad2:98,numpad3:99,numpad4:100,numpad5:101,numpad6:102,numpad7:103,numpad8:104,numpad9:105,multiply:106,add:107,subtract:109,decimalPoint:110,divide:11,f1:112,f2:113,f3:114,f4:115,f5:116,f6:117,f7:118,f8:119,f9:120,f10:121,f11:122,f12:123,num_lock:144,scroll_lock:145,semi_colon:186,equal_sign:187,comma:188,dash:189,period:190,forward_slash:191,grave_accent:192,open_bracket:219,back_slash:220,close_bracket:221,single_quote:222},jw.htmlFactory=new jasonHTMLFactory,jasonBaseWidget.prototype.initialize=function(){if(this.options.validation)for(var t=0;t<=this.options.validation.length-1;t++){var e=this.options.validation[t];e.widget=this;var n=new jasonValidationRule(this.options.validation[t]);this._validationRules.push(n);var o=new jasonValidationRuleGroup(this.options.validation[t].ruleGroup);n.ruleGroup=o.name,jw.validationManager.addValidationGroup(o),jw.validationManager.addValidationRule(n)}},jasonBaseWidget.prototype.createEventNameSpace=function(t){return t+"."+this.nameSpace},jasonBaseWidget.prototype.addBaseClassName=function(t){t.classList.add(this.baseClassName)},jasonBaseWidget.prototype.addEventListener=function(t,e,n){"function"==typeof e&&this._eventListeners.push({eventName:t,listener:e,callingContext:n,enabled:!0})},jasonBaseWidget.prototype.destroy=function(){this.ui.clearUI()},jasonBaseWidget.prototype.createElement=function(t,e){return this.ui.createElement(t,e)},jasonBaseWidget.prototype.jwProc=function(t,e){switch(t){case jw.DOM.eventCodes.JGE_REDRAW:this.ui.renderUI()}},jasonBaseWidget.prototype.triggerEvent=function(t,e,n){for(var o=this._eventListeners.filter(function(e){return e.eventName==t&&e.listener&&e.enabled}),i=0;i<=o.length-1;i++){var a=o[i];a.callingContext?a.listener.call(a.callingContext,this,e):a.listener(this,e)}void 0!=n&&n()},jasonBaseWidget.prototype.enableEventListeners=function(t){this._eventListeners.forEach(function(e){e.enabled=t})},jasonBaseWidget.prototype.updateOptions=function(t){},jasonBaseWidget.prototype.validate=function(){if(!this.readonly&&this.enabled&&this._validationRules.length>0){for(var t=!1,e=0;e<=this._validationRules.length-1&&(t=this._validationRules[e].validate(),t);e++);t?this.htmlElement.classList.remove(jw.DOM.classes.JW_INVALID):this.htmlElement.classList.add(jw.DOM.classes.JW_INVALID)}},Object.defineProperty(jasonBaseWidget.prototype,"enabled",{get:function(){return this._enabled},set:function(t){this._enabled=t,this.ui._setEnable(this._enabled)},enumerable:!0,configurable:!1}),Object.defineProperty(jasonBaseWidget.prototype,"visible",{get:function(){return this._visible},set:function(t){this._visible=t,this.ui._setVisible(this._visible)},enumerable:!0,configurable:!1}),Object.defineProperty(jasonBaseWidget.prototype,"readonly",{get:function(){return this._readonly},set:function(t){this._readonly=t,this.ui._setReadOnly(this._readonly)},enumerable:!0,configurable:!1}),Object.defineProperty(jasonBaseWidgetUIHelper.prototype,"options",{get:function(){return this.widget.options},enumerable:!1,configurable:!1}),Object.defineProperty(jasonBaseWidgetUIHelper.prototype,"eventManager",{get:function(){return this.widget.eventManager},enumerable:!1,configurable:!1}),jasonBaseWidgetUIHelper.prototype.initialize=function(){this.renderUI(),this.initializeEvents()},jasonBaseWidgetUIHelper.prototype.initializeEvents=function(){},jasonBaseWidgetUIHelper.prototype.createElement=function(t,e){var n=document.createElement(t);return 1==e&&this.createdElements.push(n),n},jasonBaseWidgetUIHelper.prototype.createTextNode=function(t,e){var n=document.createTextNode(t);return 1==e&&this.createdElements.push(n),n},jasonBaseWidgetUIHelper.prototype.createWidgetContainer=function(t){t=t?t:"div";var e=this.createElement(t);return e.classList.add(this.widget.baseClassName),e},jasonBaseWidgetUIHelper.prototype.renderUI=function(){},jasonBaseWidgetUIHelper.prototype.clearUI=function(){if(this.htmlElement){var t=this.htmlElement.parent;t.removeChild(this.htmlElement),this.createdElements=[]}},jasonBaseWidgetUIHelper.prototype.localizeStrings=function(t){},jasonBaseWidgetUIHelper.prototype.updateEnabled=function(t){},jasonBaseWidgetUIHelper.prototype.updateVisible=function(t){},jasonBaseWidgetUIHelper.prototype.updateReadOnly=function(t){},jasonBaseWidgetUIHelper.prototype._setEnable=function(t){this.htmlElement&&(t?this.htmlElement.classList.remove(jw.DOM.classes.JW_DISABLED):this.htmlElement.classList.add(jw.DOM.classes.JW_DISABLED),this.updateEnabled(t))},jasonBaseWidgetUIHelper.prototype._setVisible=function(t){this.htmlElement&&(t?this.htmlElement.style.display="":this.htmlElement.style.display="none",this.updateVisible(t))},jasonBaseWidgetUIHelper.prototype._setReadOnly=function(t){this.htmlElement&&(t?this.htmlElement.classList.add(jw.DOM.classes.JW_READONLY):this.htmlElement.classList.remove(jw.DOM.classes.JW_READONLY),this.updateReadOnly(t))},jw.data={},jw.data.map=function(t,e){var n=new jw_Map;if(t instanceof jw_Map)t.forEach(function(t,e){n.set(t,e)});else if(Array.isArray(t)){var o,i=-1,a=t.length;if(1===arguments.length)for(;++i<a;)n.set(i,t[i]);else for(;++i<a;)n.set(e.call(t,o=t[i],i),o)}else for(var s in t)n.set(s,t[s]);return n};var jw_map_proto="__proto__",jw_map_zero="\0";jw_class(jw_Map,{has:jw_map_has,get:function(t){return this._[jw_map_escape(t)]},set:function(t,e){return this._[jw_map_escape(t)]=e},remove:jw_map_remove,keys:jw_map_keys,values:function(){var t=[];for(var e in this._)t.push(this._[e]);return t},entries:function(){var t=[];for(var e in this._)t.push({key:jw_map_unescape(e),value:this._[e]});return t},size:jw_map_size,empty:jw_map_empty,forEach:function(t){for(var e in this._)t.call(this,jw_map_unescape(e),this._[e])}}),jw.data.nest=function(){function t(e,s,r){if(r>=a.length)return o?o.call(i,s):n?s.sort(n):s;for(var l,d,u,h,c=-1,p=s.length,m=a[r++],g=new jw_Map;++c<p;)d=s[c],l=m.field?d[m.field]:m.callBack(d),(h=g.get(l))?h.push(d):g.set(l,[d]);return e?(d=e(),u=function(n,o){d.set(n,t(e,o,r))}):(d={},u=function(n,o){d[n]=t(e,o,r)}),g.forEach(u),d}function e(t,n){if(n>=a.length)return t;var o=[],i=s[n++];return t.forEach(function(t,i){o.push({key:t,values:e(i,n),level:n-1})}),i?o.sort(function(t,e){return i(t.key,e.key)}):o}var n,o,i={},a=[],s=[];return i.map=function(e,n){return t(n,e,0)},i.entries=function(n){return e(t(jw.data.map,n,0),0)},i.key=function(t,e){return a.push({callBack:t,field:e}),i},i.sortKeys=function(t){return s[a.length-1]=t,i},i.sortValues=function(t){return n=t,i},i.rollup=function(t){return o=t,i},i},jasonDataSource.prototype.setData=function(t){this.data=t,this.processData(),this.options.onChange&&this.options.onChange()},jasonDataSource.prototype.datesAreEqual=function(t,e){return jw.common.dateComparison(t,e)==jw.enums.comparison.equal},jasonDataSource.prototype.datesAreNotEqual=function(t,e){return!this.datesAreEqual(t,e)},jasonDataSource.prototype.valuesAreEqual=function(t,e){return e==t},jasonDataSource.prototype.valuesAreNotEqual=function(t,e){return!this.valuesAreEqual(t,e)},jasonDataSource.prototype.valueIsLessThan=function(t,e){return t<e},jasonDataSource.prototype.valueIsLessEqualThan=function(t,e){return t<=e},jasonDataSource.prototype.valueIsGreaterThan=function(t,e){return t>e},jasonDataSource.prototype.valueIsGreaterEqualThan=function(t,e){return t>=e},jasonDataSource.prototype.valueStartsWith=function(t,e){return 0==t.indexOf(e)},jasonDataSource.prototype.valueEndsWith=function(t,e){var n=t.length-e.length;return t.indexOf(e,n)==n},jasonDataSource.prototype.valueContains=function(t,e){return t.indexOf(e)>=0},jasonDataSource.prototype.processData=function(t){var e=t?t:this.data;if(e)for(var n=null,o=0;o<=e.length-1;o++)n=e[o],"object"==typeof n&&(n._jwRowId=o)},jasonDataSource.prototype.defaultSortComparison=function(t,e){return t==e?0:t<e?-1:1},jasonDataSource.prototype.dataTypeSortComparison=function(t,e){var n=this.defaultSortComparison,o=n;return t&&(o=function(e,o){return n(t(e),t(o))}),1==e?function(t,e){return-1*o(t,e)}:o},jasonDataSource.prototype.addSorting=function(t,e){e=void 0==e||e;var n=this.sorting.filter(function(e){return e.name==t.name})[0];if(n?n.reverse=t.reverse:this.sorting.push(t),1==e)return this.sort(this.sorting,this.currentDataView)},jasonDataSource.prototype.removeSorting=function(t){var e=this.sorting.filter(function(t){return t.name==sortingConfiguration.name})[0];if(e){var n=this.sorting.indexOf(e);this.sorting.splice(n,1),0==this.sorting.length?this.currentDataView=[].concat(this.data):this.applySort()}},jasonDataSource.prototype.applySort=function(){this.sort()},jasonDataSource.prototype.clearSorting=function(){this.sorting=[],0==this.filters.length?this.currentDataView=[].concat(this.data):this.applyFilters()},jasonDataSource.prototype.sort=function(t,e){var n,o,i,a=e?e:[].concat(this.data),s=[];if(t)for(var r=0;r<=t.length-1;r++)"string"==typeof t[r]&&this.addSorting(t[r],!1);for(var r=0;r<=this.sorting.length-1;r++)n=this.sorting[r],"string"==typeof n?(o=n,i=default_cmp):(o=n.name,i=this.dataTypeSortComparison(n.primer,n.reverse)),s.push({name:o,compare:i});var l=a.sort(function(t,e){for(var i,a=0;a<=s.length-1&&(i=0,n=s[a],o=n.name,i=n.compare(t[o],e[o]),0===i);a++);return i});return this.currentDataView=[].concat(l),this.currentDataView},jasonDataSource.prototype.filter=function(t,e,n,o){var i=n?n:this.data,a=[];o=!!jasonWidgets.common.assigned(o)&&o;for(var s=0;s<=t.length-1;s++){var r=t[s].filterClause,l=null;if(r){switch(r.symbol){case"=":l=jw.common.getVariableType(t[s].value)==jw.enums.dataType.date?this.datesAreEqual:this.valuesAreEqual;break;case">":l=this.valueIsGreaterThan;break;case"<":l=this.valueIsLessThan;break;case">=":l=this.valueIsGreaterEqualThan;break;case"<=":l=this.valueIsLessEqualThan;break;case"!=":l=jw.common.getVariableType(t[s].value)==jw.enums.dataType.date?this.datesAreNotEqual:this.valuesAreNotEqual;break;case"startsWith":l=this.valueStartsWith;break;case"endsWith":l=this.valueEndsWith;break;case"contains":l=this.valueContains}t[s].evaluator=l}}for(var d=!1,s=0;s<=i.length-1;s++){var u=i[s],h=u[e];"string"==typeof h&&(h=o?h:h.toLowerCase());for(var c=0;c<=t.length-1;c++){var p=t[c],m=p.value;"string"==typeof m&&(m=o?m:m.toLowerCase());var g=t[c-1];if(g){if(void 0==m)break;var E=g.logicalOperator?g.logicalOperator.operator:"or";switch(E){case"and":d=d&&p.evaluator(h,m);break;case"or":d=d||p.evaluator(h,m)}}else p.evaluator&&(d=p.evaluator(h,m))}d&&(a.push(u),d=!1)}return this.currentDataView=[].concat(a),this.currentDataView},jasonDataSource.prototype.addFilter=function(t,e,n){n=void 0!=n&&n;var o=this.filters.filter(function(e){return e.filterField==t})[0],i=this.data;if(o?o.filterValues=e:(o={filterValues:e,filterField:t},this.filters.push(o)),
n)return this.filter(e,t,i)},jasonDataSource.prototype.removeFilter=function(t){var e=-1,n=this.filters.filter(function(n,o){var i=n.filterField==t;if(i)return e=o,n})[0];if(n&&this.filters.splice(e,1),this.filters.length>0){this.currentDataView=[].concat(this.data);for(var o=0;o<=this.filters.length-1;o++){var i=this.filters[o];this.filter(i.filterValues,i.filterField,this.currentDataView)}}else this.currentDataView=[].concat(this.data)},jasonDataSource.prototype.applyFilters=function(){for(var t,e=0;e<=this.filters.length-1;e++){var n=this.filters[e];t=0==e?this.filter(n.filterValues,n.filterField,this.data):this.filter(n.filterValues,n.filterField,t)}return this.currentDataView},jasonDataSource.prototype.clearFilters=function(){this.filters=[],0==this.sorting.length?this.currentDataView=[].concat(this.data):this.sort()},jasonDataSource.prototype.search=function(t,e,n){var o=e?e:[].concat(this.data),i=[];t=n?t:t.toLowerCase();for(var a=0;a<=o.length-1;a++){var s=o[a];for(var r in s)if("string"==typeof s[r]){var l=s[r].toLowerCase();if(l.indexOf(t)>=0){i.push(s);break}}}return this.currentDataView=[].concat(i),this.currentDataView},jasonDataSource.prototype.searchByField=function(t,e,n,o,i){void 0==o&&(o=!1),void 0==i&&(i=!0);var a=n?n:[].concat(this.data),s=[];t.forEach(function(e,n){t[n]=o?e:e.toLowerCase()});for(var r=0;r<=a.length-1;r++){var l=a[r];if("string"==typeof l){var d=o?l:l.toLowerCase();d.indexOf(t[0])>=0&&s.push(l)}else{void 0===e&&jw.common.throwError(jw.errorTypes.referenceError,"Search fields are not defined");for(var u=null,h=0;h<=e.length-1;h++)if("string"==typeof l[e[h]]){var d=o?d:l[e[h]].toLowerCase();i?null==u?u=d.indexOf(t[h])>=0:void 0!=t[h]&&(u=u&&d.indexOf(t[h])>=0):d.indexOf(t[h])>=0&&s.push(l)}i&&u&&s.push(l)}}return this.currentDataView=[].concat(s),this.currentDataView},jasonDataSource.prototype.groupByField=function(t,e,n){var o=(e?e:[].concat(this.data),this.groupingExists(t));if(this.groupedData=[],!o){var i={field:t,level:this.grouping.length};this.grouping.push(i)}n&&this.groupData()},jasonDataSource.prototype.groupData=function(t){var e=t?t:[].concat(this.data);this.grouperDataSource||(this.grouperDataSource=new jasonDataSource({data:e})),this.grouperDataSource.clearSorting();for(var n=0;n<=this.grouping.length-1;n++){var o=this.grouping[n];this.grouperDataSource.addSorting({name:o.field,reverse:!1},!1)}e=this.grouperDataSource.sort();for(var i=this,a=new jw.data.nest,n=0;n<=this.grouping.length-1;n++)a.key(null,i.grouping[n].field);return a.entries(e)},jasonDataSource.prototype.groupingExists=function(t){return this.grouping.filter(function(e){return e.field==t}).length>0},jasonDataSource.prototype.removeGrouping=function(t){var e=-1;this.grouping.filter(function(n,o){if(n.field==t.field)return e=o,!0})[0],this.grouping.splice(e,1),this.groupData()},jasonDataSource.prototype.range=function(t,e){var n=this.currentDataView.slice(t,e+1);return this.grouping.length>0&&(n=this.groupData(n)),n};var jwDocumentEventManager=function(){var t=[],e=[];return{addDocumentEventListener:function(n,o){var i=e.filter(function(t){return t.event==n})[0],a={event:n,listener:o,enabled:!0,uid:jw.common.generateUUID()};return t.push(a),i||(e.push(a),document.addEventListener(n,function(e){for(var n=0;n<=t.length-1;n++)t[n].event==e.type&&t[n].enabled&&t[n].listener(e)})),t[t.length-1].uid},removeDocumentEventListener:function(e){for(var n=0;n<=t.length-1;n++)if(t[n].uid.toLowerCase()==e.toLowerCase()){document.removeEventListener(t[n].event,t[n].listener);break}t.splice(n,1)},enableEventListeners:function(e){t.forEach(function(t){t.enabled=e})}}}(),jwWindowEventManager=function(){var t=[],e=[],n=!1,o=null,i=function(){var e=t.filter(function(t){return"resize"==t.event.toLowerCase()});e.forEach(function(t){t.listener(o)}),n=!1},a=function(){var e=t.filter(function(t){return"repaint"==t.event.toLowerCase()});e.forEach(function(t){t.listener(o)}),n=!1},s=function(t){n||(n=!0),o=t,window.requestAnimationFrame(i)},r=function(t){n||(n=!0),o=t,window.requestAnimationFrame(a),window.requestAnimationFrame(r)};return{addWindowEventListener:function(n,o,i){var a=e.filter(function(t){return t.event==n})[0],l={event:n,listener:o,enabled:!0,uid:jw.common.generateUUID()};return t.push(l),a||(e.push(l),"resize"==n.toLowerCase()||"repaint"==n.toLowerCase()?"resize"==n.toLowerCase()?window.addEventListener(n,s,i):window.requestAnimationFrame(r):window.addEventListener(n,function(e){for(var n=0;n<=t.length-1;n++)t[n].event==e.type&&t[n].enabled&&t[n].listener(e)},i)),t[t.length-1].uid},removeWindowEventListener:function(e){for(var n=0;n<=t.length-1;n++)if(t[n].uid.toLowerCase()==e.toLowerCase()){window.removeEventListener(t[n].event,t[n].listener);break}t.splice(n,1)},enableEventListeners:function(e){t.forEach(function(t){t.enabled=e})}}}();jasonWidgets.localizationManager=new jasonLocalizationManager,jasonDragResize.prototype=Object.create(jasonBaseWidget.prototype),jasonDragResize.prototype.constructor=jasonDragResize,jasonBlockUI.prototype.block=function(t){this.blockElement.parentNode&&this.blockElement.parentNode.removeChild(this.blockElement);var e={left:0,top:0};t&&"absolute"!=jw.common.getComputedStyleProperty(t,"position")&&(e=jw.common.getOffsetCoordinates(t));var n=t?t:document.getElementsByTagName("html")[0];n.parentNode.appendChild(this.blockElement),this.blockTarget=n,this.blockElement.style.height=n.offsetHeight+"px",this.blockElement.style.width=n.offsetWidth+"px",this.blockElement.style.top=n.offsetTop+"px",this.blockElement.style.left=n.offsetLeft+"px",this.blockElement.style.zIndex=jw.common.getNextZIndex(),this.blockElement.style.display="",this.addWindowEvents()},jasonBlockUI.prototype.unBlock=function(){this.blockElement.style.display="none",this.removeWindowEvents()},jasonBlockUI.prototype.addWindowEvents=function(){this.options.blockKeyboard&&(this.keydownListenerId=jwWindowEventManager.addWindowEventListener(jw.DOM.events.KEY_DOWN_EVENT,this.handleWindowsKeyDown),this.focusListenerId=jwWindowEventManager.addWindowEventListener(jw.DOM.events.FOCUS_EVENT,this.handleWindowsFocus))},jasonBlockUI.prototype.removeWindowEvents=function(){this.options.blockKeyboard&&(jwWindowEventManager.removeWindowEventListener(this.keydownListenerId),jwWindowEventManager.removeWindowEventListener(this.focusListenerId))},jasonBlockUI.prototype.handleWindowsKeyDown=function(t){var e=!jw.common.contains(this.nonBlockElement,t.target);if(e){var n=jw.common.getFirstFocusableElement(this.nonBlockElement);n&&n.focus(),t.preventDefault(),t.stopPropagation()}},jasonBlockUI.prototype.handleWindowsFocus=function(t){if(""==this.blockElement.style.display){var e=!jw.common.contains(this.nonBlockElement,t.target);if(e){var n=jw.common.getFirstFocusableElement(this.nonBlockElement);n&&n.focus(),t.preventDefault(),t.stopPropagation()}}},jw.validationManager=function(){var t=[];return{validationGroups:t,validate:function(e){if(e){var n=t.filter(function(t){return e==t.name});n&&n.validate()}else t.forEach(function(t){t.validate()})},addValidationGroup:function(e){var n=t.filter(function(t){return e.name==t.name})[0];n||t.push(e)},addValidationRule:function(e){var n=t.filter(function(t){return e.ruleGroup==t.name})[0];n&&n.rules.push(e)}}}(),jasonWidgetLanguageEL.prototype=Object.create(jasonWidgetLanguage.prototype),jasonWidgetLanguageEL.prototype.constructor=jasonWidgetLanguageEL,jasonWidgets.localizationManager.languages.el=new jasonWidgetLanguageEL,jasonWidgetLanguageEN.prototype=Object.create(jasonWidgetLanguage.prototype),jasonWidgetLanguageEN.prototype.constructor=jasonWidgetLanguageEN,jasonWidgets.localizationManager.languages["en-US"]=new jasonWidgetLanguageEN,jasonWidgetLanguageES.prototype=Object.create(jasonWidgetLanguage.prototype),jasonWidgetLanguageES.prototype.constructor=jasonWidgetLanguageES,jasonWidgets.localizationManager.languages.es=new jasonWidgetLanguageES,jasonWidgetLanguageIT.prototype=Object.create(jasonWidgetLanguage.prototype),jasonWidgetLanguageIT.prototype.constructor=jasonWidgetLanguageIT,jasonWidgets.localizationManager.languages.it=new jasonWidgetLanguageIT,jasonWidgetCultureEL.prototype=Object.create(jasonWidgetCulture.prototype),jasonWidgetCultureEL.prototype.constructor=jasonWidgetCultureEL,jasonWidgets.localizationManager.cultures.el=new jasonWidgetCultureEL,jasonWidgetCultureEN_US.prototype=Object.create(jasonWidgetCulture.prototype),jasonWidgetCultureEN_US.prototype.constructor=jasonWidgetCultureEN_US,jasonWidgets.localizationManager.cultures["en-US"]=new jasonWidgetCultureEN_US,jasonWidgetCultureES.prototype=Object.create(jasonWidgetCulture.prototype),jasonWidgetCultureES.prototype.constructor=jasonWidgetCultureES,jasonWidgets.localizationManager.cultures.es=new jasonWidgetCultureES,jasonWidgetCultureIT.prototype=Object.create(jasonWidgetCulture.prototype),jasonWidgetCultureIT.prototype.constructor=jasonWidgetCultureIT,jasonWidgets.localizationManager.cultures.it=new jasonWidgetCultureIT,jasonTextbox.prototype=Object.create(jasonBaseWidget.prototype),jasonTextbox.prototype.constructor=jasonTextbox,Object.defineProperty(jasonTextbox.prototype,"value",{get:function(){return this.readValue(this._value)},set:function(t){this.compareValue(t)!=jw.enums.comparison.equal?(this._value=this.setValue(t),this.ui.inputControl.value=this.formatValue(this._value),this.ui.inputControl.setAttribute(jw.DOM.attributes.TITLE_ATTR,this.ui.inputControl.value),this.validate(),this.triggerEvent(jw.DOM.events.JW_EVENT_ON_CHANGE,this._value)):this.ui.inputControl.value=this.formatValue(this._value)},enumerable:!0,configurable:!0}),jasonTextbox.prototype.readValue=function(t){return t},jasonTextbox.prototype.formatValue=function(t){return t},jasonTextbox.prototype.compareValue=function(t){return jw.common.stringComparison(this._value,t)},jasonTextbox.prototype.setValue=function(t){return t},jasonTextbox.prototype.updateOptions=function(t){t?t:this.options;this.inputControl.setAttribute(jw.DOM.attributes.TITLE,updateOptions.placeholder)},jasonTextboxUIHelper.prototype=Object.create(jasonBaseWidgetUIHelper.prototype),jasonTextboxUIHelper.prototype.constructor=jasonTextboxUIHelper,jasonTextboxUIHelper.prototype.renderUI=function(){this.htmlElement.classList.contains(jw.DOM.classes.JW_TEXT_BOX)||(this.htmlElement.classList.add(jw.DOM.classes.JW_TEXT_BOX),this.inputControl=jw.htmlFactory.createJWTextInput(null,this.widget.options.placeholder,this.widget.readonly),this.htmlElement.appendChild(this.inputControl))},jasonTextboxUIHelper.prototype.initializeEvents=function(){this.eventManager.addEventListener(this.inputControl,jw.DOM.events.BLUR_EVENT,this.onTextInputBlur,!0),this.eventManager.addEventListener(this.inputControl,jw.DOM.events.FOCUS_EVENT,this.onTextInputFocus,!0)},jasonTextboxUIHelper.prototype.onTextInputBlur=function(t,e){"jasonTextbox"!=this.widget.nameSpace&&"jasonButtonTextbox"!=this.widget.nameSpace||(this.widget.value=this.inputControl.value),this.htmlElement.classList.remove(jw.DOM.classes.JW_FOCUSED)},jasonTextboxUIHelper.prototype.onTextInputFocus=function(t,e){this.htmlElement.classList.add(jw.DOM.classes.JW_FOCUSED)},jasonTextboxUIHelper.prototype.updateEnabled=function(t){jasonBaseWidgetUIHelper.prototype.updateEnabled.call(this,t),t?this.inputControl.removeAttribute(jw.DOM.attributes.DISABLED_ATTR):this.inputControl.setAttribute(jw.DOM.attributes.DISABLED_ATTR,!0)},jasonTextboxUIHelper.prototype.updateVisible=function(t){jasonBaseWidgetUIHelper.prototype.updateVisible.call(this,t)},jasonTextboxUIHelper.prototype.updateReadOnly=function(t){jasonBaseWidgetUIHelper.prototype.updateReadOnly.call(this,t),t?this.inputControl.setAttribute(jw.DOM.attributes.READONLY_ATTR,!0):this.inputControl.removeAttribute(jw.DOM.attributes.READONLY_ATTR)},jasonButtonTextbox.prototype=Object.create(jasonTextbox.prototype),jasonButtonTextbox.prototype.constructor=jasonButtonTextbox,jasonButtonTextboxUIHelper.prototype=Object.create(jasonTextboxUIHelper.prototype),jasonButtonTextboxUIHelper.prototype.constructor=jasonButtonTextboxUIHelper,jasonButtonTextboxUIHelper.prototype.renderUI=function(){if(jasonTextboxUIHelper.prototype.renderUI.call(this),!this.htmlElement.classList.contains(jw.DOM.classes.JW_BUTTON_TEXT_BOX)){this.htmlElement.classList.add(jw.DOM.classes.JW_BUTTON_TEXT_BOX),this.button=jw.htmlFactory.createJWButton(null,this.options.icon),this.button.setAttribute(jw.DOM.attributes.TITLE_ATTR,void 0==this.options.title?"":this.options.title),this.htmlElement.appendChild(this.button);var t=this.options.icon?35:0;this.inputControl.style.width="calc(100% - "+t+"px)",""==this.inputControl.style.width&&(this.inputControl.style.width="-webkit-calc(100% - "+t+"px)")}},jasonButtonTextboxUIHelper.prototype.initializeEvents=function(){jasonTextboxUIHelper.prototype.initializeEvents.call(this),this.eventManager.addEventListener(this.button,jw.DOM.events.CLICK_EVENT,this.onButtonClick,!0)},jasonButtonTextboxUIHelper.prototype.onButtonClick=function(t){!this.widget.readonly&&this.widget.enabled&&this.widget.triggerEvent(jw.DOM.events.JW_EVENT_ON_BUTTON_CLICK)},jasonButtonTextboxUIHelper.prototype.onTextInputBlur=function(t,e){jasonTextboxUIHelper.prototype.onTextInputBlur.call(this,t,e)},jasonButtonTextboxUIHelper.prototype.onTextInputFocus=function(t,e){jasonTextboxUIHelper.prototype.onTextInputFocus.call(this,t,e)},jasonButtonTextboxUIHelper.prototype.updateEnabled=function(t){jasonTextboxUIHelper.prototype.updateEnabled.call(this,t),t?(this.button.removeAttribute(jw.DOM.attributes.DISABLED_ATTR),this.button.classList.remove(jw.DOM.classes.JW_DISABLED)):(this.button.setAttribute(jw.DOM.attributes.DISABLED_ATTR,!0),this.button.classList.add(jw.DOM.classes.JW_DISABLED))},jasonButtonTextboxUIHelper.prototype.updateVisible=function(t){jasonTextboxUIHelper.prototype.updateVisible.call(this,t)},jasonButtonTextboxUIHelper.prototype.updateReadOnly=function(t){jasonTextboxUIHelper.prototype.updateReadOnly.call(this,t),t?this.button.setAttribute(jw.DOM.attributes.READONLY_ATTR,!0):this.button.removeAttribute(jw.DOM.attributes.READONLY_ATTR)},jasonCombobox.prototype=Object.create(jasonButtonTextbox.prototype),jasonCombobox.prototype.constructor=jasonCombobox,Object.defineProperty(jasonCombobox.prototype,"selectedItemIndex",{get:function(){var t=[];return this.ui.dropDownListButton.selectedItems.forEach(function(e,n){t.push(e._jwRowId)}),t},set:function(t){var e=Array.isArray(t)?t:[t];e.forEach(function(t){this.ui.dropDownListButton.selectItem(t)}.bind(this))},enumerable:!0,configurable:!0}),jasonCombobox.prototype.clearSelection=function(){this.ui.clearSelection()},jasonCombobox.prototype.search=function(){if(this.ui.dropDownListButton.selectedItems.length>0)this.showList();else{var t=this.options.displayFields.length>1?this.ui.inputControl.value.replace(/[\W_]+/g," "):this.ui.inputControl.value;if(this.filteredData=this.dataSource.searchByField(t.split(" "),this.options.displayFields,null,this.options.caseSentiveSearch),0==this.filteredData.length){var e={_NoData_:jasonWidgets.common.formatString(this.options.localization.combobox.notFound,[this.ui.inputControl.value])};this.filteredData.push(e)}this.ui.dropDownListButton.ui.renderListItems(this.filteredData),this.ui.inputControl.focus()}},jasonCombobox.prototype.showList=function(){this.ui.showList()},jasonCombobox.prototype.hideList=function(){this.ui.hideList(!0)},jasonCombobox.prototype.toggleDropDownList=function(){this.ui.toggleDropdownList()},jasonCombobox.prototype.selectItem=function(t){this.ui.dropDownListButton.selectItem(t),this.ui.updateInputTextFromSelection()},jasonCombobox.prototype.onDataChange=function(){this.ui.dropDownListButton.dataSource.setData(this.dataSource.data)},jasonCombobox.prototype.readValue=function(t){return Array.isArray(t)&&1==t.length?t[0]:t},jasonCombobox.prototype.formatValue=function(t){return this.ui.dropDownListButton.ui.createCaptionFromSelection()},jasonCombobox.prototype.setValue=function(t){return t},jasonCombobox.prototype.compareValue=function(t){return null==this._value&&void 0!=t?jw.enums.comparison.notEqual:Array.isArray(t)&&Array.isArray(this._value)?this._value.length==t.length?jw.enums.comparison.equal:jw.enums.comparison.notEqual:"object"==typeof t?jw.common.simpleObjectComparison(this._value,t):jw.enums.comparison.notEqual},jasonComboboxUIHelper.prototype=Object.create(jasonButtonTextboxUIHelper.prototype),jasonComboboxUIHelper.prototype.constructor=jasonComboboxUIHelper,jasonComboboxUIHelper.prototype.renderUI=function(){if(jasonButtonTextboxUIHelper.prototype.renderUI.call(this),!this.htmlElement.classList.contains(jw.DOM.classes.JW_COMBOBOX_CLASS)){this.htmlElement.classList.add(jw.DOM.classes.JW_COMBOBOX_CLASS);var t={};jw.common.extendObject(this.options,t),t.validation=[],t.events=this.options.events,t.tetheredElement=this.htmlElement;var e=function(t){this.options.multiSelect||this.dropDownListButton.hideList(),this.widget.value=[].concat(this.dropDownListButton.selectedItems),setTimeout(function(){this.inputControl.focus()}.bind(this))};t.events.push({eventName:jw.DOM.events.JW_EVENT_ON_SELECT_ITEM,listener:e.bind(this),enabled:!0}),t.events.push({eventName:jw.DOM.events.JW_EVENT_ON_UNSELECT_ITEM,listener:e.bind(this),enabled:!0}),this.dropDownListButton=new jasonDropDownListButton(this.button,t),this.button.classList.remove(jw.DOM.classes.JW_BORDERED),this.options.dropDownList&&this.inputControl.setAttribute(jw.DOM.attributes.READONLY_ATTR,!0)}},jasonComboboxUIHelper.prototype.showList=function(){this.dropDownListButton.ui.showList()},jasonComboboxUIHelper.prototype.hideList=function(t){this.dropDownListButton.ui.hideList()},jasonComboboxUIHelper.prototype.toggleDropdownList=function(){this.dropDownListButton.ui.toggleList()},jasonComboboxUIHelper.prototype.initializeEvents=function(){this.eventManager.addEventListener(this.inputControl,jw.DOM.events.CLICK_EVENT,this.oninputControlClick),this.inputControl.addEventListener(jw.DOM.events.KEY_DOWN_EVENT,this.onComboboxKeyDown),this.inputControl.addEventListener(jw.DOM.events.KEY_UP_EVENT,this.onComboboxKeyUp)},jasonComboboxUIHelper.prototype.updateInputTextFromSelection=function(){this.widget.value=[].concat(this.dropDownListButton.selectedItems)},jasonComboboxUIHelper.prototype.formatinputControl=function(t){var e=[];this.options.displayFields&&this.options.displayFields.forEach(function(n){e.push(t[n])});var n=t._NoData_;return n||(n="string"==typeof t?t:jasonWidgets.common.formatString(this.options.displayFormat,e)),t._jw_Searchable_value=e.join(" "),n},jasonComboboxUIHelper.prototype.findItem=function(t){for(var e=0;e=this.dropDownListButton.ui.dropDownList.children.length-1;e++){var n=this.dropDownListButton.ui.dropDownList.children[e].innerText||this.dropDownListButton.ui.dropDownList.children[e].textContent;if(n==t)return this.dropDownListButton.ui.dropDownList.children[e]}return null},jasonComboboxUIHelper.prototype.oninputControlClick=function(t){!this.widget.readonly&&this.widget.enabled&&1==this.options.dropDownList&&this.toggleDropdownList()},jasonComboboxUIHelper.prototype.oninputControlChange=function(t){!this.widget.readonly&&this.widget.enabled&&(this.clearSelection(),t.stopPropagation())},jasonComboboxUIHelper.prototype.clearSelection=function(){this.dropDownListButton.ui.clearSelection()},jasonComboboxUIHelper.prototype.onTextInputBlur=function(t,e){jasonTextboxUIHelper.prototype.onTextInputBlur.call(this,t,e)},jasonComboboxUIHelper.prototype.onTextInputFocus=function(t,e){jasonTextboxUIHelper.prototype.onTextInputFocus.call(this,t,e)},jasonComboboxUIHelper.prototype.onComboboxKeyDown=function(t){if(!this.widget.readonly&&this.widget.enabled){var e=t.which||t.keyCode;switch(e){case 27:this.hideList(),this.inputControl.focus()}}},jasonComboboxUIHelper.prototype.onComboboxKeyUp=function(t){if(!this.widget.readonly&&this.widget.enabled){var e=t.which||t.keyCode,n=!1;switch(e){case jw.keycodes.backspace:case jw.keycodes["delete"]:this.widget.clearSelection();case jw.keycodes.downArrow:n=!0}if(this.dropDownListButton.selectedItems.length>0){var o=this,i=0==this.dropDownListButton.selectedItems.filter(function(t){return t._jw_Searchable_value==o.inputControl.value}).length;i&&this.widget.clearSelection()}(e>46||n)&&(this.showList(),this.options.autoFilter&&this.widget.search(),this.inputControl.focus(),e==jw.keycodes.downArrow&&this.dropDownListButton.ui.scrollItemIntoView(!0)),t.stopPropagation()}},jasonComboboxUIHelper.prototype.updateEnabled=function(t){jasonButtonTextboxUIHelper.prototype.updateEnabled.call(this,t),this.dropDownListButton.enabled=t},jasonComboboxUIHelper.prototype.updateVisible=function(t){jasonButtonTextboxUIHelper.prototype.updateVisible.call(this,t)},jasonComboboxUIHelper.prototype.updateReadOnly=function(t){jasonButtonTextboxUIHelper.prototype.updateReadOnly.call(this,t),this.dropDownListButton.readonly=t},jasonMenu.prototype=Object.create(jasonBaseWidget.prototype),jasonMenu.prototype.constructor=jasonMenu,jasonMenuItem.prototype=Object.create(jasonBaseWidget.prototype),jasonMenuItem.prototype.constructor=jasonMenuItem,jasonMenuItem.prototype.assign=function(t){this.caption=t.caption,this.title=t.title,this.enabled=t.enabled,this.items=t.items,this.content=t.content,this.level=t.level,this.name=t.name,this.hasCheckBox=t.hasCheckBox,this.checked=t.checked,this.clickable=t.clickable,this.icon=t.icon,this.isDivider=t.isDivider},jasonMenuWidgetParser.prototype.constructor=jasonMenuWidgetParser,jasonMenuWidgetDOMParser.prototype=Object.create(jasonMenuWidgetParser.prototype),jasonMenuWidgetDOMParser.prototype.constructor=jasonMenuWidgetDOMParser,jasonMenuWidgetJSONParser.prototype=Object.create(jasonMenuWidgetParser.prototype),jasonMenuWidgetJSONParser.prototype.constructor=jasonMenuWidgetJSONParser,jasonMenuWidgetParser.prototype.createSubItemsContainer=function(){var t=this.menuUI.createElement("div");return t.classList.add(jw.DOM.classes.JW_MENU_ITEMS_CONTAINER_CLASS),t.style.display="none",t},jasonMenuWidgetParser.prototype.createMenuItemCaption=function(t,e){var n=jasonWidgets.common.getNodeText(t);n&&(e.caption=n.textContent.trim(),jasonWidgets.common.removeNodeText(t));var o=this.menuUI.createElement("div");if(o.classList.add(jw.DOM.classes.JW_MENU_ITEM_CAPTION),e.isDivider)o.appendChild(this.menuUI.createElement("hr")),t.classList.add(jw.DOM.classes.JW_MENU_ITEM_DIVIDER),t.setAttribute(jw.DOM.classes.JW_MENU_ITEM_NO_HIGHLIGHT_ATTR,"true");else{var i=this.menuUI.createElement("div");i.classList.add(jw.DOM.classes.JW_MENU_ITEM_CAPTION),i.appendChild(this.menuUI.createTextNode(e.caption)),o.appendChild(i)}t._jasonMenuItemCaptionContainer=o,t.appendChild(o)},jasonMenuWidgetParser.prototype.createMenuItemArrowIcon=function(t){if(t._jasonMenuItemCaptionContainer){var e=jw.htmlFactory.createJWButton(null,"horizontal"==this.menuUI.options.orientation&&0==menuLevel?jw.DOM.icons.CHEVRON_DOWN:jw.DOM.icons.CHEVRON_RIGHT);t._jasonMenuItemCaptionContainer.appendChild(e)}},jasonMenuWidgetParser.prototype.createMenuItemIcon=function(t,e){if(t._jasonMenuItemCaptionContainer){var n=this.menuUI.createElement("div");n.classList.add(jw.DOM.classes.JW_MENU_ICON);var o=this.menuUI.createElement("i");o.className=e;t.getAttribute(jw.DOM.attributes.JW_MENU_ITEM_LEVEL_ATTRIBUTE);n.appendChild(o),t._jasonMenuItemCaptionContainer.insertBefore(n,t._jasonMenuItemCaptionContainer.firstChild)}},jasonMenuWidgetParser.prototype.mustAddArrowIcon=function(t){var e=!1;return e=t.children.length>0,1==t.children.length&&t.children[0].className==JW_MENU_ITEM_CAPTION&&(e=!1),e},jasonMenuWidgetDOMParser.prototype.createMenuItem=function(t){var e=new jasonMenuItem(t,null,null),n=t.getAttribute(jw.DOM.attributes.JW_MENU_ITEM_LEVEL_ATTRIBUTEJW_MENU_ITEM_LEVEL_ATTRIBUTE);return n&&(e.level=parseInt(n)),jasonWidgets.common.setData(t,jw.DOM.attributeValues.JW_MENU_ITEM_DATA_KEY,e),e},jasonMenuWidgetDOMParser.prototype.setMenuItemEvents=function(t,e){this.menuUI.eventManager.addEventListener(t,jw.DOM.events.CLICK_EVENT,this.menuUI.onItemClick,!0),this.menuUI.eventManager.addEventListener(t,jw.DOM.events.TOUCH_START_EVENT,this.menuUI.onItemTouch,!0),this.menuUI.eventManager.addEventListener(t,jw.DOM.events.MOUSE_ENTER_EVENT,this.menuUI.onItemMouseEnter,!0),this.menuUI.eventManager.addEventListener(t,jw.DOM.events.MOUSE_LEAVE_EVENT,this.menuUI.onItemMouseLeave,!0),this.menuUI.eventManager.addEventListener(t,jw.DOM.events.KEY_DOWN_EVENT,this.menuUI.onItemKeyDown,!0);var n=t.querySelectorAll(".jw-menu-item-arrow .jw-button")[0];n&&this.menuUI.eventManager.addEventListener(n,jw.DOM.events.CLICK_EVENT,this.menuUI.onItemArrowClick,!0),e.hasCheckBox&&this.menuUI.eventManager.addEventListener(e.checkBoxElement,jw.DOM.events.CLICK_EVENT,this.menuUI.onCheckboxClick)},jasonMenuWidgetDOMParser.prototype.populateMenu=function(t){for(var e=this,n=this.menuUI.widget,o=function(t,n){for(var i=0;i<=n.children.length-1;i++){var a=n.children[i];if("UL"==a.tagName){var s=e.createSubItemsContainer(),r=e.menuUI.createElement("ul");s.appendChild(r),n.appendChild(s),n._jasonMenuItemsContainer=s,jw.common.moveChildrenTo(a,r),a.setAttribute("fordelete",!0);for(var l=0;l<=r.children.length-1;l++){var d=r.children[l],u=e.createMenuItem(d);jw.htmlFactory.convertToJWMenuItem(e.menuUI.options.orientation,d,u),e.setMenuItemEvents(d,u),t.items.push(u),u.parent=t,u.level=t.level+1,o(u,d)}}else"LI"==a.tagName&&jw.htmlFactory.convertToJWMenuItem(e.menuUI.options.orientation,a)}for(var h=jw.common.getElementsByAttribute(n,"fordelete","true"),i=0;i<=h.length-1;i++)n.removeChild(h[i])},i=0;i<=t.children.length-1;i++){var a=t.children[i];a.setAttribute(jw.DOM.attributes.JW_MENU_ITEM_LEVEL_ATTRIBUTE,0);var s=this.createMenuItem(a);jw.htmlFactory.convertToJWMenuItem("horizontal"==this.menuUI.options.orientation?"vertical":"horizontal",a,s),this.setMenuItemEvents(a,s),s.level=0,n.items.push(s),o(s,a)}return n},jasonMenuWidgetJSONParser.prototype.populateMenu=function(t){for(var e=this,n=function(t,i){var a,s;t.items.length>0&&(s=e.createSubItemsContainer(),a=e.menuUI.createElement("ul"),s.appendChild(a),t.htmlElement.appendChild(s),t.htmlElement._jasonMenuItemsContainer=s);for(var r=void 0!=a?a:o,l=0;l<=t.items.length-1;l++){var d,u=jw.common.isJWWidget(t.items[l])?t.items[l]:null;null==u?(d=e.menuUI.createElement("li"),u=new jasonMenuItem(d,null,null),u.assign(t.items[l]),u.clickable=void 0==u.clickable||u.clickable,u.parent=t,u.level=t.level+1,e.createMenuElementFromItem(u,d)):d=e.createMenuElementFromItem(u,u.htmlElement),r.appendChild(d),t.items[l]=u,u.items.length>0&&n(u,r)}},o=this.menuUI.ulMenuElement,i=0;i<=t.items.length-1;i++){var a,s=jw.common.isJWWidget(t.items[i])?t.items[i]:null;null==s?(a=e.menuUI.createElement("li"),s=new jasonMenuItem(a,null,null),s.assign(t.items[i]),s.clickable=void 0==s.clickable||s.clickable,s.level=0,e.createMenuElementFromItem(s,a)):a=e.createMenuElementFromItem(s,s.htmlElement),a.setAttribute(jw.DOM.attributes.JW_MENU_ITEM_LEVEL_ATTRIBUTE,s.level),o.appendChild(a),t.items[i]=s,n(s,o)}return o},jasonMenuWidgetJSONParser.prototype.createMenuElementFromItem=function(t,e){var n;if(t.content){if(n=void 0===e?this.menuUI.createElement("li"):e,t.content.tagName)n.appendChild(t.content);else{var o=this.menuUI.createElement("div");o.innerHTML=t.content,n.appendChild(o)}n.classList.add(jw.DOM.classes.JW_MENU_ITEM_CONTENT),t.content.classList.add(jw.DOM.classes.JW_MENU_ITEM_CONTENT_CLASS)}else{if(void 0===e?n=jw.htmlFactory.createJWMenuItem(this.menuUI.options.orientation,t):(n=e,jw.htmlFactory.createJWMenuItem(this.menuUI.options.orientation,t,n)),t.htmlElement=n,t.isDivider&&(n.appendChild(this.menuUI.createElement("hr")),n.classList.add(jw.DOM.classes.JW_MENU_ITEM_DIVIDER),n.setAttribute(jw.DOM.attributeValues.JW_MENU_ITEM_NO_HIGHLIGHT_ATTR,"true")),t.hasCheckBox){var i=jw.common.getElementsByAttribute(n,"type","checkbox")[0];void 0!=i&&(t.checkBoxElement=i,this.menuUI.eventManager.addEventListener(i,jw.DOM.events.CLICK_EVENT,this.menuUI.onCheckboxClick))}if(!t.isDivider){this.menuUI.eventManager.addEventListener(n,jw.DOM.events.CLICK_EVENT,this.menuUI.onItemClick,!0),this.menuUI.eventManager.addEventListener(n,jw.DOM.events.MOUSE_ENTER_EVENT,this.menuUI.onItemMouseEnter),this.menuUI.eventManager.addEventListener(n,jw.DOM.events.MOUSE_LEAVE_EVENT,this.menuUI.onItemMouseLeave),this.menuUI.eventManager.addEventListener(n,jw.DOM.events.KEY_DOWN_EVENT,this.menuUI.onItemKeyDown,!0);var a=n.querySelectorAll(".jw-menu-item-arrow .jw-button")[0];a&&this.menuUI.eventManager.addEventListener(a,jw.DOM.events.CLICK_EVENT,this.menuUI.onItemArrowClick,!0)}}return void 0==e&&jasonWidgets.common.setData(n,jw.DOM.attributeValues.JW_MENU_ITEM_DATA_KEY,t),n},jasonMenuUIHelper.prototype=Object.create(jasonBaseWidgetUIHelper.prototype),jasonMenuUIHelper.prototype.constructor=jasonMenuUIHelper,jasonMenuUIHelper.prototype.showMenu=function(t,e,n){if(t){this.invokableElement=t;var o=t.getBoundingClientRect();this.menuContainer.style.display="",this.ulMenuElement.style.width=this.getWiderElementWidthOfUL(this.ulMenuElement)+"px",this.menuContainer.style.top=n?n+"px":o.top+t.offsetHeight+1+"px";var i=window.innerWidth||document.documentElement.clientWidth||document.body.clientWidth;this.menuContainer.style.left=e?e+"px":o.left+this.menuContainer.offsetWidth>=i?o.left-this.menuContainer.offsetWidth+"px":o.left+"px",this.menuContainer.style.zIndex=jw.common.getNextAttributeValue("z-index")+1,this.widget.triggerEvent(jw.DOM.events.JW_EVENT_ON_SHOW);var a=jw.common.getFirstFocusableElement(this.menuContainer);a&&a.focus()}},jasonMenuUIHelper.prototype.hideMenu=function(){for(var t=this.menuContainer.getElementsByClassName(jw.DOM.classes.JW_MENU_ITEMS_CONTAINER_CLASS),e=0;e<=t.length-1;e++)t[e].style.display="none";for(var n=this.menuContainer.getElementsByClassName(jw.DOM.classes.JW_MENU_ITEM_CLASS_ACTIVE),e=0;e<=n.length-1;e++)n[e].classList.remove(jw.DOM.classes.JW_MENU_ITEM_CLASS_ACTIVE);this.menuContainer.style.display="none",this.widget.triggerEvent(jw.DOM.events.JW_EVENT_ON_HIDE)},jasonMenuUIHelper.prototype.getWiderElementWidthOfUL=function(t){var e=0;if(t){if(t._jasonMenuWidgetWiderElementWidth)return t._jasonMenuWidgetWiderElementWidth;var n=t.getElementsByClassName(jw.DOM.classes.JW_MENU_ITEM_CONTENT_CLASS);n.length>0&&(t._jasonMenuWidgetWiderElementWidth=n[0].offsetWidth);for(var o=0;o<=t.children.length-1;o++){var i=(t.children[o].getElementsByClassName(jw.DOM.classes.JW_MENU_ITEM_CAPTION)[0],null),a=t.children[o].getElementsByClassName(jw.DOM.classes.JW_MENU_ITEM_ICON)[0],s=t.children[o].getElementsByClassName(jw.DOM.classes.JW_MENU_ITEM_ARROW)[0],r=t.children[o].getElementsByClassName(jw.DOM.classes.JW_MENU_ITEM_CHECKBOX)[0];a=a?a.offsetWidth:0,s=s?s.offsetWidth:0,r=r?r.offsetWidth:0,i=t.children[o].getElementsByClassName(jw.DOM.classes.JW_MENU_ITEM_CAPTION)[0];var l=0;if(i){var d=jasonWidgets.common.getComputedStyleProperty(i,"font-weight");d=d+" "+jasonWidgets.common.getComputedStyleProperty(i,"font-size"),d=d+" "+jasonWidgets.common.getComputedStyleProperty(i,"font-family"),d=d.replace("'",""),l=jasonWidgets.common.getTextWidth(i.textContent.trim(),d),l>300&&(l=300)}var u=l>t.children[o].offsetWidth?t.children[o].offsetWidth+l:t.children[o].offsetWidth+5;u>e&&(e=u+a+s+r)}return t._jasonMenuWidgetWiderElementWidth?t._jasonMenuWidgetWiderElementWidth=e>t._jasonMenuWidgetWiderElementWidth?e:t._jasonMenuWidgetWiderElementWidth:t._jasonMenuWidgetWiderElementWidth=e,t._jasonMenuWidgetWiderElementWidth}return e},jasonMenuUIHelper.prototype.getMenuItemFromEvent=function(t){var e="LI"==t.target.tagName?t.target:jasonWidgets.common.getParentElement("LI",t.target);return jasonWidgets.common.getData(e,jw.DOM.attributeValues.JW_MENU_ITEM_DATA_KEY)},jasonMenuUIHelper.prototype.onCheckboxClick=function(t){!this.widget.readonly&&this.widget.enabled&&(this.toggleCheckBox(t),t.stopPropagation())},jasonMenuUIHelper.prototype.toggleCheckBox=function(t){if(!this.widget.readonly&&this.widget.enabled){
var e=this.getMenuItemFromEvent(t);if(e&&e.checkBoxElement&&e.enabled){var n={event:t,item:e,checked:e.checkBoxElement.checked,cancel:!1};this.widget.triggerEvent(jw.DOM.events.JW_EVENT_ON_JW_MENU_CHECKBOX_CLICKED,n),n.cancel&&(e.checkBoxElement.checked=!e.checkBoxElement.checked)}}},jasonMenuUIHelper.prototype.onItemClick=function(t){if(!this.widget.readonly&&this.widget.enabled){var e=this.getMenuItemFromEvent(t);e&&e.clickable&&e.enabled&&(this.widget.triggerEvent(jw.DOM.events.JW_EVENT_ON_JW_MENU_ITEM_CLICKED,{event:t,item:e,uiHelper:this}),this.widget.options.autoHide&&!this.disableMouseEvents&&this.hideMenu()),t.stopPropagation()}},jasonMenuUIHelper.prototype.onItemArrowClick=function(t){if(!this.widget.readonly&&this.widget.enabled){var e=this.getMenuItemFromEvent(t);if(e){if(this.previousShowMenuItem&&e.level<=this.previousShowMenuItem.level)for(var n=this.previousShowMenuItem;n&&n.level>=e.level;)this.hideMenuItemContents(n),n=n.parent;this.showMenuItemContents(e),e.htmlElement._jasonMenuItemsContainer&&(focusable=jw.common.getFirstFocusableElement(e.htmlElement._jasonMenuItemsContainer),focusable&&focusable.focus())}}},jasonMenuUIHelper.prototype.onItemTouch=function(t){if(!this.widget.readonly&&this.widget.enabled){t.preventDefault(),t.stopPropagation();var e=this.getMenuItemFromEvent(t);if(this.previousShowMenuItem&&e.level<=this.previousShowMenuItem.level)for(var n=this.previousShowMenuItem;n&&n.level>=e.level;)this.hideMenuItemContents(n),n=n.parent;this.previousShowMenuItem=e,this.showMenuItemContents(e)}},jasonMenuUIHelper.prototype.onItemKeyDown=function(t){var e=t.keyCode||t.which;switch(e){case 27:var n=null,o=this.getMenuItemFromEvent(t);0==o.level&&this.options.invokable?(this.hideMenu(),n=jw.common.getFirstFocusableElement(this.invokableElement),n&&n.focus()):(o=o.parent?o.parent:o,this.hideMenuItemContents(o,!0),n=jw.common.getFirstFocusableElement(o.htmlElement),n&&n.focus())}},jasonMenuUIHelper.prototype.showMenuItemContents=function(t){if(!this.widget.readonly&&this.widget.enabled&&t){var e=t.htmlElement;!e.getAttribute(jw.DOM.attributes.JW_MENU_ITEM_NO_HIGHLIGHT_ATTR)&&t.enabled&&e.classList.add(jw.DOM.classes.JW_MENU_ITEM_CLASS_ACTIVE);var n=!e._jasonMenuItemsContainer&&t.enabled||t.enabled&&"none"==e._jasonMenuItemsContainer.style.display;if(n){var o=e.parentNode==this.ulMenuElement?this.options.orientation.toLowerCase():null;this.placeMenuItemsContainer(e._jasonMenuItemsContainer,e,o),t.triggerEvent(jw.DOM.events.JW_EVENT_ON_JW_MENU_ITEM_CONTENT_SHOW),this.previousShowMenuItem=t}}},jasonMenuUIHelper.prototype.hideMenuItemContents=function(t,e){if(t){var n=t.htmlElement;this.options._debug||this.disableMouseEvents&&!e||n._jasonMenuItemsContainer&&this.canHideSubMenu&&(n._jasonMenuItemsContainer.style.display="none",this.previousShowMenuItem=null),t.enabled&&n.classList.remove(jw.DOM.classes.JW_MENU_ITEM_CLASS_ACTIVE)}},jasonMenuUIHelper.prototype.onItemMouseEnter=function(t){this.showMenuItemContents(this.getMenuItemFromEvent(t))},jasonMenuUIHelper.prototype.onItemMouseLeave=function(t){this.hideMenuItemContents(this.getMenuItemFromEvent(t))},jasonMenuUIHelper.prototype.placeMenuItemsContainer=function(t,e,n){if(t){t.style.position="absolute";var o="horizontal"==n?e.offsetTop+e.offsetHeight+"px":e.offsetTop-e.offsetHeight/5.5+"px";t.style.top=o;var i=350-35*this.options.animation.delay;jasonWidgets.common.fadeIn(t,i);var a=t.getElementsByTagName("UL")[0];t.style.display="";var s=a.querySelectorAll(".jw-menu-item-content")[0];if(s){var r=a.querySelectorAll(".menu-content")[0];r&&(r.style.height=s.offsetHeight+"px")}var l=this.getWiderElementWidthOfUL(a),d=10;l>0&&(t.style.width=l+"px",d=0);var u=jasonWidgets.common.getOffsetCoordinates(e),h=window.innerWidth||document.documentElement.clientWidth||document.body.clientWidth,c=t.offsetWidth+u.left+e.offsetWidth>=h?e.offsetLeft-t.offsetWidth:"horizontal"==n?e.offsetLeft:e.offsetWidth;if(t.style.left=c+"px",""==t.style.zIndex)t.style.zIndex=jw.common.getNextZIndex();else{var p=parseInt(t.style.zIndex),m=jw.common.getNextZIndex();p<m&&(t.style.zIndex=m)}}},jasonMenuUIHelper.prototype.createMenu=function(){var t=this;if("UL"==this.htmlElement.tagName){var e=new jasonMenuWidgetDOMParser(this);return this.options.invokable?(this.menuContainer.style.display="none",this.menuContainer.style.position="absolute",this.menuContainer.appendChild(this.ulMenuElement),document.body.appendChild(this.menuContainer)):(this.htmlElement.parentNode.replaceChild(this.menuContainer,this.htmlElement),this.menuContainer.appendChild(this.htmlElement)),e.populateMenu(this.ulMenuElement)}if(this.options.menu){var n=new jasonMenuWidgetJSONParser(this);this.ulMenuElement=n.populateMenu(this.options.menu),"horizontal"==this.widget.options.orientation.toLowerCase()&&this.ulMenuElement.classList.add(jw.DOM.classes.JW_MENU_HORIZONTAL),this.menuContainer.appendChild(this.ulMenuElement),this.options.invokable?(this.menuContainer.style.display="none",this.menuContainer.style.position="absolute",this.eventManager.addEventListener(this.menuContainer,jw.DOM.events.MOUSE_LEAVE_EVENT,function(e){t.disableMouseEvents||t.options._debug||(t.options.hideDelay?(t.canHideMenu=!0,setTimeout(function(){t.canHideMenu&&t.hideMenu()},t.options.hideDelay)):t.hideMenu())}),this.eventManager.addEventListener(this.menuContainer,jw.DOM.events.MOUSE_ENTER_EVENT,function(e){t.options._debug||(t.canHideMenu&&(t.canHideMenu=!1),t.disableMouseEvents&&(t.disableMouseEvents=!1))}),document.body.appendChild(this.menuContainer)):this.htmlElement.appendChild(this.menuContainer),this.eventManager.addEventListener(this.ulMenuElement,jw.DOM.events.MOUSE_ENTER_EVENT,function(e){t.disableMouseEvents=!1}),this.eventManager.addEventListener(this.ulMenuElement,jw.DOM.events.MOUSE_DOWN_EVENT,function(e){var n=jasonWidgets.common.getParentElement("LI",e.target),o=jasonWidgets.common.getData(n,jw.DOM.attributeValues.JW_MENU_ITEM_DATA_KEY);o&&o.content&&jw.common.isMouseEventOutOfContainer(t.ulMenuElement,e)&&(t.disableMouseEvents=!0)},!0)}},jasonMenuUIHelper.prototype.updateEnabled=function(t){jasonBaseWidgetUIHelper.prototype.updateEnabled.call(this,t);for(var e=this.htmlElement.getElementsByTagName("a"),n=0;n<=e.length-1;n++)t?(e[n].removeAttribute(jw.DOM.attributes.DISABLED_ATTR),e[n].classList.remove(jw.DOM.classes.JW_DISABLED)):(e[n].setAttribute(jw.DOM.attributes.DISABLED_ATTR,!0),e[n].classList.add(jw.DOM.classes.JW_DISABLED));for(var o=this.htmlElement.getElementsByTagName("input"),n=0;n<=o.length-1;n++)t?(o[n].removeAttribute(jw.DOM.attributes.DISABLED_ATTR),o[n].classList.remove(jw.DOM.classes.JW_DISABLED)):(o[n].setAttribute(jw.DOM.attributes.DISABLED_ATTR,!0),o[n].classList.add(jw.DOM.classes.JW_DISABLED))},jasonMenuUIHelper.prototype.updateVisible=function(t){jasonBaseWidgetUIHelper.prototype.updateVisible.call(this,t)},jasonMenuUIHelper.prototype.updateReadOnly=function(t){jasonBaseWidgetUIHelper.prototype.updateReadOnly.call(this,t);for(var e=this.htmlElement.getElementsByTagName("a"),n=0;n<=e.length-1;n++)t?(e[n].removeAttribute(jw.DOM.attributes.READONLY_ATTR),e[n].classList.remove(jw.DOM.classes.JW_READONLY)):(e[n].setAttribute(jw.DOM.attributes.READONLY_ATTR,!0),e[n].classList.add(jw.DOM.classes.JW_READONLY));for(var o=this.htmlElement.getElementsByTagName("input"),n=0;n<=o.length-1;n++)t?(o[n].removeAttribute(jw.DOM.attributes.READONLY_ATTR),o[n].classList.remove(jw.DOM.classes.JW_READONLY)):(o[n].setAttribute(jw.DOM.attributes.READONLY_ATTR,!0),o[n].classList.add(jw.DOM.classes.JW_READONLY))},jasonContextMenuUIHelper.prototype=Object.create(jasonMenuUIHelper.prototype),jasonContextMenuUIHelper.prototype.constructor=jasonContextMenuUIHelper,jasonContextMenuUIHelper.prototype.initializeEvents=function(){this.eventManager.addEventListener(this.options.target,jw.DOM.events.CONTEXT_MENU_EVENT,this.showContextMenu)},jasonContextMenuUIHelper.prototype.showContextMenu=function(t){2==t.button&&(t.preventDefault(),t.stopPropagation(),this.showMenu(t.target,t.pageX,t.pageY))},jasonContextMenuUIHelper.prototype.onContextItemClick=function(t,e){var n={event:event,item:e,checked:e.checkBoxElement.checked,cancel:!1};this.widget.triggerEvent(JW_EVENT_ON_JW_MENU_CHECKBOX_CLICKED,n),this.hideMenu(),this.options.target.focus(),t.stopPropagation(),t.preventDefault()},jasonCalendar.prototype=Object.create(jasonBaseWidget.prototype),jasonCalendar.prototype.constructor=jasonCalendar,Object.defineProperty(jasonCalendar.prototype,"date",{get:function(){return this._date},set:function(t){this._setDate(t)},enumerable:!0,configurable:!0}),Object.defineProperty(jasonCalendar.prototype,"specialDates",{get:function(){return this._specialDates},enumerable:!0,configurable:!0}),Object.defineProperty(jasonCalendar.prototype,"mode",{get:function(){return this._mode},set:function(t){this._setMode(t)},enumerable:!1,configurable:!1}),jasonCalendar.prototype._setDate=function(t){t&&0!=jw.common.dateComparison(this._date,t)&&(this._date=t,this.triggerEvent(jw.DOM.events.JW_EVENT_ON_CHANGE,this._date))},jasonCalendar.prototype._setMode=function(t){t&&this._mode!=t&&(this._mode=t,this.ui.renderCalendarItems(this.navigate(null)),this.triggerEvent(jw.DOM.events.JW_EVENT_JW_CALENDAR_MODE_CHANGE,this._mode))},jasonCalendar.prototype.addSpecialDate=function(t,e,n){this.specialDates.push({date:t,css:e,toolTip:n})},jasonCalendar.prototype.parseSpecialDates=function(t){if(t.specialDates)for(var e=0;e<=t.specialDates.length-1;e++){var n=t.specialDates[e];if(n.date){var o="date"==typeof n.date?n.date:Date.parse(n.date);if(!isNaN(o)){var i=new Date;i.setTime(o),this.specialDates.push({date:i,tooltip:n.tooltip,cssClass:n.cssClass,recurring:n.recurring||!1})}}}},jasonCalendar.prototype.createCalendarItem=function(t,e,n){var o=new jasonCalendarItem;o.year=n,o.month=e,o.day=t.getDate(),o.date=t;var i=t.getDay();i=this.options.localization.days[i],o.dayName=i.name,o.dayShortName=i.shortName;var a=this.options.localization.months[e-1<0?0:e-1];return o.monthName=a.name,o.monthShortName=a.shortName,o.displayValue=o.day,o},jasonCalendar.prototype.generateDays=function(t,e){var n=[],o=jasonWidgets.common.daysInMonth(t,e),i=new Date(t,e-1,1),a=i.getDay(),s=864e5;this.options.firstDayOfWeek>6&&(this.options.firstDayOfWeek=0);var r=0;this.options.firstDayOfWeek!=a&&(r=a<this.options.firstDayOfWeek?7-Math.abs(this.options.firstDayOfWeek-a):Math.abs(this.options.firstDayOfWeek-a));for(var l=r;l>=1;l--){var d=i.getTime()-l*s,u=new Date;u.setTime(d);var h=this.createCalendarItem(u,12==e?1:e-1,12==e?t-1:t);h.classList.push(jw.DOM.classes.JW_CALENDAR_ITEM_OUT_CURRENT_SCOPE),n.push(h)}for(var c=1;c<=o;c++)n.push(this.createCalendarItem(new Date(t,e-1,c),e,t));for(var p=42-n.length,m=new Date(t,e-1,o),g=1;g<=p;g++){var E=m.getTime()+g*s,_=new Date;_.setTime(E);var h=this.createCalendarItem(_,12==e?1:e+1,12==e?t+1:t);h.classList.push(jw.DOM.classes.JW_CALENDAR_ITEM_OUT_CURRENT_SCOPE),n.push(h)}return this.currentCalendarItems=n,n},jasonCalendar.prototype.generateMonths=function(t){t=t?t:this.date;for(var e=[],n=0;n<=11;n++){var o=new jasonCalendarItem;o.month=n+1;var i=this.options.localization.months[n];o.monthName=i.name,o.monthShortName=i.shortName,o.displayValue=i.shortName,o.day=1,o.year=t.getFullYear(),e.push(o)}return this.currentCalendarItems=e,e},jasonCalendar.prototype.generateYears=function(t,e){var n=[],o=new jasonCalendarItem;o.year=t-1,o.displayValue=o.year,o.classList.push(jw.DOM.classes.JW_CALENDAR_ITEM_OUT_CURRENT_SCOPE),n.push(o);for(var i=t;i<=e;i++){var a=new jasonCalendarItem;a.year=i,a.decadeStart=t,a.decadeStop=e,a.displayValue=a.year,n.push(a)}var s=new jasonCalendarItem;return s.year=e+1,s.displayValue=s.year,s.classList.push(jw.DOM.classes.JW_CALENDAR_ITEM_OUT_CURRENT_SCOPE),n.push(s),this.currentCalendarItems=n,n},jasonCalendar.prototype.generateDecades=function(t,e){for(var n=[],o=0;o<=9;o++){var i=new jasonCalendarItem,a=n[o-1];i.decadeStart=0==o?t:a.decadeStop+1,i.decadeStop=0==o?t+9:i.decadeStart+9,i.centuryStart=t,i.centuryStop=e,i.displayValue=i.decadeStart+" - \r\n"+i.decadeStop,n.push(i)}return this.currentCalendarItems=n,n},jasonCalendar.prototype.generateCenturies=function(t,e){var n=[],o=new jasonCalendarItem;o.centuryStart=t-100,o.centuryStop=o.centuryStart+99,o.classList.push(jw.DOM.classes.JW_CALENDAR_ITEM_OUT_CURRENT_SCOPE),o.displayValue=o.centuryStart+" - \r\n"+o.centuryStop,n.push(o);for(var i=0;i<=9;i++){var a=new jasonCalendarItem,s=n[i-1];a.centuryStart=0==i?t:s.centuryStop+1,a.centuryStop=0==i?t+99:a.centuryStart+99,a.mileniumStart=t,a.mileniumStop=e,a.displayValue=a.centuryStart+" - \r\n"+a.centuryStop,n.push(a)}var r=new jasonCalendarItem;return r.centuryStart=e+1,r.centuryStop=r.centuryStart+99,r.classList.push(jw.DOM.classes.JW_CALENDAR_ITEM_OUT_CURRENT_SCOPE),r.displayValue=centuryAftercCenturyStart+" - \r\n"+r.centuryStop,n.push(r),this.currentCalendarItems=n,n},jasonCalendar.prototype.generateCalendarItems=function(t){var e=t?t:this.date,n=e.getFullYear(),o=[];switch(this._mode){case"days":o=this.generateDays(e.getFullYear(),e.getMonth()+1);break;case"months":o=this.generateMonths(t);break;case"years":var i=parseInt(n.toString().substring(0,3)+"0"),a=i+9;o=this.generateYears(i,a);break;case"decades":var s=parseInt(n.toString().substring(0,2)+"00"),r=s+99;o=this.generateDecades(s,r);break;default:o=this.generateDays(e.getYear(),e.getMonth())}return this.currentCalendarItems=o,{calendarItems:this.currentCalendarItems,navDate:t}},jasonCalendar.prototype.getRowDivisionCount=function(){switch(this._mode){case"days":return 7;case"months":return 3;case"years":return 4;case"decades":return 3;default:return 7}},jasonCalendar.prototype.navigateBack=function(){this.ui.renderCalendarItems(this.navigate("back"))},jasonCalendar.prototype.navigateForward=function(){this.ui.renderCalendarItems(this.navigate("forward"))},jasonCalendar.prototype.navigate=function(t){var e=null,n=this._navigationDate.getMonth(),o=this._navigationDate.getFullYear(),i=this.currentCalendarItems[0],a=this.currentCalendarItems[this.currentCalendarItems.length-1];switch(this._mode){case"days":"back"==t&&(o=0==n?o-1:o,n=0==n?11:n-1),"forward"==t&&(o=11==n?o+1:o,n=11==n?0:n+1),e=new Date(o,n,1);break;case"months":t&&(o="back"==t?o-1:o+1),e=new Date(o,n,1);break;case"years":t&&(o="back"==t?i.year:a.year),e=new Date(o,0,1);break;case"decades":t&&(o="back"==t?i.decadeStart-100:a.decadeStop+1),e=new Date(o,0,1);break;default:date=null}return this._navigationDate=e,this.triggerEvent(jw.DOM.events.JW_EVENT_JW_CALENDAR_NAVIGATE,{navDirection:t,navDate:this._navigationDate}),this.generateCalendarItems(e)},jasonCalendarUIHelper.prototype=Object.create(jasonBaseWidgetUIHelper.prototype),jasonCalendarUIHelper.prototype.constructor=jasonCalendarUIHelper,jasonCalendarUIHelper.prototype.renderUI=function(){var t=this;this.htmlElement.classList.contains(jw.DOM.classes.JW_CALENDAR)||(this.htmlElement.style.width=this.widget.options.width+"px",this.htmlElement.style.height=this.widget.options.height+"px",this.htmlElement.classList.add(jw.DOM.classes.JW_CALENDAR),this.renderHeader(),this.renderBody(),this.renderFooter(),this.options.invokable&&(this.hideCalendar(),this.htmlElement.style.position="absolute",jwDocumentEventManager.addDocumentEventListener(jw.DOM.events.MOUSE_DOWN_EVENT,function(e){jasonWidgets.common.isMouseEventOutOfContainer(t.htmlElement,e)&&""==t.htmlElement.style.display&&t.hideCalendar()}),this.eventManager.addEventListener(this.htmlElement,jw.DOM.events.KEY_DOWN_EVENT,function(e){var n=e.which||e.keyCode;27==n&&t.hideCalendar()},!0)))},jasonCalendarUIHelper.prototype.renderHeader=function(){this.calendarHeader=this.createElement("div"),this.calendarHeader.classList.add(jw.DOM.classes.JW_CALENDAR_HEADER),this.calendarGoBackButton=jw.htmlFactory.createJWButton(null,jw.DOM.icons.CIRCLE_ARROW_LEFT),this.calendarGoBackButton.classList.add(jw.DOM.classes.JW_CALENDAR_GO_BACK),this.eventManager.addEventListener(this.calendarGoBackButton,jw.DOM.events.CLICK_EVENT,this.goBack,!0),this.calendarDisplayTitle=jw.htmlFactory.createJWLinkLabel(),this.calendarDisplayTitle.classList.add(jw.DOM.classes.JW_CALENDAR_DISPLAY),this.eventManager.addEventListener(this.calendarDisplayTitle,jw.DOM.events.CLICK_EVENT,this.calendarDisplayClick),this.calendarGoForwardButton=jw.htmlFactory.createJWButton(null,jw.DOM.icons.CIRCLE_ARROW_RIGHT),this.calendarGoForwardButton.classList.add(jw.DOM.classes.JW_CALENDAR_GO_FORWARD),this.eventManager.addEventListener(this.calendarGoForwardButton,jw.DOM.events.CLICK_EVENT,this.goForward,!0),this.calendarHeader.appendChild(this.calendarGoBackButton),this.calendarHeader.appendChild(this.calendarDisplayTitle),this.calendarHeader.appendChild(this.calendarGoForwardButton),this.htmlElement.appendChild(this.calendarHeader)},jasonCalendarUIHelper.prototype.renderBody=function(){this.calendarBody=this.createElement("div"),this.calendarBody.classList.add(jw.DOM.classes.JW_CALENDAR_BODY),this.calendarTable=this.createElement("table"),this.calendarBody.appendChild(this.calendarTable),this.renderCalendarItems(),this.htmlElement.appendChild(this.calendarBody)},jasonCalendarUIHelper.prototype.renderCalendarItems=function(t){if(!this.widget.readonly&&this.widget.enabled){var e;t=t?t:this.widget.generateCalendarItems(),e=t.calendarItems,this.calendarTable.innerHTML="";for(var n=this.calendarTable.classList.length-1;n>=0;n--)this.calendarTable.classList.remove(this.calendarTable.classList[n]);"months"==this.widget.mode&&this.calendarTable.classList.add(jw.DOM.classes.JW_CALENDAR_JW_TABLE_MONTHS),"years"==this.widget.mode&&this.calendarTable.classList.add(jw.DOM.classes.JW_CALENDAR_JW_TABLE_YEARS),"decades"==this.widget.mode&&this.calendarTable.classList.add(jw.DOM.classes.JW_CALENDAR_JW_TABLE_DECADES);var o=this.createElement("tbody"),i=this.widget.getRowDivisionCount();if("days"==this.widget.mode){var a=this.createElement("thead"),s=this.createElement("tr");a.appendChild(s);for(var n=0;n<=6;n++){var r=this.createElement("th"),l=this.createElement("span");l.appendChild(this.createTextNode(e[n].dayShortName)),l.setAttribute(jw.DOM.attributes.TITLE_ATTR,e[n].dayName),r.appendChild(l),s.appendChild(r)}this.calendarTable.appendChild(a)}this.calendarTable.appendChild(o);for(var d=0;d<=e.length-1;d++){var u,h=e[d],c=null;"days"==this.widget.mode&&(c=this.widget.specialDates.filter(function(t){return t.recurring?t.date.getMonth()==h.date.getMonth()&&t.date.getDate()==h.date.getDate():0==jasonWidgets.common.dateComparison(t.date,h.date)})[0]),0!=d&&d%i!=0||(u=this.createElement("tr"),o.appendChild(u));var p=this.createElement("td"),m=jw.htmlFactory.createJWLinkLabel(h.displayValue.toString());p.appendChild(m),c&&(p.setAttribute(jasonWidgets.DOM.attributes.TITLE_ATTR,c.tooltip),c.cssClass&&p.classList.add(c.cssClass)),jasonWidgets.common.setData(p,"jwCalendarItem",h),"days"==this.widget.mode&&jw.common.dateComparison(t.navDate,h.date)==jw.enums.comparison.equal&&p.classList.add(jw.DOM.classes.JW_CALENDAR_ITEM_SELECTED_DATE),this.eventManager.addEventListener(p,jw.DOM.events.CLICK_EVENT,this.calendarItemClick,!0);for(var g=0;g<=h.classList.length-1;g++)p.classList.add(h.classList[g]);u.appendChild(p)}this.updateCalendarDisplay(t?t.navDate:void 0)}},jasonCalendarUIHelper.prototype.renderFooter=function(){this.calendarFooter=this.createElement("div"),this.calendarFooter.classList.add(jw.DOM.classes.JW_CALENDAR_FOOTER),this.calendarFooterToday=jw.htmlFactory.createJWLinkLabel(jw.common.formatDateTime(new Date,jw.localizationManager.currentCulture.longDateFormat)),this.calendarFooter.appendChild(this.calendarFooterToday),this.htmlElement.appendChild(this.calendarFooter),this.eventManager.addEventListener(this.calendarFooterToday,jw.DOM.events.CLICK_EVENT,this.calendarNavigateToday,!0)},jasonCalendarUIHelper.prototype.showCalendar=function(t){if(this.options.invokableElement){this.calendarNavigateToday(t?t:this.widget.date);var e=this.options.invokableElement.getBoundingClientRect();this.htmlElement.style.left=e.left+"px",this.htmlElement.style.top=e.top+this.options.invokableElement.offsetHeight+"px",this.htmlElement.style.zIndex=jw.common.getNextAttributeValue("z-index")+1,this.htmlElement.style.display=""}},jasonCalendarUIHelper.prototype.hideCalendar=function(){this.htmlElement.style.display="none"},jasonCalendarUIHelper.prototype.calendarNavigateToday=function(t){if(!this.widget.readonly&&this.widget.enabled){var e=jw.common.getVariableType(t)==jw.enums.dataType.date?t:new Date;this.widget.mode="days";var n={calendarItems:this.widget.generateDays(e.getFullYear(),e.getMonth()+1),navDate:e};this.renderCalendarItems(n)}},jasonCalendarUIHelper.prototype.updateCalendarDisplay=function(t){t=t?t:this.widget.date;var e="",n=t.getMonth(),o=t.getFullYear();switch(this.widget.mode){case"days":n=this.widget.options.localization.months[n],e=jasonWidgets.common.formatString("{0} {1}",[n.name,o]);break;case"months":e=jasonWidgets.common.formatString("{0}",[o]);break;case"years":e=jasonWidgets.common.formatString("{0} - {1}",[this.widget.currentCalendarItems[1].decadeStart,this.widget.currentCalendarItems[1].decadeStop]);break;case"decades":e=jasonWidgets.common.formatString("{0} - {1}",[this.widget.currentCalendarItems[1].centuryStart,this.widget.currentCalendarItems[1].centuryStop]);break;default:date=null}jw.common.setData(this.calendarDisplayTitle,"navigationDate",t),jasonWidgets.common.replaceNodeText(this.calendarDisplayTitle,e,!0)},jasonCalendarUIHelper.prototype.goBack=function(t){this.renderCalendarItems(this.widget.navigate("back"))},jasonCalendarUIHelper.prototype.goForward=function(t){this.renderCalendarItems(this.widget.navigate("forward"))},jasonCalendarUIHelper.prototype.calendarDisplayClick=function(t){if(!this.widget.readonly&&this.widget.enabled){jw.common.getData(this.calendarDisplayTitle,"navigationDate");"years"==this.widget.mode&&(this.widget.mode="decades"),"months"==this.widget.mode&&(this.widget.mode="years"),"days"==this.widget.mode&&(this.widget.mode="months")}},jasonCalendarUIHelper.prototype.calendarItemClick=function(t){if(!this.widget.readonly&&this.widget.enabled){var e=864e5,n=jasonWidgets.common.getData(t.currentTarget,"jwCalendarItem");if(n){if("days"==this.widget.mode&&t.currentTarget.classList.contains(jw.DOM.classes.JW_CALENDAR_ITEM_OUT_CURRENT_SCOPE))return this.widget.date=n.date,this.widget._navigationDate=n.date,void this.calendarNavigateToday(n.date);var o=null;if("days"==this.widget.mode){var i=new Date(n.year,n.month-1,n.day);this.widget.date=i;var a=!0;if(t.ctrlKey&&(this.options.multiSelect||this.options.rangeSelect)){a=!1;var s=this.options.selectedDates.filter(function(t){return t.getTime()==i.getTime()})[0];if(!s){var r=!0;if(this.options.rangeSelect){var l=this.options.selectedDates[this.options.selectedDates.length-1],d=this.options.selectedDates[0],u=l.getTime(),h=d.getTime(),c=i.getTime();if(r=c==h-e||c==u+e,!r)return}r&&(this.widget.options.selectedDates.push(this.widget.date),this.widget.options.selectedDates.sort(function(t,e){return t.getTime()-e.getTime()}))}}else this.options.selectedDates=[],this.widget.options.selectedDates.push(this.widget.date);this.setActiveCalendarItem(t.currentTarget,a)}"months"==this.widget.mode&&(o=new Date(n.year,n.month-1,1),this.widget.mode="days",this.renderCalendarItems(this.widget.generateCalendarItems(o)),this.widget._navigationDate=o),"years"==this.widget.mode&&(o=new Date(n.year,0,1),this.widget.mode="months",this.renderCalendarItems(this.widget.generateCalendarItems(o)),this.widget._navigationDate=o),"decades"==this.widget.mode&&(o=new Date(n.decadeStart,0,1),this.widget.mode="years",this.renderCalendarItems(this.widget.generateCalendarItems(o)),this.widget._navigationDate=o)}}},jasonCalendarUIHelper.prototype.setActiveCalendarItem=function(t,e){var n=this.calendarTable.querySelectorAll("td");if(e)for(var o=0;o<=n.length-1;o++)n[o].classList.remove(jw.DOM.classes.JW_CALENDAR_ITEM_SELECTED_DATE);t.classList.add(jw.DOM.classes.JW_CALENDAR_ITEM_SELECTED_DATE)},jasonCalendarUIHelper.prototype.updateEnabled=function(t){jasonBaseWidgetUIHelper.prototype.updateEnabled.call(this,t);for(var e=this.htmlElement.getElementsByTagName("a"),n=0;n<=e.length-1;n++)t?(e[n].removeAttribute(jw.DOM.attributes.DISABLED_ATTR),e[n].classList.remove(jw.DOM.classes.JW_DISABLED)):(e[n].setAttribute(jw.DOM.attributes.DISABLED_ATTR,!0),e[n].classList.add(jw.DOM.classes.JW_DISABLED));for(var o=this.htmlElement.getElementsByTagName("input"),n=0;n<=o.length-1;n++)t?(o[n].removeAttribute(jw.DOM.attributes.DISABLED_ATTR),o[n].classList.remove(jw.DOM.classes.JW_DISABLED)):(o[n].setAttribute(jw.DOM.attributes.DISABLED_ATTR,!0),o[n].classList.add(jw.DOM.classes.JW_DISABLED))},jasonCalendarUIHelper.prototype.updateVisible=function(t){jasonBaseWidgetUIHelper.prototype.updateVisible.call(this,t)},jasonCalendarUIHelper.prototype.updateReadOnly=function(t){jasonBaseWidgetUIHelper.prototype.updateReadOnly.call(this,t);for(var e=this.htmlElement.getElementsByTagName("a"),n=0;n<=e.length-1;n++)t?(e[n].removeAttribute(jw.DOM.attributes.READONLY_ATTR),e[n].classList.remove(jw.DOM.classes.JW_READONLY)):(e[n].setAttribute(jw.DOM.attributes.READONLY_ATTR,!0),e[n].classList.add(jw.DOM.classes.JW_READONLY));for(var o=this.htmlElement.getElementsByTagName("input"),n=0;n<=o.length-1;n++)t?(o[n].removeAttribute(jw.DOM.attributes.READONLY_ATTR),o[n].classList.remove(jw.DOM.classes.JW_READONLY)):(o[n].setAttribute(jw.DOM.attributes.READONLY_ATTR,!0),o[n].classList.add(jw.DOM.classes.JW_READONLY))},jasonTabControl.prototype=Object.create(jasonBaseWidget.prototype),jasonTabControl.prototype.constructor=jasonTabControl,Object.defineProperty(jasonTabControl.prototype,"tabIndex",{get:function(){return this._tabIndex},set:function(t){this._tabIndex!=t&&(this._tabIndex=t,this.ui.setActiveTab(this.ui.tabContents[this._tabIndex]),this.triggerEvent(jw.DOM.events.JW_EVENT_ON_JW_TAB_ENTER,this._tabIndex))},enumerable:!0,configurable:!0}),jasonTabControl.prototype.tabVisible=function(t,e){this.ui.tabVisible(t,e)},jasonTabControlUIHelper.prototype=Object.create(jasonBaseWidgetUIHelper.prototype),jasonTabControlUIHelper.prototype.constructor=jasonTabControlUIHelper,jasonTabControlUIHelper.prototype.renderUI=function(){var t=this;if(!this.tabsList){this.htmlElement.classList.add(jw.DOM.classes.JW_TAB_CONTAINER),this.tabsList="DIV"==this.htmlElement.tagName?this.htmlElement.children[0]:this.htmlElement,this.tabsList.classList.add(jw.DOM.classes.JW_TAB_UL_CLASS);for(var e=0;e<=this.tabsList.children.length-1;e++){var n=this.tabsList.children[e];n.classList.add(jw.DOM.classes.JW_TAB_PAGE_CLASS),n.setAttribute(jasonWidgets.DOM.attributes.JW_DATA_JW_ITEM_INDEX_ATTR,e),n.setAttribute(jasonWidgets.DOM.attributes.TABINDEX_ATTR,jasonWidgets.common.getNextTabIndex()),this.eventManager.addEventListener(n,jw.DOM.events.CLICK_EVENT,function(e){if(!t.widget.readonly&&t.widget.enabled){for(var n=e.target;"LI"!=n.tagName;)n=n.parentNode;t.widget.tabIndex=parseInt(n.getAttribute(jasonWidgets.DOM.attributes.JW_DATA_JW_ITEM_INDEX_ATTR))}},!0)}for(var o=[],e=0;e<=this.htmlElement.children.length-1;e++)"DIV"==this.htmlElement.children[e].tagName&&o.push(this.htmlElement.children[e]);for(var e=0;e<=o.length-1;e++){var i=o[e];if("DIV"==i.tagName){var a=this.createElement("div");this.htmlElement.removeChild(i),a.appendChild(i),a.classList.add(jw.DOM.classes.JW_TAB_PAGE_CONTAINER),this.widget.options.pageHeight&&(a.style.height=this.widget.options.pageHeight+"px"),a.setAttribute(jasonWidgets.DOM.attributes.JW_DATA_JW_ITEM_INDEX_ATTR,e),this.tabContents.push(a)}}for(var e=0;e<=this.tabContents.length-1;e++)this.htmlElement.appendChild(this.tabContents[e])}},jasonTabControlUIHelper.prototype.setActiveTab=function(t){for(var e=0;e<=this.tabsList.children.length-1;e++){var n=this.tabsList.children[e],o=this.tabContents[e];n.classList.remove(jw.DOM.classes.JW_TAB_PAGE_ACTIVE),o&&o.classList.remove(jw.DOM.classes.JW_TAB_PAGE_ACTIVE)}var i=parseInt(t.getAttribute(jasonWidgets.DOM.attributes.JW_DATA_JW_ITEM_INDEX_ATTR));isNaN(i)||(t.classList.add(jw.DOM.classes.JW_TAB_PAGE_ACTIVE),this.tabsList.children[i].classList.add(jw.DOM.classes.JW_TAB_PAGE_ACTIVE),this.tabContents.forEach(function(t,e){t.style.display="none"}),this.tabContents[i].style.display="")},jasonTabControlUIHelper.prototype.updateEnabled=function(t){jasonBaseWidgetUIHelper.prototype.updateEnabled.call(this,t);for(var e=0;e<=this.tabsList.children.length-1;e++)t?this.tabsList.children[e].classList.remove(jw.DOM.classes.JW_DISABLED):this.tabsList.children[e].classList.add(jw.DOM.classes.JW_DISABLED)},jasonTabControlUIHelper.prototype.updateVisible=function(t){jasonBaseWidgetUIHelper.prototype.updateVisible.call(this,t)},jasonTabControlUIHelper.prototype.updateReadOnly=function(t){jasonBaseWidgetUIHelper.prototype.updateReadOnly.call(this,t)},jasonTabControlUIHelper.prototype.tabVisible=function(t,e){var n=this.tabsList.children[t];n&&(n.style.display=e?"":"none")},jasonNumericTextbox.prototype=Object.create(jasonTextbox.prototype),jasonNumericTextbox.prototype.constructor=jasonNumericTextbox,jasonNumericTextbox.prototype.readValue=function(t){return t},jasonNumericTextbox.prototype.setValue=function(t){var e=jw.common.getVariableType(t),n=!1;switch(e){case jw.enums.dataType.string:var o=parseFloat(t);if(isNaN(o)){n=!0;break}return o;case jw.enums.dataType.number:return t;default:n=!0}n&&jw.common.throwError(jw.errorTypes.typeError,"Invalid value type for jasonNumericTextBox.")},jasonNumericTextbox.prototype.formatValue=function(t){this.options.min&&this._value<this.options.min&&(this._value=this.options.min),this.options.max&&this._value>this.options.max&&(this._value=this.options.max);var e=jw.common.formatNumber("percent"==this.options.style.toLowerCase()?this._value/100:this._value,this.options);return(this.options.prefix?this.options.prefix:"")+e+(this.options.suffix?this.options.suffix:"")},jasonNumericTextbox.prototype.compareValue=function(t){return this._value==t?jw.enums.comparison.equal:jw.enums.comparison.notEqual},jasonNumericTextboxUIHelper.prototype=Object.create(jasonTextboxUIHelper.prototype),jasonNumericTextboxUIHelper.prototype.constructor=jasonNumericTextboxUIHelper,jasonNumericTextboxUIHelper.prototype.renderUI=function(){jasonTextboxUIHelper.prototype.renderUI.call(this),this.htmlElement.classList.contains(jw.DOM.classes.JW_NUMERIC_TEXT_BOX)||(this.htmlElement.classList.add(jw.DOM.classes.JW_NUMERIC_TEXT_BOX),this.numericUpButton=jw.htmlFactory.createJWButton(null,jw.DOM.icons.CHEVRON_UP),this.numericUpButton.setAttribute(jw.DOM.attributes.TITLE_ATTR,this.options.localization.numericTextBox.increaseValue),this.numericDownButton=jw.htmlFactory.createJWButton(null,jw.DOM.icons.CHEVRON_DOWN),this.numericDownButton.setAttribute(jw.DOM.attributes.TITLE_ATTR,this.options.localization.numericTextBox.decreaseValue),this.numericUpButton.setAttribute(jw.DOM.attributes.JW_DIRECTION_ATTR,jw.DOM.attributeValues.JW_COMBOBOX_LIST_STATE_UP),this.numericDownButton.setAttribute(jw.DOM.attributes.JW_DIRECTION_ATTR,jw.DOM.attributeValues.JW_COMBOBOX_LIST_STATE_DOWN),this.htmlElement.appendChild(this.numericUpButton),this.htmlElement.appendChild(this.numericDownButton))},jasonNumericTextboxUIHelper.prototype.initializeEvents=function(){jasonTextboxUIHelper.prototype.initializeEvents.call(this),this.eventManager.addEventListener(this.numericUpButton,jw.DOM.events.CLICK_EVENT,this.onNumericButtonClick,!0),this.eventManager.addEventListener(this.numericDownButton,jw.DOM.events.CLICK_EVENT,this.onNumericButtonClick,!0),this.eventManager.addEventListener(this.inputControl,jw.DOM.events.KEY_DOWN_EVENT,this.onNumericInputKeyDown,!0)},jasonNumericTextboxUIHelper.prototype.onNumericButtonClick=function(t){if(!this.widget.readonly&&this.widget.enabled){var e=t.currentTarget.getAttribute(jw.DOM.attributes.JW_DIRECTION_ATTR);if(void 0!=e&&e.trim().length>0)if(void 0==this.widget.value||void 0!=this.widget.value&&0==this.widget.value.length)this.widget.value=e==jw.DOM.attributeValues.JW_COMBOBOX_LIST_STATE_DOWN?-1:0;else{
var n=e==jw.DOM.attributeValues.JW_COMBOBOX_LIST_STATE_DOWN?this.widget.value-this.options.step:this.widget.value+this.options.step;this.widget.value=n}}},jasonNumericTextboxUIHelper.prototype.onNumericInputKeyDown=function(t){if(!this.widget.readonly&&this.widget.enabled){var e=t.which||t.keyCode,n=this._acceptableKeyCodes.indexOf(e)<0;if((e==jw.keycodes.A&&t.ctrlKey||e==jw.keycodes.C&&t.ctrlKey||e==jw.keycodes.V&&t.ctrlKey)&&(n=!1),e==jw.keycodes.enter){var o=parseFloat(this.inputControl.value);isNaN(o)||(this.widget.value=o)}n&&t.preventDefault()}},jasonNumericTextboxUIHelper.prototype.onTextInputBlur=function(t,e){if(!this.widget.readonly&&this.widget.enabled){var n=parseFloat(this.inputControl.value);this.widget.value=isNaN(n)?null:n,jasonTextboxUIHelper.prototype.onTextInputBlur.call(this,t,e)}},jasonNumericTextboxUIHelper.prototype.onTextInputFocus=function(t,e){!this.widget.readonly&&this.widget.enabled&&(jasonTextboxUIHelper.prototype.onTextInputFocus.call(this,t,e),this.widget.value&&(this.inputControl.value=this.widget.value))},jasonNumericTextboxUIHelper.prototype.updateEnabled=function(t){jasonTextboxUIHelper.prototype.updateEnabled.call(this,t),t?(this.numericUpButton.removeAttribute(jw.DOM.attributes.DISABLED_ATTR),this.numericUpButton.classList.remove(jw.DOM.classes.JW_DISABLED),this.numericDownButton.removeAttribute(jw.DOM.attributes.DISABLED_ATTR),this.numericDownButton.classList.remove(jw.DOM.classes.JW_DISABLED)):(this.numericUpButton.setAttribute(jw.DOM.attributes.DISABLED_ATTR,!0),this.numericUpButton.classList.add(jw.DOM.classes.JW_DISABLED),this.numericDownButton.setAttribute(jw.DOM.attributes.DISABLED_ATTR,!0),this.numericDownButton.classList.add(jw.DOM.classes.JW_DISABLED))},jasonNumericTextboxUIHelper.prototype.updateVisible=function(t){jasonTextboxUIHelper.prototype.updateVisible.call(this,t)},jasonNumericTextboxUIHelper.prototype.updateReadOnly=function(t){jasonTextboxUIHelper.prototype.updateReadOnly.call(this,t),t?(this.numericUpButton.setAttribute(jw.DOM.attributes.READONLY_ATTR,!0),this.numericDownButton.setAttribute(jw.DOM.attributes.READONLY_ATTR,!0)):(this.numericUpButton.removeAttribute(jw.DOM.attributes.READONLY_ATTR),this.numericDownButton.removeAttribute(jw.DOM.attributes.READONLY_ATTR))},jasonGridUIHelper.prototype=Object.create(jasonBaseWidgetUIHelper.prototype),jasonGridUIHelper.prototype.constructor=jasonGridUIHelper,jasonGridUIHelper.prototype.initialize=function(){this._renderGridContainers(),this._renderHeader(),this._enableColumnDragResize(),jasonBaseWidgetUIHelper.prototype.initialize.call(this)},jasonGridUIHelper.prototype.monitorChanges=function(){window.requestAnimationFrame(this.monitorChanges),this.isColumnMoveResize||this.isReRendering||this.gridHeaderTable.clientWidth!=this.gridDataTable.clientWidth&&(this.isReRendering=!0,this._sizeColumns(),this.isReRendering=!1)},jasonGridUIHelper.prototype._createColumnMenu=function(){this.columnMenu=new jasonMenu(this.gridHeaderTableContainer,{_debug:this.options._debug,menu:this.widget.defaultGridColumnMenu,invokable:!0,hideDelay:350,orientation:"vertical",autoHide:!0,events:[{eventName:jw.DOM.events.JW_EVENT_ON_JW_MENU_CHECKBOX_CLICKED,listener:this._onColumnMenuItemChecked,callingContext:this},{eventName:jw.DOM.events.JW_EVENT_ON_JW_MENU_ITEM_CLICKED,listener:this._onColumnMenuItemClicked,callingContext:this},{eventName:jw.DOM.events.JW_EVENT_ON_HIDE,listener:this._onColumnMenuHidden,callingContext:this}]},jasonMenuUIHelper)},jasonGridUIHelper.prototype._initializeEvents=function(){this.eventManager.addEventListener(this.gridDataTable,jw.DOM.events.MOUSE_DOWN_EVENT,this._onSelectionChange,!0),this.eventManager.addEventListener(this.gridDataContainer,jw.DOM.events.SCROLL_EVENT,this._onDataContainerScroll),jwWindowEventManager.addWindowEventListener("resize",this._onResize);var t=this;this.eventManager.addEventListener(this.pagerButtonFirst,jw.DOM.events.CLICK_EVENT,function(e){t._goToPage(1,e),e.stopPropagation()}),this.eventManager.addEventListener(this.pagerButtonPrior,jw.DOM.events.CLICK_EVENT,function(e){t._goToPage(t._currentPage-1,e),e.stopPropagation()}),this.eventManager.addEventListener(this.pagerButtonNext,jw.DOM.events.CLICK_EVENT,function(e){t._goToPage(t._currentPage+1,e),e.stopPropagation()}),this.eventManager.addEventListener(this.pagerButtonLast,jw.DOM.events.CLICK_EVENT,function(e){t._goToPage(t._pageCount,e),e.stopPropagation()}),this.eventManager.addEventListener(this.pagerInput,jw.DOM.events.BLUR_EVENT,function(e){t._goToPage(t.pagerInput.value,e),e.stopPropagation()}),this.eventManager.addEventListener(this.pagerInput,jw.DOM.events.INPUT_EVENT,function(e){t._goToPage(t.pagerInput.value,e),e.stopPropagation()})},jasonGridUIHelper.prototype._clearHeaderEvents=function(){for(var t=0;t<=this.gridHeaderTableRow.children.length-1;t++){var e=this.gridHeaderTableRow.children[t],n=jw.common.getData(e,"jwColumnResizer");n&&n.destroy();var o=jw.common.getData(e,"jwColumnReOrdering");o&&o.destroy(),jw.common.removeJWEvents(e,!0)}},jasonGridUIHelper.prototype._onColumnMenuItemChecked=function(t,e){var n=this.options.columns.filter(function(t){return t.fieldName==e.item.name})[0],o=e.cancel;o=e.checked?this.widget.showColumn(n):this.widget.hideColumn(n),e.cancel=o},jasonGridUIHelper.prototype._onColumnMenuItemClicked=function(t,e){var n=this._currentFilterColumn;switch(e.item.name){case"mnuSortAsc":this.widget.sortBy(n.fieldName,"asc"),this.columnMenu.ui.hideMenu();break;case"mnuSortDesc":this.widget.sortBy(n.fieldName,"desc"),this.columnMenu.ui.hideMenu();break;case"mnuClearSorting":this.widget.dataSource.clearSorting(),this._goToPage(this._currentPage,!0),this.columnMenu.ui.hideMenu();break;case"mnuClearFiltering":this.widget.dataSource.clearFilters();for(var o=this.gridHeaderTableRow.getElementsByTagName("th"),i=0;i<=o.length-1;i++)o[i].classList.remove(jw.DOM.classes.JW_GRID_FIELD_HAS_FILTER);this._clearFilterControls(),this._goToPage(this._currentPage,!0),this._sizeColumns(),this.columnMenu.ui.hideMenu()}},jasonGridUIHelper.prototype._onColumnMenuHidden=function(){this._clearFilterControls()},jasonGridUIHelper.prototype._manageCellSelection=function(t,e){var n=this.gridSelectedCells[this.gridSelectedCells.indexOf(t)];(1==this.options.cellMultiSelect&&0==e||!this.options.cellMultiSelect)&&(this.gridSelectedCells.forEach(function(t){t.children[0].classList.remove(jw.DOM.classes.JW_GRID_SELECTED_CELL_CLASS)}),this.gridSelectedCells=new Array),n&&0==this.options.cellMultiSelect||n&&1==this.options.cellMultiSelect&&n.children[0].classList.contains(jw.DOM.classes.JW_GRID_SELECTED_CELL_CLASS)?n.children[0].classList.remove(jw.DOM.classes.JW_GRID_SELECTED_CELL_CLASS):t.children[0].classList.add(jw.DOM.classes.JW_GRID_SELECTED_CELL_CLASS),this.gridSelectedCells.push(t)},jasonGridUIHelper.prototype._manageCellFocused=function(t){this._focusedCell&&this._focusedCell.children[0].classList.remove(jw.DOM.classes.JW_GRID_FOCUSED_CELL_CLASS),t.children[0].classList.add(jw.DOM.classes.JW_GRID_FOCUSED_CELL_CLASS),this._focusedCell=t},jasonGridUIHelper.prototype._manageRowSelection=function(t,e){var n=this.gridSelectedRows[this.gridSelectedRows.indexOf(t)];1==this.options.multiSelect&&0==e&&(this.gridSelectedRows.forEach(function(t){t.classList.remove(jw.DOM.classes.JW_GRID_SELECTED_ROW_CLASS)}),this.gridSelectedRows=new Array,this.widget.selectedRows=new Array),n&&0==this.options.multiSelect||n&&1==this.options.multiSelect&&n.classList.contains(jw.DOM.classes.JW_GRID_SELECTED_ROW_CLASS)?n.classList.remove(jw.DOM.classes.JW_GRID_SELECTED_ROW_CLASS):t.classList.add(jw.DOM.classes.JW_GRID_SELECTED_ROW_CLASS);var o=t.getAttribute(jasonWidgets.DOM.attributes.JW_DATA_ROW_ID_ATTR);this.options.multiSelect||(this.gridSelectedRows=new Array,this.widget.selectedRows=new Array),this.widget.selectedRows.push(this.widget.dataSource.data[o]),this.gridSelectedRows.push(t)},jasonGridUIHelper.prototype._onSelectionChange=function(t){if(!this.widget.readonly&&this.widget.enabled){var e=t.target,n=t.target;if("TABLE"!=n.tagName){for(;n&&"TR"!=n.tagName;)n=n.parentNode;for(;"TD"!=e.tagName;)e=e.parentNode;n.className.indexOf(jw.DOM.classes.JW_GRID_JW_TABLE_GROUP_ROW_CLASS)>=0||(this._manageRowSelection(n,t.ctrlKey),this._manageCellSelection(e,t.ctrlKey),this._manageCellFocused(e),this.widget.triggerEvent(jw.DOM.events.JW_EVENT_ON_SELECTION_CHANGE,this.widget.selectedRows))}}},jasonGridUIHelper.prototype._onGridFilterButtonClick=function(t){},jasonGridUIHelper.prototype._keyboardNavigateToCell=function(t,e){var n=this._focusedCell,o=jw.common.getParentElement("tr",n),i=null;switch(t=t.toLowerCase()){case"left":if(i=n.previousSibling,!i){var a=o.previousSibling;i=a.childNodes[a.childNodes.length-1]}this._manageCellFocused(i);break;case"up":var s=n.cellIndex,a=o.previousSibling;if(a)a.classList.contains(jw.DOM.classes.JW_GRID_JW_TABLE_GROUP_ROW_CLASS)?a.getElementsByClassName(jw.DOM.classes.JW_BUTTON)[0]&&a.getElementsByClassName(jw.DOM.classes.JW_BUTTON)[0].focus():(i=a.children[s],this._manageCellFocused(i));else{var r=this.gridHeaderTableRow.children[s];if(r){var l=r.getElementsByClassName("jw-header-cell-caption")[0];if(l){var d=l.getElementsByTagName("a")[0];d&&d.focus()}}}break;case"right":var i=n.nextSibling;if(!i){var u=o.nextSibling;i=u.childNodes[0]}this._manageCellFocused(i);break;case"down":var s=n.cellIndex,u=o.nextSibling;u&&(i=u.classList.contains(jw.DOM.classes.JW_GRID_JW_TABLE_GROUP_ROW_CLASS)?u.getElementsByClassName(jw.DOM.classes.JW_BUTTON)[0]:u.children[s],this._manageCellFocused(i))}if(i){var h=this.gridDataContainer.offsetHeight+this.gridDataContainer.scrollTop,c=this.gridDataContainer.offsetWidth+this.gridDataContainer.scrollLeft,p=i.offsetTop+i.offsetHeight,m=i.offsetLeft+i.offsetWidth,g=p>=h||Math.abs(h-p)<=i.offsetHeight,E=Math.abs(h-p)>=this.gridDataContainer.offsetHeight||this.gridDataContainer.offsetHeight-Math.abs(p-h)<=i.offsetHeight,_=m>=c||Math.abs(c-m)<=i.offsetWidth,w=Math.abs(c-m)>=this.gridDataContainer.offsetWidth||this.gridDataContainer.offsetWidth-Math.abs(m-c)<=i.offsetWidth;if(g||E||_||w){var f;g&&(f=this.gridDataContainer.scrollTop+i.offsetHeight,Math.abs(this.gridDataContainer.offsetHeight+f-i.offsetTop)<=i.offsetHeight&&(f+=i.offsetHeight),this.gridDataContainer.scrollTop=f),E&&(f=this.gridDataContainer.scrollTop-i.offsetHeight,Math.abs(this.gridDataContainer.offsetHeight-f-i.offsetTop)>=i.offsetHeight&&(f-=i.offsetHeight),this.gridDataContainer.scrollTop=f),_&&(f=this.gridDataContainer.scrollLeft+i.offsetWidth,Math.abs(this.gridDataContainer.offsetWidth-f-i.offsetLeft)>=i.offsetWidth&&(f+=i.offsetWidth),this.gridDataContainer.scrollLeft=f),w&&(f=this.gridDataContainer.scrollLeft-i.offsetWidth,Math.abs(this.gridDataContainer.offsetWidth-f-i.offsetLeft)>=i.offsetWidth&&(f-=i.offsetWidth),this.gridDataContainer.scrollLeft=f)}}},jasonGridUIHelper.prototype._onGridCellKeyDown=function(t){var e=t.keyCode||t.which,n=!0;switch(e){case 9:n=!1;break;case 37:this._keyboardNavigateToCell("left",t.ctrlKey);break;case 38:this._keyboardNavigateToCell("up",t.ctrlKey);break;case 39:this._keyboardNavigateToCell("right",t.ctrlKey);break;case 40:this._keyboardNavigateToCell("down",t.ctrlKey);break;case 32:this._manageCellSelection(this._focusedCell,t.ctrlKey);break;case 13:t.ctrlKey&&this._manageRowSelection(this._focusedCell.parentNode,t.ctrlKey)}t.stopPropagation(),n&&t.preventDefault()},jasonGridUIHelper.prototype._onGridFocus=function(t){if(!this.widget.readonly&&this.widget.enabled&&!this._focusedCell){var e=this.gridDataTableBody.children[0];e&&(e=e.children[0],e&&(this._manageCellSelection(e,!1),this._manageCellFocused(e)))}},jasonGridUIHelper.prototype._onGridColumnMenuIconClick=function(t){t.stopPropagation(),!this.widget.readonly&&this.widget.enabled&&0==t.button&&(this._currentTHElement=jasonWidgets.common.getParentElement("TH",t.currentTarget),this._currentTHElement&&(this._currentFilterColumn=this.widget._columnByField(this._currentTHElement.getAttribute(jw.DOM.attributes.JW_GRID_COLUMN_FIELD_ATTR)),this._currentFilterField=this._currentFilterColumn.fieldName,this.columnMenu.ui.hideMenu(),this.columnMenu.ui.showMenu(t.currentTarget.parentElement),this._updateFilterInputTypes()))},jasonGridUIHelper.prototype._onResize=function(t){this._sizeColumns()},jasonGridUIHelper.prototype._onDataContainerScroll=function(t){this.gridHeaderTableContainer.scrollLeft=this.gridDataContainer.scrollLeft},jasonGridUIHelper.prototype._onGridColumnCaptionClick=function(t){if(!this.widget.readonly&&this.widget.enabled){var e=jw.common.getParentElement("TH",t.target);if(e){var n=t.keyCode||t.which;if("mousedown"==t.type&&0==t.button||32==n||13==n){var o=parseInt(e.getAttribute(jw.DOM.attributes.JW_GRID_COLUMN_ID_ATTR)),i=e.getAttribute(jw.DOM.attributes.JW_GRID_COLUMN_SORT_ATTR);i=i&&"asc"==i?"desc":"asc",e.setAttribute(jw.DOM.attributes.JW_GRID_COLUMN_SORT_ATTR,i),this.widget.sortBy(this.options.columns[o].fieldName,i),t.stopPropagation()}}}},jasonGridUIHelper.prototype._onGridColumnKeyDown=function(t){if(!this.widget.readonly&&this.widget.enabled){var e=t.keyCode||t.which;switch(e){case 40:t.preventDefault();var n=parseInt(t.currentTarget.getAttribute(jw.DOM.attributes.JW_GRID_COLUMN_ID_ATTR));this.gridDataTableBody.children[0]&&this.gridDataTableBody.children[0].children[n]&&this._manageCellFocused(this.gridDataTableBody.children[0].children[n]),this.gridDataTable.focus();break;case 9:var o=this,i=t.currentTarget.parentNode.lastChild,a=!t.shiftKey&&t.currentTarget==i&&t.target.parentNode==i.lastChild;setTimeout(function(){o.gridDataContainer.scrollLeft=o.gridHeaderTableContainer.scrollLeft,a&&o.gridDataTable.focus()})}}},jasonGridUIHelper.prototype._onGridFooterKeyDown=function(t){if(!this.widget.readonly&&this.widget.enabled){var e=t.keyCode||t.which;switch(e){case 9:var n=this,o=n.pagerContainer.firstChild==t.target;setTimeout(function(){o&&t.shiftKey&&n.gridDataTable.focus()})}}},jasonGridUIHelper.prototype._onGridColumnFocus=function(t){this.gridDataContainer.scrollLeft=this.gridHeaderTableContainer.scrollLeft},jasonGridUIHelper.prototype._onGroupCollapseExpandIconClick=function(t){if(!this.widget.readonly&&this.widget.enabled){var e="I"==t.target.tagName?t.target:t.target.children[0];this._collapseExpandGroup(null,null,e)}},jasonGridUIHelper.prototype._collapseExpandGroup=function(t,e,n){var o=void 0==n?jw.common.getElementsByAttributes(this.gridDataTableBody,[jasonWidgets.DOM.attributes.JW_DATA_GROUPING_LEVEL_ATTR,jasonWidgets.DOM.attributes.JW_DATA_GROUPING_KEY_ATTR],[t,e],"tr."+JW_GRID_JW_TABLE_GROUP_ROW_CLASS)[0]:jw.common.getParentElement("TR",n);n=void 0==n?o.getElementsByTagName("i")[0]:"I"==n.tagName?n:n.getElementsByTagName("i")[0],n.className.indexOf(jw.DOM.icons.CIRCLE_ARROW_UP)>=0?(n.className=jw.DOM.icons.CIRCLE_ARROW_DOWN,o.setAttribute(jasonWidgets.DOM.attributes.JW_DATA_GROUP_EXPANDED_ATTR,"false"),this._collapseGroup(o),this.widget.triggerEvent(jw.DOM.events.JW_EVENT_ON_GROUP_COLLAPSE,o.getAttribute(jasonWidgets.DOM.attributes.JW_DATA_GROUPING_KEY_ATTR))):(n.className=jw.DOM.icons.CIRCLE_ARROW_UP,o.setAttribute(jasonWidgets.DOM.attributes.JW_DATA_GROUP_EXPANDED_ATTR,"true"),this._expandGroup(o),this.widget.triggerEvent(jw.DOM.events.JW_EVENT_ON_GROUP_EXPAND,o.getAttribute(jasonWidgets.DOM.attributes.JW_DATA_GROUPING_KEY_ATTR)))},jasonGridUIHelper.prototype._isGroupExpanded=function(t,e,n){var o,i=void 0==n?jw.common.getElementsByAttributse(this.gridDataTableBody,[jasonWidgets.DOM.attributes.JW_DATA_GROUPING_LEVEL_ATTR,jasonWidgets.DOM.attributes.JW_DATA_GROUPING_KEY_ATTR],[t,e])[0]:jw.common.getParentElement("TR",n);return o=i.getAttribute(jasonWidgets.DOM.attributes.JW_DATA_GROUP_EXPANDED_ATTR),void 0!=o&&jw.common.strToBool(o)},jasonGridUIHelper.prototype._onColumnDrop=function(t,e){if(!this.widget.readonly&&this.widget.enabled){t.preventDefault&&t.preventDefault();var n=document.elementFromPoint(t.clientX,t.clientY);if(n){var o=e.getAttribute(jw.DOM.attributes.JW_GRID_COLUMN_FIELD_ATTR),i=this.widget._columnByField(o);if((n==this.gridGroupingContainer||jw.common.contains(this.gridGroupingContainer,n))&&i&&this.options.grouping&&i.fieldName){var a=this.widget.dataSource.groupingExists(i.fieldName);i&&!a&&this.widget.groupByField(i.fieldName)}var s=jw.common.getParentElement("TH",n);if("TH"==s.tagName){var r=s.getAttribute(jw.DOM.attributes.JW_GRID_COLUMN_FIELD_ATTR),l=this.widget._columnByField(r);l.index!=i.index&&this.moveColumn(i,l.index)}}this.isColumnMoveResize=!1}},jasonGridUIHelper.prototype._onMoveResizeStart=function(t,e){this.isColumnMoveResize=!0},jasonGridUIHelper.prototype.moveColumn=function(t,e){jw.common.swapItemsInArray(this.options.columns,t.index,e),jw.common.swapDomElements(this.gridHeaderTableRow,t.index,e),jw.common.swapDomElements(this.headerTableColGroup,t.index,e),jw.common.swapDomElements(this.dataTableColGroup,t.index,e);var n=t.index;t.index=e,this.options.columns[e].index=n,this.renderUI(),this.widget.triggerEvent(jw.DOM.events.JW_EVENT_ON_COLUMN_POSITION_CHANGE,{column:t,fromIndex:t.index,toIndex:e})},jasonGridUIHelper.prototype._onColumnResizeEnd=function(t,e){var n=e.getAttribute(jw.DOM.attributes.JW_GRID_COLUMN_FIELD_ATTR),o=this.widget._columnByField(n);o&&(o.width=e.offsetWidth),this.widget.triggerEvent(jw.DOM.events.JW_EVENT_ON_COLUMN_RESIZED,{column:o,newWidth:o.width}),this.isColumnMoveResize=!1},jasonGridUIHelper.prototype._onGroupColumnRemoveClick=function(t){var e=jw.common.getParentElement("DIV",t.target),n=e.getAttribute(jasonWidgets.DOM.attributes.JW_DATA_GROUPING_FIELD_ATTR);this.widget.removeGrouping(n)},jasonGridUIHelper.prototype.renderUI=function(t,e){this._calculatePageCount(this.widget.dataSource.data);var n=t?t:0,o=e?e:0;0==o&&(o=this.widget.dataSource.data?this.widget.dataSource.data.length:0,o=this.widget.options.paging&&this.widget.options.paging.pagesize&&o>this.widget.options.paging.pagesize?this.widget.options.paging.pagesize:o),this._renderRows(n,o-1),this._sizeColumns(),this._renderFooter(o);var i=35;this.options.grouping&&(i+=35),this.options.paging&&(i+=35),this.gridDataContainer.style.height=jw.common.formatString("calc(100% - {0}px",[i]),""==this.gridDataContainer.style.height&&(this.gridDataContainer.style.height=jw.common.formatString("calc(100% - {0}px",[i]))},jasonGridUIHelper.prototype._renderGridContainers=function(){if(!this.gridHeaderContainer){if(this.htmlElement.classList.add(jw.DOM.classes.JW_GRID_CLASS),this.gridHeaderContainer=this.createElement("div"),this.gridHeaderContainer.classList.add(jw.DOM.classes.JW_GRID_HEADER_CONTAINER),this.gridHeaderTableContainer=this.createElement("div"),this.gridHeaderTableContainer.classList.add(jw.DOM.classes.JW_GRID_HEADER_JW_TABLE_CONTAINER),this.gridHeaderContainer.appendChild(this.gridHeaderTableContainer),this.widget.options.grouping||this.gridHeaderContainer.classList.add(jw.DOM.classes.JW_GRID_HEADER_CONTAINER_NO_GROUPING),this.gridDataContainer=this.createElement("div"),this.gridDataContainer.classList.add(jw.DOM.classes.JW_GRID_DATA_CONTAINER),this.gridFooterContainer=this.createElement("div"),this.gridFooterContainer.classList.add(jw.DOM.classes.JW_GRID_FOOTER_CONTAINER),this.eventManager.addEventListener(this.gridFooterContainer,jw.DOM.events.KEY_DOWN_EVENT,this._onGridFooterKeyDown,!0),1==this.options.grouping&&!this.gridGroupingContainer){this.gridGroupingContainer=this.htmlElement.appendChild(this.createElement("div")),this.gridGroupingContainer.classList.add(jw.DOM.classes.JW_GRID_GROUPING_CONTAINER_CLASS);var t=this.createElement("span");t.classList.add(jw.DOM.classes.JW_GRID_GROUPING_MESSAGE),this.gridGroupingContainer.appendChild(t)}this.htmlElement.appendChild(this.gridHeaderContainer),this.htmlElement.appendChild(this.gridDataContainer),this.htmlElement.appendChild(this.gridFooterContainer)}},jasonGridUIHelper.prototype._enableColumnDragResize=function(){if(this.options.reordering||this.options.grouping||this.options.resizing)for(var t=0;t<=this.gridHeaderTableRow.children.length-1;t++){var e=this.gridHeaderTableRow.children[t],n=jw.common.getData(e,"jwColumnDragResize");"TH"==e.tagName&!n&&!e.getAttribute(jw.DOM.attributes.JW_GRID_GROUP_FIELD)?(n=new jasonDragResize(e,{minWidth:50,useGhostPanel:!0,allowResize:{top:!1,left:!1,bottom:!1,right:!0},allowDrag:this.options.reordering,dependantElements:[this.headerTableColGroup.children[t],this.dataTableColGroup.children[t]],onMoveStart:this._onMoveResizeStart,onMoveEnd:this._onColumnDrop,onResizeStart:this._onMoveResizeStart,onResizeEnd:this._onColumnResizeEnd,ghostPanelCSS:jw.DOM.classes.JW_DRAG_IMAGE,ghostPanelContents:e.querySelectorAll("."+jw.DOM.classes.JW_GRID_HEADER_CELL_CAPTION_CONTAINER)[0].innerHTML,gridMode:!0},this.options.columns[t].fieldName),jw.common.setData(e,"jwColumnDragResize",n)):n&&(n.options.allowDrag.draggable=this.options.reordering,n.options.allowResize=this.options.resizing?{top:!1,left:!1,bottom:!1,right:!0}:{top:!1,left:!1,bottom:!1,right:!1})}else for(var t=0;t<=this.gridHeaderTableRow.children.length-1;t++){var e=this.gridHeaderTableRow.children[t],n=jw.common.getData(e,"jwColumnDragResize");n&&n.destroy()}},jasonGridUIHelper.prototype._sizeColumns=function(){this.hasScrollBars=this.gridDataContainer.scrollHeight>this.gridHeaderContainer.parentNode.clientHeight,this.scrollBarWidth||(this.scrollBarWidth=jasonWidgets.common.scrollBarWidth());var t=this._fixedWidthColumnsSum();if(this.gridHeaderTableContainer.style.width=this.hasScrollBars?"calc(100% - "+this.scrollBarWidth+"px)":"",""==this.gridHeaderTableContainer.style.width&&(this.gridHeaderTableContainer.style.width=this.hasScrollBars?"-webkit-calc(100% - "+this.scrollBarWidth+"px)":""),this.gridHeaderTable.clientWidth!=this.gridDataTable.clientWidth){var e=this.gridHeaderTableContainer.clientWidth;this.gridHeaderTable.style.width=e+"px",this.gridDataTable.style.width=e+"px"}for(var n=(this.gridHeaderTableContainer.clientWidth-t-1)/this._columnCountWithNoFixedWidth()-this._groupColumnsWidth(),o=this.gridHeaderTable.getElementsByTagName("colgroup")[0],i=this.gridDataTable.getElementsByTagName("colgroup")[0],a=0;a<=o.children.length-1;a++){var s=this.options.columns[a],r=o.children[a],l=i.children[a],e="0px";if(s.visible){if(s.width&&isNaN(s.width)&&s.width.indexOf("%")>=0){var d=parseFloat(s.width.replace("%",""));s.width=this.gridHeaderTableContainer.clientWidth*d/100}e=s.width?isNaN(s.width)?s.width:s.width+"px":n+"px",r.style.width=e,l.style.width=e}}if(window.navigator.vendor.indexOf("Apple")>=0){this._firstRun=!1;var u=this;this.htmlElement.style.display="none",setTimeout(function(){u.htmlElement.style.display=""})}},jasonGridUIHelper.prototype._fixedWidthColumnsSum=function(){var t=0,e=(new RegExp("/[^0-9.,]/g"),this);return this.options.columns.forEach(function(n){if(n.width&&!n.groupColumn&&n.visible){var o=0;if(n.width&&isNaN(n.width)&&n.width.indexOf("%")>=0){var i=parseFloat(n.width.replace("%",""));o=e.gridHeaderTableContainer.clientWidth*i/100}else o=isNaN(n.width)?parseFloat(n.width.replace(/\D/g,"")):n.width;t+=o}}),t},jasonGridUIHelper.prototype._columnCountWithNoFixedWidth=function(){return this.options.columns.filter(function(t){return!t.width}).length},jasonGridUIHelper.prototype._groupColumnsWidth=function(){return 25*this.options.columns.filter(function(t){return!!t.groupColumn}).length},jasonGridUIHelper.prototype._updateFilterInputTypes=function(){if(this._currentFilterColumn)switch(this._prepareFilterValues(this._currentFilterColumn.dataType),this.firstFilterCombobox.dataSource.setData(this.filterValues),this.secondFilterCombobox.dataSource.setData(this.filterValues),jw.common.removeChildren(this.firstFilterInputContainer),jw.common.removeChildren(this.secondFilterInputContainer),this.firstFilterInputContainer.className=jw.DOM.classes.JW_GRID_FILTER_INPUT,this.secondFilterInputContainer.className=jw.DOM.classes.JW_GRID_FILTER_INPUT,this._currentFilterColumn.dataType){case jw.enums.dataType.string:this.firstFilterInput=new jasonTextbox(this.firstFilterInputContainer,{placeholder:this.options.localization.search.searchPlaceHolder}),this.secondFilterInput=new jasonTextbox(this.secondFilterInputContainer,{placeholder:this.options.localization.search.searchPlaceHolder});break;case jw.enums.dataType.number:this.firstFilterInput=new jasonNumericTextbox(this.firstFilterInputContainer,{placeholder:this.options.localization.search.searchPlaceHolder}),this.secondFilterInput=new jasonNumericTextbox(this.secondFilterInputContainer,{placeholder:this.options.localization.search.searchPlaceHolder});break;case jw.enums.dataType.integer:this.firstFilterInput=new jasonNumericTextbox(this.firstFilterInputContainer,{placeholder:this.options.localization.search.searchPlaceHolder,minimumFractionDigits:0}),this.secondFilterInput=new jasonNumericTextbox(this.secondFilterInputContainer,{placeholder:this.options.localization.search.searchPlaceHolder,minimumFractionDigits:0});break;case jw.enums.dataType.currency:this.firstFilterInput=new jasonNumericTextbox(this.firstFilterInputContainer,{placeholder:this.options.localization.search.searchPlaceHolder,style:"currency"}),this.secondFilterInput=new jasonNumericTextbox(this.secondFilterInputContainer,{placeholder:this.options.localization.search.searchPlaceHolder,style:"currency"});break;case jw.enums.dataType.date:this.firstFilterInput=new jasonDatePicker(this.firstFilterInputContainer,{placeholder:this.options.localization.search.searchPlaceHolder}),this.secondFilterInput=new jasonDatePicker(this.secondFilterInputContainer,{placeholder:this.options.localization.search.searchPlaceHolder})}},jasonGridUIHelper.prototype._renderFilterUI=function(){var t=this;if(!this.filterContainer){this._prepareFilterValues(jw.enums.dataType.string),this.filterContainer=this.createElement("div"),this.filterContainer.className=jw.DOM.classes.JW_GRID_FILTER_CONTAINER_CLASS,this.filterContainer.style.display="none",this.filterHeader=this.createElement("div"),this.filterHeader.className=jw.DOM.classes.JW_GRID_FILTER_HEADER_CLASS,this.filterHeaderTitle=this.createElement("span"),this.filterHeaderTitle.appendChild(this.createTextNode(t.options.localization.grid.filtering.filterHeaderCaption)),this.filterHeader.appendChild(this.filterHeaderTitle),this.filterBody=this.createElement("div"),this.filterBody.className=jw.DOM.classes.JW_GRID_FILTER_BODY_CLASS,this.firstFilterOperatorContainer=this.createElement("div"),this.filterLogicalOperator=this.createElement("div"),this.secondFilterOperatorContainer=this.createElement("div"),this.firstFilterCombobox=new jasonCombobox(this.firstFilterOperatorContainer,{data:this.filterValues,displayFields:["title"],displayFormat:"{0}",keyFieldName:"key",readonly:!0,placeholder:this.options.localization.search.searchPlaceHolder}),this.secondFilterCombobox=new jasonCombobox(this.secondFilterOperatorContainer,{data:this.filterValues,displayFields:["title"],displayFormat:"{0}",keyFieldName:"key",readonly:!0,placeholder:this.options.localization.search.searchPlaceHolder}),this.logicalOperatorCombobox=new jasonCombobox(this.filterLogicalOperator,{data:this.filterLogicalOperators,displayFields:["title"],displayFormat:"{0}",keyFieldName:"Key",readonly:!0,placeHolder:this.options.localization.search.searchPlaceHolder}),this.firstFilterInputContainer=this.createElement("div"),this.firstFilterInputContainer.className=jw.DOM.classes.JW_GRID_FILTER_INPUT,this.secondFilterInputContainer=this.createElement("div"),this.secondFilterInputContainer.className=jw.DOM.classes.JW_GRID_FILTER_INPUT,this.filterBody.appendChild(this.firstFilterOperatorContainer),this.filterBody.appendChild(this.firstFilterInputContainer),this.filterBody.appendChild(this.filterLogicalOperator),this.filterBody.appendChild(this.secondFilterOperatorContainer),this.filterBody.appendChild(this.secondFilterInputContainer),this.filterFooter=this.createElement("div"),this.filterFooter.className=jw.DOM.classes.JW_GRID_FILTER_FOOTER_CLASS,this.filterBtnApply=jw.htmlFactory.createJWButton(this.options.localization.grid.filtering.applyButtonText,jw.DOM.icons.CIRCLE_CHOOSE),this.filterBtnApply.classList.add(jw.DOM.classes.JW_JW_GRID_FILTER_BUTTON_APPLY),this.eventManager.addEventListener(this.filterBtnApply,jw.DOM.events.CLICK_EVENT,function(e){t._applyFilter()},!0),this.filterBtnClear=jw.htmlFactory.createJWButton(this.options.localization.grid.filtering.clearButtonText,jw.DOM.icons.CLOSE),this.filterBtnClear.classList.add(jw.DOM.classes.JW_JW_GRID_FILTER_BUTTON_CLEAR),this.eventManager.addEventListener(this.filterBtnClear,jw.DOM.events.CLICK_EVENT,function(e){t._clearFilterControls(),t.widget.clearFilter(t._currentFilterField)},!0),jwDocumentEventManager.addDocumentEventListener(jw.DOM.events.MOUSE_DOWN_EVENT,function(e){var n=t.filterContainer.getBoundingClientRect(),o=e.x>n.right||e.x<n.left,i=e.y>n.bottom||e.y<n.top;(o||i)&&""==t.filterContainer.style.display});var e=this.createElement("div");e.classList.add(jw.DOM.classes.JW_CLEAR_FLOAT_CLASS),this.filterFooter.appendChild(this.filterBtnClear),this.filterFooter.appendChild(this.filterBtnApply),this.filterFooter.appendChild(e),this.filterContainer.appendChild(this.filterHeader),this.filterContainer.appendChild(this.filterBody),this.filterContainer.appendChild(this.filterFooter),this._clearFilterControls(),this.widget.htmlElement.appendChild(this.filterContainer)}},jasonGridUIHelper.prototype._applyFilter=function(){var t=[],e=this.firstFilterInput.value;e&&(e=0==e.trim().length?void 0:e,this._currentFilterColumn.dataType&&(e=jasonWidgets.common.convertValue(e,this._currentFilterColumn.dataType)),t.push({value:e,filterClause:this.firstFilterCombobox.selectedItem,logicalOperator:this.logicalOperatorCombobox.selectedItem})),secondFilterValue=this.secondFilterInput.value,secondFilterValue&&(secondFilterValue=0==secondFilterValue.trim().length?void 0:secondFilterValue,this._currentFilterColumn.dataType&&(secondFilterValue=jasonWidgets.common.convertValue(secondFilterValue,this._currentFilterColumn.dataType)),t.push({value:secondFilterValue,filterClause:void 0==secondFilterValue?null:this.secondFilterCombobox.selectedItem,logicalOperator:this.secondFilterInput.value?this.secondFilterCombobox.selectedItem:null})),t.length>0&&this.widget.filterBy(this._currentFilterField,t)},jasonGridUIHelper.prototype._clearFilterControls=function(){this.firstFilterCombobox.ui.hideList(),this.secondFilterCombobox.ui.hideList(),this.logicalOperatorCombobox.ui.hideList(),this.firstFilterCombobox.selectItem(0),this.secondFilterCombobox.selectItem(0),this.logicalOperatorCombobox.selectItem(0)},jasonGridUIHelper.prototype._loadFilterValues=function(t){if(t){var e=t.filterValues[0];e&&(this.firstFilterCombobox.selectItem(e.filterClause.key),this.firstFilterInput.value=e.value,this.logicalOperatorCombobox.selectItem(e.logicalOperator.key));var n=t.filterValues[1];n&&n.filterClause&&(this.secondFilterCombobox.selectItem(n.filterClause.key),this.secondFilterInput.value=n.value)}},jasonGridUIHelper.prototype._prepareFilterValues=function(t){var e=this;this.filterValues=[],this.filterValues.push({title:e.options.localization.filter.values.filterValueIsEqual,visible:!0,symbol:"="}),this.filterValues.push({title:e.options.localization.filter.values.filterValueIsNotEqual,visible:!0,symbol:"!="}),t==jw.enums.dataType.string&&(this.filterValues.push({title:e.options.localization.filter.values.filterValueStartsWith,visible:!0,symbol:"startsWith"}),this.filterValues.push({title:e.options.localization.filter.values.filterValueEndsWith,visible:!0,symbol:"endWith"}),this.filterValues.push({title:e.options.localization.filter.values.filterValueContains,visible:!0,symbol:"contains"})),t!=jw.enums.dataType.string&&(this.filterValues.push({title:e.options.localization.filter.values.filterValueGreaterThan,visible:!0,symbol:">"}),this.filterValues.push({title:e.options.localization.filter.values.filterValueGreaterEqualTo,visible:!0,symbol:">="}),this.filterValues.push({title:e.options.localization.filter.values.filterValueLessThan,
visible:!0,symbol:"<"}),this.filterValues.push({title:e.options.localization.filter.values.filterValueLessEqualTo,visible:!0,symbol:"<="})),this.filterValues.forEach(function(t,e){t.key=e}),this.filterLogicalOperators=[],this.filterLogicalOperators.push({title:e.options.localization.filter.operators.and,visible:!0,operator:"and"}),this.filterLogicalOperators.push({title:e.options.localization.filter.operators.or,visible:!0,operator:"or"}),this.filterLogicalOperators.forEach(function(t,e){t.key=e})},jasonGridUIHelper.prototype._columnVisible=function(t,e){var n=this.options.columns.filter(function(t){return 1==t.visible});if(t&&(n.length>1||n[0].fieldName!=t.fieldName)){t.visible=e;var o=e?"":"none",i="th["+jw.DOM.attributes.JW_GRID_COLUMN_FIELD_ATTR+"='"+t.fieldName+"']",a=this.gridHeaderTableRow.querySelectorAll(i)[0];a&&(a.style.display=o),i="col["+jw.DOM.attributes.JW_GRID_COLUMN_FIELD_ATTR+"='"+t.fieldName+"']";var s=this.headerTableColGroup.querySelectorAll(i)[0];s&&(s.style.display=o);var r=this.dataTableColGroup.querySelectorAll("col["+jw.DOM.attributes.JW_GRID_COLUMN_FIELD_ATTR+"='"+t.fieldName+"']")[0];r&&(r.style.display=o);for(var l=document.querySelectorAll("td[jw-data-cell-id='"+t.index+"']"),d=0;d<=l.length-1;d++)l[d].style.display=o;for(var u=this.gridDataTableBody.querySelectorAll(".group-row td"),h=this.options.columns.filter(function(t){return 1==t.visible}).length,d=0;d<=u.length-1;d++)u[d].setAttribute(jasonWidgets.DOM.attributes.COLSPAN_ATTR,h);return!0}return!1},jasonGridUIHelper.prototype._renderHeader=function(){if(!this.gridHeaderTable){this.gridHeaderTable=this.gridHeaderTableContainer.appendChild(this.createElement("table")),this.headerTableColGroup=this.gridHeaderTable.appendChild(this.createElement("colgroup"));var t=this.gridHeaderTable.appendChild(this.createElement("thead"));this.gridDataTable=this.gridDataContainer.appendChild(this.createElement("table")),this.dataTableColGroup=this.gridDataTable.appendChild(this.createElement("colgroup")),this.gridDataTableBody=this.gridDataTable.appendChild(this.createElement("tbody")),this.gridHeaderTableRow=t.appendChild(this.createElement("tr")),this.gridDataTable.setAttribute(jasonWidgets.DOM.attributes.TABINDEX_ATTR,-1),this.eventManager.addEventListener(this.gridDataTable,jw.DOM.events.KEY_DOWN_EVENT,this._onGridCellKeyDown,!0),this.eventManager.addEventListener(this.gridDataTable,jw.DOM.events.FOCUS_EVENT,this._onGridFocus,!0)}this.headerTableColGroup||(this.headerTableColGroup=this.gridHeaderTable.getElementsByTagName("colgroup")[0]),this.dataTableColGroup||(this.dataTableColGroup=this.gridDataTable.getElementsByTagName("colgroup")[0]),this._renderHeaderColumns(this.headerTableColGroup,this.dataTableColGroup)},jasonGridUIHelper.prototype._renderHeaderColumns=function(t,e){this._clearHeaderEvents(),jw.common.removeChildren(this.gridHeaderTableRow),jw.common.removeChildren(this.headerTableColGroup),jw.common.removeChildren(this.dataTableColGroup);for(var n=this,o=0;o<=this.options.columns.length-1;o++)if(gridColumn=this.options.columns[o],columnIndex=o,gridColumn.visible){var i=t.appendChild(this.createElement("col")),a=e.appendChild(this.createElement("col")),s=this.gridHeaderTableRow.appendChild(this.createElement("th")),r=s.appendChild(this.createElement("div"));r.classList.add(jw.DOM.classes.JW_GRID_HEADER_CELL_CAPTION_CONTAINER);var l=s.appendChild(this.createElement("div"));l.classList.add(jw.DOM.classes.JW_GRID_HEADER_CELL_ICON_CONTAINER),this.eventManager.addEventListener(s,jw.DOM.events.KEY_DOWN_EVENT,this._onGridColumnKeyDown,!0),this.eventManager.addEventListener(s,jw.DOM.events.FOCUS_EVENT,this._onGridColumnFocus,!0,!0);var d=gridColumn.Tooltip?gridColumn.Tooltip:gridColumn.caption;if(gridColumn.groupColumn?(i.style.width="25px",a.style.width="25px"):(i.setAttribute(jw.DOM.attributes.JW_GRID_COLUMN_FIELD_ATTR,gridColumn.fieldName),a.setAttribute(jw.DOM.attributes.JW_GRID_COLUMN_FIELD_ATTR,gridColumn.fieldName)),gridColumn.fieldName){s.setAttribute(jw.DOM.attributes.JW_GRID_COLUMN_ID_ATTR,columnIndex),s.setAttribute(jw.DOM.attributes.JW_GRID_COLUMN_FIELD_ATTR,gridColumn.fieldName),s.setAttribute(jasonWidgets.DOM.attributes.TITLE_ATTR,d);var u=r.appendChild(jw.htmlFactory.createJWLinkLabel(gridColumn.caption));u.setAttribute(jw.DOM.attributes.HREF_ATTR,"javascript:void(0)"),gridColumn.headerTemplate&&(u.innerHTML=gridColumn.headerTemplate),this.eventManager.addEventListener(u,jw.DOM.events.MOUSE_DOWN_EVENT,this._onGridColumnCaptionClick,!0),this.eventManager.addEventListener(u,jw.DOM.events.KEY_DOWN_EVENT,this._onGridColumnCaptionClick,!0),this.eventManager.addEventListener(u,jw.DOM.events.TOUCH_START_EVENT,function(t){t.preventDefault(),t.stopPropagation(),t.button=0,n._onGridColumnCaptionClick(t)},!0)}if(1==this.options.columnMenu&&!gridColumn.groupColumn){var h=jw.htmlFactory.createJWButton(null,jw.DOM.icons.LIST);h.setAttribute(jw.DOM.attributes.JW_GRID_COLUMN_ID_ATTR,columnIndex),this.eventManager.addEventListener(h,jw.DOM.events.CLICK_EVENT,this._onGridColumnMenuIconClick,!0),this.eventManager.addEventListener(h,jw.DOM.events.TOUCH_START_EVENT,function(t){t.preventDefault(),t.stopPropagation(),t.button=0,n._onGridColumnMenuIconClick(t)},!0),this.eventManager.addEventListener(h,jw.DOM.events.MOUSE_DOWN_EVENT,function(t){t.stopPropagation()},!0),l.appendChild(h)}if(1==this.options.filtering&&0==this.options.columnMenu){var c=this.createElement("i");c.className=jw.DOM.icons.SEARCH,c.style.cssFloat="right",c.style.cursor="pointer",this.eventManager.addEventListener(c,jw.DOM.events.CLICK_EVENT,this._onGridFilterButtonClick),l.appendChild(c)}}},jasonGridUIHelper.prototype.updateEnabled=function(t){jasonBaseWidgetUIHelper.prototype.updateEnabled.call(this,t);for(var e=this.htmlElement.getElementsByTagName("a"),n=0;n<=e.length-1;n++)t?(e[n].removeAttribute(jw.DOM.attributes.DISABLED_ATTR),e[n].classList.remove(jw.DOM.classes.JW_DISABLED)):(e[n].setAttribute(jw.DOM.attributes.DISABLED_ATTR,!0),e[n].classList.add(jw.DOM.classes.JW_DISABLED));for(var o=this.htmlElement.getElementsByTagName("input"),n=0;n<=o.length-1;n++)t?(o[n].removeAttribute(jw.DOM.attributes.DISABLED_ATTR),o[n].classList.remove(jw.DOM.classes.JW_DISABLED)):(o[n].setAttribute(jw.DOM.attributes.DISABLED_ATTR,!0),o[n].classList.add(jw.DOM.classes.JW_DISABLED))},jasonGridUIHelper.prototype.updateVisible=function(t){jasonBaseWidgetUIHelper.prototype.updateVisible.call(this,t)},jasonGridUIHelper.prototype.updateReadOnly=function(t){jasonBaseWidgetUIHelper.prototype.updateReadOnly.call(this,t);for(var e=this.htmlElement.getElementsByTagName("a"),n=0;n<=e.length-1;n++)t?(e[n].removeAttribute(jw.DOM.attributes.READONLY_ATTR),e[n].classList.remove(jw.DOM.classes.JW_READONLY)):(e[n].setAttribute(jw.DOM.attributes.READONLY_ATTR,!0),e[n].classList.add(jw.DOM.classes.JW_READONLY));for(var o=this.htmlElement.getElementsByTagName("input"),n=0;n<=o.length-1;n++)t?(o[n].removeAttribute(jw.DOM.attributes.READONLY_ATTR),o[n].classList.remove(jw.DOM.classes.JW_READONLY)):(o[n].setAttribute(jw.DOM.attributes.READONLY_ATTR,!0),o[n].classList.add(jw.DOM.classes.JW_READONLY))},jasonGridUIHelper.prototype._renderRows=function(t,e,n){if(void 0===n&&(n=null),this.focusedCell=null,jw.common.removeChildren(this.gridDataTableBody),this.gridSelectedCells=new Array,this.gridSelectedRows=new Array,this._focusedCell=null,this.widget.dataSource.grouping.length>0)this._renderGroupedData(n);else{var o=null,i=n?n:this.widget.dataSource.data,a=null;if(this.currentView=new Array,i.length>0)for(var s=t;s<=e;s++)a=i[s],a.RowIndex=s,this.currentView.push(a),o=this._createRowElementWithContentFromData(a),s%2==0&&o.classList.add(jw.DOM.classes.JW_GRID_JW_TABLE_ALT_ROW_CLASS),this.gridDataTableBody.appendChild(o);else this.gridDataTableBody.appendChild(this._renderNoDataRow())}},jasonGridUIHelper.prototype._renderNoDataRow=function(){var t=this.createElement("tr"),e=this.createElement("td");return e.setAttribute(jasonWidgets.DOM.attributes.COLSPAN_ATTR,this.options.columns.filter(function(t){return 1==t.visible}).length),e.appendChild(this.createTextNode(this.options.localization.data.noData)),t.appendChild(e),t.classList.add(jw.DOM.classes.JW_GRID_JW_TABLE_NO_DATA_ROW_CLASS),t},jasonGridUIHelper.prototype._createRowElementFromData=function(t){var e=this.createElement("tr");return e.setAttribute(jasonWidgets.DOM.attributes.JW_DATA_ROW_ID_ATTR,t.RowIndex),e.className=jw.DOM.classes.JW_GRID_JW_TABLE_ROW_CLASS,e},jasonGridUIHelper.prototype._createRowElementWithContentFromData=function(t){var e=this._createRowElementFromData(t);if(this.options.customization.rowTemplate)jw.common.applyTemplate(e,this.options.customization.rowTemplate,this.options.customization.dataFieldAttribute,t);else for(var n=0;n<=this.options.columns.length-1;n++){var o=this.options.columns[n];newCell=this._createCellElementFromColumn(o,t),o.visible||(newCell.style.display="none"),e.appendChild(newCell)}return e},jasonGridUIHelper.prototype._createCellElementFromColumn=function(t,e){var n=this.createElement("td"),o=this.createElement("div");if(o.classList.add(jw.DOM.classes.JW_GRID_JW_TABLE_CELL_CONTENT_CONTAINER_CLASS),n.appendChild(o),1!=t.groupColumn)if(n.className=jw.DOM.classes.JW_GRID_JW_TABLE_CELL_CLASS,n.setAttribute(jasonWidgets.DOM.attributes.JW_DATA_CELL_ID_ATTR,t.index),t.cellTemplate){o.innerHTML=t.cellTemplate;for(var i=n.querySelectorAll("*["+this.options.customization.dataFieldAttribute+"]"),a=0;a<=i.length-1;a++){var s=i[a];jw.common.replaceNodeText(s,e[s.getAttribute(this.options.customization.dataFieldAttribute)],!0)}}else textNode=this.createTextNode(e[t.fieldName]),o.appendChild(textNode);else n.className=jw.DOM.classes.JW_GRID_GROUP_CELL,o.innerHTML="&nbsp";return n},jasonGridUIHelper.prototype._createGrouppingRow=function(t){var e=this.createElement("tr"),n=this.createElement("td"),o=jw.htmlFactory.createJWButton(null,jw.DOM.icons.CIRCLE_ARROW_UP),i=this.createElement("span");i.appendChild(this.createTextNode(t.key));var a=this;return this.eventManager.addEventListener(o,jw.DOM.events.CLICK_EVENT,this._onGroupCollapseExpandIconClick,!0),this.eventManager.addEventListener(o,jw.DOM.events.KEY_DOWN_EVENT,function(t){var e=t.keyCode||t.which;switch(e){case jw.keycodes.enter:a._onGroupCollapseExpandIconClick(t);break;case jw.keycodes.downArrow:a._isGroupExpanded(null,null,t.target)||a._collapseExpandGroup(null,null,t.target);var n=jw.common.getParentElement("TR",t.target);n&&n.nextSibling&&(a.gridDataTable.focus(),a._manageCellFocused(n.nextSibling.children[0])),t.preventDefault(),t.stopPropagation();break;case jw.keycodes.upArrow:var n=jw.common.getParentElement("TR",t.target);if(void 0==n.previousSibling){var o=a.widget.dataSource.grouping[a.widget.dataSource.grouping.length-1].level+1,i=a.gridHeaderTableRow.children[o];if(i){var s=i.getElementsByClassName("jw-header-cell-caption")[0];if(s){var r=s.getElementsByTagName("a")[0];r&&r.focus()}}t.preventDefault(),t.stopPropagation()}else n.previousSibling.getElementsByClassName(jw.DOM.classes.JW_BUTTON)[0]&&(n.previousSibling.getElementsByClassName(jw.DOM.classes.JW_BUTTON)[0].focus(),t.preventDefault(),t.stopPropagation())}},!0),e.classList.add(jw.DOM.classes.JW_GRID_JW_TABLE_ROW_CLASS),e.classList.add(jw.DOM.classes.JW_GRID_JW_TABLE_GROUP_ROW_CLASS),e.setAttribute(jasonWidgets.DOM.attributes.JW_DATA_GROUPING_LEVEL_ATTR,t.level),e.setAttribute(jasonWidgets.DOM.attributes.JW_DATA_GROUPING_KEY_ATTR,t.key),n.setAttribute(jasonWidgets.DOM.attributes.COLSPAN_ATTR,this.options.columns.filter(function(t){return 1==t.visible}).length),n.appendChild(o),n.style.paddingLeft=25*t.level+"px",n.appendChild(i),e.appendChild(n),e},jasonGridUIHelper.prototype._renderFooter=function(t){if(!this.pagerContainer){this.pagerContainer=this.createElement("div"),this.pagerContainer.classList.add(jw.DOM.classes.JW_PAGER_CONTAINER_CLASS),this.pagerInfoContainer=this.createElement("div"),this.pagerInfoContainer.classList.add(jw.DOM.classes.JW_PAGER_CONTAINER_PAGE_INFO_CLASS),this.pagerInfo=this.createElement("span"),this.pagerInfoContainer.appendChild(this.pagerInfo),this.pagerButtonFirst=jw.htmlFactory.createJWButton(this.options.localization.grid.paging.firstPageButton),this.pagerButtonPrior=jw.htmlFactory.createJWButton(this.options.localization.grid.paging.priorPageButton),this.pagerButtonLast=jw.htmlFactory.createJWButton(this.options.localization.grid.paging.nextPageButton),this.pagerButtonNext=jw.htmlFactory.createJWButton(this.options.localization.grid.paging.lastPageButton),this.pagerInput=jw.htmlFactory.createJWTextInput(null,null,null,"number"),this.pagerInput.setAttribute("value","1"),this.pagerInput.setAttribute("min","1"),this.pagerContainer.appendChild(this.pagerButtonFirst),this.pagerContainer.appendChild(this.pagerButtonPrior),this.pagerContainer.appendChild(this.pagerInput),this.pagerContainer.appendChild(this.pagerButtonNext),this.pagerContainer.appendChild(this.pagerButtonLast),this.gridFooterContainer.appendChild(this.pagerContainer),this.gridFooterContainer.appendChild(this.pagerInfoContainer),this.options.paging&&this._updatePagerInfo(0,t,this.widget.dataSource.data.length)}},jasonGridUIHelper.prototype._updatePagerInfo=function(t,e,n){this.pagerInfo.childNodes.length>0&&this.pagerInfo.removeChild(this.pagerInfo.childNodes[0]);var o=jw.common.formatString("{0} - {1} {2} {3}",[t+1,e,this.options.localization.grid.paging.pagerInfoOfRecordCount,n]);this.pagerInfo.appendChild(this.createTextNode(o)),this.pagerInfo.setAttribute(jasonWidgets.DOM.attributes.TITLE_ATTR,o)},jasonGridUIHelper.prototype._calculatePageCount=function(t){this.options.paging&&(this._pageCount=t.length<=this.options.paging.pagesize?0:Math.ceil(t.length/this.options.paging.pagesize)),this._pageCount=this._pageCount<=0?1:this._pageCount},jasonGridUIHelper.prototype._goToPage=function(t,e,n){if(!(jw.common.getVariableType(t)!=jw.enums.dataType.number&&(t=parseInt(t),isNaN(t))||t<1||t>this._pageCount||t==this._currentPage&&1!=e)){t<0&&(t=0),t>this._pageCount&&(t=this._pageCount);var o=this.widget.dataSource.currentDataView;this._calculatePageCount(this.widget.dataSource.currentDataView);var i=this.options.paging?this.options.paging.pagesize:o.length,a=(t-1)*i,s=a+i-1;s>o.length&&(s=o.length-1),o=this.widget.dataSource.range(a,s),this._renderRows(0,o.length-1,o),this.options.paging&&(this._updatePagerInfo(a,s+1,this.widget.dataSource.currentDataView.length),this._currentPage=t,this.pagerInput.value=this._currentPage,this.widget.triggerEvent(jw.DOM.events.JW_EVENT_ON_PAGE_CHANGE,t))}},jasonGridUIHelper.prototype._refreshCurrentPage=function(){this._goToPage(this._currentPage,!0)},jasonGridUIHelper.prototype._collapseGroup=function(t){for(var e=parseInt(t.getAttribute(jasonWidgets.DOM.attributes.JW_DATA_GROUPING_LEVEL_ATTR)),n=t.sectionRowIndex+1;n<=this.gridDataTableBody.childNodes.length-1;n++){var o=this.gridDataTableBody.childNodes[n];if(o.className.indexOf(jw.DOM.classes.JW_GRID_JW_TABLE_GROUP_ROW_CLASS)>=0){var i=parseInt(o.getAttribute(jasonWidgets.DOM.attributes.JW_DATA_GROUPING_LEVEL_ATTR));if(!(i>e))return;o.style.display="none"}else o.style.display="none"}},jasonGridUIHelper.prototype._expandGroup=function(t){for(var e=parseInt(t.getAttribute(jasonWidgets.DOM.attributes.JW_DATA_GROUPING_LEVEL_ATTR)),n=t.sectionRowIndex+1;n<=this.gridDataTableBody.childNodes.length-1;n++){var o=this.gridDataTableBody.childNodes[n];if(o.className.indexOf(jw.DOM.classes.JW_GRID_JW_TABLE_GROUP_ROW_CLASS)>=0){var i=o.getAttribute(jasonWidgets.DOM.attributes.JW_DATA_GROUP_EXPANDED_ATTR),a=parseInt(o.getAttribute(jasonWidgets.DOM.attributes.JW_DATA_GROUPING_LEVEL_ATTR));if(!(a>e))return;o.style.display="","true"==i&&this._expandGroup(o)}else{var a=o.getAttribute(jasonWidgets.DOM.attributes.JW_DATA_GROUPING_LEVEL_ATTR);a==e&&(o.style.display="")}}},jasonGridUIHelper.prototype._initiliazeRenderingGroupedData=function(){var t=this.options.paging?this._currentPage:0,e=this.options.paging?this.options.paging.pagesize:this.widget.dataSource.data.length;this._renderGroupedData(this.widget.dataSource.range(t,e))},jasonGridUIHelper.prototype._renderGroupRow=function(t){var e=this._createGrouppingRow(t);e.setAttribute(jasonWidgets.DOM.attributes.JW_DATA_GROUP_EXPANDED_ATTR,"true"),this.gridDataTableBody.appendChild(e)},jasonGridUIHelper.prototype._renderGroupData=function(t){this._renderGroupRow(t);for(var e=0;e<=t.values.length-1;e++)if(t.values[e].values)this._renderGroupData(t.values[e]);else{var n=this._createRowElementWithContentFromData(t.values[e]);n.setAttribute(jasonWidgets.DOM.attributes.JW_DATA_GROUPING_LEVEL_ATTR,t.level),this.gridDataTableBody.appendChild(n)}},jasonGridUIHelper.prototype._renderGroupedData=function(t){jw.common.removeChildren(this.gridDataTableBody),this.gridSelectedCells=new Array,this.gridSelectedRows=new Array,this._focusedCell=null;for(var e=0;e<=t.length-1;e++)this._renderGroupData(t[e])},jasonGridUIHelper.prototype._groupByField=function(t){if(t){var e=this.createElement("div"),n=jw.htmlFactory.createJWButton(null,jw.DOM.icons.CLOSE),o=jw.htmlFactory.createJWLinkLabel(t.caption);e.setAttribute(jasonWidgets.DOM.attributes.JW_DATA_GROUPING_FIELD_ATTR,t.fieldName),n.setAttribute(jasonWidgets.DOM.attributes.TITLE_ATTR,this.options.localization.grid.grouping.removeGrouping+t.caption),e.appendChild(o),e.appendChild(n),this.gridGroupingContainer.appendChild(e),this.gridGroupingContainer.setAttribute(jasonWidgets.DOM.attributes.TITLE_ATTR,t.caption),this.eventManager.addEventListener(n,jw.DOM.events.CLICK_EVENT,this._onGroupColumnRemoveClick,!0),this.gridGroupingContainer.childNodes[0].style.display="none";var i=this.widget.dataSource.grouping[this.widget.dataSource.grouping.length-1];this.options.columns.splice(i.level,0,{width:"25px",groupColumn:!0,visible:!0,groupField:t.fieldName});var a=this.createElement("col"),s=this.createElement("col"),r=this.createElement("th");a.style.width="25px",s.style.width="25px",r.setAttribute(jasonWidgets.DOM.attributes.JW_GRID_GROUP_FIELD,t.fieldName),a.setAttribute(jasonWidgets.DOM.attributes.JW_GRID_GROUP_FIELD,t.fieldName),s.setAttribute(jasonWidgets.DOM.attributes.JW_GRID_GROUP_FIELD,t.fieldName),this.headerTableColGroup.insertBefore(a,this.headerTableColGroup.firstChild),this.dataTableColGroup.insertBefore(s,this.dataTableColGroup.firstChild),this.gridHeaderTableRow.insertBefore(r,this.gridHeaderTableRow.firstChild),this._initiliazeRenderingGroupedData(),this._enableColumnDragResize(),this._sizeColumns()}},jasonGridUIHelper.prototype._getGroupingContainerByFieldName=function(t){return jw.common.getElementsByAttribute(this.gridGroupingContainer,jasonWidgets.DOM.attributes.JW_DATA_GROUPING_FIELD_ATTR,t)[0]},jasonGridUIHelper.prototype._removeGroupByField=function(t){var e=this._getGroupingContainerByFieldName(t);e&&this.gridGroupingContainer.removeChild(e);var n=this.gridHeaderTableRow.querySelectorAll("th["+jw.DOM.attributes.JW_GRID_GROUP_FIELD+"='"+t+"']")[0];if(n){this.gridHeaderTableRow.removeChild(n);var o=this.headerTableColGroup.querySelectorAll("col["+jw.DOM.attributes.JW_GRID_GROUP_FIELD+"='"+t+"']")[0];o&&this.headerTableColGroup.removeChild(o),o=this.dataTableColGroup.querySelectorAll("col["+jw.DOM.attributes.JW_GRID_GROUP_FIELD+"='"+t+"']")[0],o&&this.dataTableColGroup.removeChild(o)}0==this.widget.dataSource.grouping.length?(this._goToPage(this._currentPage,!0),this.gridGroupingContainer.childNodes[0].style.display=""):this._initiliazeRenderingGroupedData(),this._enableColumnDragResize(),this._sizeColumns()},jasonGridUIHelper.prototype.updateColumnSortIcon=function(t,e){},jasonGridUIHelper.prototype._sortByField=function(t,e){var n=null;if(column.dataType){var o=column.dataType.toLower();switch(o){case"string":n=null;break;case"int":n=parseInt;break;case"float":n=parseFloat;break;case"datetime":n=Date.parse}}var i=new jasonDataSourceSorting(column.fieldName,"asc"!=t,n);this.options.sorting.multiple||this.widget.dataSource.clearSorting(),this.widget.dataSource.addSorting(i),this.gridPager.goToPage(this.gridPager._currentPage,!0)},jasonGridUIHelper.prototype.localizeStrings=function(t){if(t||(t=this.options.localization),1==this.options.grouping&&this.gridGroupingContainer&&(this.gridGroupingContainer.childNodes[0].innerText=t.grid.grouping.groupingMessage),1==this.options.filtering){for(var e=0;e<=this.gridHeaderTableRow.childNodes.length-1;e++)for(var n=this.gridHeaderTableRow.childNodes[e],o=0;o<=n.childNodes.length-1;o++)"I"==n.childNodes[o].tagName&&n.childNodes[o].setAttribute(jasonWidgets.DOM.attributes.TITLE_ATTR,t.grid.filtering.iconTooltip);this.filterContainer}this.options.paging&&(this.pagerButtonFirst.innerText=t.grid.paging.firstPageButton,this.pagerButtonPrior.innerText=t.grid.paging.priorPageButton,this.pagerButtonLast.innerText=t.grid.paging.lastPageButton,this.pagerButtonNext.innerText=t.grid.paging.nextPageButton,this.pagerInput.setAttribute(jasonWidgets.DOM.attributes.TITLE_ATTR,t.grid.paging.pagerInputTooltip)),this.options.columnMenu&&(this.widget.defaultGridColumnMenu.items[0].caption=t.grid.columnMenu.sortAscending,this.widget.defaultGridColumnMenu.items[1].caption=t.grid.columnMenu.sortDescending,this.widget.defaultGridColumnMenu.items[2].caption=t.grid.columnMenu.columns,this.widget.defaultGridColumnMenu.items[3].caption=t.grid.columnMenu.filter,this.widget.defaultGridColumnMenu.items.forEach(function(t){t.title=t.caption}))},jasonGrid.prototype=Object.create(jasonBaseWidget.prototype),jasonGrid.prototype.constructor=jasonGrid,jasonGrid.prototype._initializeTemplates=function(){var t="function"==typeof this.options.customization.rowTemplate?this.options.customization.rowTemplate():this.options.customization.rowTemplate,e=document.getElementById(t);if(t=e?"SCRIPT"==e.tagName?e.innerHTML:e.outerHTML:"string"==typeof t&&t.trim().length>0?t:null,this.options.customization.rowTemplate=t,this.options.columns)for(var n=0;n<=this.options.columns.length-1;n++){var o=this.options.columns[n],i="function"==typeof o.headerTemplate?o.headerTemplate():o.headerTemplate,e=document.getElementById(i);i=e?"SCRIPT"==e.tagName?e.innerHTML:e.outerHTML:"string"==typeof i&&i.trim().length>0?i:null,o.headerTemplate=i;var a="function"==typeof o.cellTemplate?o.cellTemplate():o.cellTemplate;e=document.getElementById(a),a=e?"SCRIPT"==e.tagName?e.innerHTML:e.outerHTML:"string"==typeof a&&a.trim().length>0?a:null,o.cellTemplate=a}},jasonGrid.prototype._initializeColumns=function(t){if(t=void 0==t?this.options:t,t.columns&&0!=t.columns.length)for(var e=0;e<=t.columns.length-1;e++){var n=t.columns[e];null!=n.visible&&void 0!=n.visible||(n.visible=!0),n.index=e}else{t.columns=[];var o=this.dataSource.data?this.dataSource.data[0]:null;if(o){var e=0;for(var i in o)"_jwRowId"!=i&&t.columns.push({caption:i,fieldName:i,index:e++,tooltip:i,width:null,visible:!0,dataType:jw.enums.dataType.unknown})}}},jasonGrid.prototype._initializeDefaultColumnMenu=function(){if(this.defaultGridColumnMenu={items:[]},this.options.sorting){var t=new jasonMenuItem(this.ui.createElement("li"),null,null);t.name="mnuSortAsc",t.caption=this.options.localization.grid.columnMenu.sortAscending,t.title=t.caption,t.clickable=!0,t.enabled=jasonWidgets.common.assigned(this.options.sorting),t.icon=jw.DOM.icons.SORT_ASC,t.level=0,this.defaultGridColumnMenu.items.push(t);var e=new jasonMenuItem(this.ui.createElement("li"),null,null);e.name="mnuSortDesc",e.caption=this.options.localization.grid.columnMenu.sortDescending,e.title=e.caption,e.enabled=jasonWidgets.common.assigned(this.options.sorting),e.clickable=!0,e.icon=jw.DOM.icons.SORT_DESC,e.level=0,this.defaultGridColumnMenu.items.push(e)}var n=new jasonMenuItem(this.ui.createElement("li"),null,null);if(n.name="mnuColumns",n.caption=this.options.localization.grid.columnMenu.columns,n.title=n.caption,n.icon=jw.DOM.icons.LIST,n.level=0,this.defaultGridColumnMenu.items.push(n),this.options.filtering){var o=new jasonMenuItem(this.ui.createElement("li"),null,null);o.name="mnuFilter",o.caption=this.options.localization.grid.columnMenu.filter,o.title=o.caption,o.icon=jw.DOM.icons.SEARCH,o.level=0,o.addEventListener(jw.DOM.events.JW_EVENT_ON_JW_MENU_ITEM_CONTENT_SHOW,this._onFilterShown,this),this.defaultGridColumnMenu.items.push(o)}var i=!1;if(this.options.sorting){this.defaultGridColumnMenu.items.push(createJasonMenuDividerItem()),i=!0;var a=new jasonMenuItem(this.ui.createElement("li"),null,null);a.name="mnuClearSorting",a.caption=this.options.localization.grid.columnMenu.clearSorting,a.title=a.caption,a.enabled=jasonWidgets.common.assigned(this.options.sorting),a.clickable=!0,a.icon=jw.DOM.icons.REMOVE_SORT,a.level=0,this.defaultGridColumnMenu.items.push(a)}if(this.options.filtering){var s=new jasonMenuItem(this.ui.createElement("li"),null,null);s.name="mnuClearFiltering",s.caption=this.options.localization.grid.columnMenu.clearFilters,s.title=s.caption,s.enabled=jasonWidgets.common.assigned(this.options.sorting),s.clickable=!0,s.icon=jw.DOM.icons.REMOVE_FILTER,s.level=0,this.defaultGridColumnMenu.items.push(s),i||this.defaultGridColumnMenu.items.push(createJasonMenuDividerItem())}this._addColumnsToMenu(),this.options.filtering&&this._addFilterToMenu()},jasonGrid.prototype._addColumnsToMenu=function(){for(var t=this.defaultGridColumnMenu.items.filter(function(t){return"mnuColumns"==t.name})[0],e=0;e<=this.options.columns.length-1;e++){var n=this.options.columns[e],o=new jasonMenuItem;o.name=n.fieldName,o.caption=n.caption,o.title=n.title?n.title:n.caption,o.hasCheckBox=!0,o.checked=!0,o.clickable=!0,o.level=t.level+1,o.parent=t,t.items.push(o)}},jasonGrid.prototype._addFilterToMenu=function(){var t=this.defaultGridColumnMenu.items.filter(function(t){return"mnuFilter"==t.name})[0];this.ui._renderFilterUI(),this.ui.filterContainer.style.display="";var e=new jasonMenuItem;e.name="",e.caption="",e.content=this.ui.filterContainer,e.parent=t,t.items.push(e)},jasonGrid.prototype._onDataChanged=function(){this._initializeColumns(),this.ui.renderUI(),this.triggerEvent(jw.DOM.events.JW_EVENT_ON_DATA_CHANGE)},jasonGrid.prototype._onFilterShown=function(){var t=this,e=this.dataSource.filters.filter(function(e){return e.filterField==t.ui._currentFilterField})[0];e&&this.ui._loadFilterValues(e)},jasonGrid.prototype._columnByField=function(t){return this.options.columns.filter(function(e){return e.fieldName==t})[0]},jasonGrid.prototype.initialize=function(){if(jasonBaseWidget.prototype.initialize.call(this),this.selectedRows=new Array,this.currentView=new Array,this.groupping=new Array,this.filters=new Array,this.sorting=new Array,"object"!=typeof this.options.sorting){var t=this.options.sorting;"string"==typeof this.options.sorting&&(t=jasonWidgets.common.strToBool(t)),this.options.sorting=t?{multiple:!1}:null}if("object"!=typeof this.options.paging){var e=this.options.paging;"string"==typeof this.options.paging&&(e=jasonWidgets.common.strToBool(e)),this.options.paging=e?{Pagesize:200}:null}if(this._initializeDefaultColumnMenu(),this._initializeTemplates(),this.options.data&&this.options.data.length>0){var n=this.options.data[0];if("object"==typeof n)for(var o in n){var i=this._columnByField(o.toString());!i||void 0!=i.dataType&&i.dataType!=jw.enums.dataType.unknown||i&&(i.dataType=jw.common.getVariableType(n[o]))}}},jasonGrid.prototype.groupByField=function(t){t&&!this.dataSource.groupingExists(t)&&(this.dataSource.groupByField(t),this.ui._groupByField(this._columnByField(t)),this.triggerEvent(jw.DOM.events.JW_EVENT_ON_GROUP_BY_FIELD,t))},jasonGrid.prototype.removeGrouping=function(t){if(t){var e=-1,n=this.dataSource.grouping.filter(function(n,o){if(n.field==t)return e=o,!0})[0];if(e>=0){var n=this.dataSource.grouping[e];this.dataSource.removeGrouping(n);for(var o=-1,i=0;i<=this.options.columns.length-1;i++)this.options.columns[i].groupField==n.field&&(o=i);o>=0&&this.options.columns.splice(o,1),this.ui._removeGroupByField(t),this.triggerEvent(jw.DOM.events.JW_EVENT_ON_UNGROUP_FIELD,t)}}},jasonGrid.prototype.sortBy=function(t,e){if(t){e=void 0==e?"asc":e;var n=this._columnByField(t),o=null;if(n.dataType)switch(n.dataType){case jw.enums.dataType.string:o=null;break;case jw.enums.dataType.number:o=parseFloat;break;case jw.enums.dataType.date:o=Date.parse}var i=new jasonDataSourceSorting(n.fieldName,"asc"!=e,o);this.options.sorting.multiple||this.dataSource.clearSorting(),this.dataSource.addSorting(i),this.ui._refreshCurrentPage()}},jasonGrid.prototype.removeSorting=function(t){t&&(this.dataSource.removeSorting(t),this.ui._refreshCurrentPage())},jasonGrid.prototype.filterBy=function(t,e){t&&e&&(this.dataSource.addFilter(t,e),this.dataSource.applyFilters(),this.ui._goToPage(1,!0),this.ui._sizeColumns(),this.ui.columnMenu.ui.hideMenu(),null==this.ui._currentTHElement&&(this.ui._currentTHElement=jw.common.getElementsByAttribute(this.ui.gridHeaderTable,jw.DOM.attributes.JW_GRID_COLUMN_FIELD_ATTR,t,"th")[0]),this.ui._currentTHElement.classList.add(jw.DOM.classes.JW_GRID_FIELD_HAS_FILTER))},jasonGrid.prototype.clearFilter=function(t){t&&(this.dataSource.removeFilter(t),this.ui._goToPage(1,!0),this.ui._sizeColumns(),this.ui.columnMenu.ui.hideMenu(),this.ui._currentTHElement.classList.remove(jw.DOM.classes.JW_GRID_FIELD_HAS_FILTER))},jasonGrid.prototype.goToPage=function(t){t&&this.options.paging&&this.ui._goToPage(t,!0)},jasonGrid.prototype.showColumn=function(t){return!(t&&!t.visible)||this.ui._columnVisible(t,!0)},jasonGrid.prototype.hideColumn=function(t){return!(!t||!t.visible)&&this.ui._columnVisible(t,!1)},jasonGrid.prototype.moveColumnTo=function(t,e){this.ui.moveColumn(t,e)},jasonGrid.prototype.selectRow=function(t){var e=this.dataSource.currentDataView[t];this.options.multiSelect?this.selectedRows.push(e):this.selectedRows=[e]},jasonGrid.prototype.toggleCollapseDatagroup=function(t,e){this.ui._collapseExpandGroup(t,e)},jasonGrid.prototype.exportToCSV=function(t){throw new Error("Not implemented yet.")},jasonGrid.prototype.exportToPDF=function(t){throw new Error("Not implemented yet.")},jasonGrid.prototype.exportToExcel=function(t){throw new Error("Not implemented yet.")},jasonDatePicker.prototype=Object.create(jasonButtonTextbox.prototype),jasonDatePicker.prototype.constructor=jasonDatePicker,jasonDatePicker.prototype.formatValue=function(t){return jw.common.formatDateTime(t,this.options.displayFormat)},jasonDatePicker.prototype.compareValue=function(t){var e=jw.common.getVariableType(t);switch(e){case jw.enums.dataType.string:return jw.common.dateComparison(this._value,jw.common.parseDateValue(t));case jw.enums.dataType.date:return jw.common.dateComparison(this._value,t);default:jw.common.throwError(jw.errorTypes.typeError,"Invalid value type for jasonDatePicker.")}},jasonDatePicker.prototype.readValue=function(t){return t},jasonDatePicker.prototype.setValue=function(t){var e=jw.common.getVariableType(t);switch(e){case jw.enums.dataType.string:return jw.common.parseDateValue(t,this.options.displayFormat);case jw.enums.dataType.date:return t;default:jw.common.throwError(jw.errorTypes.typeError,"Invalid value type for jasonDatePicker.")}},jasonDatePickerUIHelper.prototype=Object.create(jasonButtonTextboxUIHelper.prototype),jasonDatePickerUIHelper.prototype.constructor=jasonDatePickerUIHelper,jasonDatePickerUIHelper.prototype.renderUI=function(){jasonButtonTextboxUIHelper.prototype.renderUI.call(this),this.htmlElement.classList.contains(jw.DOM.classes.JW_DATE_PICKER_CLASS)||(this.htmlElement.classList.add(jw.DOM.classes.JW_DATE_PICKER_CLASS),this.widget.options.placeholder&&this.inputControl.setAttribute(jasonWidgets.DOM.attributes.PLACEHOLDER_ATTR,this.widget.options.placeholder),1==this.widget.readonly&&this.inputControl.setAttribute(jasonWidgets.DOM.attributes.READONLY_ATTR,this.widget.readonly),this.htmlElement.appendChild(this.inputControl),this.htmlElement.appendChild(this.button),this.widget.value&&(this.inputControl.value=jasonWidgets.common.formatDateTime(this.widget.value,this.options.displayFormat)),this.calendarContainer=this.createElement("div"),
document.body.appendChild(this.calendarContainer),this.jasonCalendar=new jasonCalendar(this.calendarContainer,{invokable:!0,autoHide:!0,invokableElement:this.htmlElement,width:this.options.width}),this.jasonCalendar.addEventListener(jw.DOM.events.JW_EVENT_ON_CHANGE,this.onCalendarDateChange))},jasonDatePickerUIHelper.prototype.initializeEvents=function(){this.eventManager.addEventListener(this.button,jw.DOM.events.CLICK_EVENT,this.buttonClick,!0),this.eventManager.addEventListener(this.inputControl,jw.DOM.events.BLUR_EVENT,this.onTextInputBlur),this.eventManager.addEventListener(this.inputControl,jw.DOM.events.KEY_DOWN_EVENT,this.inputKeyDown)},jasonDatePickerUIHelper.prototype.onTextInputBlur=function(t,e){jasonTextboxUIHelper.prototype.onTextInputBlur.call(this,t,e),this.inputControl.value.length>0&&this.changed&&(this.widget.value=this.inputControl.value)},jasonDatePickerUIHelper.prototype.onTextInputFocus=function(t,e){jasonTextboxUIHelper.prototype.onTextInputFocus.call(this,t,e)},jasonDatePickerUIHelper.prototype.inputKeyDown=function(t){var e=t.which||t.keyCode;this.changed=!0,13==e&&this.inputControl.value.length>0&&(this.widget.value=this.inputControl.value)},jasonDatePickerUIHelper.prototype.onCalendarDateChange=function(t,e){this.widget.value=e,this.jasonCalendar&&this.jasonCalendar.ui.hideCalendar(),this.inputControl.focus()},jasonDatePickerUIHelper.prototype.buttonClick=function(t){!this.widget.readonly&&this.widget.enabled&&this.jasonCalendar.ui.showCalendar(this.widget.value)},jasonTimePicker.prototype=Object.create(jasonCombobox.prototype),jasonTimePicker.prototype.constructor=jasonTimePicker,jasonTimePicker.prototype.compareValue=function(t){var e=jw.common.getVariableType(t);switch(e){case jw.enums.dataType.string:return jw.common.timeComparison(jw.common.parseTimeValue(t),this.value);case jw.enums.dataType.date:return jw.common.timeComparison(t,this.value);case jw.enums.dataType.array:return jw.common.timeComparison(Array.isArray(t)?t[0].time:t,this.value);default:jw.common.throwError(jw.errorTypes.typeError,"Invalid value type for jasonTimePicker.")}},jasonTimePicker.prototype.readValue=function(t){return t},jasonTimePicker.prototype.formatValue=function(t){return jw.common.formatDateTime(t,this.options.timeFormat)},jasonTimePicker.prototype.setValue=function(t){var e=Array.isArray(t)?t[0].time:t,n=jw.common.getVariableType(e),o=null;switch(n){case jw.enums.dataType.string:o=jw.common.parseDateTimeValue(e,this.options.timeFormat);break;case jw.enums.dataType.date:o=e;break;default:jw.common.throwError(jw.errorTypes.typeError,"Invalid value type for jasonTimePicker.")}return o&&this._selectItemFromTime(o),this._hasKeyStroke=!1,o},jasonTimePicker.prototype.prepareData=function(t){var e=[],n=Math.round(1440/t.interval);t.interval<1&&jw.common.throwError(jw.errorTypes.rangeError,"Timepicker interval cannot be less than a minute.");for(var o=0;o<=n-1;o++){var i={key:o,time:null,formattedTime:null};i.time=new Date;var a=null,s=null,r=e[e.length-1];(r&&r.time.getMinutes()+t.interval)>=60?(a=r.time.getHours()+1,s=0):(a=0==o?0:r.time.getHours(),s=0==o?0:r.time.getMinutes()+t.interval),i.time.setHours(a),i.time.setMinutes(s),i.time.setSeconds(0),i.time.setMilliseconds(0),i.formattedTime=jasonWidgets.common.formatDateTime(i.time,t.timeFormat),e.push(i)}t.data=e},jasonTimePicker.prototype.onTimePickerSelectItem=function(t,e){e.selectedItem&&(this.value=e.selectedItem.time)},jasonTimePicker.prototype._selectItemFromTime=function(t){for(var e=null,n=0;n<=this.dataSource.data.length-1;n++){var o=this.dataSource.data[n];if(jw.common.timeComparison(o.time,t)==jw.enums.comparison.equal){e=o;break}}e&&(this.clearSelection(),this.ui.dropDownListButton.selectedItems.push(e))},jasonTimePicker.prototype.onTextInputBlur=function(t){this.ui.inputControl.value.length>0&&this._hasKeyStroke&&(this.value=this.ui.inputControl.value)},jasonTimePicker.prototype.cmbInputKeyDown=function(t){var e=t.which||t.keyCode;switch(e){case jw.keycodes.enter:this.ui.inputControl.value.length>0&&(this.value=this.ui.inputControl.value,this.ui.hideList());break;case jw.keycodes.downArrow:this._hasKeyStroke=!1;break;default:this._hasKeyStroke=!0}},jasonDateTimePicker.prototype=Object.create(jasonButtonTextbox.prototype),jasonDateTimePicker.prototype.constructor=jasonDateTimePicker,jasonDateTimePicker.prototype.formatValue=function(t){switch(this.options.mode){case"date":return jw.common.formatDateTime(t,this.options.dateFormat);case"time":return jw.common.formatDateTime(t,this.options.timeFormat);case"datetime":default:return jw.common.formatDateTime(t,this.options.dateFormat+" "+this.options.timeFormat)}},jasonDateTimePicker.prototype.readValue=function(t){return t},jasonDateTimePicker.prototype.compareValue=function(t){var e=jw.common.getVariableType(t);switch(e){case jw.enums.dataType.string:break;case jw.enums.dataType.date:break;default:jw.common.throwError(jw.errorTypes.typeError,"Invalid value type for jasonDateTimePicker.")}var n=e==jw.enums.dataType.string?this.parseValue(t):t;switch(this.options.mode){case"date":return jw.common.dateComparison(this._value,n);case"time":return jw.common.timeComparison(this._value,n);case"datetime":return jw.common.dateComparison(this._value,n)==jw.enums.comparison.equal&&jw.common.timeComparison(this._value,n)==jw.enums.comparison.equal?jw.enums.equal:jw.enums.notEqual;default:return jw.enums.notEqual}},jasonDateTimePicker.prototype.setValue=function(t){var e=jw.common.getVariableType(t);switch(e){case jw.enums.dataType.string:return this.parseValue(t);case jw.enums.dataType.date:return t;default:jw.common.throwError(jw.errorTypes.typeError,"Invalid value type for jasonDateTimePicker.")}},jasonDateTimePicker.prototype.prepareData=function(t){var e=[];t.interval=t.interval?t.interval:this.defaultOptions.interval,t.dateFormat=t.dateFormat?t.dateFormat:this.defaultOptions.dateFormat,t.timeFormat=t.timeFormat?t.timeFormat:this.defaultOptions.timeFormat;for(var n=Math.round(1440/t.interval),o=0;o<=n-1;o++){var i={key:o,time:null,formattedTime:null};i.time=new Date;var a=null,s=null,r=e[e.length-1];(r&&r.time.getMinutes()+t.interval)>=60?(a=r.time.getHours()+1,s=0):(a=0==o?0:r.time.getHours(),s=0==o?0:r.time.getMinutes()+t.interval),i.time.setHours(a),i.time.setMinutes(s),i.time.setSeconds(0),i.time.setMilliseconds(0),i.formattedTime=jasonWidgets.common.formatDateTime(i.time,t.timeFormat),e.push(i)}t.data=e},jasonDateTimePicker.prototype.parseValue=function(t){var e=null;switch(this.options.mode){case"date":e=jw.common.parseDateValue(t);break;case"time":e=jw.common.parseTimeValue(t);break;case"datetime":e=jw.common.parseDateTimeValue(t)}return e},jasonDateTimePickerUIHelper.prototype=Object.create(jasonButtonTextboxUIHelper.prototype),jasonDateTimePickerUIHelper.prototype.constructor=jasonDateTimePickerUIHelper,jasonDateTimePickerUIHelper.prototype.renderUI=function(){var t=this;if(jasonButtonTextboxUIHelper.prototype.renderUI.call(this),!this.htmlElement.classList.contains(jw.DOM.classes.JW_DATE_PICKER_CLASS)){this.htmlElement.classList.add(jw.DOM.classes.JW_DATE_PICKER_CLASS),this.widget.options.placeholder&&this.inputControl.setAttribute(jasonWidgets.DOM.attributes.PLACEHOLDER_ATTR,this.widget.options.placeholder),1==this.widget.readonly&&this.inputControl.setAttribute(jasonWidgets.DOM.attributes.READONLY_ATTR,this.widget.readonly);var e={};jw.common.extendObject(this.options,e),e.icon=jw.DOM.icons.CLOCK,e.tetheredElement=this.htmlElement,e.events.push({eventName:jw.DOM.events.JW_EVENT_ON_SELECT_ITEM,listener:function(e,n){t.timeButton.hideList();var o=t.widget.value,i=null;i=o?new Date(o.getFullYear(),o.getMonth(),o.getDate(),n.selectedItem.time.getHours(),n.selectedItem.time.getMinutes(),n.selectedItem.time.getSeconds()):n.selectedItem.time,t.widget.value=i,setTimeout(function(){t.inputControl.focus()})}}),this.timeButton=new jasonDropDownListButton(jw.htmlFactory.createJWButton(null,jw.DOM.icons.CLOCK),e),this.timeButton.htmlElement.classList.remove(jw.DOM.classes.JW_BORDERED),this.timeButton.visible="date"!=this.options.mode,this.button.style.display="time"==this.options.mode?"none":"",this.htmlElement.appendChild(this.inputControl),this.htmlElement.appendChild(this.button),this.htmlElement.appendChild(this.timeButton.htmlElement);var n="datetime"==this.options.mode?70:34;this.inputControl.style.width="calc(100% - "+n+"px)",""==this.inputControl.style.width&&(this.inputControl.style.width="-webkit-calc(100% - "+n+"px)"),this.widget.value&&(this.inputControl.value=jasonWidgets.common.formatDateTime(this.widget.value,this.options.dateFormat+" "+this.options.timeFormat)),this.calendarContainer=this.createElement("div"),document.body.appendChild(this.calendarContainer),this.jasonCalendar=new jasonCalendar(this.calendarContainer,{invokable:!0,autoHide:!0,invokableElement:this.htmlElement,width:this.options.width}),this.jasonCalendar.addEventListener(jw.DOM.events.JW_EVENT_ON_CHANGE,this.onCalendarDateChange),this.widget.readonly=!!this.options.readonly&&this.options.readonly}},jasonDateTimePickerUIHelper.prototype.initializeEvents=function(){this.eventManager.addEventListener(this.button,jw.DOM.events.CLICK_EVENT,this.buttonClick,!0),this.eventManager.addEventListener(this.timeButton.htmlElement,jw.DOM.events.CLICK_EVENT,this.timeButtonClick,!0),this.eventManager.addEventListener(this.inputControl,jw.DOM.events.BLUR_EVENT,this.onTextInputBlur),this.eventManager.addEventListener(this.inputControl,jw.DOM.events.KEY_DOWN_EVENT,this.inputKeyDown)},jasonDateTimePickerUIHelper.prototype.onTextInputBlur=function(t,e){jasonTextboxUIHelper.prototype.onTextInputBlur.call(this,t,e),this.inputControl.value.length>0&&this.changed&&(this.widget.value=this.inputControl.value)},jasonDateTimePickerUIHelper.prototype.onTextInputFocus=function(t,e){jasonTextboxUIHelper.prototype.onTextInputFocus.call(this,t,e)},jasonDateTimePickerUIHelper.prototype.inputKeyDown=function(t){var e=t.which||t.keyCode;this.changed=!0,13==e&&this.inputControl.value.length>0&&(this.widget.value=this.inputControl.value)},jasonDateTimePickerUIHelper.prototype.onCalendarDateChange=function(t,e){var n=e;this.widget.value&&(n=new Date(n.getFullYear(),n.getMonth(),n.getDate(),this.widget.value.getHours(),this.widget.value.getMinutes(),this.widget.value.getSeconds())),this.widget.value=n,this.jasonCalendar&&this.jasonCalendar.ui.hideCalendar(),this.inputControl.focus()},jasonDateTimePickerUIHelper.prototype.buttonClick=function(t){!this.widget.readonly&&this.widget.enabled&&(this.jasonCalendar.ui.showCalendar(this.widget.value),this.timeButton.hideList())},jasonDateTimePickerUIHelper.prototype.timeButtonClick=function(t){!this.widget.readonly&&this.widget.enabled&&this.jasonCalendar.ui.hideCalendar()},jasonDateTimePickerUIHelper.prototype.updateEnabled=function(t){jasonButtonTextboxUIHelper.prototype.updateEnabled.call(this,t),t?(this.inputControl.removeAttribute(jw.DOM.attributes.DISABLED_ATTR),this.button.removeAttribute(jw.DOM.attributes.DISABLED_ATTR)):(this.inputControl.setAttribute(jw.DOM.attributes.DISABLED_ATTR,!0),this.button.setAttribute(jw.DOM.attributes.DISABLED_ATTR,!0)),this.timeButton.enabled=t},jasonDateTimePickerUIHelper.prototype.updateReadOnly=function(t){jasonButtonTextboxUIHelper.prototype.updateReadOnly.call(this,t),this.timeButton.readonly=t},jasonDialog.prototype=Object.create(jasonBaseWidget.prototype),jasonDialog.prototype.constructor=jasonDialog;var jasonDialogButtonResult={OK:1,CANCEL:2,NO:3,YES:4,ABORT:5,RETRY:6,IGNORE:7};jasonDialog.prototype.show=function(){this.ui.renderUI(),this.ui.show()},jasonDialog.prototype.hide=function(){this.ui.hide()},jasonDialog.prototype._initializeTemplates=function(t){var e="function"==typeof t.customization.headerTemplate?t.customization.headerTemplate():t.customization.headerTemplate,n=document.getElementById(e);e=n?"SCRIPT"==n.tagName?n.innerHTML:n.outerHTML:"string"==typeof e&&e.trim().length>0?e:null,t.customization.headerTemplate=e,e="function"==typeof t.customization.bodyTemplate?t.customization.bodyTemplate():t.customization.bodyTemplate,n=document.getElementById(e),e=n?"SCRIPT"==n.tagName?n.innerHTML:n.outerHTML:"string"==typeof e&&e.trim().length>0?e:null,t.customization.bodyTemplate=e},jasonDialogUIHelper.prototype=Object.create(jasonBaseWidgetUIHelper.prototype),jasonDialogUIHelper.prototype.constructor=jasonDialogUIHelper,jasonDialogUIHelper.prototype.renderUI=function(){this.dialogContainer||(this.dialogContainer=this.createElement("DIV"),this.dialogContainer.style.display="none",this.dialogContainer.classList.add(jw.DOM.classes.JW_DIALOG_CONTAINER),this.htmlElement.parentNode.removeChild(this.htmlElement),this.blockUI=new jasonBlockUI(this.dialogContainer,{opacity:"0.5"}),this.dialogHeader=this.createElement("DIV"),this.dialogHeader.classList.add(jw.DOM.classes.JW_DIALOG_HEADER),this.dialogTitleContainer=this.createElement("DIV"),this.dialogTitleContainer.classList.add(jw.DOM.classes.JW_DIALOG_TITLE_CONTAINER),this.dialogHeaderButtonContainer=this.createElement("DIV"),this.dialogHeaderButtonContainer.classList.add(jw.DOM.classes.JW_DIALOG_HEADER_BUTTON_CONTAINER),this.dialogHeader.appendChild(this.dialogTitleContainer),this.dialogHeader.appendChild(this.dialogHeaderButtonContainer),void 0==this.options.customization.headerTemplate?(this.dialogTitle=jw.htmlFactory.createJWLinkLabel(this.options.title),this.dialogTitleContainer.appendChild(this.dialogTitle),this.options.closeButton&&(this.dialogHeaderButton=jw.htmlFactory.createJWButton(null,jw.DOM.icons.CLOSE),jw.common.setData(this.dialogHeaderButton,jw.DOM.attributeValues.JW_DIALOG_BUTTON_DATA_KEY,{name:"closeBtn",result:jasonDialogButtonResult.CANCEL}),this.eventManager.addEventListener(this.dialogHeaderButton,jw.DOM.events.CLICK_EVENT,this._onDialogButtonClick,!0),this.dialogHeaderButtonContainer.appendChild(this.dialogHeaderButton))):jw.common.applyTemplate(this.dialogHeader,this.options.customization.headerTemplate,this.options.customization.dataFieldAttribute,this.options.model),this.dialogBody=this.createElement("DIV"),void 0==this.options.customization.bodyTemplate?this.dialogBody.appendChild(this.htmlElement):jw.common.applyTemplate(this.dialogBody,this.options.customization.bodyTemplate,this.options.customization.dataFieldAttribute,this.options.model),this.dialogBody.classList.add(jw.DOM.classes.JW_DIALOG_BODY),this.dialogFooter=this.createElement("DIV"),this.dialogFooter.classList.add(jw.DOM.classes.JW_DIALOG_FOOTER),this.buttonsContainer=this.createElement("div"),this.buttonsContainer.classList.add(jw.DOM.classes.JW_DIALOG_BUTTONS_CONTAINER),this.dialogFooter.appendChild(this.buttonsContainer),this._renderButtons(),this.dialogContainer.appendChild(this.dialogHeader),this.dialogContainer.appendChild(this.dialogBody),this.dialogContainer.appendChild(this.dialogFooter),this.dialogContainer.appendChild(jw.htmlFactory.createClearFloat()),this.dragResize=new jasonDragResize(this.dialogContainer,{allowResize:!!this.options.resizeable&&{top:!0,left:!0,bottom:!0,right:!0},allowDrag:{draggable:this.options.draggable,element:this.dialogHeader},minHeight:this.options.minHeight,minWidth:this.options.minWidth,changeDragCursor:!1}))},jasonDialogUIHelper.prototype._renderButtons=function(t){if(0==this.options.buttons.length){var e=this.options.localization.dialog.buttons.filter(function(t){return"btnOK"==t.name})[0];this.options.buttons.push({caption:e.caption,result:jasonDialogButtonResult.OK})}for(var n=0;n<=this.options.buttons.length-1;n++){var o=jw.htmlFactory.createJWButton(this.options.buttons[n].caption);this.options.buttons[n].element=o,this.eventManager.addEventListener(o,jw.DOM.events.CLICK_EVENT,this._onDialogButtonClick,!0),jw.common.setData(o,jw.DOM.attributeValues.JW_DIALOG_BUTTON_DATA_KEY,this.options.buttons[n]),this.buttonsContainer.appendChild(o)}},jasonDialogUIHelper.prototype._onDialogButtonClick=function(t){var e=jw.common.getData(t.currentTarget,jw.DOM.attributeValues.JW_DIALOG_BUTTON_DATA_KEY);this.widget.triggerEvent(jw.DOM.events.JW_EVENT_ON_JW_DIALOG_BUTTON_CLICK,e),0!=e.controlsDialogClose&&void 0!=e.controlsDialogClose||this.hide()},jasonDialogUIHelper.prototype.show=function(){if(!this.widget.readonly&&this.widget.enabled){if(this.resizeEventListenerId=jwWindowEventManager.addWindowEventListener(jw.DOM.events.RESIZE_EVENT,function(t){this._dialogInCenter()}.bind(this)),this.options.modal){for(var t=document.querySelectorAll(".jw-dialog-container"),e=null,n=t.length-1;n>=0;n--)if(""==t[n].style.display){e=t[n];break}this.blockUI.options.blockKeyboard=!0,this.blockUI.block(null==e?this.options.blockTarget:e)}if(this.options.width&&(this.dialogContainer.style.width=parseFloat(this.options.width)+"px"),this.options.height&&(this.dialogContainer.style.height=parseFloat(this.options.height)+"px"),this.options.top&&(this.dialogContainer.style.top=parseFloat(this.options.top)+"px"),this.options.left&&(this.dialogContainer.style.left=parseFloat(this.options.left)),document.body.appendChild(this.dialogContainer),this.dialogContainer.style.display="",""==this.dialogContainer.style.zIndex)this.dialogContainer.style.zIndex=jw.common.getNextZIndex();else{var o=parseInt(this.dialogContainer.style.zIndex),i=jw.common.getNextZIndex();o<i&&(this.dialogContainer.style.zIndex=i)}if(this._dialogInCenter(),void 0!=this.dialogTitle&&this.dialogTitle.focus(),this.options.animation){var a=!this.options.animation.delay||this.options.animation.delay>10?25:5*this.options.animation.delay,s=this;jw.common.fadeIn(this.dialogContainer,a,function(){s.widget.triggerEvent(jw.DOM.events.JW_EVENT_ON_SHOW)})}else this.widget.triggerEvent(jw.DOM.events.JW_EVENT_ON_SHOW)}},jasonDialogUIHelper.prototype.hide=function(){if(this.options.animation){var t=!this.options.animation.delay||this.options.animation.delay>10?25:5*this.options.animation.delay;jw.common.fadeOut(this.dialogContainer,t,function(){this.blockUI.unBlock(),jwWindowEventManager.removeWindowEventListener(this.resizeEventListenerId),document.body.removeChild(this.dialogContainer),this.widget.triggerEvent(jw.DOM.events.JW_EVENT_ON_HIDE)}.bind(this))}else this.blockUI.unBlock(),document.body.removeChild(this.dialogContainer),this.widget.triggerEvent(jw.DOM.events.JW_EVENT_ON_HIDE)},jasonDialogUIHelper.prototype._dialogInCenter=function(){if(void 0==this.options.left){var t=window.innerWidth/2-this.dialogContainer.offsetWidth/2;this.dialogContainer.style.left=t+"px"}if(void 0==this.options.top){var e=window.innerHeight/2-this.dialogContainer.offsetHeight/2;this.dialogContainer.style.top=e+"px"}},jasonButton.prototype=Object.create(jasonBaseWidget.prototype),jasonButton.prototype.constructor=jasonButton,jasonButtonUIHelper.prototype=Object.create(jasonBaseWidgetUIHelper.prototype),jasonButtonUIHelper.prototype.constructor=jasonButtonUIHelper,jasonButtonUIHelper.prototype.renderUI=function(){jw.htmlFactory.createJWButton(this.options.caption,this.options.icon,this.htmlElement),this.htmlElement.classList.add(jw.DOM.classes.JW_BORDERED)},jasonButtonUIHelper.prototype.initializeEvents=function(){this.eventManager.addEventListener(this.htmlElement,jw.DOM.events.CLICK_EVENT,this.buttonClick,!0)},jasonButtonUIHelper.prototype.buttonClick=function(){!this.widget.readonly&&this.widget.enabled&&this.widget.triggerEvent(jw.DOM.events.CLICK_EVENT)},jasonButtonUIHelper.prototype.updateEnabled=function(t){jasonBaseWidgetUIHelper.prototype.updateEnabled.call(this,t),t?this.htmlElement.removeAttribute(jw.DOM.attributes.DISABLED_ATTR):this.htmlElement.setAttribute(jw.DOM.attributes.DISABLED_ATTR,!0)},jasonButtonUIHelper.prototype.updateVisible=function(t){jasonBaseWidgetUIHelper.prototype.updateVisible.call(this,t)},jasonButtonUIHelper.prototype.updateReadOnly=function(t){jasonBaseWidgetUIHelper.prototype.updateReadOnly.call(this,t),t?this.htmlElement.removeAttribute(jw.DOM.attributes.READONLY_ATTR):this.htmlElement.setAttribute(jw.DOM.attributes.READONLY_ATTR,!0)},jasonDropDownListButton.prototype=Object.create(jasonBaseWidget.prototype),jasonDropDownListButton.prototype.constructor=jasonDropDownListButton,jasonDropDownListButton.prototype.onDataChange=function(){this.ui.renderListItems()},jasonDropDownListButton.prototype._initializeTemplates=function(){var t="function"==typeof this.options.customization.itemTemplate?this.options.customization.itemTemplate():this.options.customization.itemTemplate,e=document.getElementById(t);t=e?"SCRIPT"==e.tagName?e.innerHTML:e.outerHTML:"string"==typeof t&&t.trim().length>0?t:null,this.options.customization.itemTemplate=t},jasonDropDownListButton.prototype.showList=function(){this.ui.showList()},jasonDropDownListButton.prototype.hideList=function(){this.ui.hideList()},jasonDropDownListButton.prototype.selectItem=function(t){if("number"==typeof t){this.options.multiSelect||(this.selectedItems=[]);var e=this.dataSource.data[t];e&&(this.selectedItems.push(e),this.selectedItemIndex=t,this.ui.updateCaption(),this.triggerEvent(jw.DOM.events.JW_EVENT_ON_SELECT_ITEM,{selectedItem:e,selectedItemIndex:t}),this.validate())}},jasonDropDownListButton.prototype.deSelectItem=function(t){var e=this.dataSource.data[t];if(e){var n=-1;this.selectedItems.filter(function(t,o){var i=t._jwRowId==e._jwRowId;if(i)return void(n=o)}),n>=0&&(this.selectedItems.splice(n,1),this.ui.updateCaption(),this.triggerEvent(jw.DOM.events.JW_EVENT_ON_UNSELECT_ITEM,{selectedItem:e,selectedItemIndex:t}))}},jasonDropDownListButtonUIHelper.prototype=Object.create(jasonBaseWidgetUIHelper.prototype),jasonDropDownListButtonUIHelper.prototype.constructor=jasonDropDownListButtonUIHelper,jasonDropDownListButtonUIHelper.prototype.monitorForDocumentClick=function(t){if(this.dropDownListContainer&&""==this.dropDownListContainer.style.display){if(jw.common.contains(this.htmlElement,t.target))return;jw.common.isMouseEventOutOfContainer(this.dropDownListContainer,t)&&this.hideList()}},jasonDropDownListButtonUIHelper.prototype.renderUI=function(){jasonButtonUIHelper.prototype.renderUI.call(this),this.dropDownListContainer=this.createElement("DIV"),this.dropDownList=this.createElement("UL"),this.renderListItems(),this.dropDownListContainer.appendChild(this.dropDownList),this.dropDownListContainer.style.display="none",this.dropDownListContainer.style.position="absolute",this.dropDownListContainer.classList.add(jw.DOM.classes.JW_DROP_DOWN_LIST),this.options.multiSelect&&this.htmlElement.classList.add(jw.DOM.classes.JW_DROP_DOWN_BUTTON_MULTI_SELECT)},jasonDropDownListButtonUIHelper.prototype.createCaptionFromSelection=function(){var t=this,e="",n=[];return this.widget.selectedItems.forEach(function(o,i){t.options.displayFields.forEach(function(t){n.push(o[t])}),e+=jasonWidgets.common.formatString(t.options.displayFormat,n),t.widget.selectedItems.length>1&&i<t.widget.selectedItems.length-1&&(e=e+" "+t.options.multipleSelectionSeparator+" "),n=[]}),e},jasonDropDownListButtonUIHelper.prototype.updateCaption=function(){var t=this.createCaptionFromSelection();jw.common.replaceNodeText(this.htmlElement.children[0],t),this.htmlElement.children[0].setAttribute(jw.DOM.attributes.TITLE_ATTR,t)},jasonDropDownListButtonUIHelper.prototype.renderListItems=function(t){var e=t?t:this.widget.dataSource.data;jw.common.removeChildren(this.dropDownList);for(var n=jasonWidgets.common.getNextTabIndex(),o=0;o<=e.length-1;o++){var i=this.createElement("li"),a=e[o],s=null;if(this.options.customization.itemTemplate)jw.common.applyTemplate(i,this.options.customization.itemTemplate,this.options.customization.dataFieldAttribute,a);else{var r=this.formatDataItem(a);s=jw.htmlFactory.createJWLabel(r),this.options.checkboxes&&i.appendChild(jw.htmlFactory.createJWCheckBoxInput(!1,null)),i.appendChild(s)}i.className=jw.DOM.classes.JW_DROP_DOWN_LIST_ITEM,i.setAttribute(jasonWidgets.DOM.attributes.JW_DATA_JW_ITEM_INDEX_ATTR,a._jwRowId),i.setAttribute(jasonWidgets.DOM.attributes.JW_ITEM_INDEX_ATTR,o),i.setAttribute(jasonWidgets.DOM.attributes.TABINDEX_ATTR,n),jasonWidgets.common.setData(i,"jDropDownListDataItem",a),this.eventManager.addEventListener(i,jw.DOM.events.KEY_DOWN_EVENT,this.onListItemKeyDown,!0),this.eventManager.addEventListener(i,jw.DOM.events.MOUSE_DOWN_EVENT,this.onListItemClick,!0),n++,this.dropDownList.appendChild(i)}},jasonDropDownListButtonUIHelper.prototype.formatDataItem=function(t){var e=[];this.options.displayFields&&this.options.displayFields.forEach(function(n){e.push(t[n])});var n=t._NoData_;return n||(n="string"==typeof t?t:jasonWidgets.common.formatString(this.options.displayFormat,e)),t._jw_Searchable_value=e.join(" "),n},jasonDropDownListButtonUIHelper.prototype.initializeEvents=function(){this.eventManager.addEventListener(this.htmlElement,jw.DOM.events.CLICK_EVENT,this.buttonClick,!0)},jasonDropDownListButtonUIHelper.prototype.buttonClick=function(){this.toggleList(),jasonButtonUIHelper.prototype.buttonClick.call(this)},jasonDropDownListButtonUIHelper.prototype.toggleList=function(){"none"==this.dropDownListContainer.style.display?this.showList():this.hideList()},jasonDropDownListButtonUIHelper.prototype.showList=function(){if(!this.widget.readonly&&this.widget.enabled&&(this.dropDownListContainer.style.display="none")){var t=this.options.tetheredElement?jw.common.getBoundingClientRect(this.options.tetheredElement):jw.common.getBoundingClientRect(this.htmlElement);document.body.appendChild(this.dropDownListContainer);var e=this.options.tetheredElement?this.options.tetheredElement.offsetWidth:this.htmlElement.offsetWidth,n=this.options.tetheredElement?this.options.tetheredElement.offsetHeight:this.htmlElement.offsetHeight,o=t.top+n,i=t.left;e&&(this.dropDownListContainer.style.width=e+"px"),this.dropDownListContainer.style.top=o+"px",this.dropDownListContainer.style.left=i+"px",this.dropDownListContainer.style.zIndex=jw.common.getNextAttributeValue("z-index")+1,this.dropDownListContainer.style.display="",jw.common.getFirstFocusableElement(this.dropDownList),this.scrollItemIntoView(),this.widget.selectedItems.forEach(function(t,e){var n=this.dropDownList.children[t._jwRowId];n&&this.toggleLIElementSelection(n)}.bind(this)),this.widget.triggerEvent(jw.DOM.events.JW_EVENT_ON_SHOW)}},jasonDropDownListButtonUIHelper.prototype.hideList=function(){!this.widget.readonly&&this.widget.enabled&&""==this.dropDownListContainer.style.display&&(this.dropDownListContainer.style.display="none",document.body.removeChild(this.dropDownListContainer),this.widget.triggerEvent(jw.DOM.events.JW_EVENT_ON_HIDE))},jasonDropDownListButtonUIHelper.prototype.clearSelection=function(t){for(var e=this.dropDownList.getElementsByClassName(jw.DOM.classes.JW_SELECTED),n=0;n<=e.length-1;n++)e[n]!=t&&e[n].classList.remove(jw.DOM.classes.JW_SELECTED);this.widget.selectedItemIndex=-1,this.widget.selectedItems=[]},jasonDropDownListButtonUIHelper.prototype.onListItemClick=function(t){if(0==t.button){var e=("INPUT"!=t.target.tagName,"LI"==t.target.tagName?t.target:jw.common.getParentElement("LI",t.target)),n=e.getElementsByTagName("input")[0];if(!this.options.multiSelect&&this.options.checkboxes)for(var o=this.dropDownList.getElementsByTagName("input"),i=0;i<=o.length-1;i++)o[i]!=n&&(o[i].checked=!1);this.options.multiSelect||this.clearSelection(e),e.classList.contains(jw.DOM.classes.JW_SELECTED)?this.widget.deSelectItem(parseInt(e.getAttribute(jasonWidgets.DOM.attributes.JW_DATA_JW_ITEM_INDEX_ATTR))):this.widget.selectItem(parseInt(e.getAttribute(jasonWidgets.DOM.attributes.JW_DATA_JW_ITEM_INDEX_ATTR))),this.toggleLIElementSelection(e),this.options.multiSelect||this.hideList()}},jasonDropDownListButtonUIHelper.prototype.toggleLIElementSelection=function(t){var e=t.getElementsByTagName("input")[0];t.classList.contains(jw.DOM.classes.JW_SELECTED)?(t.classList.remove(jw.DOM.classes.JW_SELECTED),e&&(e.checked=!1)):(t.classList.add(jw.DOM.classes.JW_SELECTED),e&&(e.checked=!0))},jasonDropDownListButtonUIHelper.prototype.onListItemKeyDown=function(t){var e=t.which||t.keyCode;switch(e){case 9:this.setFocusToListItem(t.currentTarget,t.shiftKey?jw.DOM.attributeValues.JW_COMBOBOX_LIST_STATE_UP:jw.DOM.attributeValues.JW_COMBOBOX_LIST_STATE_DOWN),t.preventDefault();break;case jw.keycodes.enter:var n=parseInt(t.currentTarget.getAttribute(jasonWidgets.DOM.attributes.JW_DATA_JW_ITEM_INDEX_ATTR));this.widget.selectItem(n),this.hideList(!0),this.htmlElement.focus();break;case jw.keycodes.escape:this.hideList();break;case jw.keycodes.upArrow:this.setFocusToListItem(t.currentTarget,jw.DOM.attributeValues.JW_COMBOBOX_LIST_STATE_UP),t.preventDefault();break;case jw.keycodes.downArrow:this.setFocusToListItem(t.currentTarget,jw.DOM.attributeValues.JW_COMBOBOX_LIST_STATE_DOWN),t.preventDefault()}},jasonDropDownListButtonUIHelper.prototype.setFocusToListItem=function(t,e){var n=parseInt(t.getAttribute(jasonWidgets.DOM.attributes.JW_ITEM_INDEX_ATTR));"up"==e?n-1<0?this.htmlElement.focus():this.dropDownList.children[n-1].focus():this.dropDownList.children.length!=n+1&&this.dropDownList.children[n+1].focus()},jasonDropDownListButtonUIHelper.prototype.scrollSelectedIntoView=function(t){if(""==this.dropDownListContainer.style.display&&this.widget.selectedItemIndex>=0){var e=jw.common.getElementsByAttribute(this.dropDownList,jasonWidgets.DOM.attributes.JW_DATA_JW_ITEM_INDEX_ATTR,this.widget.selectedItemIndex)[0];void 0!=e&&(this.dropDownListContainer.scrollTop=e.offsetTop,t&&e.focus())}},jasonDropDownListButtonUIHelper.prototype.scrollFirstItemIntoView=function(t){""==this.dropDownListContainer.style.display&&this.dropDownList.children.length>0&&(this.dropDownListContainer.scrollTop=this.dropDownList.children[0].offsetTop,t&&this.dropDownList.children[0].focus())},jasonDropDownListButtonUIHelper.prototype.scrollItemIntoView=function(t){this.widget.selectedItems.length>0?this.scrollSelectedIntoView(t):this.scrollFirstItemIntoView(t)},jasonDropDownListButtonUIHelper.prototype.updateEnabled=function(t){jasonButtonUIHelper.prototype.updateEnabled.call(this,t)},jasonDropDownListButtonUIHelper.prototype.updateVisible=function(t){jasonButtonUIHelper.prototype.updateVisible.call(this,t)},jasonDropDownListButtonUIHelper.prototype.updateReadOnly=function(t){jasonButtonUIHelper.prototype.updateReadOnly.call(this,t)},jasonPopover.prototype=Object.create(jasonBaseWidget.prototype),jasonPopover.prototype.constructor=jasonPopover,jasonPopover.prototype.show=function(){if(!this.readonly&&this.enabled&&"none"==this.htmlElement.style.display){if(document.body.appendChild(this.htmlElement),this.htmlElement.style.display="",""==this.htmlElement.style.zIndex)this.htmlElement.style.zIndex=jw.common.getNextZIndex();else{var t=parseInt(this.htmlElement.style.zIndex),e=jw.common.getNextZIndex();t<e&&(this.htmlElement.style.zIndex=e)}this._placePopover(),this.ui.targetElementClientRect=this.options.targetElement.getBoundingClientRect(),this.ui.monitorTargetElement(),this.triggerEvent(jw.DOM.events.JW_EVENT_ON_SHOW,this)}},jasonPopover.prototype.hide=function(){""==this.htmlElement.style.display&&(this.htmlElement.style.display="none",document.body.removeChild(this.htmlElement),this.triggerEvent(jw.DOM.events.JW_EVENT_ON_HIDE,this))},jasonPopover.prototype.toggle=function(t){""==this.htmlElement.style.display?this.hide():this.show()},jasonPopover.prototype._getSpaceInformation=function(t,e,n){var o=e?e:this._spaceInformation,i=(this.htmlElement.getBoundingClientRect(),n?n:{height:this.htmlElement.offsetHeight,width:this.htmlElement.offsetWidth});o.exceedingLeftPixels=i.width+this.arrowSize-t.left,o.exceedingRightPixels=t.right+i.width+this.arrowSize-document.body.offsetWidth,o.exceedingTopPixels=i.height+this.arrowSize-t.clientRect.top,o.exceedingBottomPixels=i.height+this.arrowSize-(document.documentElement.offsetHeight-t.clientRect.bottom);var a=t.left+t.width/2-i.width/2,s=t.top+t.height/2-i.height/2-this.arrowSize;if(o.leftForVertical=a,o.topForHorizontal=s,o.canShowOnTop=o.exceedingTopPixels<=0,o.canShowOnTop&&(a<0&&(a=0),o.canShowOnTop=o.canShowOnTop&&a>=0,o.canShowOnTop&&(o.canShowOnTop=o.canShowOnTop&&a<t.left,
o.canShowOnTop&&(o.canShowOnTop=o.canShowOnTop&&a+i.width+t.scrolling.left<document.body.offsetWidth,o.canShowOnTop&&a>0&&(o.canShowOnTop=o.canShowOnTop&&a+t.scrolling.left+i.width/2<t.right)))),o.canShowOnBottom=o.exceedingBottomPixels<=0,o.canShowOnBottom&&(a<0&&(a=0),o.canShowOnBottom=o.canShowOnBottom&&a>=0,o.canShowOnBottom&&(o.canShowOnBottom=o.canShowOnBottom&&a<t.left,o.canShowOnBottom&&(o.canShowOnBottom=o.canShowOnBottom&&a+i.width+t.scrolling.left<document.body.offsetWidth,o.canShowOnBottom&&a>0&&(o.canShowOnBottom=o.canShowOnBottom&&a+t.scrolling.left+i.width/2<t.right)))),o.canShowOnLeft=o.exceedingLeftPixels<=0,o.canShowOnLeft&&(o.canShowOnLeft=o.canShowOnLeft&&s>=0,o.canShowOnLeft)){t.bottom>t.clientRect.bottom?t.bottom:t.clientRect.bottom;o.canShowOnLeft=o.canShowOnLeft&&s+i.height/2<document.documentElement.offsetHeight}if(o.canShowOnRight=o.exceedingRightPixels<=0,o.canShowOnRight&&(o.canShowOnRight=o.canShowOnRight&&s>=0,o.canShowOnRight)){t.bottom>t.clientRect.bottom?t.bottom:t.clientRect.bottom;o.canShowOnRight=o.canShowOnRight&&s+i.height/2<document.documentElement.offsetHeight}return o.needsResize=!(o.canShowOnTop||o.canShowOnBottom||o.canShowOnLeft||o.canShowOnRight),o},jasonPopover.prototype._placePopover=function(){var t={left:0,top:0};this.htmlElement.classList.remove(jw.DOM.classes.JW_TOP),this.htmlElement.classList.remove(jw.DOM.classes.JW_BOTTOM),this.htmlElement.classList.remove(jw.DOM.classes.JW_LEFT),this.htmlElement.classList.remove(jw.DOM.classes.JW_RIGHT),this.htmlElement.classList.remove(jw.DOM.classes.JW_ARROW_LEFT),this.htmlElement.classList.remove(jw.DOM.classes.JW_ARROW_MIDDLE),this.htmlElement.classList.remove(jw.DOM.classes.JW_ARROW_RIGHT);var e=null;switch(this.options.coordinates?(t.top=this.options.coordinates.top,t.left=this.options.coordinates.left):this.options.targetElement&&(this.htmlElement.style.height="",this.htmlElement.style.width="",this.htmlElement.style.top="0px",this.htmlElement.style.left="0px",e=jw.common.getBoundingClientRect(this.options.targetElement),this._getSpaceInformation(e),this.options.autoPlacement&&(this.options.arrowPlacement="middle",this._choosePosition()),this.options.autoSize&&this._spaceInformation.needsResize?(this._resizePopover(e),this._getSpaceInformation(e),this.options.autoPlacement&&this._choosePosition()):"none"==this.options.position&&(this.options.position="top"),t=this._getCoordinates(e)),this.options.position.toLowerCase()){case jw.DOM.classes.JW_TOP:this.htmlElement.classList.add(jw.DOM.classes.JW_TOP);break;case jw.DOM.classes.JW_LEFT:this.htmlElement.classList.add(jw.DOM.classes.JW_LEFT);break;case jw.DOM.classes.JW_BOTTOM:this.htmlElement.classList.add(jw.DOM.classes.JW_BOTTOM);break;case jw.DOM.classes.JW_RIGHT:this.htmlElement.classList.add(jw.DOM.classes.JW_RIGHT)}switch(this.options.arrowPlacement.toLowerCase()){case jw.DOM.classes.JW_LEFT:this.htmlElement.classList.add(jw.DOM.classes.JW_ARROW_LEFT);break;case jw.DOM.classes.JW_RIGHT:this.htmlElement.classList.add(jw.DOM.classes.JW_ARROW_RIGHT)}this.htmlElement.style.top=t.top+"px",this.htmlElement.style.left=t.left+"px"},jasonPopover.prototype._choosePosition=function(){return this._spaceInformation.canShowOnTop?void(this.options.position="top"):this._spaceInformation.canShowOnBottom?void(this.options.position="bottom"):this._spaceInformation.canShowOnLeft?void(this.options.position="left"):this._spaceInformation.canShowOnRight?void(this.options.position="right"):void(this.options.position="none")},jasonPopover.prototype._resizePopover=function(t){var e=this.htmlElement.offsetHeight,n=this.htmlElement.offsetWidth,o="none";if(this.options.autoPlacement){var i={left:t.left,top:document.documentElement.offsetHeight-t.top,right:document.body.offsetWidth-t.right,bottom:document.documentElement.offsetHeight-(t.clientRect.bottom+t.scrolling.top)};i.top>i.right&&i.top>i.left&&i.top>i.bottom&&(o="top"),i.left>i.top&&i.left>i.right&&i.left>i.bottom&&(o="left"),i.right>i.top&&i.right>i.left&&i.right>i.bottom&&(o="right"),i.bottom>i.top&&i.bottom>i.left&&i.bottom>i.right&&(o="bottom")}else o=this.options.position.toLowerCase();var a={},s=n,r=e;switch(o){case"top":for(a=this._getSpaceInformation(t,a);!a.canShowOnTop&&((a.leftForVertical+s>document.body.offsetWidth||a.leftForVertical<0)&&(s-=Math.abs(a.leftForVertical)),a.exceedingTopPixels>0&&(r-=a.exceedingTopPixels+this.arrowSize),r<0&&(r=50),a=this._getSpaceInformation(t,a,{height:Math.round(r),width:Math.round(s)}),a.needsResize););break;case"left":for(a=this._getSpaceInformation(t,a);!a.canShowOnLeft&&(a.exceedingLeftPixels>0&&(s-=a.exceedingLeftPixels+this.arrowSize),(a.topForHorizontal+r>document.documentElement.offsetHeight||a.topForHorizontal<0)&&(r-=Math.abs(a.topForHorizontal)),r<0&&(r=50),a=this._getSpaceInformation(t,a,{height:Math.round(r),width:Math.round(s)}),a.needsResize););break;case"bottom":for(a=this._getSpaceInformation(t,a);!a.canShowOnBottom&&((a.leftForVertical+s>document.body.offsetWidth||a.leftForVertical<0)&&(s-=Math.abs(a.leftForVertical)),a.exceedingBottomPixels>0&&(r-=a.exceedingBottomPixels+this.arrowSize),r<0&&(r=50),a=this._getSpaceInformation(t,a,{height:Math.round(r),width:Math.round(s)}),a.needsResize););break;case"right":for(a=this._getSpaceInformation(t,a);!a.canShowOnRight&&(a.exceedingRightPixels>0&&(s-=a.exceedingRightPixels+this.arrowSize),(a.topForHorizontal+r>document.documentElement.offsetHeight||a.topForHorizontal<0)&&(r-=Math.abs(a.topForHorizontal)),r<0&&(r=50),a=this._getSpaceInformation(t,a,{height:Math.round(r),width:Math.round(s)}),a.needsResize););}this.htmlElement.style.width=s+"px",this.htmlElement.style.height=r+"px"},jasonPopover.prototype._getCoordinates=function(t,e,n){var o=e?e.toLowerCase():this.options.position.toLowerCase(),i=n?n:{height:this.htmlElement.offsetHeight,width:this.htmlElement.offsetWidth},a={left:0,top:0};switch(o){case jw.DOM.classes.JW_TOP:switch(a.top=t.top-i.height-this.arrowSize,a.left=t.left+t.width/2-i.width/2,a.left<0&&this.options.autoPlacement&&(this.options.arrowPlacement=jw.DOM.classes.JW_LEFT),this.options.arrowPlacement.toLowerCase()){case jw.DOM.classes.JW_LEFT:a.left=t.left;break;case jw.DOM.classes.JW_RIGHT:a.left=Math.abs(t.right-i.width)}break;case jw.DOM.classes.JW_LEFT:switch(a.left=t.left-i.width,this.options.arrowPlacement.toLowerCase()){case jw.DOM.classes.JW_LEFT:a.top=t.top;break;case jw.DOM.classes.JW_RIGHT:a.top=t.bottom;break;default:a.top=t.top+t.height/2-i.height/2}break;case jw.DOM.classes.JW_BOTTOM:switch(a.top=t.top+t.height+this.arrowSize,a.left=t.left+t.width/2-i.width/2,a.left<0&&this.options.autoPlacement&&(this.options.arrowPlacement=jw.DOM.classes.JW_LEFT),this.options.arrowPlacement.toLowerCase()){case jw.DOM.classes.JW_LEFT:a.left=t.left;break;case jw.DOM.classes.JW_RIGHT:a.left=t.right-i.width}break;case jw.DOM.classes.JW_RIGHT:switch(a.left=t.right+this.arrowSize,this.options.arrowPlacement.toLowerCase()){case jw.DOM.classes.JW_LEFT:a.top=t.top;break;case jw.DOM.classes.JW_RIGHT:a.top=t.bottom;break;default:a.top=t.top+t.height/2-i.height/2}}return a},jasonPopoverUIHelper.prototype=Object.create(jasonBaseWidgetUIHelper.prototype),jasonPopoverUIHelper.prototype.constructor=jasonPopoverUIHelper,jasonPopoverUIHelper.prototype.initializeEvents=function(){this.options.targetElement&&"popover"==this.options.mode.toLowerCase()&&this.eventManager.addEventListener(this.options.targetElement,jw.DOM.events.CLICK_EVENT,this.widget.toggle);var t=this;"validation"!=this.options.mode.toLowerCase()&&jwDocumentEventManager.addDocumentEventListener(jw.DOM.events.MOUSE_DOWN_EVENT,function(e){jw.common.isMouseEventOutOfContainer(t.widget.htmlElement,e)&&t.widget.hide()})},jasonPopoverUIHelper.prototype.initializeContent=function(){this.options.content=jw.common.parseTemplateContent(this.options.content)},jasonPopoverUIHelper.prototype.renderUI=function(){var t=this;if(!this.htmlElement.classList.contains(jw.DOM.classes.JW_POPOVER)){if(this.htmlElement.classList.add(jw.DOM.classes.JW_POPOVER),this.header=this.createElement("DIV"),this.header.classList.add(jw.DOM.classes.JW_POPOVER_HEADER),this.title=jw.htmlFactory.createJWLinkLabel(this.options.title),this.header.appendChild(this.title),this.options.closeButton&&(this.closeButton=jw.htmlFactory.createJWButton(null,jw.DOM.icons.CLOSE),this.header.appendChild(this.closeButton),this.title.classList.add(jw.DOM.classes.JW_HAS_ICON),this.eventManager.addEventListener(this.closeButton,jw.DOM.events.CLICK_EVENT,function(e){t.widget.hide()},!0)),jwWindowEventManager.addWindowEventListener(jw.DOM.events.RESIZE_EVENT,function(e){"validation"==t.widget.options.mode.toLowerCase()?setTimeout(function(){t.widget._placePopover()}):t.widget.hide()}),"tooltip"==this.options.mode.toLowerCase()){var e=!0;this.eventManager.addEventListener(this.options.targetElement,jw.DOM.events.MOUSE_ENTER_EVENT,function(n){e=!0,setTimeout(function(){e&&t.widget.show()},500)}),this.eventManager.addEventListener(this.options.targetElement,jw.DOM.events.MOUSE_LEAVE_EVENT,function(n){e=!1,setTimeout(function(){t.widget.hide()},750)})}this.body=this.createElement("DIV"),this.body.classList.add(jw.DOM.classes.JW_POPOVER_BODY),this.options.content&&jw.common.applyTemplate(this.body,this.options.content,this.options.customization.dataFieldAttribute,this.options.model),this.htmlElement.appendChild(this.header),this.htmlElement.appendChild(this.body)}},jasonPopoverUIHelper.prototype.monitorTargetElement=function(){if(""==this.htmlElement.style.display){var t=this.options.targetElement.getBoundingClientRect();jw.common.simpleObjectComparison(this.targetElementClientRect,t)!=jw.enums.comparison.equal&&(this.widget._placePopover(),this.targetElementClientRect=t),window.requestAnimationFrame(this.monitorTargetElement)}};