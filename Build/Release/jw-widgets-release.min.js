function jasonCommon(){this.HTMLCanvas=null;this._benchmark=!1;this._jwWidgetsCatalog=[];this.globalEventListeners=[];var n=this;this._registerWidget=function(t){n._jwWidgetsCatalog.push({uid:t._uid,widget:t})};jasonCommon.prototype.extendObject=function(n,t){t||(t={});for(var i in n)(t[i]==undefined||t[i]==null)&&(t[i]=n[i]),t[i]&&typeof t[i]=="object"&&typeof n[i]=="object"&&this.extendObject(n[i],t[i])};jasonCommon.prototype.formatString=function(n,t){for(var r,i=0;i<t.length;i++)r=new RegExp("\\{"+i+"\\}","gi"),n=n.replace(r,t[i]);return n};jasonCommon.prototype.charCountInString=function(n,t){return t.split(n).length-1};jasonCommon.prototype.formatDateTime=function(n,t){var u,r,e,s,f;t||(t=jasonWidgets.localizationManager.currentCulture.dateFormat);var i="",p=n.getFullYear(),c=n.getMonth()+1,w=n.getDay(),a=n.getDate(),o=n.getHours(),v=n.getMinutes(),y=n.getSeconds(),l=n.getMilliseconds(),b=["d","M","m","y","H","h","s","m","f","t"],h=function(n){return b.indexOf(n)>=0};if(n)for(u=null,r=null,t.indexOf(jasonWidgets.localizationManager.postMeridiemString)>=0&&t.replace(jasonWidgets.localizationManager.postMeridiemString,""),t.indexOf(jasonWidgets.localizationManager.anteMeridiemString)>=0&&t.replace(jasonWidgets.localizationManager.anteMeridiemString,""),e=0;e<=t.length-1;e++){s=t[e];f=0;switch(s){case"y":for(f=0,r=e,u=s;h(u);)r++,f++,u=t[r];e=r-1;i=f>2?i+p:p.toString().substr(2,2);break;case"d":for(f=0,r=e,u=s;h(u);)r++,f++,u=t[r];e=r-1;switch(f){case 1:i=i+a;break;case 2:i=a>9?i+a:i+"0"+a;break;case 3:i=i+jasonWidgets.localizationManager.currentLanguage.calendar.days[w].shortname;break;case 4:i=i+jasonWidgets.localizationManager.currentLanguage.calendar.days[w].name}break;case"M":for(f=0,r=e,u=s;h(u);)r++,f++,u=t[r];e=r-1;switch(f){case 1:i=i+c;break;case 2:i=c>9?i+c:i+"0"+c;break;case 3:i=i+jasonWidgets.localizationManager.currentLanguage.calendar.months[c-1].shortname;break;case 4:i=i+jasonWidgets.localizationManager.currentLanguage.calendar.months[c-1].name}break;case"h":for(f=0,r=e,u=s;h(u);)r++,f++,u=t[r];e=r-1;switch(f){case 1:i=i+(o-12);break;case 2:jasonWidgets.localizationManager.isTwelveHourClock?((o>12||o==0)&&(o=Math.abs(o-12)),i=o>9?o:"0"+o):i=o>9?o:i+"0"+o}break;case"H":for(f=0,r=e,u=s;h(u);)r++,f++,u=t[r];e=r-1;switch(f){case 1:i=i+o;break;case 2:i=o>9?i+o:i+"0"+o}break;case"m":for(f=0,r=e,u=s;h(u);)r++,f++,u=t[r];e=r-1;switch(f){case 1:i=i+v;break;case 2:i=v>9?i+v:i+"0"+v}break;case"s":for(f=0,r=e,u=s;h(u);)r++,f++,u=t[r];e=r-1;switch(f){case 1:i=i+y;break;case 2:i=y>9?i+y:i+"0"+y}break;case"f":for(f=0,r=e,u=s;h(u);)r++,f++,u=t[r];e=r-1;switch(f){case 1:i=i+l;break;case 2:i=l>9?l<99?i+"00"+l:i+l:i+"0"+l}break;case"t":break;default:i=i+s}}return t.indexOf("h")>=0&&jasonWidgets.localizationManager.isTwelveHourClock&&(i=n.getHours()>12?i+" "+jasonWidgets.localizationManager.postMeridiemString:i+" "+jasonWidgets.localizationManager.anteMeridiemString),i};jasonCommon.prototype.getParentElement=function(n,t){for(var i=t.parentNode,r=!1;!r&&jasonWidgets.common.assigned(i)&&i!=document;)r=i.getAttribute("id")==n||i.classList.contains(n)||i.tagName==n,r||(i=i.parentNode);return i};jasonCommon.prototype.containsClasses=function(n,t){for(var i=!1,r=0;r<=t.length-1;r++)if(i=n.classList.contains(t[r]),i)break;return i};jasonCommon.prototype.scrollBarWidth=function(){var n=document.createElement("div"),t,i,r;return n.style.width="50px",n.style.height="50px",n.style.overflowY="scroll",n.style.position="absolute",n.style.top="-200px",t=document.createElement("div"),t.style.height="100%",t.style.width="100%",n.appendChild(t),document.body.appendChild(n),i=n.offsetWidth,r=t.clientWidth,document.body.removeChild(n),i-r};jasonCommon.prototype.setData=function(n,t,i){n&&(n.jasonWidgetsData||(n.jasonWidgetsData=[]),n.jasonWidgetsData.push({dataName:t,dataValue:i}))};jasonCommon.prototype.removeData=function(n,t){if(n.jasonWidgetsData){var i=-1;n.jasonWidgetsData.filter(function(n,r){if(n.dataName==t){i=r;return}});i>=0&&n.jasonWidgetsData.splice(i,1)}};jasonCommon.prototype.getData=function(n,t){if(n.jasonWidgetsData){var i=n.jasonWidgetsData.filter(function(n){return n.dataName==t})[0];return i?i.dataValue:null}return null};jasonCommon.prototype.swapItemsInArray=function(n,t,i){var r=n[t],u=n[i];r&&u&&(n[t]=u,n[i]=r)};jasonCommon.prototype.swapDomElements=function(n,t,i){if(n!=void 0&&t!=void 0&&i!=void 0){domElementToMove=n.children[t];domElementNew=n.children[i];var r=domElementToMove.nextSibling,u=domElementNew.nextSibling;n.insertBefore(domElementToMove,u);n.insertBefore(domElementNew,r)}};jasonCommon.prototype.moveChildrenTo=function(n,t,i,r,u){var e=[],o,f;for(i=i?i:[],r=r?r:[],u=u?u:[],o=function(n,t,i){return t.length>0&&i.length>0?t.indexOf(n.tagName)>=0||i.indexOf(n.className)>=0:t.length>0&&i.length<=0?t.indexOf(n.tagName)>=0:t.length<=0&&i.length>0?i.indexOf(n.className)>=0:!1},f=n.children.length-1;f>=0;f--)r.length==0&&i.length==0?e.push(n.removeChild(n.children[f])):(i.length>0&&i.indexOf(n.children[f].tagName)>=0&&e.push(n.removeChild(n.children[f])),o(n.children[f],r,u)||e.push(n.removeChild(n.children[f])));for(f=e.length-1;f>=0;f--)t.appendChild(e[f])};jasonCommon.prototype.applyStyleProperty=function(n,t,i,r,u){for(var f,e=0;e<=n.children.length-1;e++)f=n.children[e],r?(f.getAttribute("id")==r||f.classList.contains(r)||f.tagName==r)&&(f.style[t]=i):f.style[t]=i,u==!0&&this.applyStyleProperty(f,t,i,r,u)};jasonCommon.prototype.cssClass=function(n,t,i,r,u){for(var f,e=0;e<=n.children.length-1;e++)f=n.children[e],r?(f.getAttribute("id")==r||f.classList.contains(r)||f.tagName==r)&&(i?f.classList.add(t):f.classList.remove(t)):i?f.classList.add(t):f.classList.remove(t),u==!0&&this.applyStyleProperty(f,t,i,r,u)};jasonCommon.prototype.fadeOut=function(n,t){var i,r;n._jasonWidgetsFadeOut||(n._jasonWidgetsFadeOut=!0,i=0,n.style.opacity="0",r=setInterval(function(){n.style.opacity=i;i>=1?(n.style.opacity="",clearInterval(r),n._jasonWidgetsFadeOut=undefined):i=i+.1},t))};jasonCommon.prototype.isInlineElement=function(n){var t=this.inlineElements.indexOf(n.tagName);return t>=0?!0:!1};jasonCommon.prototype.isBlockElement=function(n){var t=this.blockElements.indexOf(n.tagName);return t>=0?!0:!1};jasonCommon.prototype.getOffsetCoordinates=function(n){for(var i={left:0,top:0},t=n;t;)i.left+=t.offsetLeft,i.top+=t.offsetTop,t=t.offsetParent;return i};jasonCommon.prototype.getTextWidth=function(n,t){var u=this.HTMLCanvas||(this.HTMLCanvas=document.createElement("canvas")),i=u.getContext("2d"),r;return i.font=t,r=i.measureText(n),r.width};jasonCommon.prototype.getComputedStyleProperty=function(n,t){return window.getComputedStyle(n,null).getPropertyValue(t)};jasonCommon.prototype.replaceNodeText=function(n,t,i){for(var u=null,r=0;r<=n.childNodes.length-1;r++)if(n.childNodes[r].nodeType==3){u=n.childNodes[r];break}u?n.replaceChild(document.createTextNode(t),u):i&&n.appendChild(document.createTextNode(t))};jasonCommon.prototype.removeNodeText=function(n){for(var i=null,t=0;t<=n.childNodes.length-1;t++)if(n.childNodes[t].nodeType==3){i=n.childNodes[t];break}i&&n.removeChild(i)};jasonCommon.prototype.getNodeText=function(n){for(var i=null,t=0;t<=n.childNodes.length-1;t++)if(n.childNodes[t].nodeType==3){i=n.childNodes[t];break}return i};jasonCommon.prototype.getElementsByAttribute=function(n,t,i,r){var u=n?n:document,f=r===void 0?"*[{0}='{1}']":r+"[{0}='{1}']";return u.querySelectorAll(jw.common.formatString(f,[t,i]))};jasonCommon.prototype.getNextTabIndex=function(){for(var n,r=document.querySelectorAll("*[tabindex]"),t=0,i=0;i<=r.length-1;i++)n=r[i].getAttribute("tabindex"),n&&(n=parseInt(n),n>t&&(t=n));return t+1};jasonCommon.prototype.getNextAttributeValue=function(n){for(var t,u=document.querySelectorAll("*["+n+"]"),i=0,r=0;r<=u.length-1;r++)t=u[r].getAttribute(n),t&&(t=parseInt(t),t>i&&(i=t));return i+1};jasonCommon.prototype.contains=function(n,t){var i=[].slice.call(n.getElementsByTagName(t.tagName));return i.filter(function(n){return n==t}).length==1};jasonCommon.prototype.assigned=function(n){return!(n==void 0)};jasonCommon.prototype.strToBool=function(n){return n&&(n.toLowerCase()=="true"||n.toLowerCase()=="yes")?!0:!1};jasonCommon.prototype.boolToStr=function(n){return n?"true":"false"};jasonCommon.prototype.convertValue=function(n,t){if(typeof n=="string"&&n.trim().length>0)switch(t){case"number":return parseFloat(n);case"boolean":return jasonWidgets.common.strToBool(n);case"date":return new Date(n)}if(typeof n=="number")switch(t){case"string":return n.toString();case"boolean":return n==0?!1:!0;case"date":var i=new Date;i.setTime(n)}if(typeof n=="date")switch(t){case"string":return n.toString();case"boolean":throw new Error("Cannot convert a date to a boolean value");case"number":return n.getTime()}if(typeof n=="boolean")switch(t){case"string":return jasonWidgets.common.boolToStr(n);case"date":throw new Error("Cannot convert a boolean to a date value");case"number":return n?1:0}return n};jasonCommon.prototype.dateOf=function(n){var t=null;return n=n?n:new Date,n&&(t=new Date,t.setHours(0,0,0,0),t.setYear(n.getFullYear()),t.setMonth(n.getMonth()),t.setDate(n.getDate())),t};jasonCommon.prototype.timeOf=function(n){var t=null;return n=n?n:new Date,n&&(t=new Date,t.setHours(n.getHours()),t.setMinutes(n.getMinutes()),t.setSeconds(n.getSeconds()),t.setMilliseconds(n.getMilliseconds())),t};jasonCommon.prototype.dateComparison=function(n,t){var i=jw.enums.comparison.equal,r=jasonWidgets.common.dateOf(n).getTime(),u=jasonWidgets.common.dateOf(t).getTime();return r>u&&(i=jw.enums.comparison.firstIsGreater),r<u&&(i=jw.enums.comparison.secondIsGreater),i};jasonCommon.prototype.timeComparison=function(n,t){var i=jw.enums.comparison.equal,r=jasonWidgets.common.timeOf(n).getTime(),u=jasonWidgets.common.timeOf(t).getTime();return r>u&&(i=jw.enums.comparison.firstIsGreater),r<u&&(i=jw.enums.comparison.secondIsGreater),i};jasonCommon.prototype.daysInMonth=function(n,t){return new Date(n,t,0).getDate()};jasonCommon.prototype.daysInYear=function(n){return n%4==0&&(n%100!=0||n%400==0)?366:365};jasonCommon.prototype.objectHasProperty=function(n,t){var i=!1;for(var r in n)if(r===t){i=!0;break}return i};jasonCommon.prototype.isMouseEventOutOfContainer=function(n,t){var i=n.getBoundingClientRect(),r=t.x||t.pageX,u=t.y||t.pageY,f=r>i.right||r<i.left,e=u>i.bottom||u<i.top;return f||e};jasonCommon.prototype.isMouseEventOutOfContainerAndNotAChild=function(n,t){var i=jw.common.isMouseEventOutOfContainer(n,t);return i&&!jw.common.contains(n,t.target)};jasonCommon.prototype.removeJWEvents=function(n,t){var r=n._jasonWidgetsEventListeners_,i;if(r){for(i=r.length-1;i>=0;i--)n.removeEventListener(r[i].eventName,r[i].listener),r.splice(i,1);if(t&&n.children.length>0)for(i=0;i<=n.children.length-1;i++)jw.common.removeJWEvents(n.children[i],t)}else if(n.children)for(i=0;i<=n.children.length-1;i++)jw.common.removeJWEvents(n.children[i],t)};jasonCommon.prototype.removeChildren=function(n){while(n.firstChild)jw.common.removeJWEvents(n.firstChild),jw.common.removeChildren(n.firstChild),n.removeChild(n.firstChild)};jasonCommon.prototype.addGlobalEventListener=function(n){this.globalEventListeners.push(n)};jasonCommon.prototype.getVariableType=function(n){var t=jw.enums.variableType.unknown,i;return typeof n=="object"?(t=jw.enums.variableType.object,i=n.constructor?n.constructor.toString():"",i.indexOf("Date()")>0&&i.indexOf("native code")>0&&(t=jw.enums.variableType.date)):(typeof n=="number"&&(t=jw.enums.variableType.number),typeof n=="boolean"&&(t=jw.enums.variableType.boolean),typeof n=="function"&&(t=jw.enums.variableType.function)),t};jasonCommon.prototype.triggerGlobalEvent=function(n,t){for(var i=0;i<=this.globalEventListeners.length-1;i++)this.globalEventListeners[i](n,t)};jasonCommon.prototype.isJWWidget=function(n){return this._jwWidgetsCatalog.filter(function(t){return t.uid===n._uid}).length>0};jasonCommon.prototype.generateUUID=function(){var n=(new Date).getTime();return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(t){var i=(n+Math.random()*16)%16|0;return n=Math.floor(n/16),(t=="x"?i:i&3|8).toString(16)})};jasonCommon.prototype.inlineElements=["BUTTON","SPAN","INPUT","LABEL","SELECT","A","I"];jasonCommon.prototype.blockElements=["DIV","P","TABLE","THEAD","TFOOT","TBODY","HR","UL","OL","FIELDSET","NAV","H1","H2","H3","H4","H5","H6"];jasonCommon.prototype.throwError=function(n,t){switch(n){case jw.errorTypes.error:throw new Error(t);case jw.errorTypes.evalError:throw new EvalError(t);case jw.errorTypes.rangeError:throw new RangeError(t);case jw.errorTypes.referenceError:throw new ReferenceError(t);case jw.errorTypes.syntaxError:throw new SyntaxError(t);case jw.errorTypes.typeError:throw new TypeError(t);case jw.errorTypes.uriError:throw new URIError(t);default:throw new Error(t);}}}function jasonHTMLFactory(){jasonHTMLFactory.prototype.createJWButton=function(n,t){var r=document.createElement("a"),i,u;return r.classList.add(JW_BUTTON),r.setAttribute("href","javascript:void(0)"),n!=void 0&&n.trim().length>0&&(i=document.createElement("span"),i.classList.add(JW_LABEL),i.classList.add(JW_TEXT_OVERFLOW),i.appendChild(document.createTextNode(n)),i.setAttribute(TITLE_ATTR,n),r.appendChild(i)),t!=void 0&&t.trim().length>0&&(u=document.createElement("i"),u.className=t,r.appendChild(u)),r};jasonHTMLFactory.prototype.createJWTextInput=function(n,t,i,r){var u=document.createElement("input");return u.classList.add(JW_TEXT_INPUT),u.setAttribute(TYPE_ATTR,"text"),r!=void 0&&r.trim().length>0&&u.setAttribute(TYPE_ATTR,r),n!=void 0&&n.trim().length>0&&u.setAttribute(INPUT_MODE_ATTR,n),t!=void 0&&t.trim().length>0&&u.setAttribute(PLACEHOLDER_ATTR,t),i!=void 0&&i&&u.setAttribute(READONLY_ATTR,i),u};jasonHTMLFactory.prototype.createJWLinkLabel=function(n){var t=document.createElement("a"),i;return t.setAttribute("href","javascript:void(0)"),t.classList.add(JW_LABEL),t.classList.add(JW_TEXT_OVERFLOW),n!=void 0&&n.trim().length>0&&(i=document.createElement("span"),i.appendChild(document.createTextNode(n)),t.appendChild(i)),t};jasonHTMLFactory.prototype.createJWMenuItem=function(n,t,i){var u=i==void 0?document.createElement("li"):i,r,f,h,e,o,s,c;return u.classList.add(JW_MENU_ITEM),t.clickable&&u.classList.add(JW_MENU_ITEM_CLICKABLE),t.enabled||u.classList.add(JW_MENU_ITEM_DISABLED),u.setAttribute(TITLE_ATTR,t.title),t.caption!=void 0&&t.caption.trim().length>0&&(r=document.createElement("div"),r.classList.add(JW_MENU_ITEM_CAPTION),r.appendChild(jw.htmlFactory.createJWLinkLabel(t.caption)),r.classList.add(JW_TEXT_OVERFLOW),r.classList.add(JW_MENU_ITEM_CAPTION_ONLY),u.appendChild(r)),t.icon!=void 0&&t.icon.trim().length>0&&(f=document.createElement("div"),h=document.createElement("i"),h.className=t.icon,f.classList.add(JW_MENU_ITEM_ICON),f.appendChild(h),r.classList.add("has-icon"),r.classList.remove(JW_MENU_ITEM_CAPTION_ONLY),u.appendChild(f)),t.hasCheckBox!=void 0&&t.hasCheckBox&&(e=document.createElement("div"),o=document.createElement("input"),o.setAttribute(TYPE_ATTR,"checkbox"),o.checked=t.checked,e.appendChild(o),e.classList.add(JW_MENU_ITEM_CHECKBOX),r.classList.add("has-checkbox"),r.classList.remove(JW_MENU_ITEM_CAPTION_ONLY),u.appendChild(e)),t.caption!=void 0&&t.caption.trim().length>0&&u.appendChild(r),t.items!=void 0&&t.items.length>0&&(s=document.createElement("div"),c=document.createElement("i"),c.className=t.level==0?n=="horizontal"?JW_ICON_CHEVRON_DOWN:JW_ICON_CHEVRON_RIGHT:n=="horizontal"?JW_ICON_CHEVRON_RIGHT:JW_ICON_CHEVRON_DOWN,r.classList.add("has-arrow"),s.appendChild(c),s.classList.add(JW_MENU_ITEM_ARROW),r.classList.remove(JW_MENU_ITEM_CAPTION_ONLY),u.appendChild(s)),u};jasonHTMLFactory.prototype.convertToJWMenuItem=function(n,t){var i,u,e,r,f;t!=void 0&&(t.classList.add(JW_MENU_ITEM),t.classList.add(JW_MENU_ITEM_CLICKABLE),i=jw.common.getNodeText(t),i!=void 0&&(menuCaption=document.createElement("div"),menuCaption.classList.add(JW_MENU_ITEM_CAPTION),menuCaption.appendChild(jw.htmlFactory.createJWLinkLabel(i.textContent)),menuCaption.classList.add(JW_TEXT_OVERFLOW),menuCaption.classList.add(JW_MENU_ITEM_CAPTION_ONLY),t.replaceChild(menuCaption,i)),u=t.getAttribute(READONLY_ATTR),u!=void 0&&u==!0&&t.classList.add(JW_MENU_ITEM_DISABLED),e=t.getElementsByTagName("UL").length>0,e&&(r=document.createElement("div"),f=document.createElement("i"),f.className=n=="horizontal"?JW_ICON_CHEVRON_RIGHT:JW_ICON_CHEVRON_DOWN,menuCaption.classList.add("has-arrow"),r.appendChild(f),r.classList.add(JW_MENU_ITEM_ARROW),t.appendChild(r)))}}function jasonBaseWidget(n,t,i,r){return this.htmlElement=t,this.nameSpace=n,this._emptyDefaultOptions={events:[],customization:{},dataIsSimpleJS:!0},this._enabled=!0,this._visible=!0,this._readOnly=!1,this._uid=jw.common.generateUUID(),jw.common._registerWidget(this),this.defaultOptions?jasonWidgets.common.extendObject(this._emptyDefaultOptions,this.defaultOptions):this.defaultOptions=this._emptyDefaultOptions,i||(i={}),jasonWidgets.common.extendObject(this.defaultOptions,i),this._eventListeners=i.events?i.events:[],this.options=i,this.options.localization=this.options.localization?this.options.localization:jasonWidgets.localizationManager.currentLanguage,this.eventManager=new jasonEventManager,this.baseClassName="jasonWidget",this.htmlElement&&(jasonWidgets.common.setData(this.htmlElement,this.nameSpace,this),this.htmlElement.classList.add(this.baseClassName)),this.jwProc=this.jwProc.bind(this),this.ui=typeof r=="function"?new r(this,t):new jasonBaseWidgetUIHelper(this),jw.common.addGlobalEventListener(this.jwProc),jasonBaseWidget}function jasonBaseWidgetUIHelper(n,t){this.widget=n;this.htmlElement=t;this.createdElements=[]}function jasonDataSourceSorting(n,t,i){this.name=n;this.reverse=t;this.primer=i}function jasonDataSource(n){this.defaultOptions={data:null,onChange:null,onSort:null,onGroup:null};jasonWidgets.common.extendObject(this.defaultOptions,n);this.options=n;this.data=n.data;this.processData();this.currentDataView=[].concat(this.data);this.grouping=[];this.dictionaries=[];this.filters=[];this.sorting=[]}function jasonEventManager(){this.eventListeners=[];jasonEventManager.prototype.mouseEnterLeaveHandler=function(n,t){var i=n.relatedTarget,r;i&&(i===t||jasonWidgets.common.contains(t,i))||((n.type=="mouseover"||n.type=="pointerover")&&(r="mouseenter"),(n.type=="mouseout"||n.type=="pointerout")&&(r="mouseleave"),this.triggerEvent(r,t,n))};jasonEventManager.prototype.addEventListener=function(n,t,i,r,u){var s=this,e,o,f;n._jasonWidgetsEventListeners_||(n._jasonWidgetsEventListeners_=[]);n._jasonWidgetsEventListeners_.indexOf(t)<0&&(e=t,o=function(n){s.triggerEvent(t,r?n.currentTarget:n.target,n)},u=u===void 0?!1:u,n.addEventListener(e,o,u));f={element:n,eventName:t,listener:i};this.eventListeners.push(f);n._jasonWidgetsEventListeners_.push(f)};jasonEventManager.prototype.triggerEvent=function(n,t,i){var r=this.eventListeners.filter(function(i){return i.eventName==n&&i.element==t})[0];r&&(typeof r.listener=="function"?r.listener(i,t):new Error("event listener is not a function"))};jasonEventManager.prototype.clearEvents=function(){this.eventListeners.forEach(function(n){n.element&&(n.element.removeEventListener(n.eventName,n.listener),n.element._jasonWidgetsEventListeners_=null)});this.eventListeners=[]};this.triggerEvent=this.triggerEvent.bind(this);this.mouseEnterLeaveHandler=this.mouseEnterLeaveHandler.bind(this)}function jasonLocalizationManager(){var n=this;Object.defineProperty(n,"currentLanguage",{get:function(){var n=this.languages[this.currentLanguageKey],t,i;return n||(this.currentLanguageKey.indexOf("-")>=0?(t=this.currentLanguageKey.split("-"),i=t[0]+"-"+t[1].toLowerCase(),n||(i=t[0]+"-"+t[1].toUpperCase(),n=this.languages[i],n||(n=this.languages["en-US"]))):n=this.languages["en-US"]),n},enumerable:!0});Object.defineProperty(n,"currentCulture",{get:function(){var n=this.cultures[this.currentCultureKey],t,i;return n||(this.currentCultureKey.indexOf("-")>=0?(t=this.currentCultureKey.split("-"),i=t[0]+"-"+t[1].toLowerCase(),n||(i=t[0]+"-"+t[1].toUpperCase(),language=this.cultures[i],n||(n=this.cultures["en-US"]))):n=this.cultures["en-US"]),n},set:function(n){this.currentCultureKey=n;this.determineDateFormat();this.determineTimeFormat()},enumerable:!0});this.currentLanguageKey=navigator.browserLanguage||navigator.language;this.currentCultureKey=navigator.browserLanguage||navigator.language;this.languages={};this.cultures={};this.determineDateFormat=function(){var n="",i=new Date,u,t,f;i.setHours(0);i.setMinutes(0);i.setSeconds(0);i.setMilliseconds(0);i.setYear(1999);i.setMonth(11);i.setDate(31);var e=i.toLocaleDateString(),o=e.match(/[^0-9]/g),r=o[0];for(this.localeDateSeparator=r,u=e.split(r),t=0;t<=u.length-1;t++)u[t].length>2&&(t>0&&(n=n+r),n=n+"yyyy"),u[t].length==2&&(f=parseInt(u[t]),f==12&&(t>0&&(n=n+r),n=n+"MM"),f==31&&(t>0&&(n=n+r),n=n+"dd"),f==99&&(t>0&&(n=n+r),n=n+"dd"));return n};this.determineTimeFormat=function(){var t="",r=new Date,u="",s="",i,c,e,n,f;for(r.setHours(11),r.setMinutes(59),r.setSeconds(59),r.setMilliseconds(0),i=r.toLocaleTimeString(this.currentCultureKey),i=i.replace(/\u200E/g,""),n=0;n<=i.length-1;n++)if(i[n]!=""&&(e=i.charCodeAt(n),!isNaN(e)&&e>64)){s=i.substr(n,i.length-n);break}for(this.anteMeridiemString=s,r.setHours(23),r.setMinutes(24),r.setSeconds(25),r.setMilliseconds(26),i=r.toLocaleTimeString(this.currentCultureKey),i=i.replace(/\u200E/g,""),c="",n=0;n<=i.length-1;n++)if(i[n]!=""&&(e=i.charCodeAt(n),!isNaN(e)&&e>64)){s=i.substr(n,i.length-n);break}this.postMeridiemString=s;u=r.toLocaleTimeString(this.currentCultureKey);u=u.replace(this.postMeridiemString,"");u=u.replace(/\u200E/g,"");u=u.trim();var l=u.match(/\D/g),o=l[0],h=u.split(o);for(this.localeTimeSeparator=o,n=0;n<=h.length-1;n++)h[n].length==2&&(f=parseInt(h[n]),(f==23||f==11)&&(this.isTwelveHourClock=f==11,n>0&&(t=t+o),t=this.isTwelveHourClock?t+"hh":t+"HH"),f==24&&(n>0&&(t=t+o),t=t+"mm"),f==25&&(n>0&&(t=t+o),t=t+"ss"),f==26&&(n>0&&(t=t+o),t=t+"f"));return t};this.localeDateFormat=this.determineDateFormat();this.localeTimeFormat=this.determineTimeFormat()}function jasonWidgetLanguage(){return jasonWidgetLanguage.prototype.key="",jasonWidgetLanguage.prototype.search={searchPlaceHolder:""},jasonWidgetLanguage.prototype.filter={values:{filterValueIsEqual:"",filterValueIsNotEqual:"",filterValueStartsWith:"",filterValueEndsWith:"",filterValueContains:"",filterValueGreaterThan:"",filterValueGreaterEqualTo:"",filterValueLessThan:"",filterValueLessEqualTo:"",filterHeaderCaption:""},operators:{and:"",or:""}},jasonWidgetLanguage.prototype.data={noData:""},jasonWidgetLanguage.prototype.grid={paging:{firstPageButton:"",priorPageButton:"",nextPageButton:"",lastPageButton:"",pagerInputTooltip:""},grouping:{groupingMessage:""},filtering:{clearButtonText:"",clearButtonTooplip:"",applyButtonText:"",applyButtonTooltip:""}},jasonWidgetLanguage.prototype.combobox={},jasonWidgetLanguage}function jasonWidgetCulture(){jasonWidgetCulture.prototype.key="";jasonWidgetCulture.prototype.dateFormat="";jasonWidgetCulture.prototype.shortDateFormat="";jasonWidgetCulture.prototype.longDateFormat="";jasonWidgetCulture.prototype.timeDateFormat=""}function jw_Map(){this._=Object.create(null)}function jw_map_escape(n){return(n+="")===jw_map_proto||n[0]===jw_map_zero?jw_map_zero+n:n}function jw_map_unescape(n){return(n+="")[0]===jw_map_zero?n.slice(1):n}function jw_map_has(n){return jw_map_escape(n)in this._}function jw_map_remove(n){return(n=jw_map_escape(n))in this._&&delete this._[n]}function jw_map_keys(){var n=[];for(var t in this._)n.push(jw_map_unescape(t));return n}function jw_map_size(){var n=0;for(var t in this._)++n;return n}function jw_map_empty(){for(var n in this._)return!1;return!0}function jw_class(n,t){for(var i in t)Object.defineProperty(n.prototype,i,{value:t[i],enumerable:!1})}function jasonDragResize(n,t){this._defaultOptions={allowDrag:!0,allowResize:{top:!0,left:!0,bottom:!0,right:!0},minHeight:60,minWidth:40,dependantElements:[],onMoveStart:null,onMoveEnd:null,onResizeEnd:null,ghostPanelCSS:null,ghostPanelContents:null};jasonBaseWidget.call(this,"jasonGrid",n,t,null);var i=this;this.eventManager=new jasonEventManager;this.htmlElement=n;this.margins=4;this.fullScreenMargins=-10;this.redraw=!1;this.boundingClientRect=null;this.left=null;this.top=null;this.onTopEdge=null;this.onLeftEdge=null;this.onRightEdge=null;this.onBottomEdge=null;this.rightScreenEdge=null;this.bottomScreenEdge=null;this.clickActionInfo=null;this.mouseMoveEvent=null;this.preSnapped=null;this.ghostPanel=document.createElement("div");this.ghostPanel.style.display="none";document.body.appendChild(i.ghostPanel);this.options.ghostPanelCSS&&this.ghostPanel.classList.add(this.options.ghostPanelCSS);this.options.ghostPanelContents&&(this.ghostPanel.innerHTML=this.options.ghostPanelContents);this.setBounds=function(n,t,i,r,u){n.style.left=t+"px";n.style.top=i+"px";n.style.width=r+"px";n.style.height=u+"px"};this.hideGhostPanel=function(){i.setBounds(i.ghostPanel,i.boundingClientRect.left,i.boundingClientRect.top,i.boundingClientRect.width,i.boundingClientRect.height);i.ghostPanel.style.display="none"};this.calculateAction=function(n){i.boundingClientRect=i.htmlElement.getBoundingClientRect();i.left=n.clientX-i.boundingClientRect.left;i.top=n.clientY-i.boundingClientRect.top;i.onTopEdge=i.top<i.margins;i.onBottomEdge=i.top>=i.boundingClientRect.height-i.margins;i.onLeftEdge=i.left<i.margins;i.onRightEdge=i.left>=i.boundingClientRect.width-i.margins;i.rightScreenEdge=window.innerWidth-i.margins;i.bottomScreenEdge=window.innerHeight-i.margins};this.onDown=function(n){i.calculateAction(n);var t=i.options.allowResize?i.onRightEdge||i.onLeftEdge||i.onTopEdge||i.onBottomEdge:!1;i.clickActionInfo={left:i.left,top:i.top,clientX:n.clientX,clientY:n.clientY,width:i.boundingClientRect.width,height:i.boundingClientRect.height,isResizing:t,isMoving:!t&&i.canMove(),onTopEdge:i.onTopEdge,onLeftEdge:i.onLeftEdge,onRightEdge:i.onRightEdge,onBottomEdge:i.onBottomEdge}};this.canMove=function(){return i.options.allowDrag?i.left>0&&i.left<i.boundingClientRect.width&&i.top>0&&i.top<i.boundingClientRect.height:!1};this.onTouchStart=function(n){i.onDown(n.touches[0]);n.preventDefault();n.stopPropagation()};this.onTouchMove=function(n){i.onMouseMove(n.touches[0]);i.redraw=!0;i.animateMove()};this.onTouchEnd=function(n){if(n.touches.length==0)i.onMouseUp(n.changedTouches[0])};this.onMouseDown=function(n){i.onDown(n);n.preventDefault();n.stopPropagation()};this.onMouseMove=function(n){i.calculateAction(n);i.mouseMoveEvent=n;i.redraw=!0};this.onMouseUp=function(n){if(i.calculateAction(n),i.clickActionInfo&&i.clickActionInfo.isMoving&&(i.hideGhostPanel(),i.options.onMoveEnd))i.options.onMoveEnd(n,i.htmlElement);if(i.clickActionInfo&&i.clickActionInfo.isResizing&&i.options.onResizeEnd)i.options.onResizeEnd(n,i.htmlElement);i.clickActionInfo=null};this.animateMove=function(){var u,f,e,o,t,n,r;if((window.requestAnimationFrame(i.animateMove),u=!1,i.mouseMoveEvent&&i.mouseMoveEvent.button!=void 0&&(u=i.mouseMoveEvent.button!=0),u!==!0)&&i.redraw!==!1){if(i.redraw=!1,i.clickActionInfo&&i.clickActionInfo.isResizing){if(i.clickActionInfo.onRightEdge&&i.options.allowResize.right)for(n=0;n<=i.options.dependantElements.length-1;n++)i.options.dependantElements[n].style.width=Math.max(i.left,i.options.minWidth)+"px";if(i.clickActionInfo.onBottomEdge&&i.options.allowResize.bottom)for(n=0;n<=i.options.dependantElements.length-1;n++)i.options.dependantElements[n].style.height=Math.max(i.top,i.options.minHeight)+"px";if(i.clickActionInfo.onLeftEdge&&i.options.allowResize.left&&(f=Math.max(i.clickActionInfo.clientX-i.mouseMoveEvent.clientX+i.clickActionInfo.width,i.options.minWidth)+"px",f>i.options.minWidth))for(n=0;n<=i.options.dependantElements.length-1;n++)i.options.dependantElements[n].style.width=f;if(i.clickActionInfo.onTopEdge&&i.options.allowResize.top&&(e=Math.max(i.clickActionInfo.clientY-i.mouseMoveEvent.clientY+i.clickActionInfo.height,i.options.minHeight)+"px",e>i.options.minHeight))for(n=0;n<=i.options.dependantElements.length-1;n++)i.options.dependantElements[n].style.height=e;return}if(i.clickActionInfo&&i.clickActionInfo.isMoving){for(o=.2,t=!0,i.ghostPanel.style.display="",(i.boundingClientRect.top<i.fullScreenMargins||i.boundingClientRect.left<i.fullScreenMargins||i.boundingClientRect.right>window.innerWidth-i.fullScreenMargins||i.boundingClientRect.bottom>window.innerHeight-i.fullScreenMargins)&&(i.setBounds(i.ghostPanel,0,0,window.innerWidth,window.innerHeight),t=!1),i.boundingClientRect.top<i.margins&&(i.setBounds(i.ghostPanel,0,0,window.innerWidth,window.innerHeight/2),t=!1),i.boundingClientRect.left<i.margins&&(i.setBounds(i.ghostPanel,0,0,window.innerWidth/2,window.innerHeight),t=!1),i.boundingClientRect.right>i.rightScreenEdge&&(i.setBounds(i.ghostPanel,window.innerWidth/2,0,window.innerWidth/2,window.innerHeight),t=!1),i.boundingClientRect.bottom>i.bottomScreenEdge&&(i.setBounds(i.ghostPanel,0,window.innerHeight/2,window.innerWidth,window.innerWidth/2),t=!1),t||(i.ghostPanel.style.opacity=o),t&&i.hideGhostPanel(),i.ghostPanel.style.display="",i.ghostPanel.style.top=i.mouseMoveEvent.clientY-i.clickActionInfo.top+"px",i.ghostPanel.style.left=i.mouseMoveEvent.clientX-i.clickActionInfo.left+"px",n=0;n<=i.options.dependantElements.length-1;n++)i.options.dependantElements[n].style.top=i.mouseMoveEvent.clientY-i.clickActionInfo.top+"px",i.options.dependantElements[n].style.left=i.mouseMoveEvent.clientX-i.clickActionInfo.left+"px";return}r="default";i.canMove()&&(r="move");i.options.allowResize.left&&i.onLeftEdge&&(r="ew-resize");i.options.allowResize.right&&i.onRightEdge&&(r="ew-resize");i.options.allowResize.top&&i.onTopEdge&&(r="ns-resize");i.options.allowResize.bottom&&i.onBottomEdge&&(r="ns-resize");i.htmlElement.style.cursor=r}};this.destroy=function(){i.thElement.removeEventListener(MOUSE_DOWN_EVENT,this.onMouseDown);i.thElement.removeEventListener(TOUCH_START_EVENT,this.onTouchStart);jwDocumentEventManager.removeDocumentEventListener(MOUSE_MOVE_EVENT,this.onMouseMove);jwDocumentEventManager.removeDocumentEventListener(MOUSE_UP_EVENT,this.onMouseUp);jwDocumentEventManager.removeDocumentEventListener(TOUCH_MOVE_EVENT,this.onTouchMove);jwDocumentEventManager.removeDocumentEventListener(TOUCH_END_EVENT,this.onTouchEnd)};this.htmlElement.addEventListener(MOUSE_DOWN_EVENT,this.onMouseDown);this.htmlElement.addEventListener(TOUCH_START_EVENT,this.onTouchStart);jwDocumentEventManager.addDocumentEventListener(MOUSE_MOVE_EVENT,this.onMouseMove);jwDocumentEventManager.addDocumentEventListener(MOUSE_UP_EVENT,this.onMouseUp);jwDocumentEventManager.addDocumentEventListener(TOUCH_MOVE_EVENT,this.onTouchMove);jwDocumentEventManager.addDocumentEventListener(TOUCH_END_EVENT,this.onTouchEnd);this.animateMove()}function jasonWidgetLanguageEL(){this.search={searchPlaceHolder:"\u038c\u03c1\u03bf\u03c2 \u03b1\u03bd\u03b1\u03b6\u03ae\u03c4\u03b7\u03c3\u03b7\u03c2"};this.filter={values:{filterValueIsEqual:"\u038a\u03c3\u03b7 \u03bc\u03b5",filterValueIsNotEqual:"\u0394\u03b5\u03bd \u03b5\u03af\u03bd\u03b1\u03b9 \u03af\u03c3\u03bf \u03bc\u03b5",filterValueStartsWith:"\u0391\u03c1\u03c7\u03af\u03b6\u03b5\u03b9 \u03bc\u03b5",filterValueEndsWith:"\u03a4\u03ad\u03bb\u03b5\u03b9\u03ce\u03bd\u03b5\u03b9 \u03bc\u03b5",filterValueContains:"\u03a0\u03b5\u03c1\u03b9\u03ad\u03c7\u03b5\u03b9",filterValueGreaterThan:"\u039c\u03b5\u03b3\u03b1\u03bb\u03cd\u03c4\u03b5\u03c1\u03bf \u03b1\u03c0\u03bf",filterValueGreaterEqualTo:"\u039c\u03b5\u03b3\u03b1\u03bb\u03cd\u03c4\u03b5\u03c1\u03bf \u03af\u03c3\u03bf \u03b1\u03c0\u03bf",filterValueLessThan:"\u039c\u03b9\u03ba\u03c1\u03cc\u03c4\u03b5\u03c1\u03bf \u03b1\u03c0\u03bf",filterValueLessEqualTo:"\u039c\u03b9\u03ba\u03c1\u03cc\u03c4\u03b5\u03c1\u03bf \u03af\u03c3\u03bf \u03b1\u03c0\u03bf"},operators:{and:"\u039a\u03b1\u03b9",or:"\u03ae"}};this.data={noData:"\u0394\u03b5\u03bd \u03c5\u03c0\u03ac\u03c1\u03c7\u03bf\u03c5\u03bd \u03b4\u03b5\u03b4\u03bf\u03bc\u03ad\u03bd\u03b1"};this.grid={paging:{firstPageButton:"\u03a0\u03c1\u03ce\u03c4\u03b7",priorPageButton:"\u03a0\u03c1\u03bf\u03b7\u03b3\u03bf\u03cd\u03bc\u03b5\u03bd\u03b7",nextPageButton:"\u0395\u03c0\u03cc\u03bc\u03b5\u03bd\u03b7",lastPageButton:"\u03a4\u03b5\u03bb\u03b5\u03c5\u03c4\u03b1\u03af\u03b1",pagerInputTooltip:"\u03a0\u03bb\u03b7\u03ba\u03c4\u03c1\u03bf\u03bb\u03bf\u03b3\u03ae\u03c3\u03c4\u03b5 \u03b1\u03c1\u03b9\u03b8\u03bc\u03cc \u03c3\u03b5\u03bb\u03af\u03b4\u03b1\u03c2",pagerInfoOfRecordCount:"\u03b1\u03c0\u03bf"},grouping:{groupingMessage:"\u03a3\u03cd\u03c1\u03b5\u03c4\u03b5 \u03bc\u03b9\u03b1 \u03c3\u03c4\u03ae\u03bb\u03b7 \u03b5\u03b4\u03ce , \u03b3\u03b9\u03b1 \u03bd\u03b1 \u03bf\u03bc\u03b1\u03b4\u03cc\u03c0\u03bf\u03b9\u03ae\u03c3\u03b5\u03c4\u03b5 \u03c4\u03b1 \u03b4\u03b5\u03b4\u03bf\u03bc\u03ad\u03bd\u03b1 \u03bc\u03b5 \u03b2\u03ac\u03c3\u03b7 \u03c4\u03b7 \u03c3\u03c4\u03ae\u03bb\u03b7 \u03b1\u03c5\u03c4\u03ae",removeGrouping:"\u0391\u03c6\u03b1\u03af\u03c1\u03b5\u03c3\u03b7 \u03bf\u03bc\u03b1\u03b4\u03cc\u03c0\u03bf\u03b9\u03b7\u03c3\u03b7\u03c2 \u03b3\u03b9\u03b1 "},filtering:{clearButtonText:"\u039a\u03b1\u03b8\u03b1\u03c1\u03b9\u03c3\u03bc\u03cc\u03c2",clearButtonToollip:"\u039a\u03b1\u03b8\u03b1\u03c1\u03b9\u03c3\u03bc\u03cc\u03c2 \u03cc\u03bb\u03c9\u03bd \u03c4\u03c9\u03bd \u03c6\u03af\u03bb\u03c4\u03c1\u03c9\u03bd",applyButtonText:"\u0395\u03c6\u03b1\u03c1\u03bc\u03bf\u03b3\u03ae",applyButtonTooltip:"\u0395\u03c6\u03b1\u03c1\u03bc\u03bf\u03b3\u03ae \u03c4\u03bf\u03c5 \u03c6\u03af\u03bb\u03c4\u03c1\u03bf\u03c5",iconTooltip:"\u03a6\u03b9\u03bb\u03c4\u03c1\u03ac\u03c1\u03b9\u03c3\u03bc\u03b1 \u03b4\u03b5\u03b4\u03bf\u03bc\u03ad\u03bd\u03c9\u03bd",filterHeaderCaption:"\u03a0\u03c1\u03bf\u03b2\u03bf\u03bb\u03ae \u03c4\u03b9\u03bc\u03ce\u03bd \u03cc\u03c0\u03bf\u03c5"},columnMenu:{sortAscending:"\u0391\u03cd\u03be\u03bf\u03c5\u03c3\u03b1 \u03a4\u03b1\u03be\u03b9\u03bd\u03cc\u03bc\u03b7\u03c3\u03b7",sortDescending:"\u03a6\u03b8\u03af\u03bd\u03bf\u03c5\u03c3\u03b1 \u03a4\u03b1\u03be\u03b9\u03bd\u03cc\u03bc\u03b7\u03c3\u03b7",filter:"\u03a6\u03af\u03bb\u03c4\u03c1\u03bf",columns:"\u03a3\u03c4\u03ae\u03bb\u03b5\u03c2",clearSorting:"\u0391\u03bd\u03b1\u03af\u03c1\u03b5\u03c3\u03b7 \u03a4\u03b1\u03be\u03b9\u03bd\u03cc\u03bc\u03b7\u03c3\u03b7\u03c2",clearFilters:"\u0391\u03bd\u03b1\u03af\u03c1\u03b5\u03c3\u03b7 \u03a6\u03af\u03bb\u03c4\u03c1\u03bf\u03c5"}};this.combobox={notFound:"\u039f \u03cc\u03c1\u03bf\u03c2 \u03b1\u03bd\u03b1\u03b6\u03ae\u03c4\u03b7\u03c3\u03b7\u03c2 [ {0} ] \u03b4\u03b5\u03bd \u03b2\u03c1\u03ad\u03b8\u03b7\u03ba\u03b5"};this.key="EL";this.calendar={days:[{name:"\u039a\u03c5\u03c1\u03b9\u03b1\u03ba\u03ae",shortName:"\u039a\u03c5\u03c1"},{name:"\u0394\u03b5\u03c5\u03c4\u03ad\u03c1\u03b1",shortName:"\u0394\u03b5\u03c5"},{name:"T\u03c1\u03af\u03c4\u03b7",shortName:"T\u03c1\u03b9"},{name:"\u03a4\u03b5\u03c4\u03ac\u03c1\u03c4\u03b7",shortName:"\u03a4\u03b5\u03c4"},{name:"\u03a0\u03ad\u03bc\u03c0\u03c4\u03b7",shortName:"\u03a0\u03b5\u03bc"},{name:"\u03a0\u03b1\u03c1\u03b1\u03c3\u03ba\u03b5\u03c5\u03ae",shortName:"\u03a0\u03b1\u03c1"},{name:"\u03a3\u03ac\u03b2\u03b2\u03b1\u03c4\u03bf",shortName:"\u03a3\u03b1\u03b2"}],months:[{name:"\u0399\u03b1\u03bd\u03bf\u03c5\u03ac\u03c1\u03b9\u03bf\u03c2",shortName:"\u0399\u03b1\u03bd"},{name:"\u03a6\u03b5\u03b2\u03c1\u03bf\u03c5\u03ac\u03c1\u03b9\u03bf\u03c2",shortName:"\u03a6\u03b5\u03b2"},{name:"\u039c\u03ac\u03c1\u03c4\u03b9\u03bf\u03c2",shortName:"\u039c\u03b1\u03c1"},{name:"\u0391\u03c0\u03c1\u03af\u03bb\u03b9\u03bf\u03c2",shortName:"\u0391\u03c0\u03c1"},{name:"\u039c\u03b1\u03ca\u03bf\u03c2",shortName:"\u039c\u03b1\u03ca"},{name:"\u0399\u03bf\u03c5\u03bd\u03af\u03bf\u03c2",shortName:"\u0399\u03bf\u03c5\u03bd"},{name:"\u0399\u03bf\u03cd\u03bb\u03b9\u03bf\u03c2",shortName:"\u0399\u03bf\u03c5\u03bb"},{name:"\u0391\u03cd\u03b3\u03bf\u03c5\u03c3\u03c4\u03bf\u03c2",shortName:"\u0391\u03c5\u03b3"},{name:"\u03a3\u03b5\u03c0\u03c4\u03ad\u03bc\u03b2\u03c1\u03b9\u03bf\u03c2",shortName:"\u03a3\u03b5\u03c0"},{name:"\u039f\u03ba\u03c4\u03ce\u03b2\u03c1\u03b9\u03bf\u03c2",shortName:"\u039f\u03ba\u03c4"},{name:"\u039d\u03bf\u03ad\u03bc\u03b2\u03c1\u03b9\u03bf\u03c2",shortName:"\u039d\u03bf\u03b5"},{name:"\u0394\u03b5\u03ba\u03ad\u03bc\u03b2\u03c1\u03b9\u03bf\u03c2",shortName:"\u0394\u03b5\u03ba"}]}}function jasonWidgetLanguageEN(){this.search={searchPlaceHolder:"Type in a value to search"};this.filter={values:{filterValueIsEqual:"Equal to",filterValueIsNotEqual:"Not equal to",filterValueStartsWith:"Starts with",filterValueEndsWith:"Ends with",filterValueContains:"Contains",filterValueGreaterThan:"Greater than",filterValueGreaterEqualTo:"Greater equal to",filterValueLessThan:"Less than",filterValueLessEqualTo:"Less equal than"},operators:{and:"And",or:"Or"}};this.data={noData:"No data"};this.grid={paging:{firstPageButton:"First",priorPageButton:"Prior",nextPageButton:"Next",lastPageButton:"Last",pagerInputTooltip:"Type in a page number",pagerInfoOfRecordCount:"of"},grouping:{groupingMessage:"Drag a column here to group the data based on that column.",removeGrouping:"Remove grouping for "},filtering:{clearButtonText:"Clear",clearButtonToollip:"Clear all filters",applyButtonText:"Apply",applyButtonTooltip:"Apply filter",iconTooltip:"Filtering data",filterHeaderCaption:"Show values where"},columnMenu:{sortAscending:"Sort Ascending",sortDescending:"Sort Descending",filter:"Filter",columns:"Columns",clearSorting:"Clear Sorting",clearFilters:"Clear Filters"}};this.combobox={notFound:"Search term [ {0} ] not found"};this.key="EN";this.calendar={days:[{name:"Sunday",shortName:"Sun"},{name:"Monday",shortName:"Mon"},{name:"Tuesday",shortName:"Tue"},{name:"Wednesday",shortName:"Wed"},{name:"Thursday",shortName:"Thu"},{name:"Friday",shortName:"Fri"},{name:"Saturday",shortName:"Sat"}],months:[{name:"January",shortName:"Jan"},{name:"February",shortName:"Feb"},{name:"March",shortName:"Mar"},{name:"April",shortName:"Apr"},{name:"May",shortName:"May"},{name:"June",shortName:"Jun"},{name:"July",shortName:"Jul"},{name:"August",shortName:"Aug"},{name:"September",shortName:"Sep"},{name:"October",shortName:"Oct"},{name:"November",shortName:"Nov"},{name:"December",shortName:"Dec"}]}}function jasonWidgetLanguageES(){this.search={searchPlaceHolder:"Escriba un valor para buscar"};this.filter={values:{filterValueIsEqual:"Igual a",filterValueIsNotEqual:"No igual a",filterValueStartsWith:"Comienza con",filterValueEndsWith:"Termina con",filterValueContains:"Contiene",filterValueGreaterThan:"Mas grande que",filterValueGreaterEqualTo:"Mayor igual a",filterValueLessThan:"Menos que",filterValueLessEqualTo:"Menos iguales que"},operators:{and:"Y",or:"O"}};this.data={noData:"Sin datos"};this.grid={paging:{firstPageButton:"Primero",priorPageButton:"Anterior",nextPageButton:"Siguiente",lastPageButton:"Ultimo",pagerInputTooltip:"Teclear un n\u00famero de p\u00e1gina",pagerInfoOfRecordCount:"de"},grouping:{groupingMessage:"Arrastre una columna aqu\u00ed para agrupar los datos en funci\u00f3n de esa columna.",removeGrouping:"Eliminar la agrupaci\u00f3n de "},filtering:{clearButtonText:"Claro",clearButtonToollip:"Borrar todos los filtros",applyButtonText:"Applicar",applyButtonTooltip:"Applicar filtro",iconTooltip:"Filtrado de datos",filterHeaderCaption:"Mostrar valores en donde"},columnMenu:{sortAscending:"Orden ascendente",sortDescending:"Orden descendiente",filter:"Filtrar",columns:"Columnas",clearSorting:"Claro ordenaci\u00f3n",clearFilters:"Eliminar filtros"}};this.combobox={notFound:"T\u00e9rmino de b\u00fasqueda [{0}] no encontrado"};this.key="ES";this.calendar={days:[{name:"Domenica",shortName:"Dom"},{name:"Lunedi",shortName:"Lun"},{name:"Martedi",shortName:"Mar"},{name:"Mercoledi",shortName:"Mer"},{name:"Giovedi",shortName:"Gio"},{name:"Venerdi",shortName:"Ven"},{name:"Sabato",shortName:"Sab"}],months:[{name:"Enero",shortName:"Genn"},{name:"Febrero",shortName:"Febbr"},{name:"Marzo",shortName:"Mar"},{name:"Abril",shortName:"Apr"},{name:"Mayo",shortName:"Magg"},{name:"Junio",shortName:"Giu"},{name:"Julio",shortName:"Lug"},{name:"Agosto",shortName:"Ago"},{name:"Septiembre",shortName:"Sett"},{name:"Octubre",shortName:"Ott"},{name:"Noviembre",shortName:"Nov"},{name:"Diciembre",shortName:"Dic"}]}}function jasonWidgetLanguageIT(){this.search={searchPlaceHolder:"Digitare un valore per la ricerca"};this.filter={values:{filterValueIsEqual:"Uguale a",filterValueIsNotEqual:"Non uguale a",filterValueStartsWith:"Inizia con",filterValueEndsWith:"Finisce con",filterValueContains:"Contiene",filterValueGreaterThan:"Pi\u00f9 grande di",filterValueGreaterEqualTo:"Maggiore pari a",filterValueLessThan:"Meno di",filterValueLessEqualTo:"Meno uguali degli"},operators:{and:"e",or:"O"}};this.data={noData:"Nessun dati"};this.grid={paging:{firstPageButton:"Primo",priorPageButton:"Precedente",nextPageButton:"Prossimo",lastPageButton:"Ultimo",pagerInputTooltip:"Digitare un numero di pagina",pagerInfoOfRecordCount:"di"},grouping:{groupingMessage:"Trascinare una colonna qui, per raggruppare i dati in base a quella colonna",removeGrouping:"Rimuovere raggruppamento per "},filtering:{clearButtonText:"Cancella",clearButtonToollip:"Cancella tutti i filtri",applyButtonText:"Applica",applyButtonTooltip:"Applica il filtro",iconTooltip:"Filtraggio dei dati",filterHeaderCaption:"Mostra i valori in cui"},columnMenu:{sortAscending:"Ordine crescente",sortDescending:"Ordine decrescente",filter:"Filtro",columns:"Colonne",clearSorting:"Cancella ordinamento",clearFilters:"Cancella filtri"}};this.combobox={notFound:"Il termino di ricerca [ {0} ] non trovato"};this.key="IT";this.calendar={days:[{name:"Domenica",shortName:"Dom"},{name:"Lunedi",shortName:"Lun"},{name:"Martedi",shortName:"Mar"},{name:"Mercoledi",shortName:"Mer"},{name:"Giovedi",shortName:"Gio"},{name:"Venerdi",shortName:"Ven"},{name:"Sabato",shortName:"Sab"}],months:[{name:"Gennaio",shortName:"Genn"},{name:"Febbraio",shortName:"Febbr"},{name:"Marzo",shortName:"Mar"},{name:"Aprile",shortName:"Apr"},{name:"Maggio",shortName:"Magg"},{name:"Giugno",shortName:"Giu"},{name:"Luglio",shortName:"Lug"},{name:"Agosto",shortName:"Ago"},{name:"Settembre",shortName:"Sett"},{name:"Ottobre",shortName:"Ott"},{name:"Novembre",shortName:"Nov"},{name:"Dicembre",shortName:"Dic"}]}}function jasonWidgetCultureEL(){this.dateFormat="dd/MM/yyyy";this.shortDateFormat="dd MMM YYYY";this.longDateFormat="dd MMMM yyyy";this.timeFormat="hh:mm:ss";this.postMeridiem=[];this.anteMeridiem=[]}function jasonWidgetCultureEN_US(){this.dateFormat="MM/dd/yyyy";this.shortDateFormat="MMM dd yyyy";this.longDateFormat="dddd MMMM dd yyyy";this.timeFormat="hh:mm:ss";this.postMeridiem=[];this.anteMeridiem=[]}function jasonWidgetCultureES(){this.dateFormat="dd/MM/yyyy";this.shortDateFormat="dd MMM YYYY";this.longDateFormat="dd MMMM yyyy";this.timeFormat="hh:mm:ss";this.postMeridiem=[];this.anteMeridiem=[]}function jasonWidgetCultureIT(){this.dateFormat="dd/MM/yyyy";this.shortDateFormat="dd MMM YYYY";this.longDateFormat="dd MMMM yyyy";this.timeFormat="hh:mm:ss";this.postMeridiem=[];this.anteMeridiem=[]}function jasonCombobox(n,t,i){if(n.tagName!="DIV")throw new Error("Combobox container element must be a div");this.defaultOptions={data:null,keyFieldName:undefined,displayFields:undefined,displayFormatString:undefined,placeholder:undefined,inputMode:"verbatim",readOnly:!1,caseSentiveSearch:!1,autoFilter:!1};i=i===void 0?"jasonCombobox":i;jasonBaseWidget.call(this,i,n,t,jasonComboboxUIHelper);this.dataSource=new jasonDataSource({data:this.options.data,onChange:this.onDataSourceChange});this._selectedItem=null;this._selectedItemIndex=-1;this.filteredData=[];this.search=this.search.bind(this);this.onDataSourceChange=this.onDataSourceChange.bind(this);this.options.localization=jasonWidgets.localizationManager.currentLanguage?jasonWidgets.localizationManager.currentLanguage:this.options.localization;this.readOnly=this.options.readOnly;this.dataChanged=!0;this.ui.renderUI()}function jasonComboboxUIHelper(n,t){jasonBaseWidgetUIHelper.call(this,n,t);this.dropDownListState=COMBOBOX_LIST_STATE_UP;this.showDropDownList=this.showDropDownList.bind(this);this.onComboboxKeyDown=this.onComboboxKeyDown.bind(this);this.onComboboxKeyUp=this.onComboboxKeyUp.bind(this);this.onComboboxButtonClick=this.onComboboxButtonClick.bind(this);this.onComboboxInputClick=this.onComboboxInputClick.bind(this);this.onComboboxItemClick=this.onComboboxItemClick.bind(this);this.onComboboxInputChange=this.onComboboxInputChange.bind(this);jwDocumentEventManager.addDocumentEventListener(CLICK_EVENT,this.monitorForDocumentClick.bind(this));var i=this;jwDocumentEventManager.addDocumentEventListener(TOUCH_MOVE_EVENT,function(){i.hideDropDownList()})}function jasonMenu(n,t,i){this.items=[];this.defaultOptions={orientation:"vertical",animation:{speed:9},expandMenuOnHover:!0,invokable:!1};jasonBaseWidget.call(this,"jasonMenu",n,t,i)}function createJasonMenuDividerItem(){var n=new jasonMenuItem;return n.isDivider=!0,n.clickable=!1,n}function jasonMenuItem(n,t,i){jasonBaseWidget.call(this,"jasonMenuItem",n,t,i);this.caption="";this.title="";this.enabled=!0;this.items=[];this.parent=null;this.content=null;this.level=null;this.name=null;this.hasCheckBox=!1;this.checked=!1;this.clickable=!0;this.checkBoxElement=null;this.icon=null;this.isDivider=!1;this.assign=this.assign.bind(this)}function jasonMenuWidgetParser(n){return this.menuUI=n,jasonMenuWidgetParser}function jasonMenuWidgetDOMParser(n){jasonMenuWidgetParser.call(this,n)}function jasonMenuWidgetJSONParser(n){jasonMenuWidgetParser.call(this,n);this.createMenuElementFromItem=this.createMenuElementFromItem.bind(this)}function jasonMenuUIHelper(n,t){jasonBaseWidgetUIHelper.call(this,n,t);this.htmlElement==void 0&&(this.htmlElement=this.createElement("span"));this.ulMenuElement=this.htmlElement.tagName=="UL"?this.htmlElement:this.createElement("ul");this.ulMenuElement.classList.contains(this.baseClassName)||this.widget.addBaseClassName(this.ulMenuElement);this.menuContainer=this.createElement("div");this.menuContainer.classList.add(MENU_CONTAINER_CLASS);this.ulMenuElement.classList.add(MENU_CLASS);this.invokableElement=null;this.widget.options.width&&(this.ulMenuElement.style.width=this.options.width+"px");this.widget.options.height&&(this.ulMenuElement.style.height=this.options.height+"px");this.widget.options.orientation.toLowerCase()=="horizontal"&&this.htmlElement.classList.add(MENU_HORIZONTAL);this.checkBoxElements=[];this.showMenu=this.showMenu.bind(this);this.hideMenu=this.hideMenu.bind(this);this.onCheckboxClick=this.onCheckboxClick.bind(this);this.onItemClick=this.onItemClick.bind(this);this.onItemTouch=this.onItemTouch.bind(this);this.onItemMouseEnter=this.onItemMouseEnter.bind(this);this.onItemMouseLeave=this.onItemMouseLeave.bind(this);this.toggleCheckBox=this.toggleCheckBox.bind(this);var i=this;this.options.autoHide&&jwDocumentEventManager.addDocumentEventListener(MOUSE_DOWN_EVENT,function(n){if(i.menuContainer.style.display!="none"){var t=jasonWidgets.common.isMouseEventOutOfContainerAndNotAChild(i.menuContainer,n);t&&i.canHideMenu&&i.hideMenu()}});jwDocumentEventManager.addDocumentEventListener(TOUCH_END_EVENT,function(n){var r,t;if(i.menuContainer.style.display!="none"&&(r=jasonWidgets.common.isMouseEventOutOfContainerAndNotAChild(i.menuContainer,n.changedTouches[0]),r&&i.previousShowMenuItem))for(t=i.previousShowMenuItem;t;)i.hideMenuItemContents(t),t=t.parent});this.menu=this.createMenu();this.canHideMenu=!0;this.canHideSubMenu=!0;this.disableMouseEvents=!1;this.previousShowMenuItem=null}function jasonContextMenuUIHelper(n,t){jasonWidgets.common.extendObject({invokable:!0,orientation:"vertical",autoHide:!0},n.options);this.showContextMenu=this.showContextMenu.bind(this);jasonMenuUIHelper.call(this,n,t);this.menuContainer.style.display="none";this.menuContainer.parentElement.removeChild(this.menuContainer);document.body.appendChild(this.menuContainer);this.menuContainer.style.width=n.options.width+"px";this.menuContainer.style.position="absolute";this.initializeEvents()}function jasonCalendarItem(){this.dayName=null;this.dayShortName=null;this.date=null;this.day=null;this.month=null;this.monthName=null;this.monthShortName=null;this.year=null;this.weekNumber=null;this.decadeStart=null;this.decadeStop=null;this.centuryStart=null;this.centuryStop=null;this.mileniumStart=null;this.mileniumStop=null;this.toolTip=null;this.classList=[];this.displayValue=null}function jasonCalendar(n,t){this.defaultOptions={invokable:!1,autoHide:!1,invokableElement:null,firstDayOfWeek:1,width:300,height:220,calendarMode:"days",specialDates:[],selectedDates:[],multiSelect:!1,rangeSelect:!1,localization:jasonWidgets.localizationManager.currentLanguage?jasonWidgets.localizationManager.currentLanguage.calendar:t.localization};jasonBaseWidget.call(this,"jasonCalendar",n,t,jasonCalendarUIHelper);this._date=jasonWidgets.common.dateOf(new Date);this._navigationDate=jasonWidgets.common.dateOf(new Date);this._specialDates=[];this._calendarMode=this.options.calendarMode?this.options.calendarMode:"days";this.currentCalendarItems=[];this.parseSpecialDates();this.ui.renderUI()}function jasonCalendarUIHelper(n,t){jasonBaseWidgetUIHelper.call(this,n,t);this.goBack=this.goBack.bind(this);this.goForward=this.goForward.bind(this);this.calendarDisplayClick=this.calendarDisplayClick.bind(this);this.calendarItemClick=this.calendarItemClick.bind(this);this.calendarNavigateToday=this.calendarNavigateToday.bind(this);this.renderedCalendarItems=[];var i=this;jwDocumentEventManager.addDocumentEventListener(SCROLL_EVENT,function(){i.options.invokable&&i.hideCalendar()});jwDocumentEventManager.addDocumentEventListener(TOUCH_MOVE_EVENT,function(){i.options.invokable&&i.hideCalendar()})}function jasonTabControl(n,t){if(n.tagName!="DIV"&&n.children[0]&&n.children[0].tagName!="UL")throw new Error("Tabcontrol container must a DIV containing a UL element as first child");jasonBaseWidget.call(this,"jasonTabControl",n,t,jasonTabControlWidgetUIHelper);this._tabIndex=-1;this.ui.renderUI();this.htmlElement.style.display=""}function jasonTabControlWidgetUIHelper(n,t){jasonBaseWidgetUIHelper.call(this,n,t);this.tabContents=[];this.setActiveTab=this.setActiveTab.bind(this)}function jasonGridUIHelper(n,t){jasonBaseWidgetUIHelper.call(this,n,t);this.resizeTimeout=null;this._onColumnMenuItemChecked=this._onColumnMenuItemChecked.bind(this);this._onColumnMenuItemClicked=this._onColumnMenuItemClicked.bind(this);this._onColumnMenuHidden=this._onColumnMenuHidden.bind(this);this._onGridFilterButtonClick=this._onGridFilterButtonClick.bind(this);this._onGridColumnMenuIconClick=this._onGridColumnMenuIconClick.bind(this);this._onGridColumnCaptionClick=this._onGridColumnCaptionClick.bind(this);this._onResize=this._onResize.bind(this);this._onDataContainerScroll=this._onDataContainerScroll.bind(this);this._onGroupCollapseExpandIconClick=this._onGroupCollapseExpandIconClick.bind(this);this._onGroupColumnRemoveClick=this._onGroupColumnRemoveClick.bind(this);this._onColumnDrop=this._onColumnDrop.bind(this);this._onColumnResizeEnd=this._onColumnResizeEnd.bind(this);this._onSelectionChange=this._onSelectionChange.bind(this);this.gridSelectedRows=[];this.gridSelectedCells=[];this._currentPage=1;this._currentFilterField=null;this._currentFilterColumn=null;this._currentTHElement=null;this.dragImage=this.createElement("div");this.dragImage.classList.add(JW_DRAG_IMAGE);this.dragImage.style.display="none";this.dummyDragImage=this.createElement("div");this._firstRun=!0;document.body.appendChild(this.dragImage);this._renderGridContainers();this._renderHeader();this._enableColumnDragResize();this.isReRendering=!1;this.monitorChanges=this.monitorChanges.bind(this)}function jasonGrid(n,t){if(n.tagName!="DIV")throw new Error("Grid container element must be a div");this.defaultOptions={multiSelect:!1,cellMultiSelect:!1,data:null,columns:null,selectedRows:null,paging:{pagesize:200},grouping:!0,filtering:!0,columnMenu:!0,resizing:!0,sorting:!0,reordering:!0,customization:{rowTemplate:null,dataFieldAttribute:"data-field"}};this.dataSource=new jasonDataSource({data:typeof t.data=="function"?t.data():t.data,onChange:this._onDataChanged.bind(this)});this._initializeColumns(t);jasonBaseWidget.call(this,"jasonGrid",n,t,jasonGridUIHelper);this.initialize();this.ui.renderUI();this.ui._createColumnMenu();this.ui._initializeEvents();this.ui.localizeStrings(this.options.localization);this.ui.monitorChanges()}function jasonDatePicker(n,t){this.defaultOptions={displayFormat:jasonWidgets.localizationManager.localeDateFormat,mode:"date"};jasonBaseWidget.call(this,"jasonDatePicker",n,t,jasonDatePickerUIHelper);this._date=jasonWidgets.common.dateOf(this.options.date?this.options.date:new Date);this.ui.renderUI()}function jasonDatePickerUIHelper(n,t){jasonBaseWidgetUIHelper.call(this,n,t);this.inputBlur=this.inputBlur.bind(this);this.inputKeyDown=this.inputKeyDown.bind(this);this.buttonClick=this.buttonClick.bind(this);this.onCalendarDateChange=this.onCalendarDateChange.bind(this);this.datePickerSetDateFlag=!1}function jasonTimePicker(n,t){this.defaultOptions={displayFormat:jasonWidgets.localizationManager.localeTimeFormat,interval:15,keyFieldName:"key",displayFields:["formattedTime"],displayFormatString:"{0}"};jasonWidgets.common.extendObject(this.defaultOptions,t);this.prepareData(t);jasonCombobox.call(this,n,t,"jasonTimePicker");this._hasKeyStroke=!1;this._time=jasonWidgets.common.timeOf(this.options.time?this.options.time:new Date);this.cmbInputOnBlur=this.cmbInputOnBlur.bind(this);this.cmbInputKeyDown=this.cmbInputKeyDown.bind(this);this.eventManager.addEventListener(this.ui.comboboxInput,BLUR_EVENT,this.cmbInputOnBlur);this.eventManager.addEventListener(this.ui.comboboxInput,KEY_DOWN_EVENT,this.cmbInputKeyDown);this.addEventListener(JW_EVENT_ON_SELECT_ITEM,this.onTimePickerSelectItem)}var JW_EVENT_ON_CHANGE,JGE_REDRAW,jasonWidgets,jwDocumentEventManager,jwWindowEventManager,jw_map_proto,jw_map_zero,JW_EVENT_CALENDAR_MODE_CHANGE,JW_EVENT_CALENDAR_NAVIGATE,JW_EVENT_ON_TAB_ENTER,DATE_PICKER_CLASS;(function(n){n&&(n.fn.jasonGrid=function(n){var t=this,i=t.data("jasonGrid");i&&t.removeData(i);i=new jasonGrid(t[0],n);t.data("jasonGrid",i)},n.fn.jasonCombobox=function(n){var t=this,i=t.data("jasonCombobox");i&&t.removeData(i);i=new jasonCombobox(t[0],n);t.data("jasonCombobox",i)},n.fn.jasonTabControl=function(n){var t=this,i=t.data("jasonTabControl");i&&t.removeData(i);i=new jasonTabControl(t[0],n);t.data("jasonTabControl",i)},n.fn.jasonMenu=function(n){var t=this,i=t.data("jasonMenuWidget");i&&t.removeData(i);i=new jasonMenu(t[0],n,jasonMenuUIHelper);t.data("jasonMenuWidget",i)},n.fn.jasonContextMenu=function(n){var t=this,i=t.data("jasonContextMenu");i&&t.removeData(i);i=new jasonMenu(t[0],n,jasonContextMenuUIHelper);t.data("jasonContextMenu",i)},n.fn.jasonCalendar=function(n){var t=this,i=t.data("jasonCalendar");i&&t.removeData(i);i=new jasonCalendar(t[0],n);t.data("jasonCalendar",i)},n.fn.jasonDatePicker=function(n){var t=this,i=t.data("jasonDatePicker");i&&t.removeData(i);i=new jasonDatePicker(t[0],n);t.data("jasonDatePicker",i)},n.fn.jasonTimePicker=function(n){var t=this,i=t.data("jasonTimePicker");i&&t.removeData(i);i=new jasonTimePicker(t[0],n);t.data("jasonTimePicker",i)})})(window.jQuery?window.jQuery:null);var TABINDEX_ATTR="tabindex",TYPE_ATTR="type",PLACEHOLDER_ATTR="placeholder",READONLY_ATTR="readonly",INPUT_MODE_ATTR="inputmode",TITLE_ATTR="title",DRAGGABLE_ATTR="draggable",COLSPAN_ATTR="colspan",DATA_ITEM_INDEX_ATTR="jw-data-item-index",DATA_ROW_ID_ATTR="jw-data-row-id",DATA_CELL_ID_ATTR="jw-data-cell-id",DATA_GROUPING_LEVEL_ATTR="jw-data-grouping-level",DATA_GROUPING_FIELD_ATTR="jw-data-grouping-field",DATA_GROUP_EXPANDED_ATTR="jw-data-group-expanded",DATA_GROUP_COLLAPSED_ATTR="jw-data-group-collpsed",DATA_GROUPING_KEY_ATTR="jw-data-group-key",ITEM_INDEX_ATTR="jw-item-index",CLEAR_FLOAT_CLASS="jw-clear-float",JW_DISABLED="jw-disabled",JW_READONLY="jw-readonly",JW_UNSELECTABLE="jw-unselectable",JW_DRAG_IMAGE="jw-drag-image-container",CLICK_EVENT="click",MOUSE_DOWN_EVENT="mousedown",MOUSE_LEAVE_EVENT="mouseleave",MOUSE_ENTER_EVENT="mouseenter";MOUSE_OVER_EVENT="mouseover";MOUSE_OUT_EVENT="mouseout";MOUSE_MOVE_EVENT="mousemove";MOUSE_UP_EVENT="mouseup";INPUT_EVENT="input";RESIZE_EVENT="resize";KEY_DOWN_EVENT="keydown";KEY_PRESS_EVENT="keypress";KEY_UP_EVENT="keyup";FOCUS_EVENT="focus";CHANGE_EVENT="change";SCROLL_EVENT="scroll";CONTEXT_MENU_EVENT="contextmenu";DRAG_START_EVENT="dragstart";DRAG_OVER_EVENT="dragover";DRAG_ENTER_EVENT="dragenter";DRAG_EXIT_EVENT="dragexit";DRAG_END_EVENT="dragend";DRAG_EVENT="drag";DROP_EVENT="drop";BLUR_EVENT="blur";TOUCH_START_EVENT="touchstart";TOUCH_MOVE_EVENT="touchmove";TOUCH_END_EVENT="touchend";TOUCH_CANCEL_EVENT="touchcancel";TOUCH_EVENT="touch";JW_EVENT_ON_CHANGE="onChange";JGE_REDRAW=1e3;jasonWidgets={};jw=jasonWidgets;jasonWidgets.common=new jasonCommon;jasonWidgets.enums={};jasonWidgets.enums.variableType={unknown:0,number:1,date:2,boolean:3,object:4,"function":5};jasonWidgets.enums.comparison={equal:0,firstIsGreater:1,secondIsGreater:2};jasonWidgets.errorTypes={error:0,evalError:1,rangeError:2,referenceError:3,syntaxError:4,typeError:5,uriError:6};var JW_MENU_ITEM="jw-menu-item",JW_MENU_ITEM_CLICKABLE="clickable",JW_MENU_ITEM_DISABLED="disabled",JW_MENU_ITEM_CAPTION="jw-menu-item-caption",JW_MENU_ITEM_CAPTION_ONLY="just-caption",JW_MENU_ITEM_ICON="jw-menu-item-icon",JW_MENU_ITEM_ARROW="jw-menu-item-arrow",JW_MENU_ITEM_CHECKBOX="jw-menu-item-checkbox",JW_TEXT_OVERFLOW="jw-text-overflow",JW_LABEL="jw-label",JW_TEXT_INPUT="jw-text-input",JW_BUTTON="jw-button",JW_BUTTON_ELEMENT="jw-button-element",JW_ICON="jw-icon ",JW_ICON_ARROW_DOWN=JW_ICON+"arrow-down",JW_ICON_ARROW_UP=JW_ICON+"arrow-up",JW_ICON_ARROW_LEFT=JW_ICON+"arrow-left",JW_ICON_ARROW_RIGHT=JW_ICON+"arrow-right",JW_ICON_CALENDAR=JW_ICON+"calendar",JW_ICON_CHEVRON_DOWN=JW_ICON+"chevron-down",JW_ICON_CHEVRON_UP=JW_ICON+"chevron-up",JW_ICON_CHEVRON_LEFT=JW_ICON+"chevron-left",JW_ICON_CHEVRON_RIGHT=JW_ICON+"chevron-right",JW_ICON_CIRCLE_CHECK=JW_ICON+"circle-check",JW_ICON_CIRCLE_X=JW_ICON+"circle-x",JW_ICON_CLOCK=JW_ICON+"clock",JW_ICON_COLUMNS=JW_ICON+"columns",JW_ICON_MENU=JW_ICON+"menu",JW_ICON_SEARCH=JW_ICON+"search",JW_ICON_SORT_ASC=JW_ICON+"sort-asc",JW_ICON_SORT_DESC=JW_ICON+"sort-desc";jw.htmlFactory=new jasonHTMLFactory;jasonBaseWidget.prototype.initialize=function(){};jasonBaseWidget.prototype.createEventNameSpace=function(n){return n+"."+this.nameSpace};jasonBaseWidget.prototype.addBaseClassName=function(n){n.classList.add(this.baseClassName)};jasonBaseWidget.prototype.addEventListener=function(n,t,i){typeof t=="function"&&this._eventListeners.push({eventName:n,listener:t,callingContext:i})};jasonBaseWidget.prototype.destroy=function(){this.ui.clearUI()};jasonBaseWidget.prototype.createElement=function(n,t){return this.ui.createElement(n,t)};jasonBaseWidget.prototype.jwProc=function(n){switch(n){case JGE_REDRAW:this.ui.renderUI()}};jasonBaseWidget.prototype.triggerEvent=function(n,t,i){for(var r,f=this._eventListeners.filter(function(t){return t.eventName==n&&t.listener}),u=0;u<=f.length-1;u++)r=f[u],r.callingContext?r.listener.call(r.callingContext,this,t):r.listener(this,t);i!=void 0&&i()};jasonBaseWidget.prototype.updateOptions=function(){};Object.defineProperty(jasonBaseWidget.prototype,"enabled",{get:function(){return this._enabled},set:function(n){this._enabled=n;this.ui._setEnable(this._enabled)},enumerable:!0,configurable:!1});Object.defineProperty(jasonBaseWidget.prototype,"visible",{get:function(){return this._visible},set:function(n){this._visible=n;this.ui._setVisible(this._visible)},enumerable:!0,configurable:!1});Object.defineProperty(jasonBaseWidget.prototype,"readOnly",{get:function(){return this._readOnly},set:function(n){this._readOnly=n;this.ui._setReadOnly(this._readOnly)},enumerable:!0,configurable:!1});Object.defineProperty(jasonBaseWidgetUIHelper.prototype,"options",{get:function(){return this.widget.options},enumerable:!1,configurable:!1});Object.defineProperty(jasonBaseWidgetUIHelper.prototype,"eventManager",{get:function(){return this.widget.eventManager},enumerable:!1,configurable:!1});jasonBaseWidgetUIHelper.prototype.createElement=function(n,t){var i=document.createElement(n);return t==!0&&this.createdElements.push(i),i};jasonBaseWidgetUIHelper.prototype.createTextNode=function(n,t){var i=document.createTextNode(n);return t==!0&&this.createdElements.push(i),i};jasonBaseWidgetUIHelper.prototype.createWidgetContainer=function(n){n=n?n:"div";var t=this.createElement(n);return t.classList.add(this.widget.baseClassName),t};jasonBaseWidgetUIHelper.prototype.renderUI=function(){};jasonBaseWidgetUIHelper.prototype.clearUI=function(){if(this.htmlElement){var n=this.htmlElement.parent;n.removeChild(this.htmlElement);this.createdElements=[]}};jasonBaseWidgetUIHelper.prototype.localizeStrings=function(){};jasonBaseWidgetUIHelper.prototype._setEnable=function(n){this.htmlElement&&(n?this.htmlElement.classList.remove(JW_DISABLED):this.htmlElement.classList.add(JW_DISABLED))};jasonBaseWidgetUIHelper.prototype._setVisible=function(n){this.htmlElement&&(this.htmlElement.style.display=n?"":"none")};jasonBaseWidgetUIHelper.prototype._setReadOnly=function(n){this.htmlElement&&(n?this.htmlElement.classList.remove(JW_READONLY):this.htmlElement.classList.add(JW_READONLY))};jasonDataSource.prototype.setData=function(n){this.data=n;this.processData();this.options.onChange&&this.options.onChange()};jasonDataSource.prototype.valuesAreEqual=function(n,t){return t==n};jasonDataSource.prototype.valuesAreNotEqual=function(n,t){return!this.valuesAreEqual(n,t)};jasonDataSource.prototype.valueIsLessThan=function(n,t){return n<t};jasonDataSource.prototype.valueIsLessEqualThan=function(n,t){return n<=t};jasonDataSource.prototype.valueIsGreaterThan=function(n,t){return n>t};jasonDataSource.prototype.valueIsGreaterEqualThan=function(n,t){return n>=t};jasonDataSource.prototype.valueStartsWith=function(n,t){return n.indexOf(t)==0};jasonDataSource.prototype.valueEndsWith=function(n,t){var i=n.length-t.length;return n.indexOf(t,i)==i};jasonDataSource.prototype.valueContains=function(n,t){return n.indexOf(t)>=0};jasonDataSource.prototype.processData=function(n){var r=n?n:this.data,i,t;if(r)for(i=null,t=0;t<=r.length-1;t++)i=r[t],typeof i=="object"&&(i._jwRowId=t)};jasonDataSource.prototype.defaultSortComparison=function(n,t){return n==t?0:n<t?-1:1};jasonDataSource.prototype.dataTypeSortComparison=function(n,t){var r=this.defaultSortComparison,i=r;return(n&&(i=function(t,i){return r(n(t),n(i))}),t==!0)?function(n,t){return-1*i(n,t)}:i};jasonDataSource.prototype.addSorting=function(n,t){t=t!=undefined?t:!0;var i=this.sorting.filter(function(t){return t.name==n.name})[0];return i?i.reverse=n.reverse:this.sorting.push(n),t==!0?this.sort(this.sorting,this.currentDataView):void 0};jasonDataSource.prototype.removeSorting=function(){var n=this.sorting.filter(function(n){return n.name==sortingConfiguration.name})[0],t;n&&(t=this.sorting.indexOf(n),this.sorting.splice(t,1),this.sorting.length==0?this.currentDataView=[].concat(this.data):this.applySort())};jasonDataSource.prototype.applySort=function(){this.sort()};jasonDataSource.prototype.clearSorting=function(){this.sorting=[];this.filters.length==0?this.currentDataView=[].concat(this.data):this.applyFilters()};jasonDataSource.prototype.sort=function(n,t){var s=t?t:[].concat(this.data),f=[],i,u,e,r,o;if(n)for(r=0;r<=n.length-1;r++)typeof n[r]=="string"&&this.addSorting(n[r],!1);for(r=0;r<=this.sorting.length-1;r++)i=this.sorting[r],typeof i=="string"?(u=i,e=default_cmp):(u=i.name,e=this.dataTypeSortComparison(i.primer,i.reverse)),f.push({name:u,compare:e});return o=s.sort(function(n,t){for(var r,e=0;e<=f.length-1;e++)if(r=0,i=f[e],u=i.name,r=i.compare(n[u],t[u]),r!==0)break;return r}),this.currentDataView=[].concat(o),this.currentDataView};jasonDataSource.prototype.filter=function(n,t,i,r){var y=i?i:this.data,p=[],a,u,f,v,e,s,c,h,o,l,w;for(r=jasonWidgets.common.assigned(r)?r:!1,f=0;f<=n.length-1;f++)if(a=n[f].filterClause,u=null,a){switch(a.symbol){case"=":u=this.valuesAreEqual;break;case">":u=this.valueIsGreaterThan;break;case"<":u=this.valueIsLessThan;break;case">=":u=this.valueIsGreaterEqualThan;break;case"<=":u=this.valueIsLessEqualThan;break;case"!=":u=this.valueStartsWith;break;case"startsWith":u=this.valueStartsWith;break;case"endsWith":u=this.valueEndsWith;break;case"contains":u=this.valueContains}n[f].evaluator=u}for(f=0;f<=y.length-1;f++)for(v=y[f],e=v[t],typeof e=="string"&&(e=r?e:e.toLowerCase()),s=!1,c=0;c<=n.length-1;c++){if(h=n[c],o=h.value,typeof o=="string"&&(o=r?o:o.toLowerCase()),l=n[c-1],l&&h.evaluator){w=l.logicalOperator?l.logicalOperator.operator:"or";switch(w){case"and":s=s&&h.evaluator(e,o);break;case"or":s=s||h.evaluator(e,o)}}else h.evaluator&&(s=h.evaluator(e,o));s&&p.push(v)}return this.currentDataView=[].concat(p),this.currentDataView};jasonDataSource.prototype.addFilter=function(n,t,i){i=i==void 0?!1:i;var r=this.filters.filter(function(t){return t.filterField==n})[0],u=this.data;return r?r.filterValues=t:(r={filterValues:t,filterField:n},this.filters.push(r)),i?this.filter(t,n,u):void 0};jasonDataSource.prototype.removeFilter=function(n){var r=-1,u=this.filters.filter(function(t,i){var u=t.filterField==n;if(u)return r=i,t})[0],t,i;if(u&&this.filters.splice(r,1),this.filters.length>0)for(this.currentDataView=[].concat(this.data),t=0;t<=this.filters.length-1;t++)i=this.filters[t],this.filter(i.filterValues,i.filterField,this.currentDataView);else this.currentDataView=[].concat(this.data)};jasonDataSource.prototype.applyFilters=function(){for(var n,i,t=0;t<=this.filters.length-1;t++)n=this.filters[t],i=t==0?this.filter(n.filterValues,n.filterField,this.data):this.filter(n.filterValues,n.filterField,i);return this.currentDataView};jasonDataSource.prototype.clearFilters=function(){this.filters=[];this.sorting.length==0?this.currentDataView=[].concat(this.data):this.sort()};jasonDataSource.prototype.search=function(n,t,i){var e=t?t:[].concat(this.data),o=[],u,r,f,s;for(n=i?n:n.toLowerCase(),u=0;u<=e.length-1;u++){r=e[u];for(f in r)if(typeof r[f]=="string"&&(s=r[f].toLowerCase(),s.indexOf(n)>=0)){o.push(r);break}}return this.currentDataView=[].concat(o),this.currentDataView};jasonDataSource.prototype.searchByField=function(n,t,i,r){var h,o,s,u,e,f;for(r||(r=!1),h=i?i:[].concat(this.data),o=[],n=r?n:n.toLowerCase(),s=0;s<=h.length-1;s++)if(u=h[s],typeof u=="string")f=r?u:u.toLowerCase(),f.indexOf(n)>=0&&o.push(u);else for(t===void 0&&jw.common.throwError(jw.errorTypes.referenceError,"Search fields are not defined"),e=0;e<=t.length-1;e++)typeof u[t[e]]=="string"&&(f=r?f:u[t[e]].toLowerCase(),f.indexOf(n)>=0&&o.push(u));return this.currentDataView=[].concat(o),this.currentDataView};jasonDataSource.prototype.groupByField=function(n,t,i){var f=t?t:[].concat(this.data),u=this.groupingExists(n),r;this.groupedData=[];u||(r={field:n,level:this.grouping.length},this.grouping.push(r));i&&this.groupData()};jasonDataSource.prototype.groupData=function(n){var i=n?n:[].concat(this.data),r,t;for(this.grouperDataSource||(this.grouperDataSource=new jasonDataSource({data:i})),this.grouperDataSource.clearSorting(),t=0;t<=this.grouping.length-1;t++)r=this.grouping[t],this.grouperDataSource.addSorting({name:r.field,reverse:!1},!1);i=this.grouperDataSource.sort();var f=this,u=new jw.data.nest;for(t=0;t<=this.grouping.length-1;t++)u.key(null,f.grouping[t].field);return u.entries(i)};jasonDataSource.prototype.groupingExists=function(n){return this.grouping.filter(function(t){return t.field==n}).length>0};jasonDataSource.prototype.removeGrouping=function(n){var t=-1;this.grouping.filter(function(i,r){if(i.field==n.field)return t=r,!0})[0];this.grouping.splice(t,1);this.groupData()};jasonDataSource.prototype.range=function(n,t){var i=this.currentDataView.slice(n,t+1);return this.grouping.length>0&&(i=this.groupData(i)),i};jwDocumentEventManager={eventListeners:[],_internalListeners_:[]};jwWindowEventManager={eventListeners:[],_internalListeners_:[]};jwDocumentEventManager.addDocumentEventListener=function(n,t){var i=jwDocumentEventManager._internalListeners_.filter(function(t){return t.event==n})[0];i||(jwDocumentEventManager.eventListeners.push({event:n,listener:t}),document.addEventListener(n,function(n){for(var t=0;t<=jwDocumentEventManager.eventListeners.length-1;t++)jwDocumentEventManager.eventListeners[t].event==n.type&&jwDocumentEventManager.eventListeners[t].listener(n)}))};jwDocumentEventManager.removeDocumentEventListener=function(n,t){var r=jwDocumentEventManager._internalListeners_.filter(function(t){return t.event==n})[0],u,i;if(r){for(u=-1,i=0;i<=jwDocumentEventManager.eventListeners.length-1;i++)if(r.event==n&&r.listener==t){u=i;break}u>=0&&jwDocumentEventManager.eventListeners.splice(i,1)}};jwWindowEventManager.addWindowEventListener=function(n,t){var i=jwWindowEventManager._internalListeners_.filter(function(t){return t.event==n})[0];i||(jwWindowEventManager.eventListeners.push({event:n,listener:t}),window.addEventListener(n,function(n){for(var t=0;t<=jwWindowEventManager.eventListeners.length-1;t++)jwWindowEventManager.eventListeners[t].event==n.type&&jwWindowEventManager.eventListeners[t].listener(n)}))};jwWindowEventManager.removeDocumentEventListener=function(n,t){var r=jwWindowEventManager._internalListeners_.filter(function(t){return t.event==n})[0],u,i;if(r){for(u=-1,i=0;i<=jwWindowEventManager.eventListeners.length-1;i++)if(r.event==n&&r.listener==t){u=i;break}u>=0&&jwWindowEventManager.eventListeners.splice(i,1)}};jasonWidgets.localizationManager=new jasonLocalizationManager;jw.data={};jw.data.map=function(n,t){var r=new jw_Map,i,u,e,f;if(n instanceof jw_Map)n.forEach(function(n,t){r.set(n,t)});else if(Array.isArray(n))if(i=-1,u=n.length,arguments.length===1)while(++i<u)r.set(i,n[i]);else while(++i<u)r.set(t.call(n,e=n[i],i),e);else for(f in n)r.set(f,n[f]);return r};jw_map_proto="__proto__";jw_map_zero="\x00";jw_class(jw_Map,{has:jw_map_has,get:function(n){return this._[jw_map_escape(n)]},set:function(n,t){return this._[jw_map_escape(n)]=t},remove:jw_map_remove,keys:jw_map_keys,values:function(){var n=[];for(var t in this._)n.push(this._[t]);return n},entries:function(){var n=[];for(var t in this._)n.push({key:jw_map_unescape(t),value:this._[t]});return n},size:jw_map_size,empty:jw_map_empty,forEach:function(n){for(var t in this._)n.call(this,jw_map_unescape(t),this._[t])}});jw.data.nest=function(){function i(f,e,o){if(o>=t.length)return u?u.call(n,e):r?e.sort(r):e;for(var v=-1,p=e.length,h=t[o++],c,s,l,a=new jw_Map,y;++v<p;)s=e[v],c=h.field?s[h.field]:h.callBack(s),(y=a.get(c))?y.push(s):a.set(c,[s]);return f?(s=f(),l=function(n,t){s.set(n,i(f,t,o))}):(s={},l=function(n,t){s[n]=i(f,t,o)}),a.forEach(l),s}function e(n,i){if(i>=t.length)return n;var r=[],u=f[i++];return n.forEach(function(n,t){r.push({key:n,values:e(t,i),level:i-1})}),u?r.sort(function(n,t){return u(n.key,t.key)}):r}var n={},t=[],f=[],r,u;return n.map=function(n,t){return i(t,n,0)},n.entries=function(n){return e(i(jw.data.map,n,0),0)},n.key=function(i,r){return t.push({callBack:i,field:r}),n},n.sortKeys=function(i){return f[t.length-1]=i,n},n.sortValues=function(t){return r=t,n},n.rollup=function(t){return u=t,n},n};jasonDragResize.prototype=Object.create(jasonBaseWidget.prototype);jasonDragResize.prototype.constructor=jasonDragResize;jasonWidgetLanguageEL.prototype=Object.create(jasonWidgetLanguage.prototype);jasonWidgetLanguageEL.prototype.constructor=jasonWidgetLanguageEL;jasonWidgets.localizationManager.languages.el=new jasonWidgetLanguageEL;jasonWidgetLanguageEN.prototype=Object.create(jasonWidgetLanguage.prototype);jasonWidgetLanguageEN.prototype.constructor=jasonWidgetLanguageEN;jasonWidgets.localizationManager.languages["en-US"]=new jasonWidgetLanguageEN;jasonWidgetLanguageES.prototype=Object.create(jasonWidgetLanguage.prototype);jasonWidgetLanguageES.prototype.constructor=jasonWidgetLanguageES;jasonWidgets.localizationManager.languages.es=new jasonWidgetLanguageES;jasonWidgetLanguageIT.prototype=Object.create(jasonWidgetLanguage.prototype);jasonWidgetLanguageIT.prototype.constructor=jasonWidgetLanguageIT;jasonWidgets.localizationManager.languages.it=new jasonWidgetLanguageIT;jasonWidgetCultureEL.prototype=Object.create(jasonWidgetCulture.prototype);jasonWidgetCultureEL.prototype.constructor=jasonWidgetCultureEL;jasonWidgets.localizationManager.cultures.el=new jasonWidgetCultureEL;jasonWidgetCultureEN_US.prototype=Object.create(jasonWidgetCulture.prototype);jasonWidgetCultureEN_US.prototype.constructor=jasonWidgetCultureEN_US;jasonWidgets.localizationManager.cultures["en-US"]=new jasonWidgetCultureEN_US;jasonWidgetCultureES.prototype=Object.create(jasonWidgetCulture.prototype);jasonWidgetCultureES.prototype.constructor=jasonWidgetCultureES;jasonWidgets.localizationManager.cultures.IT=new jasonWidgetCultureES;jasonWidgetCultureIT.prototype=Object.create(jasonWidgetCulture.prototype);jasonWidgetCultureIT.prototype.constructor=jasonWidgetCultureIT;jasonWidgets.localizationManager.cultures.IT=new jasonWidgetCultureIT;jasonCombobox.prototype=Object.create(jasonBaseWidget.prototype);jasonCombobox.prototype.constructor=jasonCombobox;var JW_EVENT_ON_ROLL_DOWN="onRollDown",JW_EVENT_ON_ROLL_UP="onRollUp",JW_EVENT_ON_SELECT_ITEM="onSelectItem";Object.defineProperty(jasonCombobox.prototype,"selectedItem",{get:function(){return this._selectedItem},set:function(n){this._selectedItem=n;this.triggerEvent(JW_EVENT_ON_SELECT_ITEM,{selectedItem:n,selectedItemIndex:this._selectedItemIndex})},enumerable:!0,configurable:!0});Object.defineProperty(jasonCombobox.prototype,"selectedItemIndex",{get:function(){return this._selectedItemIndex},set:function(n){this._selectedItemIndex=n},enumerable:!0,configurable:!0});jasonCombobox.prototype.onDataSourceChange=function(){this.dataChanged=!0};jasonCombobox.prototype.clearSelection=function(){this.ui.clearSelection();this.selectedItem=null;this.selectedItemIndex=-1};jasonCombobox.prototype.hasSelection=function(){return this.selectedItem!=void 0&&this.selectedItemIndex>=0};jasonCombobox.prototype.selectItem=function(n){this._selectedItemIndex=n;this.selectedItem=this.filteredData.length>0?this.filteredData.filter(function(t){return t._jwRowId==n})[0]:this.dataSource.data[n];this.ui.updateInputTextFromSelection()};jasonCombobox.prototype.search=function(){if(this.filteredData=this.selectedItem?[this.selectedItem]:this.dataSource.searchByField(this.ui.comboboxInput.value,this.options.displayFields,null,this.options.caseSentiveSearch),this.filteredData.length==0){var n={_NoData_:jasonWidgets.common.formatString(this.options.localization.combobox.notFound,[this.ui.comboboxInput.value])};this.filteredData.push(n)}this.ui.renderDropdownListItems(this.filteredData)};jasonCombobox.prototype.showDropDownList=function(){this.ui.showDropDownList()};jasonCombobox.prototype.hideDropDownList=function(){this.ui.hideDropDownList(!0)};jasonCombobox.prototype.toggleDropDownList=function(){this.ui.toggleDropdownList()};var COMBOBOX_CLASS="jw-combobox",COMBOBOX_DROP_DOWN_LIST_CLASS="drop-down-list",COMBOBOX_DROP_DOWN_LIST_ITEM_CLASS="drop-down-list-item";COMBOBOX_LIST_STATE_ATTR="jw-drop-down-list-state";COMBOBOX_LIST_STATE_UP="up";COMBOBOX_LIST_STATE_DOWN="down";COMBOBOX_LIST_ITEM_SELECTED="selected";jasonComboboxUIHelper.prototype=Object.create(jasonBaseWidgetUIHelper.prototype);jasonComboboxUIHelper.prototype.constructor=jasonComboboxUIHelper;jasonComboboxUIHelper.prototype.renderUI=function(){var n=this;this.htmlElement.classList.contains(COMBOBOX_CLASS)||(this.htmlElement.classList.add(COMBOBOX_CLASS),this.comboboxInput=jw.htmlFactory.createJWTextInput(this.widget.options.inputMode,this.widget.options.placeholder,this.widget.readOnly),this.comboboxButton=jw.htmlFactory.createJWButton(null,JW_ICON_CHEVRON_DOWN),this.htmlElement.appendChild(this.comboboxInput),this.htmlElement.appendChild(this.comboboxButton),this.initializeEvents())};jasonComboboxUIHelper.prototype.toggleDropdownList=function(){this.dropDownListState==COMBOBOX_LIST_STATE_UP?(this.comboboxButton.setAttribute(COMBOBOX_LIST_STATE_ATTR,COMBOBOX_LIST_STATE_DOWN),this.showDropDownList(),this.scrollItemIntoView()):this.hideDropDownList(!0)};jasonComboboxUIHelper.prototype.scrollSelectedIntoView=function(){if(this.dropDownListState==COMBOBOX_LIST_STATE_DOWN&&this.widget.selectedItemIndex>=0){var n=jw.common.getElementsByAttribute(this.dropDownList,DATA_ITEM_INDEX_ATTR,this.widget.selectedItemIndex)[0];n!=void 0&&(this.dropDownListContainer.scrollTop=n.offsetTop,n.focus())}};jasonComboboxUIHelper.prototype.scrollFirstItemIntoView=function(){this.dropDownListState==COMBOBOX_LIST_STATE_DOWN&&(this.dropDownListContainer.scrollTop=this.dropDownList.children[0].offsetTop,this.dropDownList.children[0].focus())};jasonComboboxUIHelper.prototype.scrollItemIntoView=function(){this.widget.hasSelection()==!0?this.scrollSelectedIntoView():this.scrollFirstItemIntoView()};jasonComboboxUIHelper.prototype.showDropDownList=function(){this.dropDownListState!=COMBOBOX_LIST_STATE_DOWN&&(this.renderDropdownListContainer(),this.dropDownListState=COMBOBOX_LIST_STATE_DOWN,this.comboboxButton.setAttribute(COMBOBOX_LIST_STATE_ATTR,this.dropDownListState),this.widget.triggerEvent(JW_EVENT_ON_ROLL_DOWN))};jasonComboboxUIHelper.prototype.hideDropDownList=function(n){this.dropDownListState!=COMBOBOX_LIST_STATE_UP&&(this.dropDownListContainer&&(this.dropDownListContainer.style.display="none"),this.dropDownListState=COMBOBOX_LIST_STATE_UP,this.comboboxButton.setAttribute(COMBOBOX_LIST_STATE_ATTR,this.dropDownListState),n!=!0||this.widget.readOnly||this.comboboxInput.focus(),this.widget.triggerEvent(JW_EVENT_ON_ROLL_UP))};jasonComboboxUIHelper.prototype.initializeEvents=function(){var n=this;this.eventManager.addEventListener(this.comboboxButton,CLICK_EVENT,this.onComboboxButtonClick,!0);this.eventManager.addEventListener(this.comboboxButton,KEY_DOWN_EVENT,this.onComboboxKeyDown,!0);this.eventManager.addEventListener(this.comboboxInput,CLICK_EVENT,this.onComboboxInputClick);this.comboboxInput.addEventListener(KEY_DOWN_EVENT,this.onComboboxKeyDown);this.comboboxInput.addEventListener(KEY_UP_EVENT,this.onComboboxKeyUp)};jasonComboboxUIHelper.prototype.updateInputTextFromSelection=function(){var i=this,t="",n;this.widget.options.displayFields&&(n=[],this.widget.options.displayFields.forEach(function(t){n.push(i.widget.selectedItem[t])}),t=jasonWidgets.common.formatString(this.widget.options.displayFormatString,n));this.comboboxInput.value=t};jasonComboboxUIHelper.prototype.renderDropdownListContainer=function(){var t=this,n;this.widget.options.data&&(this.dropDownListContainer||(this.dropDownListContainer=this.createElement("div"),this.dropDownList=this.createElement("ul"),this.dropDownListContainer.appendChild(this.dropDownList),this.dropDownListContainer.classList.add(COMBOBOX_DROP_DOWN_LIST_CLASS),this.dropDownListContainer.classList.add(COMBOBOX_CLASS),this.dropDownListContainer.style.display="none",document.body.appendChild(this.dropDownListContainer)),this.widget.dataChanged&&this.renderDropdownListItems(),this.dropDownListContainer.style.position="absolute",n=this.htmlElement.getBoundingClientRect(),this.hasScrollBars=this.dropDownList.scrollHeight>this.dropDownListContainer.clientHeight,this.scrollBarWidth||(this.scrollBarWidth=jasonWidgets.common.scrollBarWidth()),this.dropDownListContainer.style.width=this.comboboxInput.offsetWidth+this.comboboxButton.offsetWidth+"px",this.dropDownListContainer.style.top=n.top+this.htmlElement.offsetHeight+"px",this.dropDownListContainer.style.left=n.left+"px",this.dropDownListContainer.style.zIndex=jw.common.getNextAttributeValue("z-index")+1,this.dropDownListContainer.style.display="")};jasonComboboxUIHelper.prototype.renderDropdownListItems=function(n){var s=this,f=n?n:this.widget.dataSource.data,e,i,u;for(jw.common.removeChildren(this.dropDownList),e=jasonWidgets.common.getNextTabIndex(),i=0;i<=f.length-1;i++){var t=this.createElement("li"),r=f[i],o=[];this.widget.options.displayFields&&this.widget.options.displayFields.forEach(function(n){o.push(f[i][n])});u=r._NoData_;u||(u=typeof r=="string"?r:jasonWidgets.common.formatString(this.widget.options.displayFormatString,o));r._jw_Searchable_value=o.join(" ");t.appendChild(this.createTextNode(u));t.className=COMBOBOX_DROP_DOWN_LIST_ITEM_CLASS;t.setAttribute(DATA_ITEM_INDEX_ATTR,r._jwRowId);t.setAttribute(ITEM_INDEX_ATTR,i);t.setAttribute(TABINDEX_ATTR,e);jasonWidgets.common.setData(t,"jComboboxDataItem",r);this.eventManager.addEventListener(t,CLICK_EVENT,this.onComboboxItemClick);this.eventManager.addEventListener(t,KEY_DOWN_EVENT,this.onComboboxKeyDown);e++;this.dropDownList.appendChild(t)}this.widget.dataChanged=!1};jasonComboboxUIHelper.prototype.findItem=function(n){for(var i,t=0;t=this.dropDownList.children.length-1;t++)if(i=this.dropDownList.children[t].innerText||this.dropDownList.children[t].textContent,i==n)return this.dropDownList.children[t];return null};jasonComboboxUIHelper.prototype.monitorForDocumentClick=function(n){if(this.dropDownList&&this.dropDownListState=="down"){if(jw.common.contains(this.htmlElement,n.target))return;jw.common.isMouseEventOutOfContainer(this.dropDownListContainer,n)&&this.hideDropDownList()}};jasonComboboxUIHelper.prototype.onComboboxButtonClick=function(){this.dropDownListState=this.comboboxButton.getAttribute(COMBOBOX_LIST_STATE_ATTR);this.dropDownListState=this.dropDownListState?this.dropDownListState:COMBOBOX_LIST_STATE_UP;this.toggleDropdownList()};jasonComboboxUIHelper.prototype.onComboboxInputClick=function(){this.widget.readOnly==!0&&this.toggleDropdownList()};jasonComboboxUIHelper.prototype.onComboboxItemClick=function(n){this.comboboxInput.value=n.target.textContent||n.target.innerText;this.clearSelection();this.widget._selectedItemIndex=parseInt(n.target.getAttribute(DATA_ITEM_INDEX_ATTR));this.widget.selectedItem=jasonWidgets.common.getData(n.target,"jComboboxDataItem");this.hideDropDownList(!0)};jasonComboboxUIHelper.prototype.onComboboxKeyDown=function(n){var i=n.which||n.keyCode,t;switch(i){case 9:n.target.tagName=="LI"?(this.setFocusToListItem(n.target,n.shiftKey?COMBOBOX_LIST_STATE_UP:COMBOBOX_LIST_STATE_DOWN),n.shiftKey&&n.preventDefault()):this.hideDropDownList();break;case 13:n.target.tagName=="LI"&&(t=parseInt(n.target.getAttribute(DATA_ITEM_INDEX_ATTR)),this.widget.selectItem(t),this.hideDropDownList(!0),this.comboboxInput.focus());break;case 27:this.hideDropDownList();break;case 38:n.target.tagName=="LI"&&this.setFocusToListItem(n.target,COMBOBOX_LIST_STATE_UP);n.preventDefault();break;case 40:n.target.tagName=="LI"?this.setFocusToListItem(n.target,COMBOBOX_LIST_STATE_DOWN):(this.showDropDownList(),this.scrollItemIntoView());n.preventDefault()}n.stopPropagation()};jasonComboboxUIHelper.prototype.onComboboxKeyUp=function(n){var t=n.which||n.keyCode,i=!1;switch(t){case 8:case 46:i=!0}(t>46||i)&&(this.widget.clearSelection(),this.showDropDownList(),this.options.autoFilter&&this.widget.search());n.stopPropagation()};jasonComboboxUIHelper.prototype.onComboboxInputChange=function(n){this.widget.clearSelection();n.stopPropagation()};jasonComboboxUIHelper.prototype.setFocusToListItem=function(n,t){var i=parseInt(n.getAttribute(ITEM_INDEX_ATTR));t=="up"?i-1<=0?this.comboboxInput.focus():this.dropDownList.children[i-1].focus():this.dropDownList.children.length!=i+1&&this.dropDownList.children[i+1].focus()};jasonComboboxUIHelper.prototype.clearSelection=function(){var n=jw.common.getElementsByAttribute(this.dropDownList,DATA_ITEM_INDEX_ATTR,this.widget.selectedItemIndex)[0];n!=void 0&&n.classList.remove(COMBOBOX_LIST_ITEM_SELECTED)};jasonMenu.prototype=Object.create(jasonBaseWidget.prototype);jasonMenu.prototype.constructor=jasonMenu;var JW_EVENT_ON_MENU_SHOWN="onMenuShown",JW_EVENT_ON_MENU_HIDDEN="onMenuHidden",JW_EVENT_ON_MENU_ITEM_CLICKED="onItemClick",JW_EVENT_ON_MENU_CHECKBOX_CLICKED="onCheckboxClicked",JW_EVENT_ON_MENU_ITEM_CONTENT_SHOW="onItemContentShown";jasonMenuItem.prototype=Object.create(jasonBaseWidget.prototype);jasonMenuItem.prototype.constructor=jasonMenuItem;jasonMenuItem.prototype.assign=function(n){this.caption=n.caption;this.title=n.title;this.enabled=n.enabled;this.items=n.items;this.content=n.content;this.level=n.level;this.name=n.name;this.hasCheckBox=n.hasCheckBox;this.checked=n.checked;this.clickable=n.clickable;this.icon=n.icon;this.isDivider=n.isDivider};jasonMenuWidgetParser.prototype.constructor=jasonMenuWidgetParser;jasonMenuWidgetDOMParser.prototype=Object.create(jasonMenuWidgetParser.prototype);jasonMenuWidgetDOMParser.prototype.constructor=jasonMenuWidgetDOMParser;jasonMenuWidgetJSONParser.prototype=Object.create(jasonMenuWidgetParser.prototype);jasonMenuWidgetJSONParser.prototype.constructor=jasonMenuWidgetJSONParser;jasonMenuWidgetParser.prototype.createSubItemsContainer=function(){var n=this.menuUI.createElement("div");return n.classList.add(MENU_ITEMS_CONTAINER_CLASS),n.style.display="none",n};jasonMenuWidgetParser.prototype.createMenuItemCaption=function(n,t){var u=jasonWidgets.common.getNodeText(n),i,r;u&&(t.caption=u.textContent.trim(),jasonWidgets.common.removeNodeText(n));i=this.menuUI.createElement("div");i.classList.add(JW_MENU_ITEM_CAPTION);t.isDivider?(i.appendChild(this.menuUI.createElement("hr")),n.classList.add(MENU_ITEM_DIVIDER),n.setAttribute(MENU_ITEM_NO_HIGHLIGHT_ATTR,"true")):(r=this.menuUI.createElement("div"),r.classList.add(JW_MENU_ITEM_CAPTION),r.appendChild(this.menuUI.createTextNode(t.caption)),i.appendChild(r));n._jasonMenuItemCaptionContainer=i;n.appendChild(i)};jasonMenuWidgetParser.prototype.createMenuItemArrowIcon=function(n){var t,i,r;n._jasonMenuItemCaptionContainer&&(t=this.menuUI.createElement("div"),t.classList.add(JW_MENU_ITEM_ARROW),i=this.menuUI.createElement("i"),r=n.getAttribute(MENU_ITEM_LEVEL_ATTRIBUTE),i.className=this.menuUI.options.orientation=="horizontal"&&r==0?JW_ICON_CHEVRON_DOWN:JW_ICON_CHEVRON_RIGHT,t.appendChild(i),n._jasonMenuItemCaptionContainer.appendChild(t))};jasonMenuWidgetParser.prototype.createMenuItemIcon=function(n,t){var i,r,u;n._jasonMenuItemCaptionContainer&&(i=this.menuUI.createElement("div"),i.classList.add(MENU_ICON),r=this.menuUI.createElement("i"),r.className=t,u=n.getAttribute(MENU_ITEM_LEVEL_ATTRIBUTE),i.appendChild(r),n._jasonMenuItemCaptionContainer.insertBefore(i,n._jasonMenuItemCaptionContainer.firstChild))};jasonMenuWidgetParser.prototype.mustAddArrowIcon=function(n){var t=!1;return t=n.children.length>0,n.children.length==1&&n.children[0].className==JW_MENU_ITEM_CAPTION&&(t=!1),t};jasonMenuWidgetDOMParser.prototype.createMenuItem=function(n){var t=new jasonMenuItem(n,null,null),i=n.getAttribute(MENU_ITEM_LEVEL_ATTRIBUTE);return i&&(t.level=parseInt(i)),this.menuUI.eventManager.addEventListener(n,CLICK_EVENT,this.menuUI.onItemClick,!0),this.menuUI.eventManager.addEventListener(n,TOUCH_START_EVENT,this.menuUI.onItemTouch,!0),this.menuUI.eventManager.addEventListener(n,MOUSE_ENTER_EVENT,this.menuUI.onItemMouseEnter,!0),this.menuUI.eventManager.addEventListener(n,MOUSE_LEAVE_EVENT,this.menuUI.onItemMouseLeave,!0),jasonWidgets.common.setData(n,MENU_ITEM_DATA_KEY,t),t};jasonMenuWidgetDOMParser.prototype.populateMenu=function(n){for(var i,r,t=this,f=this.menuUI.widget,e=function(n,i){for(var u,s,f,h,c,o,l,r=0;r<=i.children.length-1;r++)if(u=i.children[r],u.tagName=="UL")for(s=t.createSubItemsContainer(),f=t.menuUI.createElement("ul"),s.appendChild(f),i.appendChild(s),i._jasonMenuItemsContainer=s,jw.common.moveChildrenTo(u,f),u.setAttribute("fordelete",!0),h=0;h<=f.children.length-1;h++)c=f.children[h],o=t.createMenuItem(c),jw.htmlFactory.convertToJWMenuItem(t.menuUI.options.orientation,c),n.items.push(o),o.parent=n,o.level=n.level+1,e(o,c);else u.tagName=="LI"&&jw.htmlFactory.convertToJWMenuItem(t.menuUI.options.orientation,u);for(l=jw.common.getElementsByAttribute(i,"fordelete","true"),r=0;r<=l.length-1;r++)i.removeChild(l[r])},u=0;u<=n.children.length-1;u++)i=n.children[u],i.setAttribute(MENU_ITEM_LEVEL_ATTRIBUTE,0),r=this.createMenuItem(i),jw.htmlFactory.convertToJWMenuItem(this.menuUI.options.orientation=="horizontal"?"vertical":"horizontal",i),r.level=0,f.items.push(r),e(r,i);return f};jasonMenuWidgetJSONParser.prototype.populateMenu=function(n){for(var t,u,i=this,e=function(n){var o,s,h,r,t,u;for(n.items.length>0&&(s=i.createSubItemsContainer(),o=i.menuUI.createElement("ul"),s.appendChild(o),n.htmlElement.appendChild(s),n.htmlElement._jasonMenuItemsContainer=s),h=o!=void 0?o:f,r=0;r<=n.items.length-1;r++)t=jw.common.isJWWidget(n.items[r])?n.items[r]:null,t==null?(u=i.menuUI.createElement("li"),t=new jasonMenuItem(u,null,null),t.assign(n.items[r]),t.clickable=t.clickable==void 0?!0:t.clickable,t.parent=n,t.level=n.level+1,i.createMenuElementFromItem(t,u)):u=i.createMenuElementFromItem(t,t.htmlElement),h.appendChild(u),n.items[r]=t,t.items.length>0&&e(t,h)},f=this.menuUI.ulMenuElement,r=0;r<=n.items.length-1;r++)t=jw.common.isJWWidget(n.items[r])?n.items[r]:null,t==null?(u=i.menuUI.createElement("li"),t=new jasonMenuItem(u,null,null),t.assign(n.items[r]),t.clickable=t.clickable==void 0?!0:t.clickable,t.level=0,i.createMenuElementFromItem(t,u)):u=i.createMenuElementFromItem(t,t.htmlElement),u.setAttribute(MENU_ITEM_LEVEL_ATTRIBUTE,t.level),f.appendChild(u),n.items[r]=t,e(t,f);return f};jasonMenuWidgetJSONParser.prototype.createMenuElementFromItem=function(n,t){var f=this,i,u,r;return n.content?(i=t===void 0?this.menuUI.createElement("li"):t,n.content.tagName?i.appendChild(n.content):(u=this.menuUI.createElement("div"),u.innerHTML=n.content,i.appendChild(u)),i.classList.add(MENU_ITEM_CONTENT),n.content.classList.add(MENU_ITEM_CONTENT_CLASS)):(t===void 0?i=jw.htmlFactory.createJWMenuItem(this.menuUI.options.orientation,n):(i=t,jw.htmlFactory.createJWMenuItem(this.menuUI.options.orientation,n,i)),n.isDivider&&(i.appendChild(this.menuUI.createElement("hr")),i.classList.add(MENU_ITEM_DIVIDER),i.setAttribute(MENU_ITEM_NO_HIGHLIGHT_ATTR,"true")),n.hasCheckBox&&(r=jw.common.getElementsByAttribute(i,"type","checkbox")[0],r!=void 0&&(n.checkBoxElement=r,this.menuUI.eventManager.addEventListener(r,CLICK_EVENT,this.menuUI.onCheckboxClick))),f=this,this.menuUI.eventManager.addEventListener(i,CLICK_EVENT,this.menuUI.onItemClick,!0),this.menuUI.eventManager.addEventListener(i,MOUSE_ENTER_EVENT,this.menuUI.onItemMouseEnter),this.menuUI.eventManager.addEventListener(i,MOUSE_LEAVE_EVENT,this.menuUI.onItemMouseLeave)),t==void 0&&jasonWidgets.common.setData(i,MENU_ITEM_DATA_KEY,n),i};jasonMenuUIHelper.prototype=Object.create(jasonBaseWidgetUIHelper.prototype);jasonMenuUIHelper.prototype.constructor=jasonMenuUIHelper;var MENU_CLASS="jw-menu",MENU_HORIZONTAL="horizontal",MENU_ITEM_CLASS="jw-menu-item",MENU_ITEM_CLASS_ACTIVE=MENU_ITEM_CLASS+"-active",MENU_ITEMS_CONTAINER_CLASS="jw-menu-items-container",MENU_ITEM_LEVEL_ATTRIBUTE="data-jason-menu-item-level",MENU_CONTAINER_CLASS="jw-menu-container",MENU_ITEM_CHECKBOX_CLASS="jw-menu-item-checkbox",MENU_ITEM_CONTENT_CLASS="jw-menu-item-content",MENU_ITEM_CONTENT="menu-content";MENU_ITEM_DATA_KEY="jasonMenuItem";MENU_ITEM_DIVIDER="divider";MENU_ITEM_NO_HIGHLIGHT_ATTR="no-highlight";jasonMenuUIHelper.prototype.showMenu=function(n,t,i){var r,u;n&&(this.invokableElement=n,r=n.getBoundingClientRect(),this.menuContainer.style.display="",this.ulMenuElement.style.width=this.getWiderElementWidthOfUL(this.ulMenuElement)+"px",this.menuContainer.style.top=i?i+"px":r.top+n.offsetHeight+1+"px",u=window.innerWidth||document.documentElement.clientWidth||document.body.clientWidth,this.menuContainer.style.left=t?t+"px":r.left+this.menuContainer.offsetWidth>=u?r.left-this.menuContainer.offsetWidth+"px":r.left+"px",this.menuContainer.style.zIndex=jw.common.getNextAttributeValue("z-index")+1,this.widget.triggerEvent(JW_EVENT_ON_MENU_SHOWN))};jasonMenuUIHelper.prototype.hideMenu=function(){for(var t,i=this.menuContainer.getElementsByClassName(MENU_ITEMS_CONTAINER_CLASS),n=0;n<=i.length-1;n++)i[n].style.display="none";for(t=this.menuContainer.getElementsByClassName(MENU_ITEM_CLASS_ACTIVE),n=0;n<=t.length-1;n++)t[n].classList.remove(MENU_ITEM_CLASS_ACTIVE);this.menuContainer.style.display="none";this.widget.triggerEvent(JW_EVENT_ON_MENU_HIDDEN)};jasonMenuUIHelper.prototype.getWiderElementWidthOfUL=function(n){var r=0,h,t,s,i,c;if(n){if(n._jasonMenuWidgetWiderElementWidth)return n._jasonMenuWidgetWiderElementWidth;for(h=n.getElementsByClassName(MENU_ITEM_CONTENT_CLASS),h.length>0&&(n._jasonMenuWidgetWiderElementWidth=h[0].offsetWidth),t=0;t<=n.children.length-1;t++){var l=n.children[t].getElementsByClassName(JW_MENU_ITEM_CAPTION)[0],u=null,f=n.children[t].getElementsByClassName(JW_MENU_ITEM_ICON)[0],e=n.children[t].getElementsByClassName(JW_MENU_ITEM_ARROW)[0],o=n.children[t].getElementsByClassName(JW_MENU_ITEM_CHECKBOX)[0];f=f?f.offsetWidth:0;e=e?e.offsetWidth:0;o=o?o.offsetWidth:0;u=n.children[t].getElementsByClassName(JW_MENU_ITEM_CAPTION)[0];s=0;u&&(i=jasonWidgets.common.getComputedStyleProperty(u,"font-weight"),i=i+" "+jasonWidgets.common.getComputedStyleProperty(u,"font-size"),i=i+" "+jasonWidgets.common.getComputedStyleProperty(u,"font-family"),i=i.replace("'",""),s=jasonWidgets.common.getTextWidth(u.textContent.trim(),i));c=s>n.children[t].offsetWidth?n.children[t].offsetWidth+s:n.children[t].offsetWidth+5;c>r&&(r=c+f+e+o)}return n._jasonMenuWidgetWiderElementWidth=n._jasonMenuWidgetWiderElementWidth?r>n._jasonMenuWidgetWiderElementWidth?r:n._jasonMenuWidgetWiderElementWidth:r,n._jasonMenuWidgetWiderElementWidth}return r};jasonMenuUIHelper.prototype.getMenuItemFromEvent=function(n){var t=n.target.tagName=="LI"?n.target:jasonWidgets.common.getParentElement("LI",n.target);return jasonWidgets.common.getData(t,MENU_ITEM_DATA_KEY)};jasonMenuUIHelper.prototype.onCheckboxClick=function(n){this.toggleCheckBox(n);n.stopPropagation()};jasonMenuUIHelper.prototype.toggleCheckBox=function(n){var t=this.getMenuItemFromEvent(n),i;t&&t.checkBoxElement&&t.enabled&&(i={event:n,item:t,checked:t.checkBoxElement.checked,cancel:!1},this.widget.triggerEvent(JW_EVENT_ON_MENU_CHECKBOX_CLICKED,i),i.cancel&&(t.checkBoxElement.checked=!t.checkBoxElement.checked))};jasonMenuUIHelper.prototype.onItemClick=function(n){var t=this.getMenuItemFromEvent(n);t&&t.clickable&&t.enabled&&this.widget.triggerEvent(JW_EVENT_ON_MENU_ITEM_CLICKED,{event:n,item:t,uiHelper:this});n.stopPropagation()};jasonMenuUIHelper.prototype.onItemTouch=function(n){var i,t;if(n.preventDefault(),n.stopPropagation(),i=this.getMenuItemFromEvent(n),this.previousShowMenuItem&&i.level<=this.previousShowMenuItem.level)for(t=this.previousShowMenuItem;t&&t.level>=i.level;)this.hideMenuItemContents(t),t=t.parent;this.previousShowMenuItem=i;this.showMenuItemContents(i)};jasonMenuUIHelper.prototype.showMenuItemContents=function(n){var t,i,r;n&&(t=n.htmlElement,!t.getAttribute(MENU_ITEM_NO_HIGHLIGHT_ATTR)&&n.enabled&&t.classList.add(MENU_ITEM_CLASS_ACTIVE),i=!t._jasonMenuItemsContainer&&n.enabled||n.enabled&&t._jasonMenuItemsContainer.style.display=="none",i&&(r=t.parentNode==this.ulMenuElement?this.options.orientation.toLowerCase():null,this.placeMenuItemsContainer(t._jasonMenuItemsContainer,t,r),n.triggerEvent(JW_EVENT_ON_MENU_ITEM_CONTENT_SHOW)))};jasonMenuUIHelper.prototype.hideMenuItemContents=function(n){if(n){var t=n.htmlElement;this.options._debug||this.disableMouseEvents||t._jasonMenuItemsContainer&&this.canHideSubMenu&&(t._jasonMenuItemsContainer.style.display="none");n.enabled&&t.classList.remove(MENU_ITEM_CLASS_ACTIVE)}};jasonMenuUIHelper.prototype.onItemMouseEnter=function(n){this.showMenuItemContents(this.getMenuItemFromEvent(n))};jasonMenuUIHelper.prototype.onItemMouseLeave=function(n){this.hideMenuItemContents(this.getMenuItemFromEvent(n))};jasonMenuUIHelper.prototype.placeMenuItemsContainer=function(n,t,i){var o,s,r,u,f,e,h;if(n){n.style.position="absolute";o=i=="horizontal"?t.offsetTop+t.offsetHeight+"px":t.offsetTop-t.offsetHeight/5.5+"px";n.style.top=o;s=350-this.options.animation.Speed*35;jasonWidgets.common.fadeOut(n,s);r=n.getElementsByTagName("UL")[0];n.style.display="";u=r.querySelectorAll(".jw-menu-item-content")[0];u&&(f=r.querySelectorAll(".menu-content")[0],f&&(f.style.height=u.offsetHeight+"px"));e=this.getWiderElementWidthOfUL(r);h=10;e>0&&(n.style.width=e+"px",h=0);var c=jasonWidgets.common.getOffsetCoordinates(t),l=window.innerWidth||document.documentElement.clientWidth||document.body.clientWidth,a=n.offsetWidth+c.left+t.offsetWidth>=l?t.offsetLeft-n.offsetWidth:i=="horizontal"?t.offsetLeft:t.offsetWidth;n.style.left=a+"px"}};jasonMenuUIHelper.prototype.createMenu=function(){var n=this,t,i;if(this.htmlElement.tagName=="UL")return t=new jasonMenuWidgetDOMParser(this),this.options.invokable?(this.menuContainer.style.display="none",this.menuContainer.style.position="absolute",this.menuContainer.appendChild(this.ulMenuElement),document.body.appendChild(this.menuContainer)):(this.htmlElement.parentNode.replaceChild(this.menuContainer,this.htmlElement),this.menuContainer.appendChild(this.htmlElement)),t.populateMenu(this.ulMenuElement);this.options.menu&&(i=new jasonMenuWidgetJSONParser(this),this.ulMenuElement=i.populateMenu(this.options.menu),this.widget.options.orientation.toLowerCase()=="horizontal"&&this.ulMenuElement.classList.add(MENU_HORIZONTAL),this.menuContainer.appendChild(this.ulMenuElement),this.options.invokable?(this.menuContainer.style.display="none",this.menuContainer.style.position="absolute",this.eventManager.addEventListener(this.menuContainer,MOUSE_LEAVE_EVENT,function(){n.disableMouseEvents||n.options._debug||(n.options.hideDelay?(n.canHideMenu=!0,setTimeout(function(){n.canHideMenu&&n.hideMenu()},n.options.hideDelay)):n.hideMenu())}),this.eventManager.addEventListener(this.menuContainer,MOUSE_ENTER_EVENT,function(){n.options._debug||(n.canHideMenu&&(n.canHideMenu=!1),n.disableMouseEvents&&(n.disableMouseEvents=!1))}),document.body.appendChild(this.menuContainer)):this.htmlElement.appendChild(this.menuContainer),this.eventManager.addEventListener(this.ulMenuElement,MOUSE_ENTER_EVENT,function(){n.disableMouseEvents=!1}),this.eventManager.addEventListener(this.ulMenuElement,MOUSE_DOWN_EVENT,function(t){var r=jasonWidgets.common.getParentElement("LI",t.target),i=jasonWidgets.common.getData(r,MENU_ITEM_DATA_KEY);i&&i.content&&jw.common.isMouseEventOutOfContainer(n.ulMenuElement,t)&&(n.disableMouseEvents=!0)},!0))};jasonContextMenuUIHelper.prototype=Object.create(jasonMenuUIHelper.prototype);jasonContextMenuUIHelper.prototype.constructor=jasonContextMenuUIHelper;jasonContextMenuUIHelper.prototype.initializeEvents=function(){this.eventManager.addEventListener(this.options.target,CONTEXT_MENU_EVENT,this.showContextMenu)};jasonContextMenuUIHelper.prototype.showContextMenu=function(n){n.button==2&&(n.preventDefault(),n.stopPropagation(),this.showMenu(n.target,n.pageX,n.pageY))};jasonContextMenuUIHelper.prototype.onContextItemClick=function(n,t){var i={event:event,item:t,checked:t.checkBoxElement.checked,cancel:!1};this.widget.triggerEvent(JW_EVENT_ON_MENU_CHECKBOX_CLICKED,i);this.hideMenu();this.options.target.focus();n.stopPropagation();n.preventDefault()};jasonCalendar.prototype=Object.create(jasonBaseWidget.prototype);jasonCalendar.prototype.constructor=jasonCalendar;JW_EVENT_CALENDAR_MODE_CHANGE="onModeChange";JW_EVENT_CALENDAR_NAVIGATE="onNavigate";Object.defineProperty(jasonCalendar.prototype,"date",{get:function(){return this._date},set:function(n){this._setDate(n)},enumerable:!0,configurable:!0});Object.defineProperty(jasonCalendar.prototype,"specialDates",{get:function(){return this._specialDates},enumerable:!0,configurable:!0});Object.defineProperty(jasonCalendar.prototype,"mode",{get:function(){return this._calendarMode},set:function(n){this._setMode(n)},enumerable:!1,configurable:!1});jasonCalendar.prototype._setDate=function(n){n&&jw.common.dateComparison(this._date,n)!=0&&(this._date=n,this.triggerEvent(JW_EVENT_ON_CHANGE,this._date))};jasonCalendar.prototype._setMode=function(n){n&&this._calendarMode!=n&&(this._calendarMode=n,this.ui.renderCalendarItems(this.navigate(null)),this.triggerEvent(JW_EVENT_CALENDAR_MODE_CHANGE,this._calendarMode))};jasonCalendar.prototype.addSpecialDate=function(n,t,i){this.specialDates.push({date:n,css:t,toolTip:i})};jasonCalendar.prototype.parseSpecialDates=function(){for(var n,i,r,t=0;t<=this.options.specialDates.length-1;t++)n=this.options.specialDates[t],n.date&&(i=typeof n.date=="date"?n.date:Date.parse(n.date),isNaN(i)||(r=new Date,r.setTime(i),this.specialDates.push({date:r,tooltip:n.tooltip,cssClass:n.cssClass,recurring:n.recurring||!1})))};jasonCalendar.prototype.createCalendarItem=function(n,t,i){var r=new jasonCalendarItem,u,f;return r.year=i,r.month=t,r.day=n.getDate(),r.date=n,u=n.getDay(),u=this.options.localization.days[u],r.dayName=u.name,r.dayShortName=u.shortName,f=this.options.localization.months[t-1<0?0:t-1],r.monthName=f.name,r.monthShortName=f.shortName,r.displayValue=r.day,r};jasonCalendar.prototype.generateDays=function(n,t){var i=[],l=jasonWidgets.common.daysInMonth(n,t),a=new Date(n,t-1,1),u=a.getDay(),v=864e5,s,f,y,h,e,p,w,o,b,c,r;for(this.options.firstDayOfWeek>6&&(this.options.firstDayOfWeek=0),s=0,this.options.firstDayOfWeek!=u&&(s=u<this.options.firstDayOfWeek?7-Math.abs(this.options.firstDayOfWeek-u):Math.abs(this.options.firstDayOfWeek-u)),f=s;f>=1;f--)y=a.getTime()-f*v,h=new Date,h.setTime(y),r=this.createCalendarItem(h,t==12?1:t-1,t==12?n-1:n),r.classList.push(CALENDAR_ITEM_OUT_CURRENT_SCOPE),i.push(r);for(e=1;e<=l;e++)i.push(this.createCalendarItem(new Date(n,t-1,e),t,n));for(p=42-i.length,w=new Date(n,t-1,l),o=1;o<=p;o++)b=w.getTime()+o*v,c=new Date,c.setTime(b),r=this.createCalendarItem(c,t==12?1:t+1,t==12?n+1:n),r.classList.push(CALENDAR_ITEM_OUT_CURRENT_SCOPE),i.push(r);return this.currentCalendarItems=i,i};jasonCalendar.prototype.generateMonths=function(n){var r,i,t,u;for(n=n?n:this.date,r=[],i=0;i<=11;i++)t=new jasonCalendarItem,t.month=i+1,u=this.options.localization.months[i],t.monthName=u.name,t.monthShortName=u.shortName,t.displayValue=u.shortName,t.day=1,t.year=n.getFullYear(),r.push(t);return this.currentCalendarItems=r,r};jasonCalendar.prototype.generateYears=function(n,t){var u=[],f=new jasonCalendarItem,e,i,r;for(f.year=n-1,f.displayValue=f.year,f.classList.push(CALENDAR_ITEM_OUT_CURRENT_SCOPE),u.push(f),e=n;e<=t;e++)i=new jasonCalendarItem,i.year=e,i.decadeStart=n,i.decadeStop=t,i.displayValue=i.year,u.push(i);return r=new jasonCalendarItem,r.year=t+1,r.displayValue=r.year,r.classList.push(CALENDAR_ITEM_OUT_CURRENT_SCOPE),u.push(r),this.currentCalendarItems=u,u};jasonCalendar.prototype.generateDecades=function(n,t){for(var i,f,u=[],r=0;r<=9;r++)i=new jasonCalendarItem,f=u[r-1],i.decadeStart=r==0?n:f.decadeStop+1,i.decadeStop=r==0?n+9:i.decadeStart+9,i.centuryStart=n,i.centuryStop=t,i.displayValue=i.decadeStart+" - \r\n"+i.decadeStop,u.push(i);return this.currentCalendarItems=u,u};jasonCalendar.prototype.generateCenturies=function(n,t){var f=[],r=new jasonCalendarItem,e,i,o,u;for(r.centuryStart=n-100,r.centuryStop=r.centuryStart+99,r.classList.push(CALENDAR_ITEM_OUT_CURRENT_SCOPE),r.displayValue=r.centuryStart+" - \r\n"+r.centuryStop,f.push(r),e=0;e<=9;e++)i=new jasonCalendarItem,o=f[e-1],i.centuryStart=e==0?n:o.centuryStop+1,i.centuryStop=e==0?n+99:i.centuryStart+99,i.mileniumStart=n,i.mileniumStop=t,i.displayValue=i.centuryStart+" - \r\n"+i.centuryStop,f.push(i);return u=new jasonCalendarItem,u.centuryStart=t+1,u.centuryStop=u.centuryStart+99,u.classList.push(CALENDAR_ITEM_OUT_CURRENT_SCOPE),u.displayValue=centuryAftercCenturyStart+" - \r\n"+u.centuryStop,f.push(u),this.currentCalendarItems=f,f};jasonCalendar.prototype.generateCalendarItems=function(n){var i=n?n:this.date,f=i.getFullYear(),t=[],r,e,u,o;switch(this._calendarMode){case"days":t=this.generateDays(i.getFullYear(),i.getMonth()+1);break;case"months":t=this.generateMonths(n);break;case"years":r=parseInt(f.toString().substring(0,3)+"0");e=r+9;t=this.generateYears(r,e);break;case"decades":u=parseInt(f.toString().substring(0,2)+"00");o=u+99;t=this.generateDecades(u,o);break;default:t=this.generateDays(i.getYear(),i.getMonth())}return this.currentCalendarItems=t,{calendarItems:this.currentCalendarItems,navDate:n}};jasonCalendar.prototype.getRowDivisionCount=function(){switch(this._calendarMode){case"days":return 7;case"months":return 3;case"years":return 4;case"decades":return 4;default:return 7}};jasonCalendar.prototype.navigateBack=function(){this.ui.renderCalendarItems(this.navigate("back"))};jasonCalendar.prototype.navigateForward=function(){this.ui.renderCalendarItems(this.navigate("forward"))};jasonCalendar.prototype.navigate=function(n){var r=null,i=this._navigationDate.getMonth(),t=this._navigationDate.getFullYear(),u=this.currentCalendarItems[0],f=this.currentCalendarItems[this.currentCalendarItems.length-1];switch(this._calendarMode){case"days":n=="back"&&(t=i==0?t-1:t,i=i==0?11:i-1);n=="forward"&&(t=i==11?t+1:t,i=i==11?0:i+1);r=new Date(t,i,1);break;case"months":n&&(t=n=="back"?t-1:t+1);r=new Date(t,i,1);break;case"years":n&&(t=n=="back"?u.year:f.year);r=new Date(t,0,1);break;case"decades":n&&(t=n=="back"?u.decadeStart-100:f.decadeStop+1);r=new Date(t,0,1);break;default:date=null}return this._navigationDate=r,this.triggerEvent(JW_EVENT_CALENDAR_NAVIGATE,{navDirection:n,navDate:this._navigationDate}),this.generateCalendarItems(r)};var CALENDAR="jw-calendar",CALENDAR_HEADER="jw-calendar-header",CALENDAR_BODY="jw-calendar-body",CALENDAR_FOOTER="jw-calendar-footer",CALENDAR_GO_BACK="jw-calendar-back",CALENDAR_GO_FORWARD="jw-calendar-forward",CALENDAR_DISPLAY="jw-calendar-display",CALENDAR_TABLE_MONTHS="month-view",CALENDAR_TABLE_YEARS="years-view",CALENDAR_TABLE_DECADES="decades-view",CALENDAR_TABLE_CENTURIES="centuries-view",CALENDAR_ITEM_SELECTED_DATE="selected-date",CALENDAR_ITEM_OUT_CURRENT_SCOPE="jw-calendar-item-outofscope";jasonCalendarUIHelper.prototype=Object.create(jasonBaseWidgetUIHelper.prototype);jasonCalendarUIHelper.prototype.constructor=jasonCalendarUIHelper;jasonCalendarUIHelper.prototype.renderUI=function(){var n=this;this.htmlElement.classList.contains(CALENDAR)||(this.htmlElement.style.width=this.widget.options.width+"px",this.htmlElement.style.height=this.widget.options.height+"px",this.htmlElement.classList.add(CALENDAR),this.renderHeader(),this.renderBody(),this.renderFooter(),this.options.invokable&&(this.hideCalendar(),this.htmlElement.style.position="absolute",jwDocumentEventManager.addDocumentEventListener(MOUSE_DOWN_EVENT,function(t){jasonWidgets.common.isMouseEventOutOfContainer(n.htmlElement,t)&&n.htmlElement.style.display==""&&n.hideCalendar()}),this.eventManager.addEventListener(this.htmlElement,KEY_DOWN_EVENT,function(t){var i=t.which||t.keyCode;i==27&&n.hideCalendar()},!0)))};jasonCalendarUIHelper.prototype.renderHeader=function(){this.calendarHeader=this.createElement("div");this.calendarHeader.classList.add(CALENDAR_HEADER);this.calendarGoBackButton=jw.htmlFactory.createJWButton(null,JW_ICON_ARROW_LEFT);this.calendarGoBackButton.classList.add(CALENDAR_GO_BACK);this.eventManager.addEventListener(this.calendarGoBackButton,CLICK_EVENT,this.goBack,!0);this.calendarDisplayTitle=jw.htmlFactory.createJWLinkLabel();this.calendarDisplayTitle.classList.add(CALENDAR_DISPLAY);this.eventManager.addEventListener(this.calendarDisplayTitle,CLICK_EVENT,this.calendarDisplayClick);this.calendarGoForwardButton=jw.htmlFactory.createJWButton(null,JW_ICON_ARROW_RIGHT);this.calendarGoForwardButton.classList.add(CALENDAR_GO_FORWARD);this.eventManager.addEventListener(this.calendarGoForwardButton,CLICK_EVENT,this.goForward,!0);this.calendarHeader.appendChild(this.calendarGoBackButton);this.calendarHeader.appendChild(this.calendarDisplayTitle);this.calendarHeader.appendChild(this.calendarGoForwardButton);this.htmlElement.appendChild(this.calendarHeader)};jasonCalendarUIHelper.prototype.renderBody=function(){this.calendarBody=this.createElement("div");this.calendarBody.classList.add(CALENDAR_BODY);this.calendarTable=this.createElement("table");this.calendarBody.appendChild(this.calendarTable);this.renderCalendarItems();this.htmlElement.appendChild(this.calendarBody)};jasonCalendarUIHelper.prototype.renderCalendarItems=function(n){var e,h,p,c,l,r,a,v,u,y,t,f,i,o,s;for(n=n?n:this.widget.generateCalendarItems(),e=n.calendarItems,this.calendarTable.innerHTML="",r=this.calendarTable.classList.length-1;r>=0;r--)this.calendarTable.classList.remove(this.calendarTable.classList[r]);if(this.widget.mode=="months"&&this.calendarTable.classList.add(CALENDAR_TABLE_MONTHS),this.widget.mode=="years"&&this.calendarTable.classList.add(CALENDAR_TABLE_YEARS),this.widget.mode=="decades"&&this.calendarTable.classList.add(CALENDAR_TABLE_DECADES),h=this.createElement("tbody"),p=this.widget.getRowDivisionCount(),this.widget.mode=="days"){for(c=this.createElement("thead"),l=this.createElement("tr"),c.appendChild(l),r=0;r<=6;r++)a=this.createElement("th"),v=this.createElement("span"),v.appendChild(this.createTextNode(e[r].dayShortName)),a.appendChild(v),l.appendChild(a);this.calendarTable.appendChild(c)}for(this.calendarTable.appendChild(h),u=0;u<=e.length-1;u++){for(t=e[u],f=null,this.widget.mode=="days"&&(f=this.widget.specialDates.filter(function(n){return n.recurring?n.date.getMonth()==t.date.getMonth()&&n.date.getDate()==t.date.getDate():jasonWidgets.common.dateComparison(n.date,t.date)==0})[0]),(u==0||u%p==0)&&(y=this.createElement("tr"),h.appendChild(y)),i=this.createElement("td"),o=this.createElement("a"),o.appendChild(this.createTextNode(t.displayValue)),o.setAttribute("href","javascript:void(0)"),i.appendChild(o),f&&(i.setAttribute(TITLE_ATTR,f.tooltip),f.cssClass&&i.classList.add(f.cssClass)),jasonWidgets.common.setData(i,"jwCalendarItem",t),this.widget.mode=="days"&&jw.common.dateComparison(n.navDate,t.date)==jw.enums.comparison.equal&&i.classList.add(CALENDAR_ITEM_SELECTED_DATE),this.eventManager.addEventListener(i,CLICK_EVENT,this.calendarItemClick,!0),s=0;s<=t.classList.length-1;s++)i.classList.add(t.classList[s]);y.appendChild(i)}this.updateCalendarDisplay(n?n.navDate:undefined)};jasonCalendarUIHelper.prototype.renderFooter=function(){this.calendarFooter=this.createElement("div");this.calendarFooter.classList.add(CALENDAR_FOOTER);this.calendarFooterToday=jw.htmlFactory.createJWLinkLabel(jw.common.formatDateTime(new Date,jw.localizationManager.currentCulture.longDateFormat));this.calendarFooter.appendChild(this.calendarFooterToday);this.htmlElement.appendChild(this.calendarFooter);this.eventManager.addEventListener(this.calendarFooterToday,CLICK_EVENT,this.calendarNavigateToday,!0)};jasonCalendarUIHelper.prototype.showCalendar=function(n){if(this.options.invokableElement){this.calendarNavigateToday(n?n:this.widget.date);var t=this.options.invokableElement.getBoundingClientRect();this.htmlElement.style.left=t.left+"px";this.htmlElement.style.top=t.top+this.options.invokableElement.offsetHeight+"px";this.htmlElement.style.zIndex=jw.common.getNextAttributeValue("z-index")+1;this.htmlElement.style.display=""}};jasonCalendarUIHelper.prototype.hideCalendar=function(){this.htmlElement.style.display="none"};jasonCalendarUIHelper.prototype.calendarNavigateToday=function(n){var t=jw.common.getVariableType(n)==jw.enums.variableType.date?n:new Date,i;this.widget.mode="days";i={calendarItems:this.widget.generateDays(t.getFullYear(),t.getMonth()+1),navDate:t};this.renderCalendarItems(i)};jasonCalendarUIHelper.prototype.updateCalendarDisplay=function(n){n=n?n:this.widget.date;var t="",i=n.getMonth(),r=n.getFullYear();switch(this.widget.mode){case"days":i=this.widget.options.localization.months[i];t=jasonWidgets.common.formatString("{0} {1}",[i.name,r]);break;case"months":t=jasonWidgets.common.formatString("{0}",[r]);break;case"years":t=jasonWidgets.common.formatString("{0} - {1}",[this.widget.currentCalendarItems[1].decadeStart,this.widget.currentCalendarItems[1].decadeStop]);break;case"decades":t=jasonWidgets.common.formatString("{0} - {1}",[this.widget.currentCalendarItems[1].centuryStart,this.widget.currentCalendarItems[1].centuryStop]);break;default:date=null}jw.common.setData(this.calendarDisplayTitle,"navigationDate",n);jasonWidgets.common.replaceNodeText(this.calendarDisplayTitle,t,!0)};jasonCalendarUIHelper.prototype.goBack=function(){this.renderCalendarItems(this.widget.navigate("back"))};jasonCalendarUIHelper.prototype.goForward=function(){this.renderCalendarItems(this.widget.navigate("forward"))};jasonCalendarUIHelper.prototype.calendarDisplayClick=function(){var n=jw.common.getData(this.calendarDisplayTitle,"navigationDate");this.widget.mode=="years"&&(this.widget.mode="decades");this.widget.mode=="months"&&(this.widget.mode="years");this.widget.mode=="days"&&(this.widget.mode="months")};jasonCalendarUIHelper.prototype.calendarItemClick=function(n){var e=864e5,t=jasonWidgets.common.getData(n.currentTarget,"jwCalendarItem"),i,r,f,o,u;if(t){if(this.widget.mode=="days"&&n.currentTarget.classList.contains(CALENDAR_ITEM_OUT_CURRENT_SCOPE)){this.widget.date=t.date;this.widget._navigationDate=t.date;this.calendarNavigateToday(t.date);return}if(i=null,this.widget.mode=="days"){if(r=new Date(t.year,t.month-1,t.day),this.widget.date=r,f=!0,n.ctrlKey&&(this.options.multiSelect||this.options.rangeSelect)){if(f=!1,o=this.options.selectedDates.filter(function(n){return n.getTime()==r.getTime()})[0],!o){if(u=!0,this.options.rangeSelect){var h=this.options.selectedDates[this.options.selectedDates.length-1],c=this.options.selectedDates[0],l=h.getTime(),a=c.getTime(),s=r.getTime();if(u=s==a-e||s==l+e,!u)return}u&&(this.widget.options.selectedDates.push(this.widget.date),this.widget.options.selectedDates.sort(function(n,t){return n.getTime()-t.getTime()}))}}else this.options.selectedDates=[],this.widget.options.selectedDates.push(this.widget.date);this.setActiveCalendarItem(n.currentTarget,f)}this.widget.mode=="months"&&(i=new Date(t.year,t.month-1,1),this.widget.mode="days",this.renderCalendarItems(this.widget.generateCalendarItems(i)),this.widget._navigationDate=i);this.widget.mode=="years"&&(i=new Date(t.year,0,1),this.widget.mode="months",this.renderCalendarItems(this.widget.generateCalendarItems(i)),this.widget._navigationDate=i);this.widget.mode=="decades"&&(i=new Date(t.decadeStart,0,1),this.widget.mode="years",this.renderCalendarItems(this.widget.generateCalendarItems(i)),this.widget._navigationDate=i)}};jasonCalendarUIHelper.prototype.setActiveCalendarItem=function(n,t){var r=this.calendarTable.querySelectorAll("td"),i;if(t)for(i=0;i<=r.length-1;i++)r[i].classList.remove(CALENDAR_ITEM_SELECTED_DATE);n.classList.add(CALENDAR_ITEM_SELECTED_DATE)};jasonTabControl.prototype=Object.create(jasonBaseWidget.prototype);jasonTabControl.prototype.constructor=jasonTabControl;JW_EVENT_ON_TAB_ENTER="onTabEnter";Object.defineProperty(jasonTabControl.prototype,"tabIndex",{get:function(){return this._tabIndex},set:function(n){this._tabIndex!=n&&(this._tabIndex=n,this.ui.setActiveTab(this.ui.tabContents[this._tabIndex]),this.triggerEvent(JW_EVENT_ON_TAB_ENTER,this._tabIndex))},enumerable:!0,configurable:!0});jasonTabControlWidgetUIHelper.prototype=Object.create(jasonBaseWidgetUIHelper.prototype);jasonTabControlWidgetUIHelper.prototype.constructor=jasonTabControlWidgetUIHelper;var TAB_CONTAINER="jw-tabcontrol-container",TAB_UL_CLASS="jw-tabcontrol-list",TAB_PAGE_CLASS="jw-tabcontrol-page",TAB_PAGE_CONTENT_CONTAINER_CLASS="jw-tabcontrol-page-container",TAB_PAGE_CONTAINER="jw-tabcontrol-page-container",TAB_PAGE_ACTIVE="jw-tab-active";jasonTabControlWidgetUIHelper.prototype.renderUI=function(){var f=this,i,r,u,t,n;if(!this.tabsList){for(this.htmlElement.classList.add(TAB_CONTAINER),this.tabsList=this.htmlElement.tagName=="DIV"?this.htmlElement.children[0]:this.htmlElement,this.tabsList.classList.add(TAB_UL_CLASS),n=0;n<=this.tabsList.children.length-1;n++)i=this.tabsList.children[n],i.classList.add(TAB_PAGE_CLASS),i.setAttribute(DATA_ITEM_INDEX_ATTR,n),i.setAttribute(TABINDEX_ATTR,jasonWidgets.common.getNextTabIndex()),this.eventManager.addEventListener(i,CLICK_EVENT,function(n){for(var t=n.target;t.tagName!="LI";)t=t.parentNode;f.widget.tabIndex=parseInt(t.getAttribute(DATA_ITEM_INDEX_ATTR))},!0);for(r=[],n=0;n<=this.htmlElement.children.length-1;n++)this.htmlElement.children[n].tagName=="DIV"&&r.push(this.htmlElement.children[n]);for(n=0;n<=r.length-1;n++)u=r[n],u.tagName=="DIV"&&(t=this.createElement("div"),this.htmlElement.removeChild(u),t.appendChild(u),t.classList.add(TAB_PAGE_CONTAINER),this.widget.options.pageHeight&&(t.style.height=this.widget.options.pageHeight+"px"),t.setAttribute(DATA_ITEM_INDEX_ATTR,n),this.tabContents.push(t));for(n=0;n<=this.tabContents.length-1;n++)this.htmlElement.appendChild(this.tabContents[n]);this.widget.tabIndex=0}};jasonTabControlWidgetUIHelper.prototype.setActiveTab=function(n){for(var r,i,t=0;t<=this.tabsList.children.length-1;t++)r=this.tabsList.children[t],r.classList.remove(TAB_PAGE_ACTIVE);i=parseInt(n.getAttribute(DATA_ITEM_INDEX_ATTR));isNaN(i)||(n.classList.add(TAB_PAGE_ACTIVE),this.tabsList.children[this.widget.tabIndex].classList.add(TAB_PAGE_ACTIVE),this.tabContents.forEach(function(n){n.style.display="none"}),this.tabContents[i].style.display="")};jasonGridUIHelper.prototype=Object.create(jasonBaseWidgetUIHelper.prototype);jasonGridUIHelper.prototype.constructor=jasonGridUIHelper;var GRID_CLASS="jw-grid",GRID_HEADER_CONTAINER="jw-grid-header-container",GRID_HEADER_TABLE_CONTAINER="jw-grid-header-table-container",GRID_HEADER_CONTAINER_NO_GROUPING="no-grouping",GRID_HEADER_CELL_CAPTION_CONTAINER="jw-header-cell-caption",GRID_HEADER_CELL_ICON_CONTAINER="jw-header-cell-icon",GRID_HEADER="jw-grid-header",GRID_DATA_CONTAINER="jw-grid-data-container",GRID_DATA="jw-grid-data",GRID_FOOTER_CONTAINER="jw-grid-footer-container",GRID_FOOTER="jw-grid-footer",GRID_TABLE_ROW_CLASS="jw-grid-row",GRID_TABLE_ALT_ROW_CLASS="row-alt",GRID_TABLE_GROUP_ROW_CLASS="group-row",GRID_TABLE_CELL_CLASS="jw-grid-cell",GRID_COLUMN_DRAG_IMAGE="jw-grid-column-drag-image",GRID_COLUMN_ID_ATTR="jw-column-id",GRID_COLUMN_FIELD_ATTR="jw-column-field",GRID_COLUMN_RESIZE_HANDLE="jw-column-resize",GRID_COLUMN_SORT_ATTR="jw-column-sort";GRID_SELECTED_ROW_CLASS="row-selected";GRID_SELECTED_CELL_CLASS="cell-selected";GRID_GROUPING_CONTAINER_CLASS="jw-grid-group-container";GRID_GROUP_FIELD="jw-group-field";GRID_TABLE_NO_DATA_ROW_CLASS="jw-grid-no-data-row";jasonGridUIHelper.prototype.monitorChanges=function(){(window.requestAnimationFrame(this.monitorChanges),this.isReRendering)||this.gridHeaderTable.clientWidth!=this.gridDataTable.clientWidth&&(this.isReRendering=!0,this._sizeColumns(),this.isReRendering=!1)};jasonGridUIHelper.prototype._createColumnMenu=function(){this.columnMenu=new jasonMenu(this.gridHeaderTableContainer,{_debug:!1,menu:this.widget.defaultGridColumnMenu,invokable:!0,hideDelay:350,orientation:"vertical",autoHide:!0,events:[{eventName:JW_EVENT_ON_MENU_CHECKBOX_CLICKED,listener:this._onColumnMenuItemChecked,callingContext:this},{eventName:JW_EVENT_ON_MENU_ITEM_CLICKED,listener:this._onColumnMenuItemClicked,callingContext:this},{eventName:JW_EVENT_ON_MENU_HIDDEN,listener:this._onColumnMenuHidden,callingContext:this}]},jasonMenuUIHelper)};jasonGridUIHelper.prototype._initializeEvents=function(){this.eventManager.addEventListener(this.gridDataTable,MOUSE_DOWN_EVENT,this._onSelectionChange,!0);this.eventManager.addEventListener(this.gridDataContainer,SCROLL_EVENT,this._onDataContainerScroll);window.addEventListener(RESIZE_EVENT,this._onResize);var n=this;this.eventManager.addEventListener(this.pagerButtonFirst,CLICK_EVENT,function(t){n._goToPage(1,t);t.stopPropagation()});this.eventManager.addEventListener(this.pagerButtonPrior,CLICK_EVENT,function(t){n._goToPage(n._currentPage-1,t);t.stopPropagation()});this.eventManager.addEventListener(this.pagerButtonNext,CLICK_EVENT,function(t){n._goToPage(n._currentPage+1,t);t.stopPropagation()});this.eventManager.addEventListener(this.pagerButtonLast,CLICK_EVENT,function(t){n._goToPage(n._pageCount,t);t.stopPropagation()});this.eventManager.addEventListener(this.pagerInput,BLUR_EVENT,function(t){n._goToPage(n.pagerInput.value,t);t.stopPropagation()});this.eventManager.addEventListener(this.pagerInput,INPUT_EVENT,function(t){n._goToPage(n.pagerInput.value,t);t.stopPropagation()})};jasonGridUIHelper.prototype._clearHeaderEvents=function(){for(var t,i,r,n=0;n<=this.gridHeaderTableRow.children.length-1;n++)t=this.gridHeaderTableRow.children[n],i=jw.common.getData(t,"jwColumnResizer"),i&&i.destroy(),r=jw.common.getData(t,"jwColumnReOrdering"),r&&r.destroy(),jw.common.removeJWEvents(t,!0)};jasonGridUIHelper.prototype._onColumnMenuItemChecked=function(n,t){var i=this.options.columns.filter(function(n){return n.fieldName==t.item.name})[0],r=t.cancel;r=t.checked?this.widget.showColumn(i):this.widget.hideColumn(i);t.cancel=r};jasonGridUIHelper.prototype._onColumnMenuItemClicked=function(n,t){var u=this._currentFilterColumn,r,i;switch(t.item.name){case"mnuSortAsc":this.widget.sortBy(u.fieldName,"asc");this.columnMenu.ui.hideMenu();break;case"mnuSortDesc":this.widget.sortBy(u.fieldName,"desc");this.columnMenu.ui.hideMenu();break;case"mnuClearSorting":this.widget.dataSource.clearSorting();this._goToPage(this._currentPage,!0);this.columnMenu.ui.hideMenu();break;case"mnuClearFiltering":for(this.widget.dataSource.clearFilters(),r=this.gridHeaderTableRow.getElementsByTagName("th"),i=0;i<=r.length-1;i++)r[i].classList.remove(GRID_FIELD_HAS_FILTER);this._clearFilterControls();this._goToPage(this._currentPage,!0);this._sizeColumns();this.columnMenu.ui.hideMenu()}};jasonGridUIHelper.prototype._onColumnMenuHidden=function(){this._clearFilterControls()};jasonGridUIHelper.prototype._onSelectionChange=function(n){var i=n.target,t=n.target,r,u,f;if(t.tagName!="TABLE"){while(t&&t.tagName!="TR")t=t.parentNode;while(i.tagName!="TD")i=i.parentNode;t.className.indexOf(GRID_TABLE_GROUP_ROW_CLASS)>=0||(r=this.gridSelectedRows[0],u=this.gridSelectedCells[0],r&&this.options.multiSelect==!1&&r.classList.remove(GRID_SELECTED_ROW_CLASS),u&&this.options.cellMultiSelect==!1&&u.classList.remove(GRID_SELECTED_CELL_CLASS),this.options.multiSelect!=!0||n.ctrlKey||(this.gridSelectedRows.forEach(function(n){n.classList.remove(GRID_SELECTED_ROW_CLASS)}),this.gridSelectedRows=[],this.widget.selectedRows=[]),this.options.cellMultiSelect!=!0||n.ctrlKey||(this.gridSelectedCells.forEach(function(n){n.classList.remove(GRID_SELECTED_CELL_CLASS)}),this.gridSelectedCells=[]),t.classList.add(GRID_SELECTED_ROW_CLASS),i.classList.add(GRID_SELECTED_CELL_CLASS),f=t.getAttribute(DATA_ROW_ID_ATTR),this.options.multiSelect||(this.gridSelectedRows=[],this.widget.selectedRows=[]),this.options.cellMultiSelect||(this.gridSelectedCells=[]),this.widget.selectedRows.push(this.widget.dataSource.data[f]),this.gridSelectedRows.push(t),this.gridSelectedCells.push(i),this.widget.triggerEvent(JW_EVENT_ON_SELECTION_CHANGE,this.widget.selectedRows))}};jasonGridUIHelper.prototype._onGridFilterButtonClick=function(){};jasonGridUIHelper.prototype._onGridColumnMenuIconClick=function(n){n.stopPropagation();n.button==0&&(this._currentFilterColumn=this.options.columns[parseInt(n.currentTarget.getAttribute(GRID_COLUMN_ID_ATTR))],this._currentFilterField=this.options.columns[parseInt(n.currentTarget.getAttribute(GRID_COLUMN_ID_ATTR))].fieldName,this._currentTHElement=jasonWidgets.common.getParentElement("TH",n.currentTarget),this.columnMenu.ui.showMenu(n.currentTarget.parentElement))};jasonGridUIHelper.prototype._onResize=function(){var n=this;this.resizeTimeout||(this.resizeTimeout=setTimeout(function(){n.resizeTimeout=null;n._sizeColumns()},66))};jasonGridUIHelper.prototype._onDataContainerScroll=function(){this.gridHeaderTableContainer.scrollLeft=this.gridDataContainer.scrollLeft};jasonGridUIHelper.prototype._onGridColumnCaptionClick=function(n){var i=jw.common.getParentElement("TH",n.target),r,t;i&&(r=parseInt(i.getAttribute(GRID_COLUMN_ID_ATTR)),t=i.getAttribute(GRID_COLUMN_SORT_ATTR),t=t?t=="asc"?"desc":"asc":"asc",i.setAttribute(GRID_COLUMN_SORT_ATTR,t),this.widget.sortBy(this.options.columns[r].fieldName,t),n.stopPropagation())};jasonGridUIHelper.prototype._onGroupCollapseExpandIconClick=function(n){var i=n.target,t=jw.common.getParentElement("TR",i);i.className.indexOf("bottom")>=0?(i.className="jw-icon arrow-circle-top-2x",t.setAttribute(DATA_GROUP_EXPANDED_ATTR,"false"),this._collapseGroup(t),this.widget.triggerEvent(JW_EVENT_ON_GROUP_COLLAPSE,t.getAttribute(DATA_GROUPING_KEY_ATTR))):(i.className="jw-icon arrow-circle-bottom-2x",t.setAttribute(DATA_GROUP_EXPANDED_ATTR,"true"),this._expandGroup(t),this.widget.triggerEvent(JW_EVENT_ON_GROUP_EXPAND,t.getAttribute(DATA_GROUPING_KEY_ATTR)))};jasonGridUIHelper.prototype._onColumnDrop=function(n,t){var r,e,i,o,u,s,f;n.preventDefault&&n.preventDefault();r=document.elementFromPoint(n.clientX,n.clientY);r&&(e=t.getAttribute(GRID_COLUMN_FIELD_ATTR),i=this.widget._columnByField(e),(r==this.gridGroupingContainer||jw.common.contains(this.gridGroupingContainer,r))&&i&&this.options.grouping&&i.fieldName&&(o=this.widget.dataSource.groupingExists(i.fieldName),i&&!o&&this.widget.groupByField(i.fieldName)),u=jw.common.getParentElement("TH",r),u.tagName=="TH"&&(s=u.getAttribute(GRID_COLUMN_FIELD_ATTR),f=this.widget._columnByField(s),f.index!=i.index&&this.moveColumn(i,f.index)))};jasonGridUIHelper.prototype.moveColumn=function(n,t){jw.common.swapItemsInArray(this.options.columns,n.index,t);jw.common.swapDomElements(this.gridHeaderTableRow,n.index,t);jw.common.swapDomElements(this.headerTableColGroup,n.index,t);jw.common.swapDomElements(this.dataTableColGroup,n.index,t);var i=n.index;n.index=t;this.options.columns[t].index=i;this.renderUI();this.widget.triggerEvent(JW_EVENT_ON_COLUMN_POSITION_CHANGE,{column:n,fromIndex:n.index,toIndex:t})};jasonGridUIHelper.prototype._onColumnResizeEnd=function(n,t){var r=t.getAttribute(GRID_COLUMN_FIELD_ATTR),i=this.widget._columnByField(r);i&&(i.width=t.offsetWidth);this.widget.triggerEvent(JW_EVENT_ON_COLUMN_RESIZED,{column:i,newWidth:i.width})};jasonGridUIHelper.prototype._onGroupColumnRemoveClick=function(n){var t=jw.common.getParentElement("DIV",n.target),i=t.getAttribute(DATA_GROUPING_FIELD_ATTR);this.widget.removeGrouping(i)};jasonGridUIHelper.prototype.renderUI=function(n,t){var u,i,r;this._calculatePageCount(this.widget.dataSource.data);u=n?n:0;i=t?t:0;i==0&&(i=this.widget.dataSource.data?this.widget.dataSource.data.length:0,i=this.widget.options.paging&&this.widget.options.paging.pagesize&&i>this.widget.options.paging.pagesize?this.widget.options.paging.pagesize:i);this._renderRows(u,i-1);this._sizeColumns();this._renderFooter(i);r=35;this.options.grouping&&(r=r+35);this.options.paging&&(r=r+35);this.gridDataContainer.style.height=jw.common.formatString("calc(100% - {0}px",[r]);this.gridDataContainer.style.height==""&&(this.gridDataContainer.style.height=jw.common.formatString("calc(100% - {0}px",[r]))};jasonGridUIHelper.prototype._renderGridContainers=function(){this.gridHeaderContainer||(this.htmlElement.classList.add(GRID_CLASS),this.gridHeaderContainer=this.createElement("div"),this.gridHeaderContainer.classList.add(GRID_HEADER_CONTAINER),this.gridHeaderTableContainer=this.createElement("div"),this.gridHeaderTableContainer.classList.add(GRID_HEADER_TABLE_CONTAINER),this.gridHeaderContainer.appendChild(this.gridHeaderTableContainer),this.widget.options.grouping||this.gridHeaderContainer.classList.add(GRID_HEADER_CONTAINER_NO_GROUPING),this.gridDataContainer=this.createElement("div"),this.gridDataContainer.classList.add(GRID_DATA_CONTAINER),this.gridFooterContainer=this.createElement("div"),this.gridFooterContainer.classList.add(GRID_FOOTER_CONTAINER),this.options.grouping!=!0||this.gridGroupingContainer||(this.gridGroupingContainer=this.htmlElement.appendChild(this.createElement("div")),this.gridGroupingContainer.classList.add(GRID_GROUPING_CONTAINER_CLASS),this.gridGroupingContainer.appendChild(this.createElement("span"))),this.htmlElement.appendChild(this.gridHeaderContainer),this.htmlElement.appendChild(this.gridDataContainer),this.htmlElement.appendChild(this.gridFooterContainer))};jasonGridUIHelper.prototype._enableColumnDragResize=function(){var n,i,t;if(this.options.reordering||this.options.grouping||this.options.resizing)for(n=0;n<=this.gridHeaderTableRow.children.length-1;n++)i=this.gridHeaderTableRow.children[n],t=jw.common.getData(i,"jwColumnDragResize"),i.tagName=="TH"&!t&&!i.getAttribute(GRID_GROUP_FIELD)?(t=new jasonDragResize(i,{minWidth:50,allowResize:{top:!1,left:!1,bottom:!1,right:!0},allowDrag:this.options.reordering,dependantElements:[this.headerTableColGroup.children[n],this.dataTableColGroup.children[n]],onMoveEnd:this._onColumnDrop,onResizeEnd:this._onColumnResizeEnd,ghostPanelCSS:JW_DRAG_IMAGE,ghostPanelContents:i.querySelectorAll("."+GRID_HEADER_CELL_CAPTION_CONTAINER)[0].innerHTML}),jw.common.setData(i,"jwColumnDragResize",t)):t&&(t.options.allowDrag=this.options.reordering,t.options.allowResize=this.options.resizing?{top:!1,left:!1,bottom:!1,right:!0}:{top:!1,left:!1,bottom:!1,right:!1});else for(n=0;n<=this.gridHeaderTableRow.children.length-1;n++)i=this.gridHeaderTableRow.children[n],t=jw.common.getData(i,"jwColumnDragResize"),t&&t.destroy()};jasonGridUIHelper.prototype._sizeColumns=function(){var r,t,i,f,e;this.hasScrollBars=this.gridDataContainer.scrollHeight>this.gridHeaderContainer.parentNode.clientHeight;this.scrollBarWidth||(this.scrollBarWidth=jasonWidgets.common.scrollBarWidth());r=this._fixedWidthColumnsSum();this.gridHeaderTableContainer.style.width=this.hasScrollBars?"calc(100% - "+this.scrollBarWidth+"px)":"";this.gridHeaderTableContainer.style.width==""&&(this.gridHeaderTableContainer.style.width=this.hasScrollBars?"-webkit-calc(100% - "+this.scrollBarWidth+"px)":"");this.gridHeaderTable.clientWidth!=this.gridDataTable.clientWidth&&(t=this.gridHeaderTable.clientWidth,this.gridHeaderTable.style.width=t+"px",this.gridDataTable.style.width=t+"px");var o=(this.gridHeaderTableContainer.clientWidth-r-1)/this._columnCountWithNoFixedWidth()-this._groupColumnsWidth(),u=this.gridHeaderTable.getElementsByTagName("colgroup")[0],s=this.gridDataTable.getElementsByTagName("colgroup")[0];for(i=0;i<=u.children.length-1;i++){var n=this.options.columns[i],h=u.children[i],c=s.children[i],t="0px";n.visible&&(n.width&&isNaN(n.width)&&n.width.indexOf("%")>=0&&(f=parseFloat(n.width.replace("%","")),n.width=this.gridHeaderTableContainer.clientWidth*f/100),t=n.width?isNaN(n.width)?n.width:n.width+"px":o+"px",h.style.width=t,c.style.width=t)}window.navigator.vendor.indexOf("Apple")>=0&&(this._firstRun=!1,e=this,this.htmlElement.style.display="none",setTimeout(function(){e.htmlElement.style.display=""}))};jasonGridUIHelper.prototype._fixedWidthColumnsSum=function(){var n=0,i=new RegExp("/[^0-9.,]/g"),t=this;return this.options.columns.forEach(function(i){var r,u;i.width&&!i.groupColumn&&i.visible&&(r=0,i.width&&isNaN(i.width)&&i.width.indexOf("%")>=0?(u=parseFloat(i.width.replace("%","")),r=t.gridHeaderTableContainer.clientWidth*u/100):r=isNaN(i.width)?parseFloat(i.width.replace(/\D/g,"")):i.width,n=n+r)}),n};jasonGridUIHelper.prototype._columnCountWithNoFixedWidth=function(){return this.options.columns.filter(function(n){return n.width?!1:!0}).length};jasonGridUIHelper.prototype._groupColumnsWidth=function(){return this.options.columns.filter(function(n){return n.groupColumn?!0:!1}).length*25};jasonGridUIHelper.prototype._renderFilterUI=function(){var n=this,t,i;this.filterContainer||(this._prepareFilterValues(),this.filterContainer=this.createElement("div"),this.filterContainer.className=GRID_FILTER_CONTAINER_CLASS,this.filterContainer.style.display="none",this.filterHeader=this.createElement("div"),this.filterHeader.className=GRID_FILTER_HEADER_CLASS,this.filterHeaderTitle=this.createElement("span"),this.filterHeaderTitle.appendChild(this.createTextNode(n.options.localization.grid.filtering.filterHeaderCaption)),this.filterHeader.appendChild(this.filterHeaderTitle),this.filterBody=this.createElement("div"),this.filterBody.className=GRID_FILTER_BODY_CLASS,this.firstFilterOperatorContainer=this.createElement("div"),this.filterLogicalOperator=this.createElement("div"),this.secondFilterOperatorContainer=this.createElement("div"),this.firstFilterCombobox=new jasonCombobox(this.firstFilterOperatorContainer,{data:this.filterValues,displayFields:["title"],displayFormatString:"{0}",keyFieldName:"key",readOnly:!0,placeholder:this.options.localization.search.searchPlaceHolder,onItemSelected:null}),this.secondFilterCombobox=new jasonCombobox(this.secondFilterOperatorContainer,{data:this.filterValues,displayFields:["title"],displayFormatString:"{0}",keyFieldName:"key",readOnly:!0,placeholder:this.options.localization.search.searchPlaceHolder,onItemSelected:null}),this.logicalOperatorCombobox=new jasonCombobox(this.filterLogicalOperator,{data:this.filterLogicalOperators,displayFields:["title"],displayFormatString:"{0}",keyFieldName:"Key",readOnly:!0,placeHolder:this.options.localization.search.searchPlaceHolder}),this.firstFilterInputContainer=this.createElement("div"),this.firstFilterInputContainer.className=GRID_FILTER_INPUT,this.firstFilterInput=jw.htmlFactory.createJWTextInput(null,this.options.localization.search.searchPlaceHolder),this.firstFilterInputContainer.appendChild(this.firstFilterInput),t=function(t){var i=t.keyCode||t.which;switch(i){case 13:n.filterBtnApply.click()}},this.eventManager.addEventListener(this.firstFilterInput,KEY_DOWN_EVENT,t),this.secondFilterInput=jw.htmlFactory.createJWTextInput(null,this.options.localization.search.searchPlaceHolder),this.secondFilterInputContainer=this.createElement("div"),this.secondFilterInputContainer.className=GRID_FILTER_INPUT,this.secondFilterInputContainer.appendChild(this.secondFilterInput),this.eventManager.addEventListener(this.secondFilterInput,KEY_DOWN_EVENT,t),this.filterBody.appendChild(this.firstFilterOperatorContainer),this.filterBody.appendChild(this.firstFilterInputContainer),this.filterBody.appendChild(this.filterLogicalOperator),this.filterBody.appendChild(this.secondFilterOperatorContainer),this.filterBody.appendChild(this.secondFilterInputContainer),this.filterFooter=this.createElement("div"),this.filterFooter.className=GRID_FILTER_FOOTER_CLASS,this.filterBtnApply=jw.htmlFactory.createJWButton(this.options.localization.grid.filtering.applyButtonText,JW_ICON_CIRCLE_CHECK),this.filterBtnApply.classList.add(JW_GRID_FILTER_BUTTON_APPLY),this.eventManager.addEventListener(this.filterBtnApply,CLICK_EVENT,function(){n._applyFilter()},!0),this.filterBtnClear=jw.htmlFactory.createJWButton(this.options.localization.grid.filtering.clearButtonText,JW_ICON_CIRCLE_X),this.filterBtnClear.classList.add(JW_GRID_FILTER_BUTTON_CLEAR),this.eventManager.addEventListener(this.filterBtnClear,CLICK_EVENT,function(){n._clearFilterControls();n.widget.clearFilter(n._currentFilterField)},!0),jwDocumentEventManager.addDocumentEventListener(MOUSE_DOWN_EVENT,function(t){var i=n.filterContainer.getBoundingClientRect(),r=t.x>i.right||t.x<i.left,u=t.y>i.bottom||t.y<i.top,f=(r||u)&&n.filterContainer.style.display==""}),i=this.createElement("div"),i.classList.add(CLEAR_FLOAT_CLASS),this.filterFooter.appendChild(this.filterBtnClear),this.filterFooter.appendChild(this.filterBtnApply),this.filterFooter.appendChild(i),this.filterContainer.appendChild(this.filterHeader),this.filterContainer.appendChild(this.filterBody),this.filterContainer.appendChild(this.filterFooter),this._clearFilterControls(),this.widget.htmlElement.appendChild(this.filterContainer))};jasonGridUIHelper.prototype._applyFilter=function(){var t=[],i=this.firstFilterInput.value,n;this._currentFilterColumn.dataType&&(i=jasonWidgets.common.convertValue(i,this._currentFilterColumn.dataType));t.push({value:i,filterClause:this.firstFilterCombobox.selectedItem,logicalOperator:this.logicalOperatorCombobox.selectedItem});n=this.secondFilterInput.value;this._currentFilterColumn.dataType&&(n=jasonWidgets.common.convertValue(n,this._currentFilterColumn.dataType));t.push({value:n,filterClause:this.secondFilterCombobox.selectedItem,logicalOperator:this.secondFilterInput.value?this.secondFilterCombobox.selectedItem:null});this.widget.filterBy(this._currentFilterField,t)};jasonGridUIHelper.prototype._clearFilterControls=function(){this.firstFilterCombobox.ui.hideDropDownList();this.secondFilterCombobox.ui.hideDropDownList();this.logicalOperatorCombobox.ui.hideDropDownList();this.firstFilterCombobox.selectItem(0);this.secondFilterCombobox.selectItem(0);this.logicalOperatorCombobox.selectItem(0);this.firstFilterInput.value="";this.secondFilterInput.value=""};jasonGridUIHelper.prototype._loadFilterValues=function(n){var t,i;n&&(t=n.filterValues[0],t&&(this.firstFilterCombobox.selectItem(t.filterClause.key),this.firstFilterInput.value=t.value,this.logicalOperatorCombobox.selectItem(t.logicalOperator.key)),i=n.filterValues[1],i&&i.filterClause&&(this.secondFilterCombobox.selectItem(i.filterClause.key),this.secondFilterInput.value=i.value))};jasonGridUIHelper.prototype._prepareFilterValues=function(){var n=this;this.filterValues=[];this.filterValues.push({title:n.options.localization.filter.values.filterValueIsEqual,visible:!0,symbol:"="});this.filterValues.push({title:n.options.localization.filter.values.filterValueIsNotEqual,visible:!0,symbol:"!="});this.filterValues.push({title:n.options.localization.filter.values.filterValueStartsWith,visible:!0,symbol:"startsWith"});this.filterValues.push({title:n.options.localization.filter.values.filterValueEndsWith,visible:!0,symbol:"endWith"});this.filterValues.push({title:n.options.localization.filter.values.filterValueContains,visible:!0,symbol:"contains"});this.filterValues.push({title:n.options.localization.filter.values.filterValueGreaterThan,visible:!0,symbol:">"});this.filterValues.push({title:n.options.localization.filter.values.filterValueGreaterEqualTo,visible:!0,symbol:">="});this.filterValues.push({title:n.options.localization.filter.values.filterValueLessThan,visible:!0,symbol:"<"});this.filterValues.push({title:n.options.localization.filter.values.filterValueLessEqualTo,visible:!0,symbol:"<="});this.filterValues.forEach(function(n,t){n.key=t});this.filterLogicalOperators=[];this.filterLogicalOperators.push({title:n.options.localization.filter.operators.and,visible:!0,operator:"and"});this.filterLogicalOperators.push({title:n.options.localization.filter.operators.or,visible:!0,operator:"or"});this.filterLogicalOperators.forEach(function(n,t){n.key=t})};jasonGridUIHelper.prototype._columnVisible=function(n,t){var h=this.options.columns.filter(function(n){return n.visible==!0}),f,e,o,s,l,i;if(n&&(h.length>1||h[0].fieldName!=n.fieldName)){n.visible=t;var r=t?"":"none",u="th["+GRID_COLUMN_FIELD_ATTR+"='"+n.fieldName+"']",c=this.gridHeaderTableRow.querySelectorAll(u)[0];for(c&&(c.style.display=r),u="col["+GRID_COLUMN_FIELD_ATTR+"='"+n.fieldName+"']",f=this.headerTableColGroup.querySelectorAll(u)[0],f&&(f.style.display=r),e=this.dataTableColGroup.querySelectorAll("col["+GRID_COLUMN_FIELD_ATTR+"='"+n.fieldName+"']")[0],e&&(e.style.display=r),o=document.querySelectorAll("td[jw-data-cell-id='"+n.index+"']"),i=0;i<=o.length-1;i++)o[i].style.display=r;for(s=this.gridDataTableBody.querySelectorAll(".group-row td"),l=this.options.columns.filter(function(n){return n.visible==!0}).length,i=0;i<=s.length-1;i++)s[i].setAttribute(COLSPAN_ATTR,l);return!1}return!0};jasonGridUIHelper.prototype._renderHeader=function(){if(!this.gridHeaderTable){this.gridHeaderTable=this.gridHeaderTableContainer.appendChild(this.createElement("table"));this.headerTableColGroup=this.gridHeaderTable.appendChild(this.createElement("colgroup"));var n=this.gridHeaderTable.appendChild(this.createElement("thead"));this.gridDataTable=this.gridDataContainer.appendChild(this.createElement("table"));this.dataTableColGroup=this.gridDataTable.appendChild(this.createElement("colgroup"));this.gridDataTableBody=this.gridDataTable.appendChild(this.createElement("tbody"));this.gridHeaderTableRow=n.appendChild(this.createElement("tr"))}this.headerTableColGroup||(this.headerTableColGroup=this.gridHeaderTable.getElementsByTagName("colgroup")[0]);this.dataTableColGroup||(this.dataTableColGroup=this.gridDataTable.getElementsByTagName("colgroup")[0]);this._renderHeaderColumns(this.headerTableColGroup,this.dataTableColGroup)};jasonGridUIHelper.prototype._renderHeaderColumns=function(n,t){var s,f,o,a,i,r,u;for(this._clearHeaderEvents(),jw.common.removeChildren(this.gridHeaderTableRow),jw.common.removeChildren(this.headerTableColGroup),jw.common.removeChildren(this.dataTableColGroup),s=this,f=0;f<=this.options.columns.length-1;f++)if(gridColumn=this.options.columns[f],columnIndex=f,gridColumn.visible){var h=n.appendChild(this.createElement("col")),c=t.appendChild(this.createElement("col")),e=this.gridHeaderTableRow.appendChild(this.createElement("th")),l=e.appendChild(this.createElement("div"));l.classList.add(GRID_HEADER_CELL_CAPTION_CONTAINER);o=e.appendChild(this.createElement("div"));o.classList.add(GRID_HEADER_CELL_ICON_CONTAINER);a=gridColumn.Tooltip?gridColumn.Tooltip:gridColumn.caption;gridColumn.groupColumn?(h.style.width="25px",c.style.width="25px"):(h.setAttribute(GRID_COLUMN_FIELD_ATTR,gridColumn.fieldName),c.setAttribute(GRID_COLUMN_FIELD_ATTR,gridColumn.fieldName));gridColumn.fieldName&&(e.setAttribute(GRID_COLUMN_ID_ATTR,columnIndex),e.setAttribute(GRID_COLUMN_FIELD_ATTR,gridColumn.fieldName),e.setAttribute(TITLE_ATTR,a),i=l.appendChild(this.createElement("a")),i.setAttribute("href","javascript:void(0)"),gridColumn.headerTemplate?i.innerHTML=gridColumn.headerTemplate:i.appendChild(this.createTextNode(gridColumn.caption)),this.eventManager.addEventListener(i,MOUSE_DOWN_EVENT,this._onGridColumnCaptionClick,!0),this.eventManager.addEventListener(i,TOUCH_START_EVENT,function(n){n.preventDefault();n.stopPropagation();n.button=0;s._onGridColumnCaptionClick(n)},!0));this.options.columnMenu!=!0||gridColumn.groupColumn||(r=jw.htmlFactory.createJWButton(null,JW_ICON_MENU),r.setAttribute(GRID_COLUMN_ID_ATTR,columnIndex),this.eventManager.addEventListener(r,CLICK_EVENT,this._onGridColumnMenuIconClick,!0),this.eventManager.addEventListener(r,TOUCH_START_EVENT,function(n){n.preventDefault();n.stopPropagation();n.button=0;s._onGridColumnMenuIconClick(n)},!0),this.eventManager.addEventListener(r,MOUSE_DOWN_EVENT,function(n){n.stopPropagation()},!0),o.appendChild(r));this.options.filtering==!0&&this.options.columnMenu==!1&&(u=this.createElement("i"),u.className=JW_ICON_SEARCH,u.style.cssFloat="right",u.style.cursor="pointer",this.eventManager.addEventListener(u,CLICK_EVENT,this._onGridFilterButtonClick),o.appendChild(u))}};jasonGridUIHelper.prototype._renderRows=function(n,t,i){var r;if(i===void 0&&(i=null),jw.common.removeChildren(this.gridDataTableBody),this.widget.dataSource.grouping.length>0)this._renderGroupedData(i);else{var f=null,e=i?i:this.widget.dataSource.data,u=null;if(this.currentView=[],e.length>0)for(r=n;r<=t;r++)u=e[r],u.RowIndex=r,this.currentView.push(u),f=this._createRowElementWithContentFromData(u),r%2==0&&f.classList.add(GRID_TABLE_ALT_ROW_CLASS),this.gridDataTableBody.appendChild(f);else this.gridDataTableBody.appendChild(this._renderNoDataRow())}};jasonGridUIHelper.prototype._renderNoDataRow=function(){var n=this.createElement("tr"),t=this.createElement("td");return t.setAttribute(COLSPAN_ATTR,this.options.columns.filter(function(n){return n.visible==!0}).length),t.appendChild(this.createTextNode(this.options.localization.data.noData)),n.appendChild(t),n.classList.add(GRID_TABLE_NO_DATA_ROW_CLASS),n};jasonGridUIHelper.prototype._createRowElementFromData=function(n){var t=this.createElement("tr");return t.setAttribute(DATA_ROW_ID_ATTR,n.RowIndex),t.className=GRID_TABLE_ROW_CLASS,t};jasonGridUIHelper.prototype._createRowElementWithContentFromData=function(n){var t=this._createRowElementFromData(n),u,i,f,r,e;if(this.options.customization.rowTemplate)for(t.innerHTML=this.options.customization.rowTemplate,u=t.querySelectorAll("*["+this.options.customization.dataFieldAttribute+"]"),i=0;i<=u.length-1;i++)f=u[i],jw.common.replaceNodeText(f,n[f.getAttribute(this.options.customization.dataFieldAttribute)],!0);else for(r=0;r<=this.options.columns.length-1;r++)e=this.options.columns[r],newCell=this._createCellElementFromColumn(e,n),e.visible||(newCell.style.display="none"),t.appendChild(newCell);return t};jasonGridUIHelper.prototype._createCellElementFromColumn=function(n,t){var i=this.createElement("td"),u,r,f;if(n.groupColumn!=!0)if(i.className=GRID_TABLE_CELL_CLASS,i.setAttribute(DATA_CELL_ID_ATTR,n.index),n.cellTemplate)for(i.innerHTML=n.cellTemplate,u=i.querySelectorAll("*["+this.options.customization.dataFieldAttribute+"]"),r=0;r<=u.length-1;r++)f=u[r],jw.common.replaceNodeText(f,t[f.getAttribute(this.options.customization.dataFieldAttribute)],!0);else textNode=this.createTextNode(t[n.fieldName]),i.appendChild(textNode);else i.className="group-cell";return i};jasonGridUIHelper.prototype._createGrouppingRow=function(n){var t=this.createElement("tr"),i=this.createElement("td"),r=this.createElement("i"),u=this;return r.className="jw-icon arrow-circle-bottom-2x",this.eventManager.addEventListener(r,CLICK_EVENT,this._onGroupCollapseExpandIconClick),t.classList.add(GRID_TABLE_ROW_CLASS),t.classList.add(GRID_TABLE_GROUP_ROW_CLASS),t.setAttribute(DATA_GROUPING_LEVEL_ATTR,n.level),t.setAttribute(DATA_GROUPING_KEY_ATTR,n.key),i.setAttribute(COLSPAN_ATTR,this.options.columns.filter(function(n){return n.visible==!0}).length),i.appendChild(r),i.appendChild(this.createTextNode(n.key)),i.style.paddingLeft=n.level*25+"px",t.appendChild(i),t};jasonGridUIHelper.prototype._renderFooter=function(n){if(!this.pagerContainer)this.pagerContainer=this.createElement("div"),this.pagerContainer.classList.add(PAGER_CONTAINER_CLASS),this.pagerInfoContainer=this.createElement("div"),this.pagerInfoContainer.classList.add(PAGER_CONTAINER_PAGE_INFO_CLASS),this.pagerInfo=this.createElement("span"),this.pagerInfoContainer.appendChild(this.pagerInfo),this.pagerButtonFirst=jw.htmlFactory.createJWButton(this.options.localization.grid.paging.firstPageButton),this.pagerButtonPrior=jw.htmlFactory.createJWButton(this.options.localization.grid.paging.priorPageButton),this.pagerButtonLast=jw.htmlFactory.createJWButton(this.options.localization.grid.paging.nextPageButton),this.pagerButtonNext=jw.htmlFactory.createJWButton(this.options.localization.grid.paging.lastPageButton),this.pagerInput=jw.htmlFactory.createJWTextInput(null,null,null,"number"),this.pagerInput.setAttribute("value","1"),this.pagerInput.setAttribute("min","1"),this.pagerContainer.appendChild(this.pagerButtonFirst),this.pagerContainer.appendChild(this.pagerButtonPrior),this.pagerContainer.appendChild(this.pagerInput),this.pagerContainer.appendChild(this.pagerButtonNext),this.pagerContainer.appendChild(this.pagerButtonLast),this.gridFooterContainer.appendChild(this.pagerContainer),this.gridFooterContainer.appendChild(this.pagerInfoContainer),this.options.paging&&this._updatePagerInfo(0,n,this.widget.dataSource.data.length)};jasonGridUIHelper.prototype._updatePagerInfo=function(n,t,i){this.pagerInfo.childNodes.length>0&&this.pagerInfo.removeChild(this.pagerInfo.childNodes[0]);var r=jw.common.formatString("{0} - {1} {2} {3}",[n+1,t,this.options.localization.grid.paging.pagerInfoOfRecordCount,i]);this.pagerInfo.appendChild(this.createTextNode(r));this.pagerInfo.setAttribute(TITLE_ATTR,r)};jasonGridUIHelper.prototype._calculatePageCount=function(n){this.options.paging&&(this._pageCount=n.length<=this.options.paging.pagesize?0:Math.ceil(n.length/this.options.paging.pagesize));this._pageCount=this._pageCount<=0?1:this._pageCount};jasonGridUIHelper.prototype._goToPage=function(n,t){var i;if((jw.common.getVariableType(n)==jw.enums.variableType.number||(n=parseInt(n),!isNaN(n)))&&!(n<1)&&!(n>this._pageCount)&&(n!=this._currentPage||t==!0)){n<0&&(n=0);n>this._pageCount&&(n=this._pageCount);i=this.widget.dataSource.currentDataView;this._calculatePageCount(this.widget.dataSource.currentDataView);var f=this.options.paging?this.options.paging.pagesize:i.length,u=(n-1)*f,r=u+f-1;r>i.length&&(r=i.length-1);i=this.widget.dataSource.range(u,r);this._renderRows(0,i.length-1,i);this.options.paging&&(this._updatePagerInfo(u,r+1,this.widget.dataSource.currentDataView.length),this._currentPage=n,this.pagerInput.value=this._currentPage,this.widget.triggerEvent(JW_EVENT_ON_PAGE_CHANGE,n))}};jasonGridUIHelper.prototype._refreshCurrentPage=function(){this._goToPage(this._currentPage,!0)};jasonGridUIHelper.prototype._collapseGroup=function(n){for(var t,r,f=this,u=parseInt(n.getAttribute(DATA_GROUPING_LEVEL_ATTR)),i=n.sectionRowIndex+1;i<=this.gridDataTableBody.childNodes.length-1;i++)if(t=this.gridDataTableBody.childNodes[i],t.className.indexOf(GRID_TABLE_GROUP_ROW_CLASS)>=0)if(r=parseInt(t.getAttribute(DATA_GROUPING_LEVEL_ATTR)),r>u)t.style.display="none";else return;else t.style.display="none"};jasonGridUIHelper.prototype._expandGroup=function(n){for(var t,f,i,e=this,u=parseInt(n.getAttribute(DATA_GROUPING_LEVEL_ATTR)),r=n.sectionRowIndex+1;r<=this.gridDataTableBody.childNodes.length-1;r++)if(t=this.gridDataTableBody.childNodes[r],t.className.indexOf(GRID_TABLE_GROUP_ROW_CLASS)>=0)if(f=t.getAttribute(DATA_GROUP_EXPANDED_ATTR),i=parseInt(t.getAttribute(DATA_GROUPING_LEVEL_ATTR)),i>u)t.style.display="",f=="true"&&this._expandGroup(t);else return;else i=t.getAttribute(DATA_GROUPING_LEVEL_ATTR),i==u&&(t.style.display="")};jasonGridUIHelper.prototype._initiliazeRenderingGroupedData=function(){var n=this.options.paging?this._currentPage:0,t=this.options.paging?this.options.paging.pagesize:this.widget.dataSource.data.length;this._renderGroupedData(this.widget.dataSource.range(n,t))};jasonGridUIHelper.prototype._renderGroupRow=function(n){var t=this._createGrouppingRow(n);t.setAttribute(DATA_GROUP_EXPANDED_ATTR,"true");this.gridDataTableBody.appendChild(t)};jasonGridUIHelper.prototype._renderGroupData=function(n){var t,i;for(this._renderGroupRow(n),t=0;t<=n.values.length-1;t++)n.values[t].values?this._renderGroupData(n.values[t]):(i=this._createRowElementWithContentFromData(n.values[t]),i.setAttribute(DATA_GROUPING_LEVEL_ATTR,n.level),this.gridDataTableBody.appendChild(i))};jasonGridUIHelper.prototype._renderGroupedData=function(n){var i,t;for(jw.common.removeChildren(this.gridDataTableBody),i={count:0},t=0;t<=n.length-1;t++)this._renderGroupData(n[t])};jasonGridUIHelper.prototype._groupByField=function(n){var r,o;if(n){var t=this.createElement("div"),i=this.createElement("a"),e=this.createElement("span");e.appendChild(this.createTextNode(n.caption));t.setAttribute(DATA_GROUPING_FIELD_ATTR,n.fieldName);r=this.createElement("i");r.className=JW_ICON_CIRCLE_X;i.appendChild(r);i.setAttribute(TITLE_ATTR,this.options.localization.grid.grouping.removeGrouping+n.caption);t.appendChild(e);t.appendChild(i);this.gridGroupingContainer.appendChild(t);this.gridGroupingContainer.setAttribute(TITLE_ATTR,n.caption);this.eventManager.addEventListener(i,CLICK_EVENT,this._onGroupColumnRemoveClick,!0);this.gridGroupingContainer.childNodes[0].style.display="none";o=this.widget.dataSource.grouping[this.widget.dataSource.grouping.length-1];this.options.columns.splice(o.level,0,{width:"25px",groupColumn:!0,visible:!0,groupField:n.fieldName});var u=this.createElement("col"),f=this.createElement("col"),s=this.createElement("th");u.style.width="25px";f.style.width="25px";s.setAttribute(GRID_GROUP_FIELD,n.fieldName);u.setAttribute(GRID_GROUP_FIELD,n.fieldName);f.setAttribute(GRID_GROUP_FIELD,n.fieldName);this.headerTableColGroup.insertBefore(u,this.headerTableColGroup.firstChild);this.dataTableColGroup.insertBefore(f,this.dataTableColGroup.firstChild);this.gridHeaderTableRow.insertBefore(s,this.gridHeaderTableRow.firstChild);this._initiliazeRenderingGroupedData();this._enableColumnDragResize();this._sizeColumns()}};jasonGridUIHelper.prototype._getGroupingContainerByFieldName=function(n){return jw.common.getElementsByAttribute(this.gridGroupingContainer,DATA_GROUPING_FIELD_ATTR,n)[0]};jasonGridUIHelper.prototype._removeGroupByField=function(n){var r=this._getGroupingContainerByFieldName(n),i,t;r&&this.gridGroupingContainer.removeChild(r);i=this.gridHeaderTableRow.querySelectorAll("th["+GRID_GROUP_FIELD+"='"+n+"']")[0];i&&(this.gridHeaderTableRow.removeChild(i),t=this.headerTableColGroup.querySelectorAll("col["+GRID_GROUP_FIELD+"='"+n+"']")[0],t&&this.headerTableColGroup.removeChild(t),t=this.dataTableColGroup.querySelectorAll("col["+GRID_GROUP_FIELD+"='"+n+"']")[0],t&&this.dataTableColGroup.removeChild(t));this.widget.dataSource.grouping.length==0?(this._goToPage(this._currentPage,!0),this.gridGroupingContainer.childNodes[0].style.display=""):this._initiliazeRenderingGroupedData();this._enableColumnDragResize();this._sizeColumns()};jasonGridUIHelper.prototype.updateColumnSortIcon=function(){};jasonGridUIHelper.prototype._sortByField=function(n){var t=null,i,r;if(column.dataType){i=column.dataType.toLower();switch(i){case"string":t=null;break;case"int":t=parseInt;break;case"float":t=parseFloat;break;case"datetime":t=Date.parse}}r=new jasonDataSourceSorting(column.fieldName,n!="asc",t);this.options.sorting.multiple||this.widget.dataSource.clearSorting();this.widget.dataSource.addSorting(r);this.gridPager.goToPage(this.gridPager._currentPage,!0)};jasonGridUIHelper.prototype.localizeStrings=function(n){var i,r,t;if(n||(n=this.options.localization),this.options.grouping==!0&&this.gridGroupingContainer&&(this.gridGroupingContainer.childNodes[0].innerText=n.grid.grouping.groupingMessage),this.options.filtering==!0){for(i=0;i<=this.gridHeaderTableRow.childNodes.length-1;i++)for(r=this.gridHeaderTableRow.childNodes[i],t=0;t<=r.childNodes.length-1;t++)r.childNodes[t].tagName=="I"&&r.childNodes[t].setAttribute(TITLE_ATTR,n.grid.filtering.iconTooltip);this.filterContainer}this.options.paging&&(this.pagerButtonFirst.innerText=n.grid.paging.firstPageButton,this.pagerButtonPrior.innerText=n.grid.paging.priorPageButton,this.pagerButtonLast.innerText=n.grid.paging.lastPageButton,this.pagerButtonNext.innerText=n.grid.paging.nextPageButton,this.pagerInput.setAttribute(TITLE_ATTR,n.grid.paging.pagerInputTooltip));this.options.columnMenu&&(this.widget.defaultGridColumnMenu.items[0].caption=n.grid.columnMenu.sortAscending,this.widget.defaultGridColumnMenu.items[1].caption=n.grid.columnMenu.sortDescending,this.widget.defaultGridColumnMenu.items[2].caption=n.grid.columnMenu.columns,this.widget.defaultGridColumnMenu.items[3].caption=n.grid.columnMenu.filter,this.widget.defaultGridColumnMenu.items.forEach(function(n){n.title=n.caption}))};jasonGrid.prototype=Object.create(jasonBaseWidget.prototype);jasonGrid.prototype.constructor=jasonGrid;var JW_EVENT_ON_DATA_CHANGE="onDataChange",JW_EVENT_ON_GROUP_BY_FIELD="onGroupByField",JW_EVENT_ON_UNGROUP_FIELD="onUnGroupField",JW_EVENT_ON_SELECTION_CHANGE="onSelectionChange";JW_EVENT_ON_GROUP_COLLAPSE="onGroupCollapse";JW_EVENT_ON_GROUP_EXPAND="onGroupExpand";JW_EVENT_ON_PAGE_CHANGE="onPageChange";JW_EVENT_ON_COLUMN_POSITION_CHANGE="onColumnPositionChange";JW_EVENT_ON_COLUMN_RESIZED="onColumnResize";GRID_FILTER_CONTAINER_CLASS="jw-grid-filter-container";GRID_FILTER_HEADER_CLASS="jw-grid-filter-header";GRID_FILTER_BODY_CLASS="jw-grid-filter-body";GRID_FILTER_FOOTER_CLASS="jw-grid-filter-footer";GRID_FILTER_ACTION_BUTTON_CLASS="jw-grid-filter-action-button";JW_GRID_FILTER_BUTTON_CLEAR="clear-filter";JW_GRID_FILTER_BUTTON_APPLY="apply-filter";GRID_FIELD_HAS_FILTER="jw-grid-column-has-filter";GRID_FILTER_INPUT="jw-filter-input";PAGER_CONTAINER_CLASS="jw-grid-pager";PAGER_CONTAINER_PAGE_INFO_CLASS="jw-grid-pager-info";jasonGrid.prototype._initializeTemplates=function(){var r=typeof this.options.customization.rowTemplate=="function"?this.options.customization.rowTemplate():this.options.customization.rowTemplate,n=document.getElementById(r),f,i;if(r=n?n.tagName=="SCRIPT"?n.innerHTML:n.outerHTML:typeof r=="string"&&r.trim().length>0?r:null,this.options.customization.rowTemplate=r,this.options.columns)for(f=0;f<=this.options.columns.length-1;f++){var t=this.options.columns[f],u=typeof t.headerTemplate=="function"?t.headerTemplate():t.headerTemplate,n=document.getElementById(u);u=n?n.tagName=="SCRIPT"?n.innerHTML:n.outerHTML:typeof u=="string"&&u.trim().length>0?u:null;t.headerTemplate=u;i=typeof t.cellTemplate=="function"?t.cellTemplate():t.cellTemplate;n=document.getElementById(i);i=n?n.tagName=="SCRIPT"?n.innerHTML:n.outerHTML:typeof i=="string"&&i.trim().length>0?i:null;t.cellTemplate=i}};jasonGrid.prototype._initializeColumns=function(n){var u,i,t,r;if(n=n==void 0?this.options:n,n.columns&&n.columns.length!=0)for(t=0;t<=n.columns.length-1;t++)r=n.columns[t],(r.visible==null||r.visible==undefined)&&(r.visible=!0),r.index=t;else if(n.columns=[],u=this.dataSource.data?this.dataSource.data[0]:null,u){t=0;for(i in u)i!="_jwRowId"&&n.columns.push({caption:i,fieldName:i,index:t++,tooltip:i,width:null,visible:!0,dataType:null})}};jasonGrid.prototype._initializeDefaultColumnMenu=function(){var n,t,f,u,e,i,r;this.defaultGridColumnMenu={items:[]};this.options.sorting&&(n=new jasonMenuItem(this.ui.createElement("li"),null,null),n.name="mnuSortAsc",n.caption=this.options.localization.grid.columnMenu.sortAscending,n.title=n.caption,n.clickable=!0,n.enabled=jasonWidgets.common.assigned(this.options.sorting),n.icon=JW_ICON_SORT_ASC,n.level=0,this.defaultGridColumnMenu.items.push(n),t=new jasonMenuItem(this.ui.createElement("li"),null,null),t.name="mnuSortDesc",t.caption=this.options.localization.grid.columnMenu.sortDescending,t.title=t.caption,t.enabled=jasonWidgets.common.assigned(this.options.sorting),t.clickable=!0,t.icon=JW_ICON_SORT_DESC,t.level=0,this.defaultGridColumnMenu.items.push(t));f=new jasonMenuItem(this.ui.createElement("li"),null,null);f.name="mnuColumns";f.caption=this.options.localization.grid.columnMenu.columns;f.title=f.caption;f.icon=JW_ICON_COLUMNS;f.level=0;this.defaultGridColumnMenu.items.push(f);this.options.filtering&&(u=new jasonMenuItem(this.ui.createElement("li"),null,null),u.name="mnuFilter",u.caption=this.options.localization.grid.columnMenu.filter,u.title=u.caption,u.icon=JW_ICON_SEARCH,u.level=0,u.addEventListener(JW_EVENT_ON_MENU_ITEM_CONTENT_SHOW,this._onFilterShown,this),this.defaultGridColumnMenu.items.push(u));e=!1;this.options.sorting&&(this.defaultGridColumnMenu.items.push(createJasonMenuDividerItem()),e=!0,i=new jasonMenuItem(this.ui.createElement("li"),null,null),i.name="mnuClearSorting",i.caption=this.options.localization.grid.columnMenu.clearSorting,i.title=i.caption,i.enabled=jasonWidgets.common.assigned(this.options.sorting),i.clickable=!0,i.icon=JW_ICON_CIRCLE_X,i.level=0,this.defaultGridColumnMenu.items.push(i));this.options.filtering&&(r=new jasonMenuItem(this.ui.createElement("li"),null,null),r.name="mnuClearFiltering",r.caption=this.options.localization.grid.columnMenu.clearFilters,r.title=r.caption,r.enabled=jasonWidgets.common.assigned(this.options.sorting),r.clickable=!0,r.icon=JW_ICON_CIRCLE_X,r.level=0,this.defaultGridColumnMenu.items.push(r),e||this.defaultGridColumnMenu.items.push(createJasonMenuDividerItem()));this._addColumnsToMenu();this.options.filtering&&this._addFilterToMenu()};jasonGrid.prototype._addColumnsToMenu=function(){for(var t,n,r=this.defaultGridColumnMenu.items.filter(function(n){return n.name=="mnuColumns"})[0],i=0;i<=this.options.columns.length-1;i++)t=this.options.columns[i],n=new jasonMenuItem,n.name=t.fieldName,n.caption=t.caption,n.title=t.title?t.title:t.caption,n.hasCheckBox=!0,n.checked=!0,n.clickable=!0,n.level=1,r.items.push(n)};jasonGrid.prototype._addFilterToMenu=function(){var t=this.defaultGridColumnMenu.items.filter(function(n){return n.name=="mnuFilter"})[0],n;this.ui._renderFilterUI();this.ui.filterContainer.style.display="";n=new jasonMenuItem;n.name="";n.caption="";n.content=this.ui.filterContainer;n.parent=t;t.items.push(n)};jasonGrid.prototype._onDataChanged=function(){this._initializeColumns();this.ui.renderUI();this.triggerEvent(JW_EVENT_ON_DATA_CHANGE)};jasonGrid.prototype._onFilterShown=function(){var t=this,n=this.dataSource.filters.filter(function(n){return n.filterField==t.ui._currentFilterField})[0];n&&this.ui._loadFilterValues(n)};jasonGrid.prototype._columnByField=function(n){return this.options.columns.filter(function(t){return t.fieldName==n})[0]};jasonGrid.prototype.initialize=function(){var n,t;jasonBaseWidget.prototype.initialize.call(this);this.selectedRows=[];this.currentView=[];this.groupping=[];this.filters=[];this.sorting=[];typeof this.options.sorting!="object"&&(n=this.options.sorting,typeof this.options.sorting=="string"&&(n=jasonWidgets.common.strToBool(n)),this.options.sorting=n?{multiple:!1}:null);typeof this.options.paging!="object"&&(t=this.options.paging,typeof this.options.paging=="string"&&(t=jasonWidgets.common.strToBool(t)),this.options.paging=t?{Pagesize:200}:null);this._initializeDefaultColumnMenu();this._initializeTemplates()};jasonGrid.prototype.groupByField=function(n){n&&(this.dataSource.groupByField(n),this.ui._groupByField(this._columnByField(n)),this.triggerEvent(JW_EVENT_ON_GROUP_BY_FIELD,n))};jasonGrid.prototype.removeGrouping=function(n){var i,r,u,t;if(n&&(i=-1,r=this.dataSource.grouping.filter(function(t,r){if(t.field==n)return i=r,!0})[0],i>=0)){for(r=this.dataSource.grouping[i],this.dataSource.removeGrouping(r),u=-1,t=0;t<=this.options.columns.length-1;t++)this.options.columns[t].groupField==r.field&&(u=t);u>=0&&this.options.columns.splice(u,1);this.ui._removeGroupByField(n);this.triggerEvent(JW_EVENT_ON_UNGROUP_FIELD,n)}};jasonGrid.prototype.sortBy=function(n,t){var r,i,u,f;if(n){if(t=t==void 0?"asc":t,r=this._columnByField(n),i=null,r.dataType){u=r.dataType.toLowerCase();switch(u){case"string":i=null;break;case"int":i=parseInt;break;case"float":i=parseFloat;break;case"datetime":i=Date.parse}}f=new jasonDataSourceSorting(r.fieldName,t!="asc",i);this.options.sorting.multiple||this.dataSource.clearSorting();this.dataSource.addSorting(f);this.ui._refreshCurrentPage()}};jasonGrid.prototype.removeSorting=function(n){n&&(this.dataSource.removeSorting(n),this.ui._refreshCurrentPage())};jasonGrid.prototype.filterBy=function(n,t){n&&t&&(this.dataSource.addFilter(n,t),this.dataSource.applyFilters(),this.ui._goToPage(1,!0),this.ui._sizeColumns(),this.ui.columnMenu.ui.hideMenu(),this.ui._currentTHElement==null&&(this.ui._currentTHElement=jw.common.getElementsByAttribute(this.ui.gridHeaderTable,GRID_COLUMN_FIELD_ATTR,n,"th")[0]),this.ui._currentTHElement.classList.add(GRID_FIELD_HAS_FILTER))};jasonGrid.prototype.clearFilter=function(n){n&&(this.dataSource.removeFilter(n),this.ui._goToPage(1,!0),this.ui._sizeColumns(),this.ui.columnMenu.ui.hideMenu(),this.ui._currentTHElement.classList.remove(GRID_FIELD_HAS_FILTER))};jasonGrid.prototype.goToPage=function(n){n&&this.options.paging&&this.ui._goToPage(n,!0)};jasonGrid.prototype.showColumn=function(n){return n&&!n.visible?this.ui._columnVisible(n,!0):!0};jasonGrid.prototype.hideColumn=function(n){return n&&n.visible?this.ui._columnVisible(n,!1):!0};jasonGrid.prototype.moveColumnTo=function(n,t){this.ui.moveColumn(n,t)};jasonGrid.prototype.selectRow=function(n){var t=this.dataSource.currentDataView[n];this.options.multiSelect?this.selectedRows.push(t):this.selectedRows=[t]};jasonGrid.prototype.exportToCSV=function(){throw new Error("Not implemented yet.");};jasonGrid.prototype.exportToPDF=function(){throw new Error("Not implemented yet.");};jasonGrid.prototype.exportToExcel=function(){throw new Error("Not implemented yet.");};jasonGrid.prototype.expandGroup=function(){throw new Error("Not implemented yet.");};jasonGrid.prototype.collapseGroup=function(){throw new Error("Not implemented yet.");};jasonGrid.prototype.collapseGroup=function(){throw new Error("Not implemented yet.");};jasonDatePicker.prototype=Object.create(jasonBaseWidget.prototype);jasonDatePicker.prototype.constructor=jasonDatePicker;Object.defineProperty(jasonDatePicker.prototype,"date",{get:function(){return this._date},set:function(n){this._setDate(n)},enumerable:!0,writeable:!1});jasonDatePicker.prototype._setDate=function(n){n&&jw.common.dateComparison(this._date,n)!=0&&(this._date=n,this.ui.updateDateFormattedValue(),this.ui.changed=!1,this.triggerEvent(JW_EVENT_ON_CHANGE,this._date))};jasonDatePicker.prototype.parseDateValue=function(n){var c=n.match(/\D\W/g),t=null,u=new Date,r,i;if(c)t=new Date(n),n.indexOf(u.getFullYear())<0&&t.setYear(u.getFullYear()),n.match(/\[0-9]/g)||t.setMonth(u.getMonth()),t=jasonWidgets.common.dateOf(t);else{var s=n.match(/[^0-9]/g),l=s?n.split(s[0]):[n],h=s?this.options.displayFormat.split(s[0]):this.options.displayFormat.split(jw.localizationManager.localeDateSeparator),f=null,e=null,o=null;for(r=0;r<=h.length-1;r++)i=l[r],i&&(i=parseInt(i)),h[r].indexOf("y")>=0&&(o=i),h[r].indexOf("M")>=0&&i<=12&&(e=i),h[r].indexOf("d")>=0&&i<=31&&(f=i);o||(o=u.getFullYear());f||(f=1);e||(e=u.getMonth()+1);f&&e&&o&&(t=new Date,t.setHours(0),t.setMinutes(0),t.setSeconds(0),t.setMilliseconds(0),t.setDate(f),t.setMonth(e-1),t.setYear(o),t=jasonWidgets.common.dateOf(t))}t&&(this.date=t)};jasonDatePickerUIHelper.prototype=Object.create(jasonBaseWidgetUIHelper.prototype);jasonDatePickerUIHelper.prototype.constructor=jasonDatePickerUIHelper;DATE_PICKER_CLASS="jw-date-picker";jasonDatePickerUIHelper.prototype.renderUI=function(){var n=this;this.htmlElement.classList.contains(DATE_PICKER_CLASS)||(this.htmlElement.classList.add(DATE_PICKER_CLASS),this.datePickerInput=jw.htmlFactory.createJWTextInput(),this.datePickerButton=jw.htmlFactory.createJWButton(null,JW_ICON_CALENDAR),this.widget.readOnly=this.options.readOnly?this.options.readOnly:!1,this.widget.options.placeholder&&this.datePickerInput.setAttribute(PLACEHOLDER_ATTR,this.widget.options.placeholder),this.widget.readOnly==!0&&this.datePickerInput.setAttribute(READONLY_ATTR,this.widget.readOnly),this.htmlElement.appendChild(this.datePickerInput),this.htmlElement.appendChild(this.datePickerButton),this.datePickerInput.value=jasonWidgets.common.formatDateTime(this.widget.date,this.options.displayFormat),this.calendarContainer=this.createElement("div"),document.body.appendChild(this.calendarContainer),this.jasonCalendar=new jasonCalendar(this.calendarContainer,{invokable:!0,autoHide:!0,invokableElement:this.htmlElement,width:this.options.width}),this.jasonCalendar.addEventListener(JW_EVENT_ON_CHANGE,this.onCalendarDateChange),this.initializeEvents())};jasonDatePickerUIHelper.prototype.initializeEvents=function(){var n=this;this.eventManager.addEventListener(this.datePickerButton,CLICK_EVENT,this.buttonClick,!0);this.eventManager.addEventListener(this.datePickerInput,BLUR_EVENT,this.inputBlur);this.eventManager.addEventListener(this.datePickerInput,KEY_DOWN_EVENT,this.inputKeyDown)};jasonDatePickerUIHelper.prototype.updateDateFormattedValue=function(){this.datePickerInput.value=jasonWidgets.common.formatDateTime(this.widget.date,this.options.displayFormat)};jasonDatePickerUIHelper.prototype.inputBlur=function(){this.datePickerInput.value.length>0&&this.changed&&(this.widget.parseDateValue(this.datePickerInput.value),this.updateDateFormattedValue())};jasonDatePickerUIHelper.prototype.inputKeyDown=function(n){var t=n.which||n.keyCode;this.changed=!0;t==13&&this.datePickerInput.value.length>0&&(this.widget.parseDateValue(this.datePickerInput.value),this.updateDateFormattedValue())};jasonDatePickerUIHelper.prototype.onCalendarDateChange=function(n,t){this.widget.date=t;this.updateDateFormattedValue();this.jasonCalendar&&this.jasonCalendar.ui.hideCalendar();this.datePickerInput.focus()};jasonDatePickerUIHelper.prototype.buttonClick=function(){this.jasonCalendar.ui.showCalendar(this.widget.date)};jasonTimePicker.prototype=Object.create(jasonCombobox.prototype);jasonTimePicker.prototype.constructor=jasonTimePicker;Object.defineProperty(jasonTimePicker.prototype,"time",{get:function(){return jw.common.timeOf(this._time)},set:function(n){this._setTime(n)},enumerable:!0,writeable:!1});jasonTimePicker.prototype.prepareData=function(n){for(var t,u=[],o=Math.round(1440/n.interval),i=0;i<=o-1;i++){t={key:i,time:null,formattedTime:null};t.time=new Date;var f=null,e=null,r=u[u.length-1];(r&&r.time.getMinutes()+n.interval)>=60?(f=r.time.getHours()+1,e=0):(f=i==0?0:r.time.getHours(),e=i==0?0:r.time.getMinutes()+n.interval);t.time.setHours(f);t.time.setMinutes(e);t.time.setSeconds(0);t.time.setMilliseconds(0);t.formattedTime=jasonWidgets.common.formatDateTime(t.time,n.displayFormat);u.push(t)}n.data=u};jasonTimePicker.prototype._setTime=function(n){if(n){var t=this._time,n=n;jw.common.timeComparison(t,n)!=jw.enums.comparison.equal&&(this._time=n,this._selectItemFromTime(this._time),this.triggerEvent(JW_EVENT_ON_CHANGE,this._time));this.ui.comboboxInput.value=jw.common.formatDateTime(this._time,this.options.displayFormat)}};jasonTimePicker.prototype.onTimePickerSelectItem=function(n,t){t.selectedItem&&(n.time=t.selectedItem.time)};jasonTimePicker.prototype._selectItemFromTime=function(n){for(var r,t=null,i=0;i<=this.dataSource.data.length-1;i++)if(r=this.dataSource.data[i],jw.common.timeComparison(r.time,n)==jw.enums.comparison.equal){t=r;break}t&&(this.clearSelection(),this.selectedItem=t,this.selectedItemIndex=t._jwRowId)};jasonTimePicker.prototype.parseTimeValue=function(n){var o=!1,h=!1,i;jw.localizationManager.isTwelveHourClock&&(o=n.indexOf(jw.localizationManager.anteMeridiemString)>=0,h=n.indexOf(jw.localizationManager.postMeridiemString)>=0,n=o?n.replace(jw.localizationManager.anteMeridiemString,""):n.replace(jw.localizationManager.postMeridiemString,""));var c=n.match(/[^0-9]/g),l=c?c[0]:jw.localizationManager.localeTimeSeparator,s=n.split(l),e=this.options.displayFormat.split(l),t=null,u=null,f=null,r=null;for(i=0;i<=e.length-1;i++)(e[i].indexOf("h")>=0||e[i].indexOf("H")>=0)&&(t=parseInt(s[i]),jw.localizationManager.isTwelveHourClock&&o&&(t=t>12?t-12:t),jw.localizationManager.isTwelveHourClock&&h&&(t=t>12?t:t+12)),e[i].indexOf("m")>=0&&(u=parseInt(s[i])),e[i].indexOf("s")>=0&&(f=parseInt(s[i]));(!f||isNaN(f)||f>60)&&(f=0);(!u||isNaN(u)||u>60)&&(u=0);t>=24&&(t=0);t!=null&&u!=null&&f!=null&&(r=new Date,r.setHours(t),r.setMinutes(u),r.setSeconds(f),r.setMilliseconds(0),r=r);r&&(this.time=r,this._hasKeyStroke=!1)};jasonTimePicker.prototype.cmbInputOnBlur=function(){this.ui.comboboxInput.value.length>0&&this._hasKeyStroke&&this.parseTimeValue(this.ui.comboboxInput.value)};jasonTimePicker.prototype.cmbInputKeyDown=function(n){this._hasKeyStroke=!0;var t=n.which||n.keyCode;switch(t){case 13:this.ui.comboboxInput.value.length>0&&(this.parseTimeValue(this.ui.comboboxInput.value),this.ui.scrollSelectedIntoView())}};